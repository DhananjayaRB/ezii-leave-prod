var $E=e=>{throw TypeError(e)};var nw=(e,t,r)=>t.has(e)||$E("Cannot "+r);var me=(e,t,r)=>(nw(e,t,"read from private field"),r?r.call(e):t.get(e)),Ot=(e,t,r)=>t.has(e)?$E("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ct=(e,t,r,n)=>(nw(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),qt=(e,t,r)=>(nw(e,t,"access private method"),r);var k0=(e,t,r,n)=>({set _(a){ct(e,t,a,r)},get _(){return me(e,t,n)}});function HU(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var O0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yI={exports:{}},nv={},vI={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zp=Symbol.for("react.element"),zU=Symbol.for("react.portal"),qU=Symbol.for("react.fragment"),GU=Symbol.for("react.strict_mode"),KU=Symbol.for("react.profiler"),YU=Symbol.for("react.provider"),XU=Symbol.for("react.context"),QU=Symbol.for("react.forward_ref"),JU=Symbol.for("react.suspense"),ZU=Symbol.for("react.memo"),eW=Symbol.for("react.lazy"),BE=Symbol.iterator;function tW(e){return e===null||typeof e!="object"?null:(e=BE&&e[BE]||e["@@iterator"],typeof e=="function"?e:null)}var wI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bI=Object.assign,jI={};function Vf(e,t,r){this.props=e,this.context=t,this.refs=jI,this.updater=r||wI}Vf.prototype.isReactComponent={};Vf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function NI(){}NI.prototype=Vf.prototype;function e2(e,t,r){this.props=e,this.context=t,this.refs=jI,this.updater=r||wI}var t2=e2.prototype=new NI;t2.constructor=e2;bI(t2,Vf.prototype);t2.isPureReactComponent=!0;var UE=Array.isArray,SI=Object.prototype.hasOwnProperty,r2={current:null},_I={key:!0,ref:!0,__self:!0,__source:!0};function TI(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)SI.call(t,n)&&!_I.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:zp,type:e,key:i,ref:o,props:a,_owner:r2.current}}function rW(e,t){return{$$typeof:zp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function n2(e){return typeof e=="object"&&e!==null&&e.$$typeof===zp}function nW(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var WE=/\/+/g;function aw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?nW(""+e.key):t.toString(36)}function Dg(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case zp:case zU:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+aw(o,0):n,UE(a)?(r="",e!=null&&(r=e.replace(WE,"$&/")+"/"),Dg(a,t,r,"",function(u){return u})):a!=null&&(n2(a)&&(a=rW(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(WE,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",UE(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+aw(i,l);o+=Dg(i,t,r,c,a)}else if(c=tW(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+aw(i,l++),o+=Dg(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function P0(e,t,r){if(e==null)return e;var n=[],a=0;return Dg(e,n,"","",function(i){return t.call(r,i,a++)}),n}function aW(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Aa={current:null},kg={transition:null},sW={ReactCurrentDispatcher:Aa,ReactCurrentBatchConfig:kg,ReactCurrentOwner:r2};function EI(){throw Error("act(...) is not supported in production builds of React.")}Qt.Children={map:P0,forEach:function(e,t,r){P0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return P0(e,function(){t++}),t},toArray:function(e){return P0(e,function(t){return t})||[]},only:function(e){if(!n2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qt.Component=Vf;Qt.Fragment=qU;Qt.Profiler=KU;Qt.PureComponent=e2;Qt.StrictMode=GU;Qt.Suspense=JU;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sW;Qt.act=EI;Qt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=bI({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=r2.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)SI.call(t,c)&&!_I.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:zp,type:e.type,key:a,ref:i,props:n,_owner:o}};Qt.createContext=function(e){return e={$$typeof:XU,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:YU,_context:e},e.Consumer=e};Qt.createElement=TI;Qt.createFactory=function(e){var t=TI.bind(null,e);return t.type=e,t};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(e){return{$$typeof:QU,render:e}};Qt.isValidElement=n2;Qt.lazy=function(e){return{$$typeof:eW,_payload:{_status:-1,_result:e},_init:aW}};Qt.memo=function(e,t){return{$$typeof:ZU,type:e,compare:t===void 0?null:t}};Qt.startTransition=function(e){var t=kg.transition;kg.transition={};try{e()}finally{kg.transition=t}};Qt.unstable_act=EI;Qt.useCallback=function(e,t){return Aa.current.useCallback(e,t)};Qt.useContext=function(e){return Aa.current.useContext(e)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(e){return Aa.current.useDeferredValue(e)};Qt.useEffect=function(e,t){return Aa.current.useEffect(e,t)};Qt.useId=function(){return Aa.current.useId()};Qt.useImperativeHandle=function(e,t,r){return Aa.current.useImperativeHandle(e,t,r)};Qt.useInsertionEffect=function(e,t){return Aa.current.useInsertionEffect(e,t)};Qt.useLayoutEffect=function(e,t){return Aa.current.useLayoutEffect(e,t)};Qt.useMemo=function(e,t){return Aa.current.useMemo(e,t)};Qt.useReducer=function(e,t,r){return Aa.current.useReducer(e,t,r)};Qt.useRef=function(e){return Aa.current.useRef(e)};Qt.useState=function(e){return Aa.current.useState(e)};Qt.useSyncExternalStore=function(e,t,r){return Aa.current.useSyncExternalStore(e,t,r)};Qt.useTransition=function(){return Aa.current.useTransition()};Qt.version="18.3.1";vI.exports=Qt;var N=vI.exports;const pe=Cr(N),a2=HU({__proto__:null,default:pe},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iW=N,oW=Symbol.for("react.element"),lW=Symbol.for("react.fragment"),cW=Object.prototype.hasOwnProperty,uW=iW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dW={key:!0,ref:!0,__self:!0,__source:!0};function AI(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)cW.call(t,n)&&!dW.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:oW,type:e,key:i,ref:o,props:a,_owner:uW.current}}nv.Fragment=lW;nv.jsx=AI;nv.jsxs=AI;yI.exports=nv;var s=yI.exports,CI={exports:{}},ms={},DI={exports:{}},kI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,R){var I=E.length;E.push(R);e:for(;0<I;){var ee=I-1>>>1,L=E[ee];if(0<a(L,R))E[ee]=R,E[I]=L,I=ee;else break e}}function r(E){return E.length===0?null:E[0]}function n(E){if(E.length===0)return null;var R=E[0],I=E.pop();if(I!==R){E[0]=I;e:for(var ee=0,L=E.length,q=L>>>1;ee<q;){var H=2*(ee+1)-1,B=E[H],de=H+1,ce=E[de];if(0>a(B,I))de<L&&0>a(ce,B)?(E[ee]=ce,E[de]=I,ee=de):(E[ee]=B,E[H]=I,ee=H);else if(de<L&&0>a(ce,I))E[ee]=ce,E[de]=I,ee=de;else break e}}return R}function a(E,R){var I=E.sortIndex-R.sortIndex;return I!==0?I:E.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,g=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(E){for(var R=r(u);R!==null;){if(R.callback===null)n(u);else if(R.startTime<=E)n(u),R.sortIndex=R.expirationTime,t(c,R);else break;R=r(u)}}function v(E){if(p=!1,w(E),!g)if(r(c)!==null)g=!0,W(j);else{var R=r(u);R!==null&&P(v,R.startTime-E)}}function j(E,R){g=!1,p&&(p=!1,b(A),A=-1),m=!0;var I=h;try{for(w(R),f=r(c);f!==null&&(!(f.expirationTime>R)||E&&!k());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,h=f.priorityLevel;var L=ee(f.expirationTime<=R);R=e.unstable_now(),typeof L=="function"?f.callback=L:f===r(c)&&n(c),w(R)}else n(c);f=r(c)}if(f!==null)var q=!0;else{var H=r(u);H!==null&&P(v,H.startTime-R),q=!1}return q}finally{f=null,h=I,m=!1}}var S=!1,_=null,A=-1,C=5,D=-1;function k(){return!(e.unstable_now()-D<C)}function O(){if(_!==null){var E=e.unstable_now();D=E;var R=!0;try{R=_(!0,E)}finally{R?V():(S=!1,_=null)}}else S=!1}var V;if(typeof x=="function")V=function(){x(O)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Y=G.port2;G.port1.onmessage=O,V=function(){Y.postMessage(null)}}else V=function(){y(O,0)};function W(E){_=E,S||(S=!0,V())}function P(E,R){A=y(function(){E(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,W(j))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(E){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var I=h;h=R;try{return E()}finally{h=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,R){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var I=h;h=E;try{return R()}finally{h=I}},e.unstable_scheduleCallback=function(E,R,I){var ee=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?ee+I:ee):I=ee,E){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=I+L,E={id:d++,callback:R,priorityLevel:E,startTime:I,expirationTime:L,sortIndex:-1},I>ee?(E.sortIndex=I,t(u,E),r(c)===null&&E===r(u)&&(p?(b(A),A=-1):p=!0,P(v,I-ee))):(E.sortIndex=L,t(c,E),g||m||(g=!0,W(j))),E},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(E){var R=h;return function(){var I=h;h=R;try{return E.apply(this,arguments)}finally{h=I}}}})(kI);DI.exports=kI;var fW=DI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hW=N,us=fW;function We(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OI=new Set,_m={};function yu(e,t){ef(e,t),ef(e+"Capture",t)}function ef(e,t){for(_m[e]=t,e=0;e<t.length;e++)OI.add(t[e])}var Do=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vb=Object.prototype.hasOwnProperty,mW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VE={},HE={};function pW(e){return Vb.call(HE,e)?!0:Vb.call(VE,e)?!1:mW.test(e)?HE[e]=!0:(VE[e]=!0,!1)}function gW(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xW(e,t,r,n){if(t===null||typeof t>"u"||gW(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ca(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Jn[e]=new Ca(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Jn[t]=new Ca(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Jn[e]=new Ca(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Jn[e]=new Ca(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Jn[e]=new Ca(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Jn[e]=new Ca(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Jn[e]=new Ca(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Jn[e]=new Ca(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Jn[e]=new Ca(e,5,!1,e.toLowerCase(),null,!1,!1)});var s2=/[\-:]([a-z])/g;function i2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(s2,i2);Jn[t]=new Ca(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(s2,i2);Jn[t]=new Ca(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(s2,i2);Jn[t]=new Ca(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Jn[e]=new Ca(e,1,!1,e.toLowerCase(),null,!1,!1)});Jn.xlinkHref=new Ca("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Jn[e]=new Ca(e,1,!1,e.toLowerCase(),null,!0,!0)});function o2(e,t,r,n){var a=Jn.hasOwnProperty(t)?Jn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xW(t,r,a,n)&&(r=null),n||a===null?pW(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Wo=hW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I0=Symbol.for("react.element"),ld=Symbol.for("react.portal"),cd=Symbol.for("react.fragment"),l2=Symbol.for("react.strict_mode"),Hb=Symbol.for("react.profiler"),PI=Symbol.for("react.provider"),II=Symbol.for("react.context"),c2=Symbol.for("react.forward_ref"),zb=Symbol.for("react.suspense"),qb=Symbol.for("react.suspense_list"),u2=Symbol.for("react.memo"),el=Symbol.for("react.lazy"),MI=Symbol.for("react.offscreen"),zE=Symbol.iterator;function wh(e){return e===null||typeof e!="object"?null:(e=zE&&e[zE]||e["@@iterator"],typeof e=="function"?e:null)}var qr=Object.assign,sw;function qh(e){if(sw===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);sw=t&&t[1]||""}return`
`+sw+e}var iw=!1;function ow(e,t){if(!e||iw)return"";iw=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{iw=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?qh(e):""}function yW(e){switch(e.tag){case 5:return qh(e.type);case 16:return qh("Lazy");case 13:return qh("Suspense");case 19:return qh("SuspenseList");case 0:case 2:case 15:return e=ow(e.type,!1),e;case 11:return e=ow(e.type.render,!1),e;case 1:return e=ow(e.type,!0),e;default:return""}}function Gb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cd:return"Fragment";case ld:return"Portal";case Hb:return"Profiler";case l2:return"StrictMode";case zb:return"Suspense";case qb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case II:return(e.displayName||"Context")+".Consumer";case PI:return(e._context.displayName||"Context")+".Provider";case c2:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case u2:return t=e.displayName||null,t!==null?t:Gb(e.type)||"Memo";case el:t=e._payload,e=e._init;try{return Gb(e(t))}catch{}}return null}function vW(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gb(t);case 8:return t===l2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $l(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function RI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wW(e){var t=RI(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function M0(e){e._valueTracker||(e._valueTracker=wW(e))}function FI(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=RI(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Xg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kb(e,t){var r=t.checked;return qr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function qE(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=$l(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function LI(e,t){t=t.checked,t!=null&&o2(e,"checked",t,!1)}function Yb(e,t){LI(e,t);var r=$l(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xb(e,t.type,r):t.hasOwnProperty("defaultValue")&&Xb(e,t.type,$l(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function GE(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Xb(e,t,r){(t!=="number"||Xg(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Gh=Array.isArray;function Sd(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+$l(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Qb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(We(91));return qr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function KE(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(We(92));if(Gh(r)){if(1<r.length)throw Error(We(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:$l(r)}}function $I(e,t){var r=$l(t.value),n=$l(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function YE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function BI(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?BI(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var R0,UI=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(R0=R0||document.createElement("div"),R0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=R0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Tm(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var nm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bW=["Webkit","ms","Moz","O"];Object.keys(nm).forEach(function(e){bW.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),nm[t]=nm[e]})});function WI(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||nm.hasOwnProperty(e)&&nm[e]?(""+t).trim():t+"px"}function VI(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=WI(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var jW=qr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zb(e,t){if(t){if(jW[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(We(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(We(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(We(61))}if(t.style!=null&&typeof t.style!="object")throw Error(We(62))}}function ej(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tj=null;function d2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rj=null,_d=null,Td=null;function XE(e){if(e=Kp(e)){if(typeof rj!="function")throw Error(We(280));var t=e.stateNode;t&&(t=lv(t),rj(e.stateNode,e.type,t))}}function HI(e){_d?Td?Td.push(e):Td=[e]:_d=e}function zI(){if(_d){var e=_d,t=Td;if(Td=_d=null,XE(e),t)for(e=0;e<t.length;e++)XE(t[e])}}function qI(e,t){return e(t)}function GI(){}var lw=!1;function KI(e,t,r){if(lw)return e(t,r);lw=!0;try{return qI(e,t,r)}finally{lw=!1,(_d!==null||Td!==null)&&(GI(),zI())}}function Em(e,t){var r=e.stateNode;if(r===null)return null;var n=lv(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(We(231,t,typeof r));return r}var nj=!1;if(Do)try{var bh={};Object.defineProperty(bh,"passive",{get:function(){nj=!0}}),window.addEventListener("test",bh,bh),window.removeEventListener("test",bh,bh)}catch{nj=!1}function NW(e,t,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var am=!1,Qg=null,Jg=!1,aj=null,SW={onError:function(e){am=!0,Qg=e}};function _W(e,t,r,n,a,i,o,l,c){am=!1,Qg=null,NW.apply(SW,arguments)}function TW(e,t,r,n,a,i,o,l,c){if(_W.apply(this,arguments),am){if(am){var u=Qg;am=!1,Qg=null}else throw Error(We(198));Jg||(Jg=!0,aj=u)}}function vu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function YI(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function QE(e){if(vu(e)!==e)throw Error(We(188))}function EW(e){var t=e.alternate;if(!t){if(t=vu(e),t===null)throw Error(We(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return QE(a),e;if(i===n)return QE(a),t;i=i.sibling}throw Error(We(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(We(189))}}if(r.alternate!==n)throw Error(We(190))}if(r.tag!==3)throw Error(We(188));return r.stateNode.current===r?e:t}function XI(e){return e=EW(e),e!==null?QI(e):null}function QI(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=QI(e);if(t!==null)return t;e=e.sibling}return null}var JI=us.unstable_scheduleCallback,JE=us.unstable_cancelCallback,AW=us.unstable_shouldYield,CW=us.unstable_requestPaint,tn=us.unstable_now,DW=us.unstable_getCurrentPriorityLevel,f2=us.unstable_ImmediatePriority,ZI=us.unstable_UserBlockingPriority,Zg=us.unstable_NormalPriority,kW=us.unstable_LowPriority,eM=us.unstable_IdlePriority,av=null,Bi=null;function OW(e){if(Bi&&typeof Bi.onCommitFiberRoot=="function")try{Bi.onCommitFiberRoot(av,e,void 0,(e.current.flags&128)===128)}catch{}}var li=Math.clz32?Math.clz32:MW,PW=Math.log,IW=Math.LN2;function MW(e){return e>>>=0,e===0?32:31-(PW(e)/IW|0)|0}var F0=64,L0=4194304;function Kh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ex(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Kh(l):(i&=o,i!==0&&(n=Kh(i)))}else o=r&~a,o!==0?n=Kh(o):i!==0&&(n=Kh(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-li(t),a=1<<r,n|=e[r],t&=~a;return n}function RW(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FW(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-li(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=RW(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function sj(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function tM(){var e=F0;return F0<<=1,!(F0&4194240)&&(F0=64),e}function cw(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function qp(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-li(t),e[t]=r}function LW(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-li(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function h2(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-li(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Nr=0;function rM(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var nM,m2,aM,sM,iM,ij=!1,$0=[],_l=null,Tl=null,El=null,Am=new Map,Cm=new Map,al=[],$W="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ZE(e,t){switch(e){case"focusin":case"focusout":_l=null;break;case"dragenter":case"dragleave":Tl=null;break;case"mouseover":case"mouseout":El=null;break;case"pointerover":case"pointerout":Am.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cm.delete(t.pointerId)}}function jh(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Kp(t),t!==null&&m2(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function BW(e,t,r,n,a){switch(t){case"focusin":return _l=jh(_l,e,t,r,n,a),!0;case"dragenter":return Tl=jh(Tl,e,t,r,n,a),!0;case"mouseover":return El=jh(El,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Am.set(i,jh(Am.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Cm.set(i,jh(Cm.get(i)||null,e,t,r,n,a)),!0}return!1}function oM(e){var t=Tc(e.target);if(t!==null){var r=vu(t);if(r!==null){if(t=r.tag,t===13){if(t=YI(r),t!==null){e.blockedOn=t,iM(e.priority,function(){aM(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Og(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=oj(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);tj=n,r.target.dispatchEvent(n),tj=null}else return t=Kp(r),t!==null&&m2(t),e.blockedOn=r,!1;t.shift()}return!0}function eA(e,t,r){Og(e)&&r.delete(t)}function UW(){ij=!1,_l!==null&&Og(_l)&&(_l=null),Tl!==null&&Og(Tl)&&(Tl=null),El!==null&&Og(El)&&(El=null),Am.forEach(eA),Cm.forEach(eA)}function Nh(e,t){e.blockedOn===t&&(e.blockedOn=null,ij||(ij=!0,us.unstable_scheduleCallback(us.unstable_NormalPriority,UW)))}function Dm(e){function t(a){return Nh(a,e)}if(0<$0.length){Nh($0[0],e);for(var r=1;r<$0.length;r++){var n=$0[r];n.blockedOn===e&&(n.blockedOn=null)}}for(_l!==null&&Nh(_l,e),Tl!==null&&Nh(Tl,e),El!==null&&Nh(El,e),Am.forEach(t),Cm.forEach(t),r=0;r<al.length;r++)n=al[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<al.length&&(r=al[0],r.blockedOn===null);)oM(r),r.blockedOn===null&&al.shift()}var Ed=Wo.ReactCurrentBatchConfig,tx=!0;function WW(e,t,r,n){var a=Nr,i=Ed.transition;Ed.transition=null;try{Nr=1,p2(e,t,r,n)}finally{Nr=a,Ed.transition=i}}function VW(e,t,r,n){var a=Nr,i=Ed.transition;Ed.transition=null;try{Nr=4,p2(e,t,r,n)}finally{Nr=a,Ed.transition=i}}function p2(e,t,r,n){if(tx){var a=oj(e,t,r,n);if(a===null)vw(e,t,n,rx,r),ZE(e,n);else if(BW(a,e,t,r,n))n.stopPropagation();else if(ZE(e,n),t&4&&-1<$W.indexOf(e)){for(;a!==null;){var i=Kp(a);if(i!==null&&nM(i),i=oj(e,t,r,n),i===null&&vw(e,t,n,rx,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else vw(e,t,n,null,r)}}var rx=null;function oj(e,t,r,n){if(rx=null,e=d2(n),e=Tc(e),e!==null)if(t=vu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=YI(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rx=e,null}function lM(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DW()){case f2:return 1;case ZI:return 4;case Zg:case kW:return 16;case eM:return 536870912;default:return 16}default:return 16}}var xl=null,g2=null,Pg=null;function cM(){if(Pg)return Pg;var e,t=g2,r=t.length,n,a="value"in xl?xl.value:xl.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return Pg=a.slice(e,1<n?1-n:void 0)}function Ig(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function B0(){return!0}function tA(){return!1}function ps(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?B0:tA,this.isPropagationStopped=tA,this}return qr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=B0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=B0)},persist:function(){},isPersistent:B0}),t}var Hf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},x2=ps(Hf),Gp=qr({},Hf,{view:0,detail:0}),HW=ps(Gp),uw,dw,Sh,sv=qr({},Gp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:y2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sh&&(Sh&&e.type==="mousemove"?(uw=e.screenX-Sh.screenX,dw=e.screenY-Sh.screenY):dw=uw=0,Sh=e),uw)},movementY:function(e){return"movementY"in e?e.movementY:dw}}),rA=ps(sv),zW=qr({},sv,{dataTransfer:0}),qW=ps(zW),GW=qr({},Gp,{relatedTarget:0}),fw=ps(GW),KW=qr({},Hf,{animationName:0,elapsedTime:0,pseudoElement:0}),YW=ps(KW),XW=qr({},Hf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),QW=ps(XW),JW=qr({},Hf,{data:0}),nA=ps(JW),ZW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rV(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=tV[e])?!!t[e]:!1}function y2(){return rV}var nV=qr({},Gp,{key:function(e){if(e.key){var t=ZW[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ig(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?eV[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:y2,charCode:function(e){return e.type==="keypress"?Ig(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ig(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aV=ps(nV),sV=qr({},sv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aA=ps(sV),iV=qr({},Gp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:y2}),oV=ps(iV),lV=qr({},Hf,{propertyName:0,elapsedTime:0,pseudoElement:0}),cV=ps(lV),uV=qr({},sv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),dV=ps(uV),fV=[9,13,27,32],v2=Do&&"CompositionEvent"in window,sm=null;Do&&"documentMode"in document&&(sm=document.documentMode);var hV=Do&&"TextEvent"in window&&!sm,uM=Do&&(!v2||sm&&8<sm&&11>=sm),sA=" ",iA=!1;function dM(e,t){switch(e){case"keyup":return fV.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fM(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ud=!1;function mV(e,t){switch(e){case"compositionend":return fM(t);case"keypress":return t.which!==32?null:(iA=!0,sA);case"textInput":return e=t.data,e===sA&&iA?null:e;default:return null}}function pV(e,t){if(ud)return e==="compositionend"||!v2&&dM(e,t)?(e=cM(),Pg=g2=xl=null,ud=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return uM&&t.locale!=="ko"?null:t.data;default:return null}}var gV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gV[e.type]:t==="textarea"}function hM(e,t,r,n){HI(n),t=nx(t,"onChange"),0<t.length&&(r=new x2("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var im=null,km=null;function xV(e){SM(e,0)}function iv(e){var t=hd(e);if(FI(t))return e}function yV(e,t){if(e==="change")return t}var mM=!1;if(Do){var hw;if(Do){var mw="oninput"in document;if(!mw){var lA=document.createElement("div");lA.setAttribute("oninput","return;"),mw=typeof lA.oninput=="function"}hw=mw}else hw=!1;mM=hw&&(!document.documentMode||9<document.documentMode)}function cA(){im&&(im.detachEvent("onpropertychange",pM),km=im=null)}function pM(e){if(e.propertyName==="value"&&iv(km)){var t=[];hM(t,km,e,d2(e)),KI(xV,t)}}function vV(e,t,r){e==="focusin"?(cA(),im=t,km=r,im.attachEvent("onpropertychange",pM)):e==="focusout"&&cA()}function wV(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return iv(km)}function bV(e,t){if(e==="click")return iv(t)}function jV(e,t){if(e==="input"||e==="change")return iv(t)}function NV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hi=typeof Object.is=="function"?Object.is:NV;function Om(e,t){if(hi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Vb.call(t,a)||!hi(e[a],t[a]))return!1}return!0}function uA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dA(e,t){var r=uA(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=uA(r)}}function gM(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?gM(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xM(){for(var e=window,t=Xg();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Xg(e.document)}return t}function w2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function SV(e){var t=xM(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&gM(r.ownerDocument.documentElement,r)){if(n!==null&&w2(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=dA(r,i);var o=dA(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _V=Do&&"documentMode"in document&&11>=document.documentMode,dd=null,lj=null,om=null,cj=!1;function fA(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;cj||dd==null||dd!==Xg(n)||(n=dd,"selectionStart"in n&&w2(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),om&&Om(om,n)||(om=n,n=nx(lj,"onSelect"),0<n.length&&(t=new x2("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=dd)))}function U0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var fd={animationend:U0("Animation","AnimationEnd"),animationiteration:U0("Animation","AnimationIteration"),animationstart:U0("Animation","AnimationStart"),transitionend:U0("Transition","TransitionEnd")},pw={},yM={};Do&&(yM=document.createElement("div").style,"AnimationEvent"in window||(delete fd.animationend.animation,delete fd.animationiteration.animation,delete fd.animationstart.animation),"TransitionEvent"in window||delete fd.transitionend.transition);function ov(e){if(pw[e])return pw[e];if(!fd[e])return e;var t=fd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in yM)return pw[e]=t[r];return e}var vM=ov("animationend"),wM=ov("animationiteration"),bM=ov("animationstart"),jM=ov("transitionend"),NM=new Map,hA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jl(e,t){NM.set(e,t),yu(t,[e])}for(var gw=0;gw<hA.length;gw++){var xw=hA[gw],TV=xw.toLowerCase(),EV=xw[0].toUpperCase()+xw.slice(1);Jl(TV,"on"+EV)}Jl(vM,"onAnimationEnd");Jl(wM,"onAnimationIteration");Jl(bM,"onAnimationStart");Jl("dblclick","onDoubleClick");Jl("focusin","onFocus");Jl("focusout","onBlur");Jl(jM,"onTransitionEnd");ef("onMouseEnter",["mouseout","mouseover"]);ef("onMouseLeave",["mouseout","mouseover"]);ef("onPointerEnter",["pointerout","pointerover"]);ef("onPointerLeave",["pointerout","pointerover"]);yu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yu("onBeforeInput",["compositionend","keypress","textInput","paste"]);yu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yh));function mA(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,TW(n,t,void 0,e),e.currentTarget=null}function SM(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;mA(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;mA(a,l,u),i=c}}}if(Jg)throw e=aj,Jg=!1,aj=null,e}function Rr(e,t){var r=t[mj];r===void 0&&(r=t[mj]=new Set);var n=e+"__bubble";r.has(n)||(_M(t,e,2,!1),r.add(n))}function yw(e,t,r){var n=0;t&&(n|=4),_M(r,e,n,t)}var W0="_reactListening"+Math.random().toString(36).slice(2);function Pm(e){if(!e[W0]){e[W0]=!0,OI.forEach(function(r){r!=="selectionchange"&&(AV.has(r)||yw(r,!1,e),yw(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[W0]||(t[W0]=!0,yw("selectionchange",!1,t))}}function _M(e,t,r,n){switch(lM(t)){case 1:var a=WW;break;case 4:a=VW;break;default:a=p2}r=a.bind(null,t,r,e),a=void 0,!nj||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function vw(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Tc(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}KI(function(){var u=i,d=d2(r),f=[];e:{var h=NM.get(e);if(h!==void 0){var m=x2,g=e;switch(e){case"keypress":if(Ig(r)===0)break e;case"keydown":case"keyup":m=aV;break;case"focusin":g="focus",m=fw;break;case"focusout":g="blur",m=fw;break;case"beforeblur":case"afterblur":m=fw;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=rA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=qW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=oV;break;case vM:case wM:case bM:m=YW;break;case jM:m=cV;break;case"scroll":m=HW;break;case"wheel":m=dV;break;case"copy":case"cut":case"paste":m=QW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=aA}var p=(t&4)!==0,y=!p&&e==="scroll",b=p?h!==null?h+"Capture":null:h;p=[];for(var x=u,w;x!==null;){w=x;var v=w.stateNode;if(w.tag===5&&v!==null&&(w=v,b!==null&&(v=Em(x,b),v!=null&&p.push(Im(x,v,w)))),y)break;x=x.return}0<p.length&&(h=new m(h,g,null,r,d),f.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==tj&&(g=r.relatedTarget||r.fromElement)&&(Tc(g)||g[ko]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?Tc(g):null,g!==null&&(y=vu(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(p=rA,v="onMouseLeave",b="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(p=aA,v="onPointerLeave",b="onPointerEnter",x="pointer"),y=m==null?h:hd(m),w=g==null?h:hd(g),h=new p(v,x+"leave",m,r,d),h.target=y,h.relatedTarget=w,v=null,Tc(d)===u&&(p=new p(b,x+"enter",g,r,d),p.target=w,p.relatedTarget=y,v=p),y=v,m&&g)t:{for(p=m,b=g,x=0,w=p;w;w=zu(w))x++;for(w=0,v=b;v;v=zu(v))w++;for(;0<x-w;)p=zu(p),x--;for(;0<w-x;)b=zu(b),w--;for(;x--;){if(p===b||b!==null&&p===b.alternate)break t;p=zu(p),b=zu(b)}p=null}else p=null;m!==null&&pA(f,h,m,p,!1),g!==null&&y!==null&&pA(f,y,g,p,!0)}}e:{if(h=u?hd(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=yV;else if(oA(h))if(mM)j=jV;else{j=wV;var S=vV}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=bV);if(j&&(j=j(e,u))){hM(f,j,r,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Xb(h,"number",h.value)}switch(S=u?hd(u):window,e){case"focusin":(oA(S)||S.contentEditable==="true")&&(dd=S,lj=u,om=null);break;case"focusout":om=lj=dd=null;break;case"mousedown":cj=!0;break;case"contextmenu":case"mouseup":case"dragend":cj=!1,fA(f,r,d);break;case"selectionchange":if(_V)break;case"keydown":case"keyup":fA(f,r,d)}var _;if(v2)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ud?dM(e,r)&&(A="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(uM&&r.locale!=="ko"&&(ud||A!=="onCompositionStart"?A==="onCompositionEnd"&&ud&&(_=cM()):(xl=d,g2="value"in xl?xl.value:xl.textContent,ud=!0)),S=nx(u,A),0<S.length&&(A=new nA(A,e,null,r,d),f.push({event:A,listeners:S}),_?A.data=_:(_=fM(r),_!==null&&(A.data=_)))),(_=hV?mV(e,r):pV(e,r))&&(u=nx(u,"onBeforeInput"),0<u.length&&(d=new nA("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=_))}SM(f,t)})}function Im(e,t,r){return{instance:e,listener:t,currentTarget:r}}function nx(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Em(e,r),i!=null&&n.unshift(Im(e,i,a)),i=Em(e,t),i!=null&&n.push(Im(e,i,a))),e=e.return}return n}function zu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pA(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Em(r,i),c!=null&&o.unshift(Im(r,c,l))):a||(c=Em(r,i),c!=null&&o.push(Im(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var CV=/\r\n?/g,DV=/\u0000|\uFFFD/g;function gA(e){return(typeof e=="string"?e:""+e).replace(CV,`
`).replace(DV,"")}function V0(e,t,r){if(t=gA(t),gA(e)!==t&&r)throw Error(We(425))}function ax(){}var uj=null,dj=null;function fj(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hj=typeof setTimeout=="function"?setTimeout:void 0,kV=typeof clearTimeout=="function"?clearTimeout:void 0,xA=typeof Promise=="function"?Promise:void 0,OV=typeof queueMicrotask=="function"?queueMicrotask:typeof xA<"u"?function(e){return xA.resolve(null).then(e).catch(PV)}:hj;function PV(e){setTimeout(function(){throw e})}function ww(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Dm(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Dm(t)}function Al(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var zf=Math.random().toString(36).slice(2),Oi="__reactFiber$"+zf,Mm="__reactProps$"+zf,ko="__reactContainer$"+zf,mj="__reactEvents$"+zf,IV="__reactListeners$"+zf,MV="__reactHandles$"+zf;function Tc(e){var t=e[Oi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ko]||r[Oi]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=yA(e);e!==null;){if(r=e[Oi])return r;e=yA(e)}return t}e=r,r=e.parentNode}return null}function Kp(e){return e=e[Oi]||e[ko],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(We(33))}function lv(e){return e[Mm]||null}var pj=[],md=-1;function Zl(e){return{current:e}}function $r(e){0>md||(e.current=pj[md],pj[md]=null,md--)}function Pr(e,t){md++,pj[md]=e.current,e.current=t}var Bl={},ma=Zl(Bl),$a=Zl(!1),Xc=Bl;function tf(e,t){var r=e.type.contextTypes;if(!r)return Bl;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ba(e){return e=e.childContextTypes,e!=null}function sx(){$r($a),$r(ma)}function vA(e,t,r){if(ma.current!==Bl)throw Error(We(168));Pr(ma,t),Pr($a,r)}function TM(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(We(108,vW(e)||"Unknown",a));return qr({},r,n)}function ix(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bl,Xc=ma.current,Pr(ma,e),Pr($a,$a.current),!0}function wA(e,t,r){var n=e.stateNode;if(!n)throw Error(We(169));r?(e=TM(e,t,Xc),n.__reactInternalMemoizedMergedChildContext=e,$r($a),$r(ma),Pr(ma,e)):$r($a),Pr($a,r)}var co=null,cv=!1,bw=!1;function EM(e){co===null?co=[e]:co.push(e)}function RV(e){cv=!0,EM(e)}function ec(){if(!bw&&co!==null){bw=!0;var e=0,t=Nr;try{var r=co;for(Nr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}co=null,cv=!1}catch(a){throw co!==null&&(co=co.slice(e+1)),JI(f2,ec),a}finally{Nr=t,bw=!1}}return null}var pd=[],gd=0,ox=null,lx=0,_s=[],Ts=0,Qc=null,po=1,go="";function vc(e,t){pd[gd++]=lx,pd[gd++]=ox,ox=e,lx=t}function AM(e,t,r){_s[Ts++]=po,_s[Ts++]=go,_s[Ts++]=Qc,Qc=e;var n=po;e=go;var a=32-li(n)-1;n&=~(1<<a),r+=1;var i=32-li(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,po=1<<32-li(t)+a|r<<a|n,go=i+e}else po=1<<i|r<<a|n,go=e}function b2(e){e.return!==null&&(vc(e,1),AM(e,1,0))}function j2(e){for(;e===ox;)ox=pd[--gd],pd[gd]=null,lx=pd[--gd],pd[gd]=null;for(;e===Qc;)Qc=_s[--Ts],_s[Ts]=null,go=_s[--Ts],_s[Ts]=null,po=_s[--Ts],_s[Ts]=null}var ls=null,is=null,Ur=!1,Zs=null;function CM(e,t){var r=As(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function bA(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ls=e,is=Al(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ls=e,is=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Qc!==null?{id:po,overflow:go}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=As(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ls=e,is=null,!0):!1;default:return!1}}function gj(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xj(e){if(Ur){var t=is;if(t){var r=t;if(!bA(e,t)){if(gj(e))throw Error(We(418));t=Al(r.nextSibling);var n=ls;t&&bA(e,t)?CM(n,r):(e.flags=e.flags&-4097|2,Ur=!1,ls=e)}}else{if(gj(e))throw Error(We(418));e.flags=e.flags&-4097|2,Ur=!1,ls=e}}}function jA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ls=e}function H0(e){if(e!==ls)return!1;if(!Ur)return jA(e),Ur=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fj(e.type,e.memoizedProps)),t&&(t=is)){if(gj(e))throw DM(),Error(We(418));for(;t;)CM(e,t),t=Al(t.nextSibling)}if(jA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(We(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){is=Al(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}is=null}}else is=ls?Al(e.stateNode.nextSibling):null;return!0}function DM(){for(var e=is;e;)e=Al(e.nextSibling)}function rf(){is=ls=null,Ur=!1}function N2(e){Zs===null?Zs=[e]:Zs.push(e)}var FV=Wo.ReactCurrentBatchConfig;function _h(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(We(309));var n=r.stateNode}if(!n)throw Error(We(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(We(284));if(!r._owner)throw Error(We(290,e))}return e}function z0(e,t){throw e=Object.prototype.toString.call(t),Error(We(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function NA(e){var t=e._init;return t(e._payload)}function kM(e){function t(b,x){if(e){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function r(b,x){if(!e)return null;for(;x!==null;)t(b,x),x=x.sibling;return null}function n(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function a(b,x){return b=Ol(b,x),b.index=0,b.sibling=null,b}function i(b,x,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,x,w,v){return x===null||x.tag!==6?(x=Aw(w,b.mode,v),x.return=b,x):(x=a(x,w),x.return=b,x)}function c(b,x,w,v){var j=w.type;return j===cd?d(b,x,w.props.children,v,w.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===el&&NA(j)===x.type)?(v=a(x,w.props),v.ref=_h(b,x,w),v.return=b,v):(v=Ug(w.type,w.key,w.props,null,b.mode,v),v.ref=_h(b,x,w),v.return=b,v)}function u(b,x,w,v){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=Cw(w,b.mode,v),x.return=b,x):(x=a(x,w.children||[]),x.return=b,x)}function d(b,x,w,v,j){return x===null||x.tag!==7?(x=zc(w,b.mode,v,j),x.return=b,x):(x=a(x,w),x.return=b,x)}function f(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Aw(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case I0:return w=Ug(x.type,x.key,x.props,null,b.mode,w),w.ref=_h(b,null,x),w.return=b,w;case ld:return x=Cw(x,b.mode,w),x.return=b,x;case el:var v=x._init;return f(b,v(x._payload),w)}if(Gh(x)||wh(x))return x=zc(x,b.mode,w,null),x.return=b,x;z0(b,x)}return null}function h(b,x,w,v){var j=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(b,x,""+w,v);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case I0:return w.key===j?c(b,x,w,v):null;case ld:return w.key===j?u(b,x,w,v):null;case el:return j=w._init,h(b,x,j(w._payload),v)}if(Gh(w)||wh(w))return j!==null?null:d(b,x,w,v,null);z0(b,w)}return null}function m(b,x,w,v,j){if(typeof v=="string"&&v!==""||typeof v=="number")return b=b.get(w)||null,l(x,b,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case I0:return b=b.get(v.key===null?w:v.key)||null,c(x,b,v,j);case ld:return b=b.get(v.key===null?w:v.key)||null,u(x,b,v,j);case el:var S=v._init;return m(b,x,w,S(v._payload),j)}if(Gh(v)||wh(v))return b=b.get(w)||null,d(x,b,v,j,null);z0(x,v)}return null}function g(b,x,w,v){for(var j=null,S=null,_=x,A=x=0,C=null;_!==null&&A<w.length;A++){_.index>A?(C=_,_=null):C=_.sibling;var D=h(b,_,w[A],v);if(D===null){_===null&&(_=C);break}e&&_&&D.alternate===null&&t(b,_),x=i(D,x,A),S===null?j=D:S.sibling=D,S=D,_=C}if(A===w.length)return r(b,_),Ur&&vc(b,A),j;if(_===null){for(;A<w.length;A++)_=f(b,w[A],v),_!==null&&(x=i(_,x,A),S===null?j=_:S.sibling=_,S=_);return Ur&&vc(b,A),j}for(_=n(b,_);A<w.length;A++)C=m(_,b,A,w[A],v),C!==null&&(e&&C.alternate!==null&&_.delete(C.key===null?A:C.key),x=i(C,x,A),S===null?j=C:S.sibling=C,S=C);return e&&_.forEach(function(k){return t(b,k)}),Ur&&vc(b,A),j}function p(b,x,w,v){var j=wh(w);if(typeof j!="function")throw Error(We(150));if(w=j.call(w),w==null)throw Error(We(151));for(var S=j=null,_=x,A=x=0,C=null,D=w.next();_!==null&&!D.done;A++,D=w.next()){_.index>A?(C=_,_=null):C=_.sibling;var k=h(b,_,D.value,v);if(k===null){_===null&&(_=C);break}e&&_&&k.alternate===null&&t(b,_),x=i(k,x,A),S===null?j=k:S.sibling=k,S=k,_=C}if(D.done)return r(b,_),Ur&&vc(b,A),j;if(_===null){for(;!D.done;A++,D=w.next())D=f(b,D.value,v),D!==null&&(x=i(D,x,A),S===null?j=D:S.sibling=D,S=D);return Ur&&vc(b,A),j}for(_=n(b,_);!D.done;A++,D=w.next())D=m(_,b,A,D.value,v),D!==null&&(e&&D.alternate!==null&&_.delete(D.key===null?A:D.key),x=i(D,x,A),S===null?j=D:S.sibling=D,S=D);return e&&_.forEach(function(O){return t(b,O)}),Ur&&vc(b,A),j}function y(b,x,w,v){if(typeof w=="object"&&w!==null&&w.type===cd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case I0:e:{for(var j=w.key,S=x;S!==null;){if(S.key===j){if(j=w.type,j===cd){if(S.tag===7){r(b,S.sibling),x=a(S,w.props.children),x.return=b,b=x;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===el&&NA(j)===S.type){r(b,S.sibling),x=a(S,w.props),x.ref=_h(b,S,w),x.return=b,b=x;break e}r(b,S);break}else t(b,S);S=S.sibling}w.type===cd?(x=zc(w.props.children,b.mode,v,w.key),x.return=b,b=x):(v=Ug(w.type,w.key,w.props,null,b.mode,v),v.ref=_h(b,x,w),v.return=b,b=v)}return o(b);case ld:e:{for(S=w.key;x!==null;){if(x.key===S)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){r(b,x.sibling),x=a(x,w.children||[]),x.return=b,b=x;break e}else{r(b,x);break}else t(b,x);x=x.sibling}x=Cw(w,b.mode,v),x.return=b,b=x}return o(b);case el:return S=w._init,y(b,x,S(w._payload),v)}if(Gh(w))return g(b,x,w,v);if(wh(w))return p(b,x,w,v);z0(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(r(b,x.sibling),x=a(x,w),x.return=b,b=x):(r(b,x),x=Aw(w,b.mode,v),x.return=b,b=x),o(b)):r(b,x)}return y}var nf=kM(!0),OM=kM(!1),cx=Zl(null),ux=null,xd=null,S2=null;function _2(){S2=xd=ux=null}function T2(e){var t=cx.current;$r(cx),e._currentValue=t}function yj(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ad(e,t){ux=e,S2=xd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ra=!0),e.firstContext=null)}function Is(e){var t=e._currentValue;if(S2!==e)if(e={context:e,memoizedValue:t,next:null},xd===null){if(ux===null)throw Error(We(308));xd=e,ux.dependencies={lanes:0,firstContext:e}}else xd=xd.next=e;return t}var Ec=null;function E2(e){Ec===null?Ec=[e]:Ec.push(e)}function PM(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,E2(t)):(r.next=a.next,a.next=r),t.interleaved=r,Oo(e,n)}function Oo(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var tl=!1;function A2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IM(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cl(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ar&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Oo(e,r)}return a=n.interleaved,a===null?(t.next=t,E2(n)):(t.next=a.next,a.next=t),n.interleaved=t,Oo(e,r)}function Mg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,h2(e,r)}}function SA(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function dx(e,t,r,n){var a=e.updateQueue;tl=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,d=u=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,p=l;switch(h=t,m=r,p.tag){case 1:if(g=p.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=qr({},f,h);break e;case 2:tl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Zc|=o,e.lanes=o,e.memoizedState=f}}function _A(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(We(191,a));a.call(n)}}}var Yp={},Ui=Zl(Yp),Rm=Zl(Yp),Fm=Zl(Yp);function Ac(e){if(e===Yp)throw Error(We(174));return e}function C2(e,t){switch(Pr(Fm,t),Pr(Rm,e),Pr(Ui,Yp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Jb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Jb(t,e)}$r(Ui),Pr(Ui,t)}function af(){$r(Ui),$r(Rm),$r(Fm)}function MM(e){Ac(Fm.current);var t=Ac(Ui.current),r=Jb(t,e.type);t!==r&&(Pr(Rm,e),Pr(Ui,r))}function D2(e){Rm.current===e&&($r(Ui),$r(Rm))}var Hr=Zl(0);function fx(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jw=[];function k2(){for(var e=0;e<jw.length;e++)jw[e]._workInProgressVersionPrimary=null;jw.length=0}var Rg=Wo.ReactCurrentDispatcher,Nw=Wo.ReactCurrentBatchConfig,Jc=0,zr=null,_n=null,In=null,hx=!1,lm=!1,Lm=0,LV=0;function ta(){throw Error(We(321))}function O2(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!hi(e[r],t[r]))return!1;return!0}function P2(e,t,r,n,a,i){if(Jc=i,zr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Rg.current=e===null||e.memoizedState===null?WV:VV,e=r(n,a),lm){i=0;do{if(lm=!1,Lm=0,25<=i)throw Error(We(301));i+=1,In=_n=null,t.updateQueue=null,Rg.current=HV,e=r(n,a)}while(lm)}if(Rg.current=mx,t=_n!==null&&_n.next!==null,Jc=0,In=_n=zr=null,hx=!1,t)throw Error(We(300));return e}function I2(){var e=Lm!==0;return Lm=0,e}function Ei(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?zr.memoizedState=In=e:In=In.next=e,In}function Ms(){if(_n===null){var e=zr.alternate;e=e!==null?e.memoizedState:null}else e=_n.next;var t=In===null?zr.memoizedState:In.next;if(t!==null)In=t,_n=e;else{if(e===null)throw Error(We(310));_n=e,e={memoizedState:_n.memoizedState,baseState:_n.baseState,baseQueue:_n.baseQueue,queue:_n.queue,next:null},In===null?zr.memoizedState=In=e:In=In.next=e}return In}function $m(e,t){return typeof t=="function"?t(e):t}function Sw(e){var t=Ms(),r=t.queue;if(r===null)throw Error(We(311));r.lastRenderedReducer=e;var n=_n,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Jc&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,zr.lanes|=d,Zc|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,hi(n,t.memoizedState)||(Ra=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,zr.lanes|=i,Zc|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function _w(e){var t=Ms(),r=t.queue;if(r===null)throw Error(We(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);hi(i,t.memoizedState)||(Ra=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function RM(){}function FM(e,t){var r=zr,n=Ms(),a=t(),i=!hi(n.memoizedState,a);if(i&&(n.memoizedState=a,Ra=!0),n=n.queue,M2(BM.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||In!==null&&In.memoizedState.tag&1){if(r.flags|=2048,Bm(9,$M.bind(null,r,n,a,t),void 0,null),$n===null)throw Error(We(349));Jc&30||LM(r,t,a)}return a}function LM(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function $M(e,t,r,n){t.value=r,t.getSnapshot=n,UM(t)&&WM(e)}function BM(e,t,r){return r(function(){UM(t)&&WM(e)})}function UM(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!hi(e,r)}catch{return!0}}function WM(e){var t=Oo(e,1);t!==null&&ci(t,e,1,-1)}function TA(e){var t=Ei();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$m,lastRenderedState:e},t.queue=e,e=e.dispatch=UV.bind(null,zr,e),[t.memoizedState,e]}function Bm(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function VM(){return Ms().memoizedState}function Fg(e,t,r,n){var a=Ei();zr.flags|=e,a.memoizedState=Bm(1|t,r,void 0,n===void 0?null:n)}function uv(e,t,r,n){var a=Ms();n=n===void 0?null:n;var i=void 0;if(_n!==null){var o=_n.memoizedState;if(i=o.destroy,n!==null&&O2(n,o.deps)){a.memoizedState=Bm(t,r,i,n);return}}zr.flags|=e,a.memoizedState=Bm(1|t,r,i,n)}function EA(e,t){return Fg(8390656,8,e,t)}function M2(e,t){return uv(2048,8,e,t)}function HM(e,t){return uv(4,2,e,t)}function zM(e,t){return uv(4,4,e,t)}function qM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function GM(e,t,r){return r=r!=null?r.concat([e]):null,uv(4,4,qM.bind(null,t,e),r)}function R2(){}function KM(e,t){var r=Ms();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&O2(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function YM(e,t){var r=Ms();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&O2(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function XM(e,t,r){return Jc&21?(hi(r,t)||(r=tM(),zr.lanes|=r,Zc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ra=!0),e.memoizedState=r)}function $V(e,t){var r=Nr;Nr=r!==0&&4>r?r:4,e(!0);var n=Nw.transition;Nw.transition={};try{e(!1),t()}finally{Nr=r,Nw.transition=n}}function QM(){return Ms().memoizedState}function BV(e,t,r){var n=kl(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},JM(e))ZM(t,r);else if(r=PM(e,t,r,n),r!==null){var a=_a();ci(r,e,n,a),eR(r,t,n)}}function UV(e,t,r){var n=kl(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(JM(e))ZM(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,hi(l,o)){var c=t.interleaved;c===null?(a.next=a,E2(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=PM(e,t,a,n),r!==null&&(a=_a(),ci(r,e,n,a),eR(r,t,n))}}function JM(e){var t=e.alternate;return e===zr||t!==null&&t===zr}function ZM(e,t){lm=hx=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function eR(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,h2(e,r)}}var mx={readContext:Is,useCallback:ta,useContext:ta,useEffect:ta,useImperativeHandle:ta,useInsertionEffect:ta,useLayoutEffect:ta,useMemo:ta,useReducer:ta,useRef:ta,useState:ta,useDebugValue:ta,useDeferredValue:ta,useTransition:ta,useMutableSource:ta,useSyncExternalStore:ta,useId:ta,unstable_isNewReconciler:!1},WV={readContext:Is,useCallback:function(e,t){return Ei().memoizedState=[e,t===void 0?null:t],e},useContext:Is,useEffect:EA,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Fg(4194308,4,qM.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Fg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fg(4,2,e,t)},useMemo:function(e,t){var r=Ei();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ei();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=BV.bind(null,zr,e),[n.memoizedState,e]},useRef:function(e){var t=Ei();return e={current:e},t.memoizedState=e},useState:TA,useDebugValue:R2,useDeferredValue:function(e){return Ei().memoizedState=e},useTransition:function(){var e=TA(!1),t=e[0];return e=$V.bind(null,e[1]),Ei().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=zr,a=Ei();if(Ur){if(r===void 0)throw Error(We(407));r=r()}else{if(r=t(),$n===null)throw Error(We(349));Jc&30||LM(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,EA(BM.bind(null,n,i,e),[e]),n.flags|=2048,Bm(9,$M.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Ei(),t=$n.identifierPrefix;if(Ur){var r=go,n=po;r=(n&~(1<<32-li(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Lm++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=LV++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},VV={readContext:Is,useCallback:KM,useContext:Is,useEffect:M2,useImperativeHandle:GM,useInsertionEffect:HM,useLayoutEffect:zM,useMemo:YM,useReducer:Sw,useRef:VM,useState:function(){return Sw($m)},useDebugValue:R2,useDeferredValue:function(e){var t=Ms();return XM(t,_n.memoizedState,e)},useTransition:function(){var e=Sw($m)[0],t=Ms().memoizedState;return[e,t]},useMutableSource:RM,useSyncExternalStore:FM,useId:QM,unstable_isNewReconciler:!1},HV={readContext:Is,useCallback:KM,useContext:Is,useEffect:M2,useImperativeHandle:GM,useInsertionEffect:HM,useLayoutEffect:zM,useMemo:YM,useReducer:_w,useRef:VM,useState:function(){return _w($m)},useDebugValue:R2,useDeferredValue:function(e){var t=Ms();return _n===null?t.memoizedState=e:XM(t,_n.memoizedState,e)},useTransition:function(){var e=_w($m)[0],t=Ms().memoizedState;return[e,t]},useMutableSource:RM,useSyncExternalStore:FM,useId:QM,unstable_isNewReconciler:!1};function Gs(e,t){if(e&&e.defaultProps){t=qr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function vj(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:qr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var dv={isMounted:function(e){return(e=e._reactInternals)?vu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=_a(),a=kl(e),i=jo(n,a);i.payload=t,r!=null&&(i.callback=r),t=Cl(e,i,a),t!==null&&(ci(t,e,a,n),Mg(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=_a(),a=kl(e),i=jo(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Cl(e,i,a),t!==null&&(ci(t,e,a,n),Mg(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=_a(),n=kl(e),a=jo(r,n);a.tag=2,t!=null&&(a.callback=t),t=Cl(e,a,n),t!==null&&(ci(t,e,n,r),Mg(t,e,n))}};function AA(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Om(r,n)||!Om(a,i):!0}function tR(e,t,r){var n=!1,a=Bl,i=t.contextType;return typeof i=="object"&&i!==null?i=Is(i):(a=Ba(t)?Xc:ma.current,n=t.contextTypes,i=(n=n!=null)?tf(e,a):Bl),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dv,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function CA(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&dv.enqueueReplaceState(t,t.state,null)}function wj(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},A2(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Is(i):(i=Ba(t)?Xc:ma.current,a.context=tf(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(vj(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&dv.enqueueReplaceState(a,a.state,null),dx(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function sf(e,t){try{var r="",n=t;do r+=yW(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Tw(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function bj(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var zV=typeof WeakMap=="function"?WeakMap:Map;function rR(e,t,r){r=jo(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){gx||(gx=!0,kj=n),bj(e,t)},r}function nR(e,t,r){r=jo(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){bj(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){bj(e,t),typeof n!="function"&&(Dl===null?Dl=new Set([this]):Dl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function DA(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new zV;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=sH.bind(null,e,t,r),t.then(e,e))}function kA(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function OA(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=jo(-1,1),t.tag=2,Cl(r,t,1))),r.lanes|=1),e)}var qV=Wo.ReactCurrentOwner,Ra=!1;function va(e,t,r,n){t.child=e===null?OM(t,null,r,n):nf(t,e.child,r,n)}function PA(e,t,r,n,a){r=r.render;var i=t.ref;return Ad(t,a),n=P2(e,t,r,n,i,a),r=I2(),e!==null&&!Ra?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Po(e,t,a)):(Ur&&r&&b2(t),t.flags|=1,va(e,t,n,a),t.child)}function IA(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!H2(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,aR(e,t,i,n,a)):(e=Ug(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Om,r(o,n)&&e.ref===t.ref)return Po(e,t,a)}return t.flags|=1,e=Ol(i,n),e.ref=t.ref,e.return=t,t.child=e}function aR(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Om(i,n)&&e.ref===t.ref)if(Ra=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Ra=!0);else return t.lanes=e.lanes,Po(e,t,a)}return jj(e,t,r,n,a)}function sR(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pr(vd,Qa),Qa|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pr(vd,Qa),Qa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Pr(vd,Qa),Qa|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Pr(vd,Qa),Qa|=n;return va(e,t,a,r),t.child}function iR(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function jj(e,t,r,n,a){var i=Ba(r)?Xc:ma.current;return i=tf(t,i),Ad(t,a),r=P2(e,t,r,n,i,a),n=I2(),e!==null&&!Ra?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Po(e,t,a)):(Ur&&n&&b2(t),t.flags|=1,va(e,t,r,a),t.child)}function MA(e,t,r,n,a){if(Ba(r)){var i=!0;ix(t)}else i=!1;if(Ad(t,a),t.stateNode===null)Lg(e,t),tR(t,r,n),wj(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Is(u):(u=Ba(r)?Xc:ma.current,u=tf(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&CA(t,o,n,u),tl=!1;var h=t.memoizedState;o.state=h,dx(t,n,o,a),c=t.memoizedState,l!==n||h!==c||$a.current||tl?(typeof d=="function"&&(vj(t,r,d,n),c=t.memoizedState),(l=tl||AA(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,IM(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Gs(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Is(c):(c=Ba(r)?Xc:ma.current,c=tf(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&CA(t,o,n,c),tl=!1,h=t.memoizedState,o.state=h,dx(t,n,o,a);var g=t.memoizedState;l!==f||h!==g||$a.current||tl?(typeof m=="function"&&(vj(t,r,m,n),g=t.memoizedState),(u=tl||AA(t,r,u,n,h,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Nj(e,t,r,n,i,a)}function Nj(e,t,r,n,a,i){iR(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&wA(t,r,!1),Po(e,t,i);n=t.stateNode,qV.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=nf(t,e.child,null,i),t.child=nf(t,null,l,i)):va(e,t,l,i),t.memoizedState=n.state,a&&wA(t,r,!0),t.child}function oR(e){var t=e.stateNode;t.pendingContext?vA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vA(e,t.context,!1),C2(e,t.containerInfo)}function RA(e,t,r,n,a){return rf(),N2(a),t.flags|=256,va(e,t,r,n),t.child}var Sj={dehydrated:null,treeContext:null,retryLane:0};function _j(e){return{baseLanes:e,cachePool:null,transitions:null}}function lR(e,t,r){var n=t.pendingProps,a=Hr.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Pr(Hr,a&1),e===null)return xj(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=mv(o,n,0,null),e=zc(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=_j(r),t.memoizedState=Sj,e):F2(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return GV(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ol(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Ol(l,i):(i=zc(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?_j(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Sj,n}return i=e.child,e=i.sibling,n=Ol(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function F2(e,t){return t=mv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function q0(e,t,r,n){return n!==null&&N2(n),nf(t,e.child,null,r),e=F2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function GV(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Tw(Error(We(422))),q0(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=mv({mode:"visible",children:n.children},a,0,null),i=zc(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&nf(t,e.child,null,o),t.child.memoizedState=_j(o),t.memoizedState=Sj,i);if(!(t.mode&1))return q0(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(We(419)),n=Tw(i,n,void 0),q0(e,t,o,n)}if(l=(o&e.childLanes)!==0,Ra||l){if(n=$n,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Oo(e,a),ci(n,e,a,-1))}return V2(),n=Tw(Error(We(421))),q0(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=iH.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,is=Al(a.nextSibling),ls=t,Ur=!0,Zs=null,e!==null&&(_s[Ts++]=po,_s[Ts++]=go,_s[Ts++]=Qc,po=e.id,go=e.overflow,Qc=t),t=F2(t,n.children),t.flags|=4096,t)}function FA(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),yj(e.return,t,r)}function Ew(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function cR(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(va(e,t,n.children,r),n=Hr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&FA(e,r,t);else if(e.tag===19)FA(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Pr(Hr,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&fx(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Ew(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&fx(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Ew(t,!0,r,null,i);break;case"together":Ew(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Lg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Po(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Zc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(We(153));if(t.child!==null){for(e=t.child,r=Ol(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ol(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function KV(e,t,r){switch(t.tag){case 3:oR(t),rf();break;case 5:MM(t);break;case 1:Ba(t.type)&&ix(t);break;case 4:C2(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Pr(cx,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Pr(Hr,Hr.current&1),t.flags|=128,null):r&t.child.childLanes?lR(e,t,r):(Pr(Hr,Hr.current&1),e=Po(e,t,r),e!==null?e.sibling:null);Pr(Hr,Hr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return cR(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Pr(Hr,Hr.current),n)break;return null;case 22:case 23:return t.lanes=0,sR(e,t,r)}return Po(e,t,r)}var uR,Tj,dR,fR;uR=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Tj=function(){};dR=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ac(Ui.current);var i=null;switch(r){case"input":a=Kb(e,a),n=Kb(e,n),i=[];break;case"select":a=qr({},a,{value:void 0}),n=qr({},n,{value:void 0}),i=[];break;case"textarea":a=Qb(e,a),n=Qb(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ax)}Zb(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_m.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_m.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Rr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};fR=function(e,t,r,n){r!==n&&(t.flags|=4)};function Th(e,t){if(!Ur)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ra(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function YV(e,t,r){var n=t.pendingProps;switch(j2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ra(t),null;case 1:return Ba(t.type)&&sx(),ra(t),null;case 3:return n=t.stateNode,af(),$r($a),$r(ma),k2(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(H0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zs!==null&&(Ij(Zs),Zs=null))),Tj(e,t),ra(t),null;case 5:D2(t);var a=Ac(Fm.current);if(r=t.type,e!==null&&t.stateNode!=null)dR(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(We(166));return ra(t),null}if(e=Ac(Ui.current),H0(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Oi]=t,n[Mm]=i,e=(t.mode&1)!==0,r){case"dialog":Rr("cancel",n),Rr("close",n);break;case"iframe":case"object":case"embed":Rr("load",n);break;case"video":case"audio":for(a=0;a<Yh.length;a++)Rr(Yh[a],n);break;case"source":Rr("error",n);break;case"img":case"image":case"link":Rr("error",n),Rr("load",n);break;case"details":Rr("toggle",n);break;case"input":qE(n,i),Rr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Rr("invalid",n);break;case"textarea":KE(n,i),Rr("invalid",n)}Zb(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&V0(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&V0(n.textContent,l,e),a=["children",""+l]):_m.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Rr("scroll",n)}switch(r){case"input":M0(n),GE(n,i,!0);break;case"textarea":M0(n),YE(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ax)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=BI(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Oi]=t,e[Mm]=n,uR(e,t,!1,!1),t.stateNode=e;e:{switch(o=ej(r,n),r){case"dialog":Rr("cancel",e),Rr("close",e),a=n;break;case"iframe":case"object":case"embed":Rr("load",e),a=n;break;case"video":case"audio":for(a=0;a<Yh.length;a++)Rr(Yh[a],e);a=n;break;case"source":Rr("error",e),a=n;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),a=n;break;case"details":Rr("toggle",e),a=n;break;case"input":qE(e,n),a=Kb(e,n),Rr("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=qr({},n,{value:void 0}),Rr("invalid",e);break;case"textarea":KE(e,n),a=Qb(e,n),Rr("invalid",e);break;default:a=n}Zb(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?VI(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&UI(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Tm(e,c):typeof c=="number"&&Tm(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_m.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Rr("scroll",e):c!=null&&o2(e,i,c,o))}switch(r){case"input":M0(e),GE(e,n,!1);break;case"textarea":M0(e),YE(e);break;case"option":n.value!=null&&e.setAttribute("value",""+$l(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Sd(e,!!n.multiple,i,!1):n.defaultValue!=null&&Sd(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ax)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ra(t),null;case 6:if(e&&t.stateNode!=null)fR(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(We(166));if(r=Ac(Fm.current),Ac(Ui.current),H0(t)){if(n=t.stateNode,r=t.memoizedProps,n[Oi]=t,(i=n.nodeValue!==r)&&(e=ls,e!==null))switch(e.tag){case 3:V0(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&V0(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Oi]=t,t.stateNode=n}return ra(t),null;case 13:if($r(Hr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ur&&is!==null&&t.mode&1&&!(t.flags&128))DM(),rf(),t.flags|=98560,i=!1;else if(i=H0(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(We(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(We(317));i[Oi]=t}else rf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ra(t),i=!1}else Zs!==null&&(Ij(Zs),Zs=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Hr.current&1?En===0&&(En=3):V2())),t.updateQueue!==null&&(t.flags|=4),ra(t),null);case 4:return af(),Tj(e,t),e===null&&Pm(t.stateNode.containerInfo),ra(t),null;case 10:return T2(t.type._context),ra(t),null;case 17:return Ba(t.type)&&sx(),ra(t),null;case 19:if($r(Hr),i=t.memoizedState,i===null)return ra(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Th(i,!1);else{if(En!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=fx(e),o!==null){for(t.flags|=128,Th(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Pr(Hr,Hr.current&1|2),t.child}e=e.sibling}i.tail!==null&&tn()>of&&(t.flags|=128,n=!0,Th(i,!1),t.lanes=4194304)}else{if(!n)if(e=fx(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Th(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ur)return ra(t),null}else 2*tn()-i.renderingStartTime>of&&r!==1073741824&&(t.flags|=128,n=!0,Th(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=tn(),t.sibling=null,r=Hr.current,Pr(Hr,n?r&1|2:r&1),t):(ra(t),null);case 22:case 23:return W2(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Qa&1073741824&&(ra(t),t.subtreeFlags&6&&(t.flags|=8192)):ra(t),null;case 24:return null;case 25:return null}throw Error(We(156,t.tag))}function XV(e,t){switch(j2(t),t.tag){case 1:return Ba(t.type)&&sx(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return af(),$r($a),$r(ma),k2(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return D2(t),null;case 13:if($r(Hr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(We(340));rf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $r(Hr),null;case 4:return af(),null;case 10:return T2(t.type._context),null;case 22:case 23:return W2(),null;case 24:return null;default:return null}}var G0=!1,oa=!1,QV=typeof WeakSet=="function"?WeakSet:Set,mt=null;function yd(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Xr(e,t,n)}else r.current=null}function Ej(e,t,r){try{r()}catch(n){Xr(e,t,n)}}var LA=!1;function JV(e,t){if(uj=tx,e=xM(),w2(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=o),h===i&&++d===n&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(dj={focusedElem:e,selectionRange:r},tx=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){t=mt;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,y=g.memoizedState,b=t.stateNode,x=b.getSnapshotBeforeUpdate(t.elementType===t.type?p:Gs(t.type,p),y);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(We(163))}}catch(v){Xr(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}return g=LA,LA=!1,g}function cm(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Ej(t,r,i)}a=a.next}while(a!==n)}}function fv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Aj(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function hR(e){var t=e.alternate;t!==null&&(e.alternate=null,hR(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Oi],delete t[Mm],delete t[mj],delete t[IV],delete t[MV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mR(e){return e.tag===5||e.tag===3||e.tag===4}function $A(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cj(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ax));else if(n!==4&&(e=e.child,e!==null))for(Cj(e,t,r),e=e.sibling;e!==null;)Cj(e,t,r),e=e.sibling}function Dj(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Dj(e,t,r),e=e.sibling;e!==null;)Dj(e,t,r),e=e.sibling}var Hn=null,Qs=!1;function Go(e,t,r){for(r=r.child;r!==null;)pR(e,t,r),r=r.sibling}function pR(e,t,r){if(Bi&&typeof Bi.onCommitFiberUnmount=="function")try{Bi.onCommitFiberUnmount(av,r)}catch{}switch(r.tag){case 5:oa||yd(r,t);case 6:var n=Hn,a=Qs;Hn=null,Go(e,t,r),Hn=n,Qs=a,Hn!==null&&(Qs?(e=Hn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Hn.removeChild(r.stateNode));break;case 18:Hn!==null&&(Qs?(e=Hn,r=r.stateNode,e.nodeType===8?ww(e.parentNode,r):e.nodeType===1&&ww(e,r),Dm(e)):ww(Hn,r.stateNode));break;case 4:n=Hn,a=Qs,Hn=r.stateNode.containerInfo,Qs=!0,Go(e,t,r),Hn=n,Qs=a;break;case 0:case 11:case 14:case 15:if(!oa&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ej(r,t,o),a=a.next}while(a!==n)}Go(e,t,r);break;case 1:if(!oa&&(yd(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Xr(r,t,l)}Go(e,t,r);break;case 21:Go(e,t,r);break;case 22:r.mode&1?(oa=(n=oa)||r.memoizedState!==null,Go(e,t,r),oa=n):Go(e,t,r);break;default:Go(e,t,r)}}function BA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new QV),t.forEach(function(n){var a=oH.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ws(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Hn=l.stateNode,Qs=!1;break e;case 3:Hn=l.stateNode.containerInfo,Qs=!0;break e;case 4:Hn=l.stateNode.containerInfo,Qs=!0;break e}l=l.return}if(Hn===null)throw Error(We(160));pR(i,o,a),Hn=null,Qs=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Xr(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)gR(t,e),t=t.sibling}function gR(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ws(t,e),Ni(e),n&4){try{cm(3,e,e.return),fv(3,e)}catch(p){Xr(e,e.return,p)}try{cm(5,e,e.return)}catch(p){Xr(e,e.return,p)}}break;case 1:Ws(t,e),Ni(e),n&512&&r!==null&&yd(r,r.return);break;case 5:if(Ws(t,e),Ni(e),n&512&&r!==null&&yd(r,r.return),e.flags&32){var a=e.stateNode;try{Tm(a,"")}catch(p){Xr(e,e.return,p)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&LI(a,i),ej(l,o);var u=ej(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?VI(a,f):d==="dangerouslySetInnerHTML"?UI(a,f):d==="children"?Tm(a,f):o2(a,d,f,u)}switch(l){case"input":Yb(a,i);break;case"textarea":$I(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Sd(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?Sd(a,!!i.multiple,i.defaultValue,!0):Sd(a,!!i.multiple,i.multiple?[]:"",!1))}a[Mm]=i}catch(p){Xr(e,e.return,p)}}break;case 6:if(Ws(t,e),Ni(e),n&4){if(e.stateNode===null)throw Error(We(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){Xr(e,e.return,p)}}break;case 3:if(Ws(t,e),Ni(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Dm(t.containerInfo)}catch(p){Xr(e,e.return,p)}break;case 4:Ws(t,e),Ni(e);break;case 13:Ws(t,e),Ni(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(B2=tn())),n&4&&BA(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(oa=(u=oa)||d,Ws(t,e),oa=u):Ws(t,e),Ni(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(mt=e,d=e.child;d!==null;){for(f=mt=d;mt!==null;){switch(h=mt,m=h.child,h.tag){case 0:case 11:case 14:case 15:cm(4,h,h.return);break;case 1:yd(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){Xr(n,r,p)}}break;case 5:yd(h,h.return);break;case 22:if(h.memoizedState!==null){WA(f);continue}}m!==null?(m.return=h,mt=m):WA(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=WI("display",o))}catch(p){Xr(e,e.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){Xr(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ws(t,e),Ni(e),n&4&&BA(e);break;case 21:break;default:Ws(t,e),Ni(e)}}function Ni(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(mR(r)){var n=r;break e}r=r.return}throw Error(We(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Tm(a,""),n.flags&=-33);var i=$A(e);Dj(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=$A(e);Cj(e,l,o);break;default:throw Error(We(161))}}catch(c){Xr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ZV(e,t,r){mt=e,xR(e)}function xR(e,t,r){for(var n=(e.mode&1)!==0;mt!==null;){var a=mt,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||G0;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||oa;l=G0;var u=oa;if(G0=o,(oa=c)&&!u)for(mt=a;mt!==null;)o=mt,c=o.child,o.tag===22&&o.memoizedState!==null?VA(a):c!==null?(c.return=o,mt=c):VA(a);for(;i!==null;)mt=i,xR(i),i=i.sibling;mt=a,G0=l,oa=u}UA(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,mt=i):UA(e)}}function UA(e){for(;mt!==null;){var t=mt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:oa||fv(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!oa)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Gs(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&_A(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}_A(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Dm(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(We(163))}oa||t.flags&512&&Aj(t)}catch(h){Xr(t,t.return,h)}}if(t===e){mt=null;break}if(r=t.sibling,r!==null){r.return=t.return,mt=r;break}mt=t.return}}function WA(e){for(;mt!==null;){var t=mt;if(t===e){mt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,mt=r;break}mt=t.return}}function VA(e){for(;mt!==null;){var t=mt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{fv(4,t)}catch(c){Xr(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Xr(t,a,c)}}var i=t.return;try{Aj(t)}catch(c){Xr(t,i,c)}break;case 5:var o=t.return;try{Aj(t)}catch(c){Xr(t,o,c)}}}catch(c){Xr(t,t.return,c)}if(t===e){mt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,mt=l;break}mt=t.return}}var eH=Math.ceil,px=Wo.ReactCurrentDispatcher,L2=Wo.ReactCurrentOwner,ks=Wo.ReactCurrentBatchConfig,ar=0,$n=null,dn=null,Xn=0,Qa=0,vd=Zl(0),En=0,Um=null,Zc=0,hv=0,$2=0,um=null,Ma=null,B2=0,of=1/0,oo=null,gx=!1,kj=null,Dl=null,K0=!1,yl=null,xx=0,dm=0,Oj=null,$g=-1,Bg=0;function _a(){return ar&6?tn():$g!==-1?$g:$g=tn()}function kl(e){return e.mode&1?ar&2&&Xn!==0?Xn&-Xn:FV.transition!==null?(Bg===0&&(Bg=tM()),Bg):(e=Nr,e!==0||(e=window.event,e=e===void 0?16:lM(e.type)),e):1}function ci(e,t,r,n){if(50<dm)throw dm=0,Oj=null,Error(We(185));qp(e,r,n),(!(ar&2)||e!==$n)&&(e===$n&&(!(ar&2)&&(hv|=r),En===4&&sl(e,Xn)),Ua(e,n),r===1&&ar===0&&!(t.mode&1)&&(of=tn()+500,cv&&ec()))}function Ua(e,t){var r=e.callbackNode;FW(e,t);var n=ex(e,e===$n?Xn:0);if(n===0)r!==null&&JE(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&JE(r),t===1)e.tag===0?RV(HA.bind(null,e)):EM(HA.bind(null,e)),OV(function(){!(ar&6)&&ec()}),r=null;else{switch(rM(n)){case 1:r=f2;break;case 4:r=ZI;break;case 16:r=Zg;break;case 536870912:r=eM;break;default:r=Zg}r=_R(r,yR.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function yR(e,t){if($g=-1,Bg=0,ar&6)throw Error(We(327));var r=e.callbackNode;if(Cd()&&e.callbackNode!==r)return null;var n=ex(e,e===$n?Xn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=yx(e,n);else{t=n;var a=ar;ar|=2;var i=wR();($n!==e||Xn!==t)&&(oo=null,of=tn()+500,Hc(e,t));do try{nH();break}catch(l){vR(e,l)}while(!0);_2(),px.current=i,ar=a,dn!==null?t=0:($n=null,Xn=0,t=En)}if(t!==0){if(t===2&&(a=sj(e),a!==0&&(n=a,t=Pj(e,a))),t===1)throw r=Um,Hc(e,0),sl(e,n),Ua(e,tn()),r;if(t===6)sl(e,n);else{if(a=e.current.alternate,!(n&30)&&!tH(a)&&(t=yx(e,n),t===2&&(i=sj(e),i!==0&&(n=i,t=Pj(e,i))),t===1))throw r=Um,Hc(e,0),sl(e,n),Ua(e,tn()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(We(345));case 2:wc(e,Ma,oo);break;case 3:if(sl(e,n),(n&130023424)===n&&(t=B2+500-tn(),10<t)){if(ex(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){_a(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=hj(wc.bind(null,e,Ma,oo),t);break}wc(e,Ma,oo);break;case 4:if(sl(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-li(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=tn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*eH(n/1960))-n,10<n){e.timeoutHandle=hj(wc.bind(null,e,Ma,oo),n);break}wc(e,Ma,oo);break;case 5:wc(e,Ma,oo);break;default:throw Error(We(329))}}}return Ua(e,tn()),e.callbackNode===r?yR.bind(null,e):null}function Pj(e,t){var r=um;return e.current.memoizedState.isDehydrated&&(Hc(e,t).flags|=256),e=yx(e,t),e!==2&&(t=Ma,Ma=r,t!==null&&Ij(t)),e}function Ij(e){Ma===null?Ma=e:Ma.push.apply(Ma,e)}function tH(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!hi(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sl(e,t){for(t&=~$2,t&=~hv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-li(t),n=1<<r;e[r]=-1,t&=~n}}function HA(e){if(ar&6)throw Error(We(327));Cd();var t=ex(e,0);if(!(t&1))return Ua(e,tn()),null;var r=yx(e,t);if(e.tag!==0&&r===2){var n=sj(e);n!==0&&(t=n,r=Pj(e,n))}if(r===1)throw r=Um,Hc(e,0),sl(e,t),Ua(e,tn()),r;if(r===6)throw Error(We(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ma,oo),Ua(e,tn()),null}function U2(e,t){var r=ar;ar|=1;try{return e(t)}finally{ar=r,ar===0&&(of=tn()+500,cv&&ec())}}function eu(e){yl!==null&&yl.tag===0&&!(ar&6)&&Cd();var t=ar;ar|=1;var r=ks.transition,n=Nr;try{if(ks.transition=null,Nr=1,e)return e()}finally{Nr=n,ks.transition=r,ar=t,!(ar&6)&&ec()}}function W2(){Qa=vd.current,$r(vd)}function Hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,kV(r)),dn!==null)for(r=dn.return;r!==null;){var n=r;switch(j2(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&sx();break;case 3:af(),$r($a),$r(ma),k2();break;case 5:D2(n);break;case 4:af();break;case 13:$r(Hr);break;case 19:$r(Hr);break;case 10:T2(n.type._context);break;case 22:case 23:W2()}r=r.return}if($n=e,dn=e=Ol(e.current,null),Xn=Qa=t,En=0,Um=null,$2=hv=Zc=0,Ma=um=null,Ec!==null){for(t=0;t<Ec.length;t++)if(r=Ec[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Ec=null}return e}function vR(e,t){do{var r=dn;try{if(_2(),Rg.current=mx,hx){for(var n=zr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}hx=!1}if(Jc=0,In=_n=zr=null,lm=!1,Lm=0,L2.current=null,r===null||r.return===null){En=1,Um=t,dn=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Xn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=kA(o);if(m!==null){m.flags&=-257,OA(m,o,l,i,t),m.mode&1&&DA(i,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(c),t.updateQueue=p}else g.add(c);break e}else{if(!(t&1)){DA(i,u,t),V2();break e}c=Error(We(426))}}else if(Ur&&l.mode&1){var y=kA(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),OA(y,o,l,i,t),N2(sf(c,l));break e}}i=c=sf(c,l),En!==4&&(En=2),um===null?um=[i]:um.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=rR(i,c,t);SA(i,b);break e;case 1:l=c;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Dl===null||!Dl.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=nR(i,l,t);SA(i,v);break e}}i=i.return}while(i!==null)}jR(r)}catch(j){t=j,dn===r&&r!==null&&(dn=r=r.return);continue}break}while(!0)}function wR(){var e=px.current;return px.current=mx,e===null?mx:e}function V2(){(En===0||En===3||En===2)&&(En=4),$n===null||!(Zc&268435455)&&!(hv&268435455)||sl($n,Xn)}function yx(e,t){var r=ar;ar|=2;var n=wR();($n!==e||Xn!==t)&&(oo=null,Hc(e,t));do try{rH();break}catch(a){vR(e,a)}while(!0);if(_2(),ar=r,px.current=n,dn!==null)throw Error(We(261));return $n=null,Xn=0,En}function rH(){for(;dn!==null;)bR(dn)}function nH(){for(;dn!==null&&!AW();)bR(dn)}function bR(e){var t=SR(e.alternate,e,Qa);e.memoizedProps=e.pendingProps,t===null?jR(e):dn=t,L2.current=null}function jR(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=XV(r,t),r!==null){r.flags&=32767,dn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{En=6,dn=null;return}}else if(r=YV(r,t,Qa),r!==null){dn=r;return}if(t=t.sibling,t!==null){dn=t;return}dn=t=e}while(t!==null);En===0&&(En=5)}function wc(e,t,r){var n=Nr,a=ks.transition;try{ks.transition=null,Nr=1,aH(e,t,r,n)}finally{ks.transition=a,Nr=n}return null}function aH(e,t,r,n){do Cd();while(yl!==null);if(ar&6)throw Error(We(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(We(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(LW(e,i),e===$n&&(dn=$n=null,Xn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||K0||(K0=!0,_R(Zg,function(){return Cd(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ks.transition,ks.transition=null;var o=Nr;Nr=1;var l=ar;ar|=4,L2.current=null,JV(e,r),gR(r,e),SV(dj),tx=!!uj,dj=uj=null,e.current=r,ZV(r),CW(),ar=l,Nr=o,ks.transition=i}else e.current=r;if(K0&&(K0=!1,yl=e,xx=a),i=e.pendingLanes,i===0&&(Dl=null),OW(r.stateNode),Ua(e,tn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(gx)throw gx=!1,e=kj,kj=null,e;return xx&1&&e.tag!==0&&Cd(),i=e.pendingLanes,i&1?e===Oj?dm++:(dm=0,Oj=e):dm=0,ec(),null}function Cd(){if(yl!==null){var e=rM(xx),t=ks.transition,r=Nr;try{if(ks.transition=null,Nr=16>e?16:e,yl===null)var n=!1;else{if(e=yl,yl=null,xx=0,ar&6)throw Error(We(331));var a=ar;for(ar|=4,mt=e.current;mt!==null;){var i=mt,o=i.child;if(mt.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(mt=u;mt!==null;){var d=mt;switch(d.tag){case 0:case 11:case 15:cm(8,d,i)}var f=d.child;if(f!==null)f.return=d,mt=f;else for(;mt!==null;){d=mt;var h=d.sibling,m=d.return;if(hR(d),d===u){mt=null;break}if(h!==null){h.return=m,mt=h;break}mt=m}}}var g=i.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var y=p.sibling;p.sibling=null,p=y}while(p!==null)}}mt=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,mt=o;else e:for(;mt!==null;){if(i=mt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:cm(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,mt=b;break e}mt=i.return}}var x=e.current;for(mt=x;mt!==null;){o=mt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,mt=w;else e:for(o=x;mt!==null;){if(l=mt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:fv(9,l)}}catch(j){Xr(l,l.return,j)}if(l===o){mt=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,mt=v;break e}mt=l.return}}if(ar=a,ec(),Bi&&typeof Bi.onPostCommitFiberRoot=="function")try{Bi.onPostCommitFiberRoot(av,e)}catch{}n=!0}return n}finally{Nr=r,ks.transition=t}}return!1}function zA(e,t,r){t=sf(r,t),t=rR(e,t,1),e=Cl(e,t,1),t=_a(),e!==null&&(qp(e,1,t),Ua(e,t))}function Xr(e,t,r){if(e.tag===3)zA(e,e,r);else for(;t!==null;){if(t.tag===3){zA(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Dl===null||!Dl.has(n))){e=sf(r,e),e=nR(t,e,1),t=Cl(t,e,1),e=_a(),t!==null&&(qp(t,1,e),Ua(t,e));break}}t=t.return}}function sH(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=_a(),e.pingedLanes|=e.suspendedLanes&r,$n===e&&(Xn&r)===r&&(En===4||En===3&&(Xn&130023424)===Xn&&500>tn()-B2?Hc(e,0):$2|=r),Ua(e,t)}function NR(e,t){t===0&&(e.mode&1?(t=L0,L0<<=1,!(L0&130023424)&&(L0=4194304)):t=1);var r=_a();e=Oo(e,t),e!==null&&(qp(e,t,r),Ua(e,r))}function iH(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),NR(e,r)}function oH(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(We(314))}n!==null&&n.delete(t),NR(e,r)}var SR;SR=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||$a.current)Ra=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ra=!1,KV(e,t,r);Ra=!!(e.flags&131072)}else Ra=!1,Ur&&t.flags&1048576&&AM(t,lx,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Lg(e,t),e=t.pendingProps;var a=tf(t,ma.current);Ad(t,r),a=P2(null,t,n,e,a,r);var i=I2();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ba(n)?(i=!0,ix(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,A2(t),a.updater=dv,t.stateNode=a,a._reactInternals=t,wj(t,n,e,r),t=Nj(null,t,n,!0,i,r)):(t.tag=0,Ur&&i&&b2(t),va(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Lg(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=cH(n),e=Gs(n,e),a){case 0:t=jj(null,t,n,e,r);break e;case 1:t=MA(null,t,n,e,r);break e;case 11:t=PA(null,t,n,e,r);break e;case 14:t=IA(null,t,n,Gs(n.type,e),r);break e}throw Error(We(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Gs(n,a),jj(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Gs(n,a),MA(e,t,n,a,r);case 3:e:{if(oR(t),e===null)throw Error(We(387));n=t.pendingProps,i=t.memoizedState,a=i.element,IM(e,t),dx(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=sf(Error(We(423)),t),t=RA(e,t,n,r,a);break e}else if(n!==a){a=sf(Error(We(424)),t),t=RA(e,t,n,r,a);break e}else for(is=Al(t.stateNode.containerInfo.firstChild),ls=t,Ur=!0,Zs=null,r=OM(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(rf(),n===a){t=Po(e,t,r);break e}va(e,t,n,r)}t=t.child}return t;case 5:return MM(t),e===null&&xj(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,fj(n,a)?o=null:i!==null&&fj(n,i)&&(t.flags|=32),iR(e,t),va(e,t,o,r),t.child;case 6:return e===null&&xj(t),null;case 13:return lR(e,t,r);case 4:return C2(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=nf(t,null,n,r):va(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Gs(n,a),PA(e,t,n,a,r);case 7:return va(e,t,t.pendingProps,r),t.child;case 8:return va(e,t,t.pendingProps.children,r),t.child;case 12:return va(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Pr(cx,n._currentValue),n._currentValue=o,i!==null)if(hi(i.value,o)){if(i.children===a.children&&!$a.current){t=Po(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=jo(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),yj(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(We(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),yj(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}va(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ad(t,r),a=Is(a),n=n(a),t.flags|=1,va(e,t,n,r),t.child;case 14:return n=t.type,a=Gs(n,t.pendingProps),a=Gs(n.type,a),IA(e,t,n,a,r);case 15:return aR(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Gs(n,a),Lg(e,t),t.tag=1,Ba(n)?(e=!0,ix(t)):e=!1,Ad(t,r),tR(t,n,a),wj(t,n,a,r),Nj(null,t,n,!0,e,r);case 19:return cR(e,t,r);case 22:return sR(e,t,r)}throw Error(We(156,t.tag))};function _R(e,t){return JI(e,t)}function lH(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(e,t,r,n){return new lH(e,t,r,n)}function H2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cH(e){if(typeof e=="function")return H2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===c2)return 11;if(e===u2)return 14}return 2}function Ol(e,t){var r=e.alternate;return r===null?(r=As(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ug(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")H2(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case cd:return zc(r.children,a,i,t);case l2:o=8,a|=8;break;case Hb:return e=As(12,r,t,a|2),e.elementType=Hb,e.lanes=i,e;case zb:return e=As(13,r,t,a),e.elementType=zb,e.lanes=i,e;case qb:return e=As(19,r,t,a),e.elementType=qb,e.lanes=i,e;case MI:return mv(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case PI:o=10;break e;case II:o=9;break e;case c2:o=11;break e;case u2:o=14;break e;case el:o=16,n=null;break e}throw Error(We(130,e==null?e:typeof e,""))}return t=As(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function zc(e,t,r,n){return e=As(7,e,n,t),e.lanes=r,e}function mv(e,t,r,n){return e=As(22,e,n,t),e.elementType=MI,e.lanes=r,e.stateNode={isHidden:!1},e}function Aw(e,t,r){return e=As(6,e,null,t),e.lanes=r,e}function Cw(e,t,r){return t=As(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function uH(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cw(0),this.expirationTimes=cw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cw(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function z2(e,t,r,n,a,i,o,l,c){return e=new uH(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=As(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},A2(i),e}function dH(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ld,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function TR(e){if(!e)return Bl;e=e._reactInternals;e:{if(vu(e)!==e||e.tag!==1)throw Error(We(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ba(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(We(171))}if(e.tag===1){var r=e.type;if(Ba(r))return TM(e,r,t)}return t}function ER(e,t,r,n,a,i,o,l,c){return e=z2(r,n,!0,e,a,i,o,l,c),e.context=TR(null),r=e.current,n=_a(),a=kl(r),i=jo(n,a),i.callback=t??null,Cl(r,i,a),e.current.lanes=a,qp(e,a,n),Ua(e,n),e}function pv(e,t,r,n){var a=t.current,i=_a(),o=kl(a);return r=TR(r),t.context===null?t.context=r:t.pendingContext=r,t=jo(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Cl(a,t,o),e!==null&&(ci(e,a,o,i),Mg(e,a,o)),o}function vx(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function q2(e,t){qA(e,t),(e=e.alternate)&&qA(e,t)}function fH(){return null}var AR=typeof reportError=="function"?reportError:function(e){console.error(e)};function G2(e){this._internalRoot=e}gv.prototype.render=G2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(We(409));pv(e,t,null,null)};gv.prototype.unmount=G2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;eu(function(){pv(null,e,null,null)}),t[ko]=null}};function gv(e){this._internalRoot=e}gv.prototype.unstable_scheduleHydration=function(e){if(e){var t=sM();e={blockedOn:null,target:e,priority:t};for(var r=0;r<al.length&&t!==0&&t<al[r].priority;r++);al.splice(r,0,e),r===0&&oM(e)}};function K2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function GA(){}function hH(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=vx(o);i.call(u)}}var o=ER(t,n,e,0,null,!1,!1,"",GA);return e._reactRootContainer=o,e[ko]=o.current,Pm(e.nodeType===8?e.parentNode:e),eu(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=vx(c);l.call(u)}}var c=z2(e,0,!1,null,null,!1,!1,"",GA);return e._reactRootContainer=c,e[ko]=c.current,Pm(e.nodeType===8?e.parentNode:e),eu(function(){pv(t,c,r,n)}),c}function yv(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=vx(o);l.call(c)}}pv(t,o,e,a)}else o=hH(r,t,e,a,n);return vx(o)}nM=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Kh(t.pendingLanes);r!==0&&(h2(t,r|1),Ua(t,tn()),!(ar&6)&&(of=tn()+500,ec()))}break;case 13:eu(function(){var n=Oo(e,1);if(n!==null){var a=_a();ci(n,e,1,a)}}),q2(e,1)}};m2=function(e){if(e.tag===13){var t=Oo(e,134217728);if(t!==null){var r=_a();ci(t,e,134217728,r)}q2(e,134217728)}};aM=function(e){if(e.tag===13){var t=kl(e),r=Oo(e,t);if(r!==null){var n=_a();ci(r,e,t,n)}q2(e,t)}};sM=function(){return Nr};iM=function(e,t){var r=Nr;try{return Nr=e,t()}finally{Nr=r}};rj=function(e,t,r){switch(t){case"input":if(Yb(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=lv(n);if(!a)throw Error(We(90));FI(n),Yb(n,a)}}}break;case"textarea":$I(e,r);break;case"select":t=r.value,t!=null&&Sd(e,!!r.multiple,t,!1)}};qI=U2;GI=eu;var mH={usingClientEntryPoint:!1,Events:[Kp,hd,lv,HI,zI,U2]},Eh={findFiberByHostInstance:Tc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pH={bundleType:Eh.bundleType,version:Eh.version,rendererPackageName:Eh.rendererPackageName,rendererConfig:Eh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=XI(e),e===null?null:e.stateNode},findFiberByHostInstance:Eh.findFiberByHostInstance||fH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Y0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Y0.isDisabled&&Y0.supportsFiber)try{av=Y0.inject(pH),Bi=Y0}catch{}}ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mH;ms.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!K2(t))throw Error(We(200));return dH(e,t,null,r)};ms.createRoot=function(e,t){if(!K2(e))throw Error(We(299));var r=!1,n="",a=AR;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=z2(e,1,!1,null,null,r,!1,n,a),e[ko]=t.current,Pm(e.nodeType===8?e.parentNode:e),new G2(t)};ms.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(We(188)):(e=Object.keys(e).join(","),Error(We(268,e)));return e=XI(t),e=e===null?null:e.stateNode,e};ms.flushSync=function(e){return eu(e)};ms.hydrate=function(e,t,r){if(!xv(t))throw Error(We(200));return yv(null,e,t,!0,r)};ms.hydrateRoot=function(e,t,r){if(!K2(e))throw Error(We(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=AR;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=ER(t,null,e,1,r??null,a,!1,i,o),e[ko]=t.current,Pm(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new gv(t)};ms.render=function(e,t,r){if(!xv(t))throw Error(We(200));return yv(null,e,t,!1,r)};ms.unmountComponentAtNode=function(e){if(!xv(e))throw Error(We(40));return e._reactRootContainer?(eu(function(){yv(null,null,e,!1,function(){e._reactRootContainer=null,e[ko]=null})}),!0):!1};ms.unstable_batchedUpdates=U2;ms.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!xv(r))throw Error(We(200));if(e==null||e._reactInternals===void 0)throw Error(We(38));return yv(e,t,r,!1,n)};ms.version="18.3.1-next-f1338f8080-20240426";function CR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CR)}catch(e){console.error(e)}}CR(),CI.exports=ms;var wu=CI.exports;const gH=Cr(wu);var DR,KA=wu;DR=KA.createRoot,KA.hydrateRoot;function xH(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var r,n,a,i,o=[],l="",c=e.split("/");for(c[0]||c.shift();a=c.shift();)r=a[0],r==="*"?(o.push(r),l+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=a.indexOf("?",1),i=a.indexOf(".",1),o.push(a.substring(1,~n?n:~i?i:a.length)),l+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~n?"?":"")+"\\"+a.substring(i))):l+="/"+a;return{keys:o,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var kR={exports:{}},OR={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lf=N;function yH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vH=typeof Object.is=="function"?Object.is:yH,wH=lf.useState,bH=lf.useEffect,jH=lf.useLayoutEffect,NH=lf.useDebugValue;function SH(e,t){var r=t(),n=wH({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return jH(function(){a.value=r,a.getSnapshot=t,Dw(a)&&i({inst:a})},[e,r,t]),bH(function(){return Dw(a)&&i({inst:a}),e(function(){Dw(a)&&i({inst:a})})},[e]),NH(r),r}function Dw(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!vH(e,r)}catch{return!0}}function _H(e,t){return t()}var TH=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_H:SH;OR.useSyncExternalStore=lf.useSyncExternalStore!==void 0?lf.useSyncExternalStore:TH;kR.exports=OR;var PR=kR.exports;const EH=a2.useInsertionEffect,AH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IR=AH?N.useLayoutEffect:N.useEffect,CH=EH||IR,Y2=e=>{const t=N.useRef([e,(...r)=>t[0](...r)]).current;return CH(()=>{t[0]=e}),t[1]},DH="popstate",X2="pushState",Q2="replaceState",kH="hashchange",YA=[DH,X2,Q2,kH],OH=e=>{for(const t of YA)addEventListener(t,e);return()=>{for(const t of YA)removeEventListener(t,e)}},MR=(e,t)=>PR.useSyncExternalStore(OH,e,t),PH=()=>location.search,IH=({ssrSearch:e=""}={})=>MR(PH,()=>e),XA=()=>location.pathname,MH=({ssrPath:e}={})=>MR(XA,e?()=>e:XA),RH=(e,{replace:t=!1,state:r=null}={})=>history[t?Q2:X2](r,"",e),FH=(e={})=>[MH(e),RH],QA=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[QA]>"u"){for(const e of[X2,Q2]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),n=new Event(e);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,QA,{value:!0})}const LH=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",RR=(e="")=>e==="/"?"":e,$H=(e,t)=>e[0]==="~"?e.slice(1):RR(t)+e,BH=(e="",t)=>LH(JA(RR(e)),JA(t)),JA=e=>{try{return decodeURI(e)}catch{return e}},FR={hook:FH,searchHook:IH,parser:xH,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},LR=N.createContext(FR),bu=()=>N.useContext(LR),$R={},BR=N.createContext($R),J2=()=>N.useContext(BR),Xp=e=>{const[t,r]=e.hook(e);return[BH(e.base,t),Y2((n,a)=>r($H(n,e.base),a))]},qf=()=>Xp(bu()),Z2=(e,t,r,n)=>{const{pattern:a,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",n),o=a.exec(r)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,h)=>[f,c[h]])):o.groups;let d={...c};return u&&Object.assign(d,u),d})(),...n?[l]:[]]:[!1,null]},UR=e=>Z2(bu().parser,e,qf()[0]),UH=({children:e,...t})=>{var d,f;const r=bu(),n=t.hook?FR:r;let a=n;const[i,o]=((d=t.ssrPath)==null?void 0:d.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=i),t.hrefs=t.hrefs??((f=t.hook)==null?void 0:f.hrefs);let l=N.useRef({}),c=l.current,u=c;for(let h in n){const m=h==="base"?n[h]+(t[h]||""):t[h]||n[h];c===u&&m!==u[h]&&(l.current=u={...u}),u[h]=m,(m!==n[h]||m!==a[h])&&(a=u)}return N.createElement(LR.Provider,{value:a,children:e})},ZA=({children:e,component:t},r)=>t?N.createElement(t,{params:r}):typeof e=="function"?e(r):e,WH=e=>{let t=N.useRef($R);const r=t.current;return t.current=Object.keys(e).length!==Object.keys(r).length||Object.entries(e).some(([n,a])=>a!==r[n])?e:r},mr=({path:e,nest:t,match:r,...n})=>{const a=bu(),[i]=Xp(a),[o,l,c]=r??Z2(a.parser,e,i,t),u=WH({...J2(),...l});if(!o)return null;const d=c?N.createElement(UH,{base:c},ZA(n,u)):ZA(n,u);return N.createElement(BR.Provider,{value:u,children:d})},Xh=N.forwardRef((e,t)=>{const r=bu(),[n,a]=Xp(r),{to:i="",href:o=i,onClick:l,asChild:c,children:u,className:d,replace:f,state:h,...m}=e,g=Y2(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(l==null||l(y),y.defaultPrevented||(y.preventDefault(),a(o,e)))}),p=r.hrefs(o[0]==="~"?o.slice(1):r.base+o,r);return c&&N.isValidElement(u)?N.cloneElement(u,{onClick:g,href:p}):N.createElement("a",{...m,onClick:g,href:p,className:d!=null&&d.call?d(n===o):d,children:u,ref:t})}),WR=e=>Array.isArray(e)?e.flatMap(t=>WR(t&&t.type===N.Fragment?t.props.children:t)):[e],VH=({children:e,location:t})=>{const r=bu(),[n]=Xp(r);for(const a of WR(e)){let i=0;if(N.isValidElement(a)&&(i=Z2(r.parser,a.props.path,t||n,a.props.nest))[0])return N.cloneElement(a,{match:i})}return null},HH=e=>{const{to:t,href:r=t}=e,n=bu(),[,a]=Xp(n),i=Y2(()=>a(t||r,e)),{ssrContext:o}=n;return IR(()=>{i()},[]),o&&(o.redirectTo=t),null};var Gf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tu=typeof window>"u"||"Deno"in globalThis;function wa(){}function zH(e,t){return typeof e=="function"?e(t):e}function Mj(e){return typeof e=="number"&&e>=0&&e!==1/0}function VR(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Pl(e,t){return typeof e=="function"?e(t):e}function Ss(e,t){return typeof e=="function"?e(t):e}function eC(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==e_(o,t.options))return!1}else if(!Wm(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function tC(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(ru(t.options.mutationKey)!==ru(i))return!1}else if(!Wm(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function e_(e,t){return((t==null?void 0:t.queryKeyHashFn)||ru)(e)}function ru(e){return JSON.stringify(e,(t,r)=>Rj(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Wm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Wm(e[r],t[r])):!1}function HR(e,t){if(e===t)return e;const r=rC(e)&&rC(t);if(r||Rj(e)&&Rj(t)){const n=r?e:Object.keys(e),a=n.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<o;d++){const f=r?d:i[d];(!r&&c.has(f)||r)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,u++):(l[f]=HR(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&u++)}return a===o&&u===a?e:l}return t}function wx(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function rC(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Rj(e){if(!nC(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!nC(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function nC(e){return Object.prototype.toString.call(e)==="[object Object]"}function qH(e){return new Promise(t=>{setTimeout(t,e)})}function Fj(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?HR(e,t):t}function GH(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function KH(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var t_=Symbol();function zR(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===t_?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function qR(e,t){return typeof e=="function"?e(...t):!!e}var Mc,ol,Wd,lI,YH=(lI=class extends Gf{constructor(){super();Ot(this,Mc);Ot(this,ol);Ot(this,Wd);ct(this,Wd,t=>{if(!tu&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){me(this,ol)||this.setEventListener(me(this,Wd))}onUnsubscribe(){var t;this.hasListeners()||((t=me(this,ol))==null||t.call(this),ct(this,ol,void 0))}setEventListener(t){var r;ct(this,Wd,t),(r=me(this,ol))==null||r.call(this),ct(this,ol,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){me(this,Mc)!==t&&(ct(this,Mc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof me(this,Mc)=="boolean"?me(this,Mc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Mc=new WeakMap,ol=new WeakMap,Wd=new WeakMap,lI),r_=new YH,Vd,ll,Hd,cI,XH=(cI=class extends Gf{constructor(){super();Ot(this,Vd,!0);Ot(this,ll);Ot(this,Hd);ct(this,Hd,t=>{if(!tu&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){me(this,ll)||this.setEventListener(me(this,Hd))}onUnsubscribe(){var t;this.hasListeners()||((t=me(this,ll))==null||t.call(this),ct(this,ll,void 0))}setEventListener(t){var r;ct(this,Hd,t),(r=me(this,ll))==null||r.call(this),ct(this,ll,t(this.setOnline.bind(this)))}setOnline(t){me(this,Vd)!==t&&(ct(this,Vd,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return me(this,Vd)}},Vd=new WeakMap,ll=new WeakMap,Hd=new WeakMap,cI),bx=new XH;function Lj(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function QH(e){return Math.min(1e3*2**e,3e4)}function GR(e){return(e??"online")==="online"?bx.isOnline():!0}var KR=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function kw(e){return e instanceof KR}function YR(e){let t=!1,r=0,n=!1,a;const i=Lj(),o=p=>{var y;n||(h(new KR(p)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>r_.isFocused()&&(e.networkMode==="always"||bx.isOnline())&&e.canRun(),d=()=>GR(e.networkMode)&&e.canRun(),f=p=>{var y;n||(n=!0,(y=e.onSuccess)==null||y.call(e,p),a==null||a(),i.resolve(p))},h=p=>{var y;n||(n=!0,(y=e.onError)==null||y.call(e,p),a==null||a(),i.reject(p))},m=()=>new Promise(p=>{var y;a=b=>{(n||u())&&p(b)},(y=e.onPause)==null||y.call(e)}).then(()=>{var p;a=void 0,n||(p=e.onContinue)==null||p.call(e)}),g=()=>{if(n)return;let p;const y=r===0?e.initialPromise:void 0;try{p=y??e.fn()}catch(b){p=Promise.reject(b)}Promise.resolve(p).then(f).catch(b=>{var S;if(n)return;const x=e.retry??(tu?0:3),w=e.retryDelay??QH,v=typeof w=="function"?w(r,b):w,j=x===!0||typeof x=="number"&&r<x||typeof x=="function"&&x(r,b);if(t||!j){h(b);return}r++,(S=e.onFail)==null||S.call(e,r,b),qH(v).then(()=>u()?void 0:m()).then(()=>{t?h(b):g()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?g():m().then(g),i)}}var JH=e=>setTimeout(e,0);function ZH(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=JH;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Tn=ZH(),Rc,uI,XR=(uI=class{constructor(){Ot(this,Rc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Mj(this.gcTime)&&ct(this,Rc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(tu?1/0:5*60*1e3))}clearGcTimeout(){me(this,Rc)&&(clearTimeout(me(this,Rc)),ct(this,Rc,void 0))}},Rc=new WeakMap,uI),zd,Fc,js,Lc,na,Up,$c,Ys,io,dI,ez=(dI=class extends XR{constructor(t){super();Ot(this,Ys);Ot(this,zd);Ot(this,Fc);Ot(this,js);Ot(this,Lc);Ot(this,na);Ot(this,Up);Ot(this,$c);ct(this,$c,!1),ct(this,Up,t.defaultOptions),this.setOptions(t.options),this.observers=[],ct(this,Lc,t.client),ct(this,js,me(this,Lc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ct(this,zd,tz(this.options)),this.state=t.state??me(this,zd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=me(this,na))==null?void 0:t.promise}setOptions(t){this.options={...me(this,Up),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&me(this,js).remove(this)}setData(t,r){const n=Fj(this.state.data,t,this.options);return qt(this,Ys,io).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){qt(this,Ys,io).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=me(this,na))==null?void 0:n.promise;return(a=me(this,na))==null||a.cancel(t),r?r.then(wa).catch(wa):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(me(this,zd))}isActive(){return this.observers.some(t=>Ss(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===t_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Pl(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!VR(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=me(this,na))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=me(this,na))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),me(this,js).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(me(this,na)&&(me(this,$c)?me(this,na).cancel({revert:!0}):me(this,na).cancelRetry()),this.scheduleGc()),me(this,js).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||qt(this,Ys,io).call(this,{type:"invalidate"})}fetch(t,r){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(me(this,na))return me(this,na).continueRetry(),me(this,na).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const n=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(ct(this,$c,!0),n.signal)})},i=()=>{const h=zR(this.options,r),g=(()=>{const p={client:me(this,Lc),queryKey:this.queryKey,meta:this.meta};return a(p),p})();return ct(this,$c,!1),this.options.persister?this.options.persister(h,g,this):h(g)},l=(()=>{const h={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:me(this,Lc),state:this.state,fetchFn:i};return a(h),h})();(u=this.options.behavior)==null||u.onFetch(l,this),ct(this,Fc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&qt(this,Ys,io).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=h=>{var m,g,p,y;kw(h)&&h.silent||qt(this,Ys,io).call(this,{type:"error",error:h}),kw(h)||((g=(m=me(this,js).config).onError)==null||g.call(m,h,this),(y=(p=me(this,js).config).onSettled)==null||y.call(p,this.state.data,h,this)),this.scheduleGc()};return ct(this,na,YR({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:h=>{var m,g,p,y;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(b){c(b);return}(g=(m=me(this,js).config).onSuccess)==null||g.call(m,h,this),(y=(p=me(this,js).config).onSettled)==null||y.call(p,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,m)=>{qt(this,Ys,io).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{qt(this,Ys,io).call(this,{type:"pause"})},onContinue:()=>{qt(this,Ys,io).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),me(this,na).start()}},zd=new WeakMap,Fc=new WeakMap,js=new WeakMap,Lc=new WeakMap,na=new WeakMap,Up=new WeakMap,$c=new WeakMap,Ys=new WeakSet,io=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...QR(n.data,this.options),fetchMeta:t.meta??null};case"success":return ct(this,Fc,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return kw(a)&&a.revert&&me(this,Fc)?{...me(this,Fc),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Tn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),me(this,js).notify({query:this,type:"updated",action:t})})},dI);function QR(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:GR(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function tz(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ai,fI,rz=(fI=class extends Gf{constructor(t={}){super();Ot(this,Ai);this.config=t,ct(this,Ai,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??e_(a,r);let o=this.get(i);return o||(o=new ez({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){me(this,Ai).has(t.queryHash)||(me(this,Ai).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=me(this,Ai).get(t.queryHash);r&&(t.destroy(),r===t&&me(this,Ai).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Tn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return me(this,Ai).get(t)}getAll(){return[...me(this,Ai).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>eC(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>eC(t,n)):r}notify(t){Tn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Tn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Tn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ai=new WeakMap,fI),Ci,ga,Bc,Di,Jo,hI,nz=(hI=class extends XR{constructor(t){super();Ot(this,Di);Ot(this,Ci);Ot(this,ga);Ot(this,Bc);this.mutationId=t.mutationId,ct(this,ga,t.mutationCache),ct(this,Ci,[]),this.state=t.state||JR(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){me(this,Ci).includes(t)||(me(this,Ci).push(t),this.clearGcTimeout(),me(this,ga).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ct(this,Ci,me(this,Ci).filter(r=>r!==t)),this.scheduleGc(),me(this,ga).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){me(this,Ci).length||(this.state.status==="pending"?this.scheduleGc():me(this,ga).remove(this))}continue(){var t;return((t=me(this,Bc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,u,d,f,h,m,g,p,y,b,x,w,v,j,S,_,A;const r=()=>{qt(this,Di,Jo).call(this,{type:"continue"})};ct(this,Bc,YR({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,D)=>{qt(this,Di,Jo).call(this,{type:"failed",failureCount:C,error:D})},onPause:()=>{qt(this,Di,Jo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>me(this,ga).canRun(this)}));const n=this.state.status==="pending",a=!me(this,Bc).canStart();try{if(n)r();else{qt(this,Di,Jo).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=me(this,ga).config).onMutate)==null?void 0:o.call(i,t,this));const D=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));D!==this.state.context&&qt(this,Di,Jo).call(this,{type:"pending",context:D,variables:t,isPaused:a})}const C=await me(this,Bc).start();return await((d=(u=me(this,ga).config).onSuccess)==null?void 0:d.call(u,C,t,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,C,t,this.state.context)),await((g=(m=me(this,ga).config).onSettled)==null?void 0:g.call(m,C,null,this.state.variables,this.state.context,this)),await((y=(p=this.options).onSettled)==null?void 0:y.call(p,C,null,t,this.state.context)),qt(this,Di,Jo).call(this,{type:"success",data:C}),C}catch(C){try{throw await((x=(b=me(this,ga).config).onError)==null?void 0:x.call(b,C,t,this.state.context,this)),await((v=(w=this.options).onError)==null?void 0:v.call(w,C,t,this.state.context)),await((S=(j=me(this,ga).config).onSettled)==null?void 0:S.call(j,void 0,C,this.state.variables,this.state.context,this)),await((A=(_=this.options).onSettled)==null?void 0:A.call(_,void 0,C,t,this.state.context)),C}finally{qt(this,Di,Jo).call(this,{type:"error",error:C})}}finally{me(this,ga).runNext(this)}}},Ci=new WeakMap,ga=new WeakMap,Bc=new WeakMap,Di=new WeakSet,Jo=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Tn.batch(()=>{me(this,Ci).forEach(n=>{n.onMutationUpdate(t)}),me(this,ga).notify({mutation:this,type:"updated",action:t})})},hI);function JR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var uo,Xs,Wp,mI,az=(mI=class extends Gf{constructor(t={}){super();Ot(this,uo);Ot(this,Xs);Ot(this,Wp);this.config=t,ct(this,uo,new Set),ct(this,Xs,new Map),ct(this,Wp,0)}build(t,r,n){const a=new nz({mutationCache:this,mutationId:++k0(this,Wp)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){me(this,uo).add(t);const r=X0(t);if(typeof r=="string"){const n=me(this,Xs).get(r);n?n.push(t):me(this,Xs).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(me(this,uo).delete(t)){const r=X0(t);if(typeof r=="string"){const n=me(this,Xs).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&me(this,Xs).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=X0(t);if(typeof r=="string"){const n=me(this,Xs).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=X0(t);if(typeof r=="string"){const a=(n=me(this,Xs).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Tn.batch(()=>{me(this,uo).forEach(t=>{this.notify({type:"removed",mutation:t})}),me(this,uo).clear(),me(this,Xs).clear()})}getAll(){return Array.from(me(this,uo))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>tC(r,n))}findAll(t={}){return this.getAll().filter(r=>tC(t,r))}notify(t){Tn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Tn.batch(()=>Promise.all(t.map(r=>r.continue().catch(wa))))}},uo=new WeakMap,Xs=new WeakMap,Wp=new WeakMap,mI);function X0(e){var t;return(t=e.options.scope)==null?void 0:t.id}function aC(e){return{onFetch:(t,r)=>{var d,f,h,m,g;const n=t.options,a=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const y=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},b=zR(t.options,t.fetchOptions),x=async(w,v,j)=>{if(p)return Promise.reject();if(v==null&&w.pages.length)return Promise.resolve(w);const _=(()=>{const k={client:t.client,queryKey:t.queryKey,pageParam:v,direction:j?"backward":"forward",meta:t.options.meta};return y(k),k})(),A=await b(_),{maxPages:C}=t.options,D=j?KH:GH;return{pages:D(w.pages,A,C),pageParams:D(w.pageParams,v,C)}};if(a&&i.length){const w=a==="backward",v=w?sz:sC,j={pages:i,pageParams:o},S=v(n,j);l=await x(j,S,w)}else{const w=e??i.length;do{const v=c===0?o[0]??n.initialPageParam:sC(n,l);if(c>0&&v==null)break;l=await x(l,v),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var p,y;return(y=(p=t.options).persister)==null?void 0:y.call(p,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function sC(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function sz(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Yr,cl,ul,qd,Gd,dl,Kd,Yd,pI,iz=(pI=class{constructor(e={}){Ot(this,Yr);Ot(this,cl);Ot(this,ul);Ot(this,qd);Ot(this,Gd);Ot(this,dl);Ot(this,Kd);Ot(this,Yd);ct(this,Yr,e.queryCache||new rz),ct(this,cl,e.mutationCache||new az),ct(this,ul,e.defaultOptions||{}),ct(this,qd,new Map),ct(this,Gd,new Map),ct(this,dl,0)}mount(){k0(this,dl)._++,me(this,dl)===1&&(ct(this,Kd,r_.subscribe(async e=>{e&&(await this.resumePausedMutations(),me(this,Yr).onFocus())})),ct(this,Yd,bx.subscribe(async e=>{e&&(await this.resumePausedMutations(),me(this,Yr).onOnline())})))}unmount(){var e,t;k0(this,dl)._--,me(this,dl)===0&&((e=me(this,Kd))==null||e.call(this),ct(this,Kd,void 0),(t=me(this,Yd))==null||t.call(this),ct(this,Yd,void 0))}isFetching(e){return me(this,Yr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return me(this,cl).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=me(this,Yr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=me(this,Yr).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Pl(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return me(this,Yr).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=me(this,Yr).get(n.queryHash),i=a==null?void 0:a.state.data,o=zH(t,i);if(o!==void 0)return me(this,Yr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Tn.batch(()=>me(this,Yr).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=me(this,Yr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=me(this,Yr);Tn.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=me(this,Yr);return Tn.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Tn.batch(()=>me(this,Yr).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(wa).catch(wa)}invalidateQueries(e,t={}){return Tn.batch(()=>(me(this,Yr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Tn.batch(()=>me(this,Yr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(wa)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(wa)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=me(this,Yr).build(this,t);return r.isStaleByTime(Pl(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(wa).catch(wa)}fetchInfiniteQuery(e){return e.behavior=aC(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(wa).catch(wa)}ensureInfiniteQueryData(e){return e.behavior=aC(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return bx.isOnline()?me(this,cl).resumePausedMutations():Promise.resolve()}getQueryCache(){return me(this,Yr)}getMutationCache(){return me(this,cl)}getDefaultOptions(){return me(this,ul)}setDefaultOptions(e){ct(this,ul,e)}setQueryDefaults(e,t){me(this,qd).set(ru(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...me(this,qd).values()],r={};return t.forEach(n=>{Wm(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){me(this,Gd).set(ru(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...me(this,Gd).values()],r={};return t.forEach(n=>{Wm(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...me(this,ul).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=e_(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===t_&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...me(this,ul).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){me(this,Yr).clear(),me(this,cl).clear()}},Yr=new WeakMap,cl=new WeakMap,ul=new WeakMap,qd=new WeakMap,Gd=new WeakMap,dl=new WeakMap,Kd=new WeakMap,Yd=new WeakMap,pI),Oa,tr,Vp,xa,Uc,Xd,fl,hl,Hp,Qd,Jd,Wc,Vc,ml,Zd,gr,Qh,$j,Bj,Uj,Wj,Vj,Hj,zj,ZR,gI,oz=(gI=class extends Gf{constructor(t,r){super();Ot(this,gr);Ot(this,Oa);Ot(this,tr);Ot(this,Vp);Ot(this,xa);Ot(this,Uc);Ot(this,Xd);Ot(this,fl);Ot(this,hl);Ot(this,Hp);Ot(this,Qd);Ot(this,Jd);Ot(this,Wc);Ot(this,Vc);Ot(this,ml);Ot(this,Zd,new Set);this.options=r,ct(this,Oa,t),ct(this,hl,null),ct(this,fl,Lj()),this.options.experimental_prefetchInRender||me(this,fl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(me(this,tr).addObserver(this),iC(me(this,tr),this.options)?qt(this,gr,Qh).call(this):this.updateResult(),qt(this,gr,Wj).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return qj(me(this,tr),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return qj(me(this,tr),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,qt(this,gr,Vj).call(this),qt(this,gr,Hj).call(this),me(this,tr).removeObserver(this)}setOptions(t){const r=this.options,n=me(this,tr);if(this.options=me(this,Oa).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ss(this.options.enabled,me(this,tr))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");qt(this,gr,zj).call(this),me(this,tr).setOptions(this.options),r._defaulted&&!wx(this.options,r)&&me(this,Oa).getQueryCache().notify({type:"observerOptionsUpdated",query:me(this,tr),observer:this});const a=this.hasListeners();a&&oC(me(this,tr),n,this.options,r)&&qt(this,gr,Qh).call(this),this.updateResult(),a&&(me(this,tr)!==n||Ss(this.options.enabled,me(this,tr))!==Ss(r.enabled,me(this,tr))||Pl(this.options.staleTime,me(this,tr))!==Pl(r.staleTime,me(this,tr)))&&qt(this,gr,$j).call(this);const i=qt(this,gr,Bj).call(this);a&&(me(this,tr)!==n||Ss(this.options.enabled,me(this,tr))!==Ss(r.enabled,me(this,tr))||i!==me(this,ml))&&qt(this,gr,Uj).call(this,i)}getOptimisticResult(t){const r=me(this,Oa).getQueryCache().build(me(this,Oa),t),n=this.createResult(r,t);return cz(this,n)&&(ct(this,xa,n),ct(this,Xd,this.options),ct(this,Uc,me(this,tr).state)),n}getCurrentResult(){return me(this,xa)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),Reflect.get(n,a))})}trackProp(t){me(this,Zd).add(t)}getCurrentQuery(){return me(this,tr)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=me(this,Oa).defaultQueryOptions(t),n=me(this,Oa).getQueryCache().build(me(this,Oa),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return qt(this,gr,Qh).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),me(this,xa)))}createResult(t,r){var C;const n=me(this,tr),a=this.options,i=me(this,xa),o=me(this,Uc),l=me(this,Xd),u=t!==n?t.state:me(this,Vp),{state:d}=t;let f={...d},h=!1,m;if(r._optimisticResults){const D=this.hasListeners(),k=!D&&iC(t,r),O=D&&oC(t,n,r,a);(k||O)&&(f={...f,...QR(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:p,status:y}=f;m=f.data;let b=!1;if(r.placeholderData!==void 0&&m===void 0&&y==="pending"){let D;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(D=i.data,b=!0):D=typeof r.placeholderData=="function"?r.placeholderData((C=me(this,Jd))==null?void 0:C.state.data,me(this,Jd)):r.placeholderData,D!==void 0&&(y="success",m=Fj(i==null?void 0:i.data,D,r),h=!0)}if(r.select&&m!==void 0&&!b)if(i&&m===(o==null?void 0:o.data)&&r.select===me(this,Hp))m=me(this,Qd);else try{ct(this,Hp,r.select),m=r.select(m),m=Fj(i==null?void 0:i.data,m,r),ct(this,Qd,m),ct(this,hl,null)}catch(D){ct(this,hl,D)}me(this,hl)&&(g=me(this,hl),m=me(this,Qd),p=Date.now(),y="error");const x=f.fetchStatus==="fetching",w=y==="pending",v=y==="error",j=w&&x,S=m!==void 0,A={status:y,fetchStatus:f.fetchStatus,isPending:w,isSuccess:y==="success",isError:v,isInitialLoading:j,isLoading:j,data:m,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:p,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:x,isRefetching:x&&!w,isLoadingError:v&&!S,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:v&&S,isStale:n_(t,r),refetch:this.refetch,promise:me(this,fl),isEnabled:Ss(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const D=V=>{A.status==="error"?V.reject(A.error):A.data!==void 0&&V.resolve(A.data)},k=()=>{const V=ct(this,fl,A.promise=Lj());D(V)},O=me(this,fl);switch(O.status){case"pending":t.queryHash===n.queryHash&&D(O);break;case"fulfilled":(A.status==="error"||A.data!==O.value)&&k();break;case"rejected":(A.status!=="error"||A.error!==O.reason)&&k();break}}return A}updateResult(){const t=me(this,xa),r=this.createResult(me(this,tr),this.options);if(ct(this,Uc,me(this,tr).state),ct(this,Xd,this.options),me(this,Uc).data!==void 0&&ct(this,Jd,me(this,tr)),wx(r,t))return;ct(this,xa,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!me(this,Zd).size)return!0;const o=new Set(i??me(this,Zd));return this.options.throwOnError&&o.add("error"),Object.keys(me(this,xa)).some(l=>{const c=l;return me(this,xa)[c]!==t[c]&&o.has(c)})};qt(this,gr,ZR).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&qt(this,gr,Wj).call(this)}},Oa=new WeakMap,tr=new WeakMap,Vp=new WeakMap,xa=new WeakMap,Uc=new WeakMap,Xd=new WeakMap,fl=new WeakMap,hl=new WeakMap,Hp=new WeakMap,Qd=new WeakMap,Jd=new WeakMap,Wc=new WeakMap,Vc=new WeakMap,ml=new WeakMap,Zd=new WeakMap,gr=new WeakSet,Qh=function(t){qt(this,gr,zj).call(this);let r=me(this,tr).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(wa)),r},$j=function(){qt(this,gr,Vj).call(this);const t=Pl(this.options.staleTime,me(this,tr));if(tu||me(this,xa).isStale||!Mj(t))return;const n=VR(me(this,xa).dataUpdatedAt,t)+1;ct(this,Wc,setTimeout(()=>{me(this,xa).isStale||this.updateResult()},n))},Bj=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(me(this,tr)):this.options.refetchInterval)??!1},Uj=function(t){qt(this,gr,Hj).call(this),ct(this,ml,t),!(tu||Ss(this.options.enabled,me(this,tr))===!1||!Mj(me(this,ml))||me(this,ml)===0)&&ct(this,Vc,setInterval(()=>{(this.options.refetchIntervalInBackground||r_.isFocused())&&qt(this,gr,Qh).call(this)},me(this,ml)))},Wj=function(){qt(this,gr,$j).call(this),qt(this,gr,Uj).call(this,qt(this,gr,Bj).call(this))},Vj=function(){me(this,Wc)&&(clearTimeout(me(this,Wc)),ct(this,Wc,void 0))},Hj=function(){me(this,Vc)&&(clearInterval(me(this,Vc)),ct(this,Vc,void 0))},zj=function(){const t=me(this,Oa).getQueryCache().build(me(this,Oa),this.options);if(t===me(this,tr))return;const r=me(this,tr);ct(this,tr,t),ct(this,Vp,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},ZR=function(t){Tn.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(me(this,xa))}),me(this,Oa).getQueryCache().notify({query:me(this,tr),type:"observerResultsUpdated"})})},gI);function lz(e,t){return Ss(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function iC(e,t){return lz(e,t)||e.state.data!==void 0&&qj(e,t,t.refetchOnMount)}function qj(e,t,r){if(Ss(t.enabled,e)!==!1&&Pl(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&n_(e,t)}return!1}function oC(e,t,r,n){return(e!==t||Ss(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&n_(e,r)}function n_(e,t){return Ss(t.enabled,e)!==!1&&e.isStaleByTime(Pl(t.staleTime,e))}function cz(e,t){return!wx(e.getCurrentResult(),t)}var pl,gl,Pa,fo,Co,Wg,Gj,xI,uz=(xI=class extends Gf{constructor(r,n){super();Ot(this,Co);Ot(this,pl);Ot(this,gl);Ot(this,Pa);Ot(this,fo);ct(this,pl,r),this.setOptions(n),this.bindMethods(),qt(this,Co,Wg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=me(this,pl).defaultMutationOptions(r),wx(this.options,n)||me(this,pl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:me(this,Pa),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&ru(n.mutationKey)!==ru(this.options.mutationKey)?this.reset():((a=me(this,Pa))==null?void 0:a.state.status)==="pending"&&me(this,Pa).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=me(this,Pa))==null||r.removeObserver(this)}onMutationUpdate(r){qt(this,Co,Wg).call(this),qt(this,Co,Gj).call(this,r)}getCurrentResult(){return me(this,gl)}reset(){var r;(r=me(this,Pa))==null||r.removeObserver(this),ct(this,Pa,void 0),qt(this,Co,Wg).call(this),qt(this,Co,Gj).call(this)}mutate(r,n){var a;return ct(this,fo,n),(a=me(this,Pa))==null||a.removeObserver(this),ct(this,Pa,me(this,pl).getMutationCache().build(me(this,pl),this.options)),me(this,Pa).addObserver(this),me(this,Pa).execute(r)}},pl=new WeakMap,gl=new WeakMap,Pa=new WeakMap,fo=new WeakMap,Co=new WeakSet,Wg=function(){var n;const r=((n=me(this,Pa))==null?void 0:n.state)??JR();ct(this,gl,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Gj=function(r){Tn.batch(()=>{var n,a,i,o,l,c,u,d;if(me(this,fo)&&this.hasListeners()){const f=me(this,gl).variables,h=me(this,gl).context;(r==null?void 0:r.type)==="success"?((a=(n=me(this,fo)).onSuccess)==null||a.call(n,r.data,f,h),(o=(i=me(this,fo)).onSettled)==null||o.call(i,r.data,null,f,h)):(r==null?void 0:r.type)==="error"&&((c=(l=me(this,fo)).onError)==null||c.call(l,r.error,f,h),(d=(u=me(this,fo)).onSettled)==null||d.call(u,void 0,r.error,f,h))}this.listeners.forEach(f=>{f(me(this,gl))})})},xI),eF=N.createContext(void 0),tc=e=>{const t=N.useContext(eF);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},dz=({client:e,children:t})=>(N.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(eF.Provider,{value:e,children:t})),tF=N.createContext(!1),fz=()=>N.useContext(tF);tF.Provider;function hz(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var mz=N.createContext(hz()),pz=()=>N.useContext(mz),gz=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},xz=e=>{N.useEffect(()=>{e.clearReset()},[e])},yz=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||qR(r,[e.error,n])),vz=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},wz=(e,t)=>e.isLoading&&e.isFetching&&!t,bz=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,lC=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function jz(e,t,r){var f,h,m,g,p;const n=fz(),a=pz(),i=tc(),o=i.defaultQueryOptions(e);(h=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,o),o._optimisticResults=n?"isRestoring":"optimistic",vz(o),gz(o,a),xz(a);const l=!i.getQueryCache().get(o.queryHash),[c]=N.useState(()=>new t(i,o)),u=c.getOptimisticResult(o),d=!n&&e.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(y=>{const b=d?c.subscribe(Tn.batchCalls(y)):wa;return c.updateResult(),b},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),N.useEffect(()=>{c.setOptions(o)},[o,c]),bz(o,u))throw lC(o,c,a);if(yz({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((g=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,u),o.experimental_prefetchInRender&&!tu&&wz(u,n)){const y=l?lC(o,c,a):(p=i.getQueryCache().get(o.queryHash))==null?void 0:p.promise;y==null||y.catch(wa).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Fe(e,t){return jz(e,oz)}function Ut(e,t){const r=tc(),[n]=N.useState(()=>new uz(r,e));N.useEffect(()=>{n.setOptions(e)},[n,e]);const a=N.useSyncExternalStore(N.useCallback(o=>n.subscribe(Tn.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=N.useCallback((o,l)=>{n.mutate(o,l).catch(wa)},[n]);if(a.error&&qR(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const gc="org_id",qu="user_id",Ah="role_id",Gu="role_name",Q0="user_type_id";class ya{static getOrgId(){if(typeof window>"u")return"60";const t=localStorage.getItem(gc);return console.log("[OrgContext] Reading org_id from localStorage:",t),t||"60"}static setOrgId(t){typeof window>"u"||localStorage.setItem(gc,t)}static getUserId(){return typeof window>"u"?"1435":localStorage.getItem(qu)||"1435"}static setUserId(t){typeof window>"u"||localStorage.setItem(qu,t)}static getRoleId(){return typeof window>"u"?null:localStorage.getItem(Ah)}static setRoleId(t){typeof window>"u"||localStorage.setItem(Ah,t)}static getRoleName(){return typeof window>"u"?null:localStorage.getItem(Gu)}static setRoleName(t){typeof window>"u"||localStorage.setItem(Gu,t)}static getUserTypeId(){return typeof window>"u"?null:localStorage.getItem(Q0)}static setUserTypeId(t){typeof window>"u"||localStorage.setItem(Q0,t)}static clear(){typeof window>"u"||(localStorage.removeItem(gc),localStorage.removeItem(qu),localStorage.removeItem(Ah),localStorage.removeItem(Gu),localStorage.removeItem(Q0))}static initialize(){if(typeof window>"u")return;!(localStorage.getItem(Ah)||localStorage.getItem(Gu))&&!localStorage.getItem(gc)?(console.log("[OrgContext] No JWT data found, setting default org_id to 60"),localStorage.setItem(gc,"60"),localStorage.setItem(qu,"1435")):console.log("[OrgContext] Found existing data - org_id:",localStorage.getItem(gc),"role:",localStorage.getItem(Gu))}static setJWTData(t){if(typeof window>"u")return;const n=localStorage.getItem(qu)||t.user_id;console.log("[OrgContext] Setting JWT data:",{org_id:t.org_id,user_id:n,role_name:t.role_name,forcedTo1435:!0}),localStorage.setItem(gc,t.org_id),localStorage.setItem(qu,n),localStorage.setItem(Ah,t.role_id),localStorage.setItem(Gu,t.role_name),localStorage.setItem(Q0,t.user_type_id)}static getContextData(){return{orgId:this.getOrgId(),userId:this.getUserId(),roleId:this.getRoleId(),roleName:this.getRoleName(),userTypeId:this.getUserTypeId()}}}typeof window<"u"&&ya.initialize();function rF(){const[e,t]=N.useState(""),[r,n]=N.useState(""),[a,i]=N.useState(null),[o,l]=N.useState(null),[c,u]=N.useState(null);return N.useEffect(()=>{const d=()=>{t(ya.getOrgId()),n(ya.getUserId()),i(ya.getRoleId()),l(ya.getRoleName()),u(ya.getUserTypeId())};d();const f=h=>{["org_id","user_id","role_id","role_name","user_type_id"].includes(h.key||"")&&d()};return window.addEventListener("storage",f),()=>window.removeEventListener("storage",f)},[]),{orgId:e,currentUserId:r,roleId:a,roleName:o,userTypeId:c,setOrgId:d=>{ya.setOrgId(d),t(d)},setUserId:d=>{ya.setUserId(d),n(d)},setRoleId:d=>{ya.setRoleId(d),i(d)},setRoleName:d=>{ya.setRoleName(d),l(d)},setUserTypeId:d=>{ya.setUserTypeId(d),u(d)},clear:()=>{ya.clear(),t(""),n(""),i(null),l(null),u(null)}}}const Nz=Object.freeze(Object.defineProperty({__proto__:null,OrgContext:ya,useOrgContext:rF},Symbol.toStringTag,{value:"Module"}));async function nF(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function Ct(e,t,r){const n=ya.getOrgId();console.log(`[API Request] Sending X-Org-Id header: ${n} for ${e} ${t}`);const a={"X-Org-Id":n},i=localStorage.getItem("jwt_token");i&&(a.Authorization=`Bearer ${i}`,console.log(`[API Request] Adding Authorization header with JWT token for ${t}`));let o;r&&(r instanceof FormData?o=r:(a["Content-Type"]="application/json",o=JSON.stringify(r)));const l=await fetch(t,{method:e,headers:a,body:o,credentials:"include"});return await nF(l),l}const Sz=({on401:e})=>async({queryKey:t})=>{const r=ya.getOrgId();console.log(`[Query Request] Sending X-Org-Id header: ${r} for GET ${t[0]}`);const n={"X-Org-Id":r},a=localStorage.getItem("jwt_token");a&&(n.Authorization=`Bearer ${a}`,console.log(`[Query Request] Adding Authorization header with JWT token for ${t[0]}`));const i=await fetch(t[0],{headers:n,credentials:"include"});return i.status===401?null:(await nF(i),await i.json())},Ye=new iz({defaultOptions:{queries:{queryFn:Sz({on401:"returnNull"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),_z=1,Tz=1e6;let Ow=0;function Ez(){return Ow=(Ow+1)%Number.MAX_SAFE_INTEGER,Ow.toString()}const Pw=new Map,cC=e=>{if(Pw.has(e))return;const t=setTimeout(()=>{Pw.delete(e),fm({type:"REMOVE_TOAST",toastId:e})},Tz);Pw.set(e,t)},Az=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,_z)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?cC(r):e.toasts.forEach(n=>{cC(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Vg=[];let Hg={toasts:[]};function fm(e){Hg=Az(Hg,e),Vg.forEach(t=>{t(Hg)})}function Ks({...e}){const t=Ez(),r=a=>fm({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>fm({type:"DISMISS_TOAST",toastId:t});return fm({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function Vr(){const[e,t]=N.useState(Hg);return N.useEffect(()=>(Vg.push(t),()=>{const r=Vg.indexOf(t);r>-1&&Vg.splice(r,1)}),[e]),{...e,toast:Ks,dismiss:r=>fm({type:"DISMISS_TOAST",toastId:r})}}function Xe(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function uC(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function vv(...e){return t=>{let r=!1;const n=e.map(a=>{const i=uC(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():uC(e[a],null)}}}}function Kt(...e){return N.useCallback(vv(...e),e)}function Cz(e,t){const r=N.createContext(t),n=i=>{const{children:o,...l}=i,c=N.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=N.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function pa(e,t=[]){let r=[];function n(i,o){const l=N.createContext(o),c=r.length;r=[...r,o];const u=f=>{var b;const{scope:h,children:m,...g}=f,p=((b=h==null?void 0:h[e])==null?void 0:b[c])||l,y=N.useMemo(()=>g,Object.values(g));return s.jsx(p.Provider,{value:y,children:m})};u.displayName=i+"Provider";function d(f,h){var p;const m=((p=h==null?void 0:h[e])==null?void 0:p[c])||l,g=N.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=r.map(o=>N.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return N.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,Dz(a,...t)]}function Dz(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Ul(e){const t=kz(e),r=N.forwardRef((n,a)=>{const{children:i,...o}=n,l=N.Children.toArray(i),c=l.find(Pz);if(c){const u=c.props.children,d=l.map(f=>f===c?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:f);return s.jsx(t,{...o,ref:a,children:N.isValidElement(u)?N.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var aF=Ul("Slot");function kz(e){const t=N.forwardRef((r,n)=>{const{children:a,...i}=r;if(N.isValidElement(a)){const o=Mz(a),l=Iz(i,a.props);return a.type!==N.Fragment&&(l.ref=n?vv(n,o):o),N.cloneElement(a,l)}return N.Children.count(a)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var sF=Symbol("radix.slottable");function Oz(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=sF,t}function Pz(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===sF}function Iz(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function Mz(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function wv(e){const t=e+"CollectionProvider",[r,n]=pa(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:y,children:b}=p,x=pe.useRef(null),w=pe.useRef(new Map).current;return s.jsx(a,{scope:y,itemMap:w,collectionRef:x,children:b})};o.displayName=t;const l=e+"CollectionSlot",c=Ul(l),u=pe.forwardRef((p,y)=>{const{scope:b,children:x}=p,w=i(l,b),v=Kt(y,w.collectionRef);return s.jsx(c,{ref:v,children:x})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=Ul(d),m=pe.forwardRef((p,y)=>{const{scope:b,children:x,...w}=p,v=pe.useRef(null),j=Kt(y,v),S=i(d,b);return pe.useEffect(()=>(S.itemMap.set(v,{ref:v,...w}),()=>void S.itemMap.delete(v))),s.jsx(h,{[f]:"",ref:j,children:x})});m.displayName=d;function g(p){const y=i(e+"CollectionConsumer",p);return pe.useCallback(()=>{const x=y.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((S,_)=>w.indexOf(S.ref.current)-w.indexOf(_.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},g,n]}var Rz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_t=Rz.reduce((e,t)=>{const r=Ul(`Primitive.${t}`),n=N.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function a_(e,t){e&&wu.flushSync(()=>e.dispatchEvent(t))}function Ea(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function Fz(e,t=globalThis==null?void 0:globalThis.document){const r=Ea(e);N.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Lz="DismissableLayer",Kj="dismissableLayer.update",$z="dismissableLayer.pointerDownOutside",Bz="dismissableLayer.focusOutside",dC,iF=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ju=N.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=N.useContext(iF),[d,f]=N.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=N.useState({}),g=Kt(t,_=>f(_)),p=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=p.indexOf(y),x=d?p.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,v=x>=b,j=Wz(_=>{const A=_.target,C=[...u.branches].some(D=>D.contains(A));!v||C||(a==null||a(_),o==null||o(_),_.defaultPrevented||l==null||l())},h),S=Vz(_=>{const A=_.target;[...u.branches].some(D=>D.contains(A))||(i==null||i(_),o==null||o(_),_.defaultPrevented||l==null||l())},h);return Fz(_=>{x===u.layers.size-1&&(n==null||n(_),!_.defaultPrevented&&l&&(_.preventDefault(),l()))},h),N.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(dC=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),fC(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=dC)}},[d,h,r,u]),N.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),fC())},[d,u]),N.useEffect(()=>{const _=()=>m({});return document.addEventListener(Kj,_),()=>document.removeEventListener(Kj,_)},[]),s.jsx(_t.div,{...c,ref:g,style:{pointerEvents:w?v?"auto":"none":void 0,...e.style},onFocusCapture:Xe(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Xe(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Xe(e.onPointerDownCapture,j.onPointerDownCapture)})});ju.displayName=Lz;var Uz="DismissableLayerBranch",oF=N.forwardRef((e,t)=>{const r=N.useContext(iF),n=N.useRef(null),a=Kt(t,n);return N.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(_t.div,{...e,ref:a})});oF.displayName=Uz;function Wz(e,t=globalThis==null?void 0:globalThis.document){const r=Ea(e),n=N.useRef(!1),a=N.useRef(()=>{});return N.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){lF($z,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Vz(e,t=globalThis==null?void 0:globalThis.document){const r=Ea(e),n=N.useRef(!1);return N.useEffect(()=>{const a=i=>{i.target&&!n.current&&lF(Bz,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function fC(){const e=new CustomEvent(Kj);document.dispatchEvent(e)}function lF(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?a_(a,i):a.dispatchEvent(i)}var Hz=ju,zz=oF,vn=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},qz="Portal",Kf=N.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=N.useState(!1);vn(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?gH.createPortal(s.jsx(_t.div,{...n,ref:t}),o):null});Kf.displayName=qz;function Gz(e,t){return N.useReducer((r,n)=>t[r][n]??r,e)}var Da=e=>{const{present:t,children:r}=e,n=Kz(t),a=typeof r=="function"?r({present:n.isPresent}):N.Children.only(r),i=Kt(n.ref,Yz(a));return typeof r=="function"||n.isPresent?N.cloneElement(a,{ref:i}):null};Da.displayName="Presence";function Kz(e){const[t,r]=N.useState(),n=N.useRef(null),a=N.useRef(e),i=N.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Gz(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const u=J0(n.current);i.current=l==="mounted"?u:"none"},[l]),vn(()=>{const u=n.current,d=a.current;if(d!==e){const h=i.current,m=J0(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),vn(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const p=J0(n.current).includes(m.animationName);if(m.target===t&&p&&(c("ANIMATION_END"),!a.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=m=>{m.target===t&&(i.current=J0(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:N.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function J0(e){return(e==null?void 0:e.animationName)||"none"}function Yz(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Xz=a2[" useInsertionEffect ".trim().toString()]||vn;function mi({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=Qz({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const d=N.useRef(e!==void 0);N.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=N.useCallback(d=>{var f;if(l){const h=Jz(d)?d(e):d;h!==e&&((f=o.current)==null||f.call(o,h))}else i(d)},[l,e,i,o]);return[c,u]}function Qz({defaultProp:e,onChange:t}){const[r,n]=N.useState(e),a=N.useRef(r),i=N.useRef(t);return Xz(()=>{i.current=t},[t]),N.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function Jz(e){return typeof e=="function"}var cF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Zz="VisuallyHidden",bv=N.forwardRef((e,t)=>s.jsx(_t.span,{...e,ref:t,style:{...cF,...e.style}}));bv.displayName=Zz;var eq=bv,s_="ToastProvider",[i_,tq,rq]=wv("Toast"),[uF,VMe]=pa("Toast",[rq]),[nq,jv]=uF(s_),dF=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=N.useState(null),[u,d]=N.useState(0),f=N.useRef(!1),h=N.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${s_}\`. Expected non-empty \`string\`.`),s.jsx(i_.Provider,{scope:t,children:s.jsx(nq,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:N.useCallback(()=>d(m=>m+1),[]),onToastRemove:N.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};dF.displayName=s_;var fF="ToastViewport",aq=["F8"],Yj="toast.viewportPause",Xj="toast.viewportResume",hF=N.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=aq,label:a="Notifications ({hotkey})",...i}=e,o=jv(fF,r),l=tq(r),c=N.useRef(null),u=N.useRef(null),d=N.useRef(null),f=N.useRef(null),h=Kt(t,f,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;N.useEffect(()=>{const y=b=>{var w;n.length!==0&&n.every(v=>b[v]||b.code===v)&&((w=f.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),N.useEffect(()=>{const y=c.current,b=f.current;if(g&&y&&b){const x=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(Yj);b.dispatchEvent(S),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(Xj);b.dispatchEvent(S),o.isClosePausedRef.current=!1}},v=S=>{!y.contains(S.relatedTarget)&&w()},j=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",x),y.addEventListener("focusout",v),y.addEventListener("pointermove",x),y.addEventListener("pointerleave",j),window.addEventListener("blur",x),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",x),y.removeEventListener("focusout",v),y.removeEventListener("pointermove",x),y.removeEventListener("pointerleave",j),window.removeEventListener("blur",x),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const p=N.useCallback(({tabbingDirection:y})=>{const x=l().map(w=>{const v=w.ref.current,j=[v,...xq(v)];return y==="forwards"?j:j.reverse()});return(y==="forwards"?x.reverse():x).flat()},[l]);return N.useEffect(()=>{const y=f.current;if(y){const b=x=>{var j,S,_;const w=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!w){const A=document.activeElement,C=x.shiftKey;if(x.target===y&&C){(j=u.current)==null||j.focus();return}const O=p({tabbingDirection:C?"backwards":"forwards"}),V=O.findIndex(G=>G===A);Iw(O.slice(V+1))?x.preventDefault():C?(S=u.current)==null||S.focus():(_=d.current)==null||_.focus()}};return y.addEventListener("keydown",b),()=>y.removeEventListener("keydown",b)}},[l,p]),s.jsxs(zz,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&s.jsx(Qj,{ref:u,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"forwards"});Iw(y)}}),s.jsx(i_.Slot,{scope:r,children:s.jsx(_t.ol,{tabIndex:-1,...i,ref:h})}),g&&s.jsx(Qj,{ref:d,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"backwards"});Iw(y)}})]})});hF.displayName=fF;var mF="ToastFocusProxy",Qj=N.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=jv(mF,r);return s.jsx(bv,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});Qj.displayName=mF;var Qp="Toast",sq="toast.swipeStart",iq="toast.swipeMove",oq="toast.swipeCancel",lq="toast.swipeEnd",pF=N.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=mi({prop:n,defaultProp:a??!0,onChange:i,caller:Qp});return s.jsx(Da,{present:r||l,children:s.jsx(dq,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Ea(e.onPause),onResume:Ea(e.onResume),onSwipeStart:Xe(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Xe(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Xe(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Xe(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});pF.displayName=Qp;var[cq,uq]=uF(Qp,{onClose(){}}),dq=N.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...g}=e,p=jv(Qp,r),[y,b]=N.useState(null),x=Kt(t,G=>b(G)),w=N.useRef(null),v=N.useRef(null),j=a||p.duration,S=N.useRef(0),_=N.useRef(j),A=N.useRef(0),{onToastAdd:C,onToastRemove:D}=p,k=Ea(()=>{var Y;(y==null?void 0:y.contains(document.activeElement))&&((Y=p.viewport)==null||Y.focus()),o()}),O=N.useCallback(G=>{!G||G===1/0||(window.clearTimeout(A.current),S.current=new Date().getTime(),A.current=window.setTimeout(k,G))},[k]);N.useEffect(()=>{const G=p.viewport;if(G){const Y=()=>{O(_.current),u==null||u()},W=()=>{const P=new Date().getTime()-S.current;_.current=_.current-P,window.clearTimeout(A.current),c==null||c()};return G.addEventListener(Yj,W),G.addEventListener(Xj,Y),()=>{G.removeEventListener(Yj,W),G.removeEventListener(Xj,Y)}}},[p.viewport,j,c,u,O]),N.useEffect(()=>{i&&!p.isClosePausedRef.current&&O(j)},[i,j,p.isClosePausedRef,O]),N.useEffect(()=>(C(),()=>D()),[C,D]);const V=N.useMemo(()=>y?jF(y):null,[y]);return p.viewport?s.jsxs(s.Fragment,{children:[V&&s.jsx(fq,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),s.jsx(cq,{scope:r,onClose:k,children:wu.createPortal(s.jsx(i_.ItemSlot,{scope:r,children:s.jsx(Hz,{asChild:!0,onEscapeKeyDown:Xe(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||k(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(_t.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Xe(e.onKeyDown,G=>{G.key==="Escape"&&(l==null||l(G.nativeEvent),G.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:Xe(e.onPointerDown,G=>{G.button===0&&(w.current={x:G.clientX,y:G.clientY})}),onPointerMove:Xe(e.onPointerMove,G=>{if(!w.current)return;const Y=G.clientX-w.current.x,W=G.clientY-w.current.y,P=!!v.current,E=["left","right"].includes(p.swipeDirection),R=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,I=E?R(0,Y):0,ee=E?0:R(0,W),L=G.pointerType==="touch"?10:2,q={x:I,y:ee},H={originalEvent:G,delta:q};P?(v.current=q,Z0(iq,f,H,{discrete:!1})):hC(q,p.swipeDirection,L)?(v.current=q,Z0(sq,d,H,{discrete:!1}),G.target.setPointerCapture(G.pointerId)):(Math.abs(Y)>L||Math.abs(W)>L)&&(w.current=null)}),onPointerUp:Xe(e.onPointerUp,G=>{const Y=v.current,W=G.target;if(W.hasPointerCapture(G.pointerId)&&W.releasePointerCapture(G.pointerId),v.current=null,w.current=null,Y){const P=G.currentTarget,E={originalEvent:G,delta:Y};hC(Y,p.swipeDirection,p.swipeThreshold)?Z0(lq,m,E,{discrete:!0}):Z0(oq,h,E,{discrete:!0}),P.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),fq=e=>{const{__scopeToast:t,children:r,...n}=e,a=jv(Qp,t),[i,o]=N.useState(!1),[l,c]=N.useState(!1);return pq(()=>o(!0)),N.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(Kf,{asChild:!0,children:s.jsx(bv,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},hq="ToastTitle",gF=N.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(_t.div,{...n,ref:t})});gF.displayName=hq;var mq="ToastDescription",xF=N.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(_t.div,{...n,ref:t})});xF.displayName=mq;var yF="ToastAction",vF=N.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(bF,{altText:r,asChild:!0,children:s.jsx(o_,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${yF}\`. Expected non-empty \`string\`.`),null)});vF.displayName=yF;var wF="ToastClose",o_=N.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=uq(wF,r);return s.jsx(bF,{asChild:!0,children:s.jsx(_t.button,{type:"button",...n,ref:t,onClick:Xe(e.onClick,a.onClose)})})});o_.displayName=wF;var bF=N.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(_t.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function jF(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),gq(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...jF(n))}}),t}function Z0(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?a_(a,i):a.dispatchEvent(i)}var hC=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function pq(e=()=>{}){const t=Ea(e);vn(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function gq(e){return e.nodeType===e.ELEMENT_NODE}function xq(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Iw(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var yq=dF,NF=hF,SF=pF,_F=gF,TF=xF,EF=vF,AF=o_;function CF(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=CF(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function sr(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=CF(e))&&(n&&(n+=" "),n+=t);return n}const mC=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,pC=sr,Jp=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return pC(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const h=mC(d)||mC(f);return a[u][h]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(g=>{let[p,y]=g;return Array.isArray(y)?y.includes({...i,...l}[p]):{...i,...l}[p]===y})?[...u,f,h]:u},[]);return pC(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),DF=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...wq,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:DF("lucide",a),...l},[...o.map(([u,d])=>N.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=(e,t)=>{const r=N.forwardRef(({className:n,...a},i)=>N.createElement(bq,{ref:i,iconNode:t,className:DF(`lucide-${vq(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=jt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=jt("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=jt("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jq=jt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=jt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=jt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=jt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _q=jt("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=jt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=jt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=jt("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=jt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=jt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=jt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=jt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=jt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=jt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=jt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=jt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=jt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=jt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eq=jt("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=jt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=jt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=jt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aq=jt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=jt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=jt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=jt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=jt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=jt("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=jt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dq=jt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=jt("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=jt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=jt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=jt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pq=jt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=jt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=jt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mq=jt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=jt("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=jt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=jt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=jt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=jt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=jt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=jt("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=jt("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=jt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=jt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=jt("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=jt("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=jt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=jt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=jt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=jt("Umbrella",[["path",{d:"M22 12a10.06 10.06 1 0 0-20 0Z",key:"1teyop"}],["path",{d:"M12 12v8a2 2 0 0 0 4 0",key:"ulpmoc"}],["path",{d:"M12 2v1",key:"11qlp1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=jt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bq=jt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=jt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=jt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=jt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),c_="-",Uq=e=>{const t=Vq(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(c_);return l[0]===""&&l.length!==1&&l.shift(),BF(l,t)||Wq(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},BF=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?BF(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(c_);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},gC=/^\[(.+)\]$/,Wq=e=>{if(gC.test(e)){const t=gC.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Vq=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return zq(Object.entries(e.classGroups),r).forEach(([i,o])=>{tN(o,n,i,t)}),n},tN=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:xC(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(Hq(a)){tN(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{tN(o,xC(t,i),r,n)})})},xC=(e,t)=>{let r=e;return t.split(c_).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Hq=e=>e.isThemeGetter,zq=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,qq=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},UF="!",Gq=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,f;for(let y=0;y<l.length;y++){let b=l[y];if(u===0){if(b===a&&(n||l.slice(y,y+i)===t)){c.push(l.slice(d,y)),d=y+i;continue}if(b==="/"){f=y;continue}}b==="["?u++:b==="]"&&u--}const h=c.length===0?l:l.substring(d),m=h.startsWith(UF),g=m?h.substring(1):h,p=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:p}};return r?l=>r({className:l,parseClassName:o}):o},Kq=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},Yq=e=>({cache:qq(e.cacheSize),parseClassName:Gq(e),...Uq(e)}),Xq=/\s+/,Qq=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(Xq);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=r(u);let g=!!m,p=n(g?h.substring(0,m):h);if(!p){if(!g){l=u+(l.length>0?" "+l:l);continue}if(p=n(h),!p){l=u+(l.length>0?" "+l:l);continue}g=!1}const y=Kq(d).join(":"),b=f?y+UF:y,x=b+p;if(i.includes(x))continue;i.push(x);const w=a(p,g);for(let v=0;v<w.length;++v){const j=w[v];i.push(b+j)}l=u+(l.length>0?" "+l:l)}return l};function Jq(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=WF(t))&&(n&&(n+=" "),n+=r);return n}const WF=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=WF(e[n]))&&(r&&(r+=" "),r+=t);return r};function Zq(e,...t){let r,n,a,i=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return r=Yq(u),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=Qq(c,r);return a(c,d),d}return function(){return i(Jq.apply(null,arguments))}}const Mr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},VF=/^\[(?:([a-z-]+):)?(.+)\]$/i,eG=/^\d+\/\d+$/,tG=new Set(["px","full","screen"]),rG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,aG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,sG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,iG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ro=e=>kd(e)||tG.has(e)||eG.test(e),Ko=e=>Qf(e,"length",mG),kd=e=>!!e&&!Number.isNaN(Number(e)),Fw=e=>Qf(e,"number",kd),Ch=e=>!!e&&Number.isInteger(Number(e)),oG=e=>e.endsWith("%")&&kd(e.slice(0,-1)),zt=e=>VF.test(e),Yo=e=>rG.test(e),lG=new Set(["length","size","percentage"]),cG=e=>Qf(e,lG,HF),uG=e=>Qf(e,"position",HF),dG=new Set(["image","url"]),fG=e=>Qf(e,dG,gG),hG=e=>Qf(e,"",pG),Dh=()=>!0,Qf=(e,t,r)=>{const n=VF.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},mG=e=>nG.test(e)&&!aG.test(e),HF=()=>!1,pG=e=>sG.test(e),gG=e=>iG.test(e),xG=()=>{const e=Mr("colors"),t=Mr("spacing"),r=Mr("blur"),n=Mr("brightness"),a=Mr("borderColor"),i=Mr("borderRadius"),o=Mr("borderSpacing"),l=Mr("borderWidth"),c=Mr("contrast"),u=Mr("grayscale"),d=Mr("hueRotate"),f=Mr("invert"),h=Mr("gap"),m=Mr("gradientColorStops"),g=Mr("gradientColorStopPositions"),p=Mr("inset"),y=Mr("margin"),b=Mr("opacity"),x=Mr("padding"),w=Mr("saturate"),v=Mr("scale"),j=Mr("sepia"),S=Mr("skew"),_=Mr("space"),A=Mr("translate"),C=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",zt,t],O=()=>[zt,t],V=()=>["",ro,Ko],G=()=>["auto",kd,zt],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],P=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],E=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",zt],I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[kd,zt];return{cacheSize:500,separator:":",theme:{colors:[Dh],spacing:[ro,Ko],blur:["none","",Yo,zt],brightness:ee(),borderColor:[e],borderRadius:["none","","full",Yo,zt],borderSpacing:O(),borderWidth:V(),contrast:ee(),grayscale:R(),hueRotate:ee(),invert:R(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[oG,Ko],inset:k(),margin:k(),opacity:ee(),padding:O(),saturate:ee(),scale:ee(),sepia:R(),skew:ee(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",zt]}],container:["container"],columns:[{columns:[Yo]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),zt]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ch,zt]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",zt]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",Ch,zt]}],"grid-cols":[{"grid-cols":[Dh]}],"col-start-end":[{col:["auto",{span:["full",Ch,zt]},zt]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[Dh]}],"row-start-end":[{row:["auto",{span:[Ch,zt]},zt]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",zt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",zt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...E()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...E(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...E(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",zt,t]}],"min-w":[{"min-w":[zt,t,"min","max","fit"]}],"max-w":[{"max-w":[zt,t,"none","full","min","max","fit","prose",{screen:[Yo]},Yo]}],h:[{h:[zt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[zt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[zt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[zt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Yo,Ko]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Fw]}],"font-family":[{font:[Dh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",zt]}],"line-clamp":[{"line-clamp":["none",kd,Fw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ro,zt]}],"list-image":[{"list-image":["none",zt]}],"list-style-type":[{list:["none","disc","decimal",zt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ro,Ko]}],"underline-offset":[{"underline-offset":["auto",ro,zt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",zt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",zt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),uG]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cG]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fG]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:W()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[ro,zt]}],"outline-w":[{outline:[ro,Ko]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[ro,Ko]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Yo,hG]}],"shadow-color":[{shadow:[Dh]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...P(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":P()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Yo,zt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",zt]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",zt]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",zt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[v]}],"scale-x":[{"scale-x":[v]}],"scale-y":[{"scale-y":[v]}],rotate:[{rotate:[Ch,zt]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",zt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",zt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",zt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ro,Ko,Fw]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},yG=Zq(xG);function Ge(...e){return yG(sr(e))}const vG=yq,zF=N.forwardRef(({className:e,...t},r)=>s.jsx(NF,{ref:r,className:Ge("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));zF.displayName=NF.displayName;const wG=Jp("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),qF=N.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(SF,{ref:n,className:Ge(wG({variant:t}),e),...r}));qF.displayName=SF.displayName;const bG=N.forwardRef(({className:e,...t},r)=>s.jsx(EF,{ref:r,className:Ge("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));bG.displayName=EF.displayName;const GF=N.forwardRef(({className:e,...t},r)=>s.jsx(AF,{ref:r,className:Ge("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(da,{className:"h-4 w-4"})}));GF.displayName=AF.displayName;const KF=N.forwardRef(({className:e,...t},r)=>s.jsx(_F,{ref:r,className:Ge("text-sm font-semibold",e),...t}));KF.displayName=_F.displayName;const YF=N.forwardRef(({className:e,...t},r)=>s.jsx(TF,{ref:r,className:Ge("text-sm opacity-90",e),...t}));YF.displayName=TF.displayName;function jG(){const{toasts:e}=Vr();return s.jsxs(vG,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(qF,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(KF,{children:r}),n&&s.jsx(YF,{children:n})]}),a,s.jsx(GF,{})]},t)}),s.jsx(zF,{})]})}var NG=a2[" useId ".trim().toString()]||(()=>{}),SG=0;function ui(e){const[t,r]=N.useState(NG());return vn(()=>{r(n=>n??String(SG++))},[e]),t?`radix-${t}`:""}const _G=["top","right","bottom","left"],Wl=Math.min,ts=Math.max,Nx=Math.round,tg=Math.floor,Hi=e=>({x:e,y:e}),TG={left:"right",right:"left",bottom:"top",top:"bottom"},EG={start:"end",end:"start"};function rN(e,t,r){return ts(e,Wl(t,r))}function Io(e,t){return typeof e=="function"?e(t):e}function Mo(e){return e.split("-")[0]}function Jf(e){return e.split("-")[1]}function u_(e){return e==="x"?"y":"x"}function d_(e){return e==="y"?"height":"width"}const AG=new Set(["top","bottom"]);function Fi(e){return AG.has(Mo(e))?"y":"x"}function f_(e){return u_(Fi(e))}function CG(e,t,r){r===void 0&&(r=!1);const n=Jf(e),a=f_(e),i=d_(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Sx(o)),[o,Sx(o)]}function DG(e){const t=Sx(e);return[nN(e),t,nN(t)]}function nN(e){return e.replace(/start|end/g,t=>EG[t])}const yC=["left","right"],vC=["right","left"],kG=["top","bottom"],OG=["bottom","top"];function PG(e,t,r){switch(e){case"top":case"bottom":return r?t?vC:yC:t?yC:vC;case"left":case"right":return t?kG:OG;default:return[]}}function IG(e,t,r,n){const a=Jf(e);let i=PG(Mo(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(nN)))),i}function Sx(e){return e.replace(/left|right|bottom|top/g,t=>TG[t])}function MG(e){return{top:0,right:0,bottom:0,left:0,...e}}function XF(e){return typeof e!="number"?MG(e):{top:e,right:e,bottom:e,left:e}}function _x(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function wC(e,t,r){let{reference:n,floating:a}=e;const i=Fi(t),o=f_(t),l=d_(o),c=Mo(t),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,h=n[l]/2-a[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-a.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-a.width,y:f};break;default:m={x:n.x,y:n.y}}switch(Jf(t)){case"start":m[o]-=h*(r&&u?-1:1);break;case"end":m[o]+=h*(r&&u?-1:1);break}return m}const RG=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=wC(u,n,c),h=n,m={},g=0;for(let p=0;p<l.length;p++){const{name:y,fn:b}=l[p],{x,y:w,data:v,reset:j}=await b({x:d,y:f,initialPlacement:n,placement:h,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=x??d,f=w??f,m={...m,[y]:{...m[y],...v}},j&&g<=50&&(g++,typeof j=="object"&&(j.placement&&(h=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:d,y:f}=wC(u,h,c)),p=-1)}return{x:d,y:f,placement:h,strategy:a,middlewareData:m}};async function Vm(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=Io(t,e),g=XF(m),y=l[h?f==="floating"?"reference":"floating":f],b=_x(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(y)))==null||r?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),v=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=_x(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:w,strategy:c}):x);return{top:(b.top-j.top+g.top)/v.y,bottom:(j.bottom-b.bottom+g.bottom)/v.y,left:(b.left-j.left+g.left)/v.x,right:(j.right-b.right+g.right)/v.x}}const FG=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Io(e,t)||{};if(u==null)return{};const f=XF(d),h={x:r,y:n},m=f_(a),g=d_(m),p=await o.getDimensions(u),y=m==="y",b=y?"top":"left",x=y?"bottom":"right",w=y?"clientHeight":"clientWidth",v=i.reference[g]+i.reference[m]-h[m]-i.floating[g],j=h[m]-i.reference[m],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let _=S?S[w]:0;(!_||!await(o.isElement==null?void 0:o.isElement(S)))&&(_=l.floating[w]||i.floating[g]);const A=v/2-j/2,C=_/2-p[g]/2-1,D=Wl(f[b],C),k=Wl(f[x],C),O=D,V=_-p[g]-k,G=_/2-p[g]/2+A,Y=rN(O,G,V),W=!c.arrow&&Jf(a)!=null&&G!==Y&&i.reference[g]/2-(G<O?D:k)-p[g]/2<0,P=W?G<O?G-O:G-V:0;return{[m]:h[m]+P,data:{[m]:Y,centerOffset:G-Y-P,...W&&{alignmentOffset:P}},reset:W}}}),LG=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...y}=Io(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const b=Mo(a),x=Fi(l),w=Mo(l)===l,v=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=h||(w||!p?[Sx(l)]:DG(l)),S=g!=="none";!h&&S&&j.push(...IG(l,p,g,v));const _=[l,...j],A=await Vm(t,y),C=[];let D=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&C.push(A[b]),f){const G=CG(a,o,v);C.push(A[G[0]],A[G[1]])}if(D=[...D,{placement:a,overflows:C}],!C.every(G=>G<=0)){var k,O;const G=(((k=i.flip)==null?void 0:k.index)||0)+1,Y=_[G];if(Y&&(!(f==="alignment"?x!==Fi(Y):!1)||D.every(E=>Fi(E.placement)===x?E.overflows[0]>0:!0)))return{data:{index:G,overflows:D},reset:{placement:Y}};let W=(O=D.filter(P=>P.overflows[0]<=0).sort((P,E)=>P.overflows[1]-E.overflows[1])[0])==null?void 0:O.placement;if(!W)switch(m){case"bestFit":{var V;const P=(V=D.filter(E=>{if(S){const R=Fi(E.placement);return R===x||R==="y"}return!0}).map(E=>[E.placement,E.overflows.filter(R=>R>0).reduce((R,I)=>R+I,0)]).sort((E,R)=>E[1]-R[1])[0])==null?void 0:V[0];P&&(W=P);break}case"initialPlacement":W=l;break}if(a!==W)return{reset:{placement:W}}}return{}}}};function bC(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function jC(e){return _G.some(t=>e[t]>=0)}const $G=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=Io(e,t);switch(n){case"referenceHidden":{const i=await Vm(t,{...a,elementContext:"reference"}),o=bC(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:jC(o)}}}case"escaped":{const i=await Vm(t,{...a,altBoundary:!0}),o=bC(i,r.floating);return{data:{escapedOffsets:o,escaped:jC(o)}}}default:return{}}}}},QF=new Set(["left","top"]);async function BG(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=Mo(r),l=Jf(r),c=Fi(r)==="y",u=QF.has(o)?-1:1,d=i&&c?-1:1,f=Io(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const UG=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await BG(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},WG=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:b,y:x}=y;return{x:b,y:x}}},...c}=Io(e,t),u={x:r,y:n},d=await Vm(t,c),f=Fi(Mo(a)),h=u_(f);let m=u[h],g=u[f];if(i){const y=h==="y"?"top":"left",b=h==="y"?"bottom":"right",x=m+d[y],w=m-d[b];m=rN(x,m,w)}if(o){const y=f==="y"?"top":"left",b=f==="y"?"bottom":"right",x=g+d[y],w=g-d[b];g=rN(x,g,w)}const p=l.fn({...t,[h]:m,[f]:g});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[h]:i,[f]:o}}}}}},VG=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Io(e,t),d={x:r,y:n},f=Fi(a),h=u_(f);let m=d[h],g=d[f];const p=Io(l,t),y=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const w=h==="y"?"height":"width",v=i.reference[h]-i.floating[w]+y.mainAxis,j=i.reference[h]+i.reference[w]-y.mainAxis;m<v?m=v:m>j&&(m=j)}if(u){var b,x;const w=h==="y"?"width":"height",v=QF.has(Mo(a)),j=i.reference[f]-i.floating[w]+(v&&((b=o.offset)==null?void 0:b[f])||0)+(v?0:y.crossAxis),S=i.reference[f]+i.reference[w]+(v?0:((x=o.offset)==null?void 0:x[f])||0)-(v?y.crossAxis:0);g<j?g=j:g>S&&(g=S)}return{[h]:m,[f]:g}}}},HG=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=Io(e,t),d=await Vm(t,u),f=Mo(a),h=Jf(a),m=Fi(a)==="y",{width:g,height:p}=i.floating;let y,b;f==="top"||f==="bottom"?(y=f,b=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=f,y=h==="end"?"top":"bottom");const x=p-d.top-d.bottom,w=g-d.left-d.right,v=Wl(p-d[y],x),j=Wl(g-d[b],w),S=!t.middlewareData.shift;let _=v,A=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(A=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(_=x),S&&!h){const D=ts(d.left,0),k=ts(d.right,0),O=ts(d.top,0),V=ts(d.bottom,0);m?A=g-2*(D!==0||k!==0?D+k:ts(d.left,d.right)):_=p-2*(O!==0||V!==0?O+V:ts(d.top,d.bottom))}await c({...t,availableWidth:A,availableHeight:_});const C=await o.getDimensions(l.floating);return g!==C.width||p!==C.height?{reset:{rects:!0}}:{}}}};function Dv(){return typeof window<"u"}function Zf(e){return JF(e)?(e.nodeName||"").toLowerCase():"#document"}function cs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Zi(e){var t;return(t=(JF(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function JF(e){return Dv()?e instanceof Node||e instanceof cs(e).Node:!1}function pi(e){return Dv()?e instanceof Element||e instanceof cs(e).Element:!1}function Ki(e){return Dv()?e instanceof HTMLElement||e instanceof cs(e).HTMLElement:!1}function NC(e){return!Dv()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof cs(e).ShadowRoot}const zG=new Set(["inline","contents"]);function e0(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=gi(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!zG.has(a)}const qG=new Set(["table","td","th"]);function GG(e){return qG.has(Zf(e))}const KG=[":popover-open",":modal"];function kv(e){return KG.some(t=>{try{return e.matches(t)}catch{return!1}})}const YG=["transform","translate","scale","rotate","perspective"],XG=["transform","translate","scale","rotate","perspective","filter"],QG=["paint","layout","strict","content"];function h_(e){const t=m_(),r=pi(e)?gi(e):e;return YG.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||XG.some(n=>(r.willChange||"").includes(n))||QG.some(n=>(r.contain||"").includes(n))}function JG(e){let t=Vl(e);for(;Ki(t)&&!df(t);){if(h_(t))return t;if(kv(t))return null;t=Vl(t)}return null}function m_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ZG=new Set(["html","body","#document"]);function df(e){return ZG.has(Zf(e))}function gi(e){return cs(e).getComputedStyle(e)}function Ov(e){return pi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Vl(e){if(Zf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||NC(e)&&e.host||Zi(e);return NC(t)?t.host:t}function ZF(e){const t=Vl(e);return df(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ki(t)&&e0(t)?t:ZF(t)}function Hm(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=ZF(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=cs(a);if(i){const l=aN(o);return t.concat(o,o.visualViewport||[],e0(a)?a:[],l&&r?Hm(l):[])}return t.concat(a,Hm(a,[],r))}function aN(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function e3(e){const t=gi(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Ki(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=Nx(r)!==i||Nx(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function p_(e){return pi(e)?e:e.contextElement}function Od(e){const t=p_(e);if(!Ki(t))return Hi(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=e3(t);let o=(i?Nx(r.width):r.width)/n,l=(i?Nx(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const eK=Hi(0);function t3(e){const t=cs(e);return!m_()||!t.visualViewport?eK:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function tK(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==cs(e)?!1:t}function nu(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=p_(e);let o=Hi(1);t&&(n?pi(n)&&(o=Od(n)):o=Od(e));const l=tK(i,r,n)?t3(i):Hi(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,f=a.height/o.y;if(i){const h=cs(i),m=n&&pi(n)?cs(n):n;let g=h,p=aN(g);for(;p&&n&&m!==g;){const y=Od(p),b=p.getBoundingClientRect(),x=gi(p),w=b.left+(p.clientLeft+parseFloat(x.paddingLeft))*y.x,v=b.top+(p.clientTop+parseFloat(x.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,f*=y.y,c+=w,u+=v,g=cs(p),p=aN(g)}}return _x({width:d,height:f,x:c,y:u})}function g_(e,t){const r=Ov(e).scrollLeft;return t?t.left+r:nu(Zi(e)).left+r}function r3(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:g_(e,n)),i=n.top+t.scrollTop;return{x:a,y:i}}function rK(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=Zi(n),l=t?kv(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=Hi(1);const d=Hi(0),f=Ki(n);if((f||!f&&!i)&&((Zf(n)!=="body"||e0(o))&&(c=Ov(n)),Ki(n))){const m=nu(n);u=Od(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const h=o&&!f&&!i?r3(o,c,!0):Hi(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-c.scrollTop*u.y+d.y+h.y}}function nK(e){return Array.from(e.getClientRects())}function aK(e){const t=Zi(e),r=Ov(e),n=e.ownerDocument.body,a=ts(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=ts(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+g_(e);const l=-r.scrollTop;return gi(n).direction==="rtl"&&(o+=ts(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function sK(e,t){const r=cs(e),n=Zi(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=m_();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const iK=new Set(["absolute","fixed"]);function oK(e,t){const r=nu(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=Ki(e)?Od(e):Hi(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function SC(e,t,r){let n;if(t==="viewport")n=sK(e,r);else if(t==="document")n=aK(Zi(e));else if(pi(t))n=oK(t,r);else{const a=t3(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return _x(n)}function n3(e,t){const r=Vl(e);return r===t||!pi(r)||df(r)?!1:gi(r).position==="fixed"||n3(r,t)}function lK(e,t){const r=t.get(e);if(r)return r;let n=Hm(e,[],!1).filter(l=>pi(l)&&Zf(l)!=="body"),a=null;const i=gi(e).position==="fixed";let o=i?Vl(e):e;for(;pi(o)&&!df(o);){const l=gi(o),c=h_(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&iK.has(a.position)||e0(o)&&!c&&n3(e,o))?n=n.filter(d=>d!==o):a=l,o=Vl(o)}return t.set(e,n),n}function cK(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?kv(t)?[]:lK(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const f=SC(t,d,a);return u.top=ts(f.top,u.top),u.right=Wl(f.right,u.right),u.bottom=Wl(f.bottom,u.bottom),u.left=ts(f.left,u.left),u},SC(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function uK(e){const{width:t,height:r}=e3(e);return{width:t,height:r}}function dK(e,t,r){const n=Ki(t),a=Zi(t),i=r==="fixed",o=nu(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Hi(0);function u(){c.x=g_(a)}if(n||!n&&!i)if((Zf(t)!=="body"||e0(a))&&(l=Ov(t)),n){const m=nu(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();i&&!n&&a&&u();const d=a&&!n&&!i?r3(a,l):Hi(0),f=o.left+l.scrollLeft-c.x-d.x,h=o.top+l.scrollTop-c.y-d.y;return{x:f,y:h,width:o.width,height:o.height}}function Lw(e){return gi(e).position==="static"}function _C(e,t){if(!Ki(e)||gi(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Zi(e)===r&&(r=r.ownerDocument.body),r}function a3(e,t){const r=cs(e);if(kv(e))return r;if(!Ki(e)){let a=Vl(e);for(;a&&!df(a);){if(pi(a)&&!Lw(a))return a;a=Vl(a)}return r}let n=_C(e,t);for(;n&&GG(n)&&Lw(n);)n=_C(n,t);return n&&df(n)&&Lw(n)&&!h_(n)?r:n||JG(e)||r}const fK=async function(e){const t=this.getOffsetParent||a3,r=this.getDimensions,n=await r(e.floating);return{reference:dK(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function hK(e){return gi(e).direction==="rtl"}const mK={convertOffsetParentRelativeRectToViewportRelativeRect:rK,getDocumentElement:Zi,getClippingRect:cK,getOffsetParent:a3,getElementRects:fK,getClientRects:nK,getDimensions:uK,getScale:Od,isElement:pi,isRTL:hK};function s3(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function pK(e,t){let r=null,n;const a=Zi(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(l||t(),!h||!m)return;const g=tg(f),p=tg(a.clientWidth-(d+h)),y=tg(a.clientHeight-(f+m)),b=tg(d),w={rootMargin:-g+"px "+-p+"px "+-y+"px "+-b+"px",threshold:ts(0,Wl(1,c))||1};let v=!0;function j(S){const _=S[0].intersectionRatio;if(_!==c){if(!v)return o();_?o(!1,_):n=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!s3(u,e.getBoundingClientRect())&&o(),v=!1}try{r=new IntersectionObserver(j,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return o(!0),i}function gK(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=p_(e),d=a||i?[...u?Hm(u):[],...Hm(t)]:[];d.forEach(b=>{a&&b.addEventListener("scroll",r,{passive:!0}),i&&b.addEventListener("resize",r)});const f=u&&l?pK(u,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(b=>{let[x]=b;x&&x.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let g,p=c?nu(e):null;c&&y();function y(){const b=nu(e);p&&!s3(p,b)&&r(),p=b,g=requestAnimationFrame(y)}return r(),()=>{var b;d.forEach(x=>{a&&x.removeEventListener("scroll",r),i&&x.removeEventListener("resize",r)}),f==null||f(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const xK=UG,yK=WG,vK=LG,wK=HG,bK=$G,TC=FG,jK=VG,NK=(e,t,r)=>{const n=new Map,a={platform:mK,...r},i={...a.platform,_c:n};return RG(e,t,{...a,platform:i})};var SK=typeof document<"u",_K=function(){},zg=SK?N.useLayoutEffect:_K;function Tx(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Tx(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!Tx(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function i3(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function EC(e,t){const r=i3(e);return Math.round(t*r)/r}function $w(e){const t=N.useRef(e);return zg(()=>{t.current=e}),t}function TK(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=N.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=N.useState(n);Tx(h,n)||m(n);const[g,p]=N.useState(null),[y,b]=N.useState(null),x=N.useCallback(E=>{E!==S.current&&(S.current=E,p(E))},[]),w=N.useCallback(E=>{E!==_.current&&(_.current=E,b(E))},[]),v=i||g,j=o||y,S=N.useRef(null),_=N.useRef(null),A=N.useRef(d),C=c!=null,D=$w(c),k=$w(a),O=$w(u),V=N.useCallback(()=>{if(!S.current||!_.current)return;const E={placement:t,strategy:r,middleware:h};k.current&&(E.platform=k.current),NK(S.current,_.current,E).then(R=>{const I={...R,isPositioned:O.current!==!1};G.current&&!Tx(A.current,I)&&(A.current=I,wu.flushSync(()=>{f(I)}))})},[h,t,r,k,O]);zg(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(E=>({...E,isPositioned:!1})))},[u]);const G=N.useRef(!1);zg(()=>(G.current=!0,()=>{G.current=!1}),[]),zg(()=>{if(v&&(S.current=v),j&&(_.current=j),v&&j){if(D.current)return D.current(v,j,V);V()}},[v,j,V,D,C]);const Y=N.useMemo(()=>({reference:S,floating:_,setReference:x,setFloating:w}),[x,w]),W=N.useMemo(()=>({reference:v,floating:j}),[v,j]),P=N.useMemo(()=>{const E={position:r,left:0,top:0};if(!W.floating)return E;const R=EC(W.floating,d.x),I=EC(W.floating,d.y);return l?{...E,transform:"translate("+R+"px, "+I+"px)",...i3(W.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:R,top:I}},[r,l,W.floating,d.x,d.y]);return N.useMemo(()=>({...d,update:V,refs:Y,elements:W,floatingStyles:P}),[d,V,Y,W,P])}const EK=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?TC({element:n.current,padding:a}).fn(r):{}:n?TC({element:n,padding:a}).fn(r):{}}}},AK=(e,t)=>({...xK(e),options:[e,t]}),CK=(e,t)=>({...yK(e),options:[e,t]}),DK=(e,t)=>({...jK(e),options:[e,t]}),kK=(e,t)=>({...vK(e),options:[e,t]}),OK=(e,t)=>({...wK(e),options:[e,t]}),PK=(e,t)=>({...bK(e),options:[e,t]}),IK=(e,t)=>({...EK(e),options:[e,t]});var MK="Arrow",o3=N.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(_t.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});o3.displayName=MK;var RK=o3;function Pv(e){const[t,r]=N.useState(void 0);return vn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var x_="Popper",[l3,rc]=pa(x_),[FK,c3]=l3(x_),u3=e=>{const{__scopePopper:t,children:r}=e,[n,a]=N.useState(null);return s.jsx(FK,{scope:t,anchor:n,onAnchorChange:a,children:r})};u3.displayName=x_;var d3="PopperAnchor",f3=N.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=c3(d3,r),o=N.useRef(null),l=Kt(t,o);return N.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(_t.div,{...a,ref:l})});f3.displayName=d3;var y_="PopperContent",[LK,$K]=l3(y_),h3=N.forwardRef((e,t)=>{var ce,ge,he,K,fe,ae;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...p}=e,y=c3(y_,r),[b,x]=N.useState(null),w=Kt(t,Ne=>x(Ne)),[v,j]=N.useState(null),S=Pv(v),_=(S==null?void 0:S.width)??0,A=(S==null?void 0:S.height)??0,C=n+(i!=="center"?"-"+i:""),D=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},k=Array.isArray(u)?u:[u],O=k.length>0,V={padding:D,boundary:k.filter(UK),altBoundary:O},{refs:G,floatingStyles:Y,placement:W,isPositioned:P,middlewareData:E}=TK({strategy:"fixed",placement:C,whileElementsMounted:(...Ne)=>gK(...Ne,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[AK({mainAxis:a+A,alignmentAxis:o}),c&&CK({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?DK():void 0,...V}),c&&kK({...V}),OK({...V,apply:({elements:Ne,rects:Se,availableWidth:Ae,availableHeight:Oe})=>{const{width:M,height:oe}=Se.reference,be=Ne.floating.style;be.setProperty("--radix-popper-available-width",`${Ae}px`),be.setProperty("--radix-popper-available-height",`${Oe}px`),be.setProperty("--radix-popper-anchor-width",`${M}px`),be.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),v&&IK({element:v,padding:l}),WK({arrowWidth:_,arrowHeight:A}),h&&PK({strategy:"referenceHidden",...V})]}),[R,I]=g3(W),ee=Ea(g);vn(()=>{P&&(ee==null||ee())},[P,ee]);const L=(ce=E.arrow)==null?void 0:ce.x,q=(ge=E.arrow)==null?void 0:ge.y,H=((he=E.arrow)==null?void 0:he.centerOffset)!==0,[B,de]=N.useState();return vn(()=>{b&&de(window.getComputedStyle(b).zIndex)},[b]),s.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:P?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:B,"--radix-popper-transform-origin":[(K=E.transformOrigin)==null?void 0:K.x,(fe=E.transformOrigin)==null?void 0:fe.y].join(" "),...((ae=E.hide)==null?void 0:ae.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(LK,{scope:r,placedSide:R,onArrowChange:j,arrowX:L,arrowY:q,shouldHideArrow:H,children:s.jsx(_t.div,{"data-side":R,"data-align":I,...p,ref:w,style:{...p.style,animation:P?void 0:"none"}})})})});h3.displayName=y_;var m3="PopperArrow",BK={top:"bottom",right:"left",bottom:"top",left:"right"},p3=N.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=$K(m3,n),o=BK[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(RK,{...a,ref:r,style:{...a.style,display:"block"}})})});p3.displayName=m3;function UK(e){return e!==null}var WK=e=>({name:"transformOrigin",options:e,fn(t){var y,b,x;const{placement:r,rects:n,middlewareData:a}=t,o=((y=a.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=g3(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(((b=a.arrow)==null?void 0:b.x)??0)+l/2,m=(((x=a.arrow)==null?void 0:x.y)??0)+c/2;let g="",p="";return u==="bottom"?(g=o?f:`${h}px`,p=`${-c}px`):u==="top"?(g=o?f:`${h}px`,p=`${n.floating.height+c}px`):u==="right"?(g=`${-c}px`,p=o?f:`${m}px`):u==="left"&&(g=`${n.floating.width+c}px`,p=o?f:`${m}px`),{data:{x:g,y:p}}}});function g3(e){const[t,r="center"]=e.split("-");return[t,r]}var v_=u3,t0=f3,Iv=h3,Mv=p3,[Rv,HMe]=pa("Tooltip",[rc]),w_=rc(),x3="TooltipProvider",VK=700,AC="tooltip.open",[HK,y3]=Rv(x3),v3=e=>{const{__scopeTooltip:t,delayDuration:r=VK,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=N.useRef(!0),l=N.useRef(!1),c=N.useRef(0);return N.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(HK,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:N.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};v3.displayName=x3;var w3="Tooltip",[zMe,Fv]=Rv(w3),sN="TooltipTrigger",zK=N.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Fv(sN,r),i=y3(sN,r),o=w_(r),l=N.useRef(null),c=Kt(t,l,a.onTriggerChange),u=N.useRef(!1),d=N.useRef(!1),f=N.useCallback(()=>u.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),s.jsx(t0,{asChild:!0,...o,children:s.jsx(_t.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:Xe(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Xe(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Xe(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Xe(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Xe(e.onBlur,a.onClose),onClick:Xe(e.onClick,a.onClose)})})});zK.displayName=sN;var qK="TooltipPortal",[qMe,GK]=Rv(qK,{forceMount:void 0}),ff="TooltipContent",b3=N.forwardRef((e,t)=>{const r=GK(ff,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=Fv(ff,e.__scopeTooltip);return s.jsx(Da,{present:n||o.open,children:o.disableHoverableContent?s.jsx(j3,{side:a,...i,ref:t}):s.jsx(KK,{side:a,...i,ref:t})})}),KK=N.forwardRef((e,t)=>{const r=Fv(ff,e.__scopeTooltip),n=y3(ff,e.__scopeTooltip),a=N.useRef(null),i=Kt(t,a),[o,l]=N.useState(null),{trigger:c,onClose:u}=r,d=a.current,{onPointerInTransitChange:f}=n,h=N.useCallback(()=>{l(null),f(!1)},[f]),m=N.useCallback((g,p)=>{const y=g.currentTarget,b={x:g.clientX,y:g.clientY},x=ZK(b,y.getBoundingClientRect()),w=eY(b,x),v=tY(p.getBoundingClientRect()),j=nY([...w,...v]);l(j),f(!0)},[f]);return N.useEffect(()=>()=>h(),[h]),N.useEffect(()=>{if(c&&d){const g=y=>m(y,d),p=y=>m(y,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",p)}}},[c,d,m,h]),N.useEffect(()=>{if(o){const g=p=>{const y=p.target,b={x:p.clientX,y:p.clientY},x=(c==null?void 0:c.contains(y))||(d==null?void 0:d.contains(y)),w=!rY(b,o);x?h():w&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,o,u,h]),s.jsx(j3,{...e,ref:i})}),[YK,XK]=Rv(w3,{isInside:!1}),QK=Oz("TooltipContent"),j3=N.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Fv(ff,r),u=w_(r),{onClose:d}=c;return N.useEffect(()=>(document.addEventListener(AC,d),()=>document.removeEventListener(AC,d)),[d]),N.useEffect(()=>{if(c.trigger){const f=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),s.jsx(ju,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:s.jsxs(Iv,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(QK,{children:n}),s.jsx(YK,{scope:r,isInside:!0,children:s.jsx(eq,{id:c.contentId,role:"tooltip",children:a||n})})]})})});b3.displayName=ff;var N3="TooltipArrow",JK=N.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=w_(r);return XK(N3,r).isInside?null:s.jsx(Mv,{...a,...n,ref:t})});JK.displayName=N3;function ZK(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function eY(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function tY(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function rY(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function nY(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),aY(t)}function aY(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var sY=v3,S3=b3;const iY=sY,oY=N.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(S3,{ref:n,sideOffset:t,className:Ge("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r}));oY.displayName=S3.displayName;const lY=async()=>{try{const e=localStorage.getItem("jwt_token");if(!e||e==="null"||e==="undefined"||e.trim()==="")return null;const t=await fetch("https://apiv1.resolvepay.in/organization/plan-status",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});return t.ok?t.json():null}catch(e){return console.error("[AuthRedirect] Error fetching plan status:",e),null}},Ex=async()=>{try{console.log("[AuthRedirect] Checking plan status for login redirect...");const e=await lY();if(e&&e.isSaas!==void 0){const t=e.isSaas?"https://app.ezii.co.in/login":"https://services.resolvepay.in/login";console.log(`[AuthRedirect] Redirecting to login: ${t} (isSaas: ${e.isSaas})`),window.location.href=t}else console.log("[AuthRedirect] Plan status not available, using default redirect"),window.location.href="https://services.resolvepay.in/login"}catch(e){console.error("[AuthRedirect] Error during login redirect:",e),window.location.href="https://services.resolvepay.in/login"}};function r0(){const{data:e,isLoading:t}=Fe({queryKey:["/api/auth/user"],retry:!1,staleTime:3e5,refetchOnWindowFocus:!1,refetchInterval:!1});return N.useEffect(()=>{const r=localStorage.getItem("jwt_token"),n=window.location.pathname.startsWith("/id/");if((!r||r.trim()===""||r==="null"||r==="undefined")&&!n&&!t){console.log("[useAuth] JWT token missing, redirecting to authentication service..."),Ex();return}},[t]),{user:e,isLoading:t,isAuthenticated:!!e}}const cY="user_id",uY=e=>{try{localStorage.setItem(cY,e)}catch(t){console.error("Failed to store user ID in localStorage:",t)}},dY=()=>{localStorage.getItem("user_id")||(uY("14674"),console.log("🔄 No user_id found, set default to 14674")),localStorage.getItem("org_id")||localStorage.setItem("org_id","60"),localStorage.getItem("role")||localStorage.setItem("role","admin")},fY=e=>{try{const r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(r).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(n)}catch(t){return console.error("Failed to parse JWT token:",t),null}},hY=e=>{const t=fY(e);if(!t||!t.exp)return!0;const r=Math.floor(Date.now()/1e3);return t.exp-60<=r},_3=()=>{N.useEffect(()=>{const e=()=>{const n=localStorage.getItem("jwt_token"),a=window.location.pathname.startsWith("/id/");if(console.log("[JWT Check] Checking token expiration..."),console.log("[JWT Check] Token exists:",!!n),console.log("[JWT Check] On token setup route:",a),!n){if(a){console.log("[JWT Check] On token setup route, skipping redirect");return}console.log("[JWT Check] No JWT token found in localStorage");return}try{const i=hY(n);if(console.log("[JWT Check] Token expired:",i),i){if(a){console.log("[JWT Check] Token expired but on token setup route, skipping redirect");return}console.log("[JWT Check] Token expired, redirecting to authentication service"),localStorage.removeItem("jwt_token"),localStorage.removeItem("user_id"),localStorage.removeItem("role"),localStorage.removeItem("org_id"),localStorage.removeItem("leave_year"),Ex()}}catch(i){if(a){console.log("[JWT Check] Error parsing token but on token setup route, skipping redirect");return}console.error("[JWT Check] Error checking token expiration:",i),console.log("[JWT Check] Invalid token format, redirecting to authentication service"),localStorage.removeItem("jwt_token"),Ex()}};e();const t=setInterval(e,5*60*1e3),r=()=>{console.log("[JWT Check] Tab focused, checking token expiration"),e()};return window.addEventListener("focus",r),()=>{clearInterval(t),window.removeEventListener("focus",r)}},[])},Ce=N.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Ge("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ce.displayName="Card";const Tt=N.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Ge("flex flex-col space-y-1.5 p-6",e),...t}));Tt.displayName="CardHeader";const Et=N.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Ge("text-2xl font-semibold leading-none tracking-tight",e),...t}));Et.displayName="CardTitle";const hf=N.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Ge("text-sm text-muted-foreground",e),...t}));hf.displayName="CardDescription";const Ie=N.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Ge("p-6 pt-0",e),...t}));Ie.displayName="CardContent";const mY=N.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Ge("flex items-center p-6 pt-0",e),...t}));mY.displayName="CardFooter";function pY(){return s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:s.jsx(Ce,{className:"w-full max-w-md mx-4",children:s.jsxs(Ie,{className:"pt-6",children:[s.jsxs("div",{className:"flex mb-4 gap-2",children:[s.jsx(cf,{className:"h-8 w-8 text-red-500"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),s.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const iN=Jp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),se=N.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?aF:"button";return s.jsx(o,{className:Ge(iN({variant:t,size:r,className:e})),ref:i,...a})});se.displayName="Button";function gY(){const{isLoading:e,isAuthenticated:t}=r0(),[r,n]=N.useState(!1),a=localStorage.getItem("user_id")||"225",{data:i=[]}=Fe({queryKey:["/api/pto-requests",a],queryFn:async()=>{try{const l=await fetch(`/api/pto-requests?userId=${a}`,{credentials:"include",headers:{"X-Org-Id":localStorage.getItem("org_id")||"60"}});return l.ok?l.json():[]}catch{return[]}},enabled:t}),{data:o=[]}=Fe({queryKey:["/api/pto-variants/available"],queryFn:async()=>{try{const l=await fetch("/api/pto-variants",{credentials:"include",headers:{"X-Org-Id":localStorage.getItem("org_id")||"60"}}).then(u=>u.json()),c=[];for(const u of l)try{const d=await fetch(`/api/employee-assignments/pto/${u.id}`,{credentials:"include",headers:{"X-Org-Id":localStorage.getItem("org_id")||"60"}});d.ok&&(await d.json()).some(m=>m.userId===a||m.userId===a.toString())&&c.push(u)}catch(d){console.error(`Error checking assignments for variant ${u.id}:`,d)}return c}catch{return[]}},enabled:t});return e?s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:s.jsx(Ce,{className:"w-full max-w-md mx-4",children:s.jsx(Ie,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"ez"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"eziileave"}),s.jsx(Zj,{className:"w-6 h-6 animate-spin text-primary"}),s.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Loading your workspace..."})]})})})}):t?(window.location.href="/",null):s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:s.jsx(Ce,{className:"w-full max-w-md mx-4",children:s.jsx(Ie,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"ez"})}),s.jsx("span",{className:"font-semibold text-lg text-gray-900",children:"eziileave"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome to eziileave"}),s.jsx("p",{className:"text-gray-600",children:"Your comprehensive leave management solution"})]}),s.jsx("div",{className:"w-full space-y-4",children:s.jsx(se,{onClick:()=>window.location.href="/api/login",className:"w-full bg-primary hover:bg-primary/90",children:"Sign In with Replit"})}),s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-xs text-gray-500",children:"Streamline your leave management process with automated workflows, real-time approvals, and comprehensive reporting."})})]})})})})}let Ka=null,Si=0;const xY=30*1e3,CC=e=>{switch(e){case"admin":return{employeeOverview:{view:!0,modify:!0},leaveApplications:{view:!0,modify:!0},holidays:{view:!0,modify:!0},compensatoryOff:{view:!0,modify:!0},bto:{view:!0,modify:!0},employeeReports:{view:!0,modify:!0},adminOverview:{view:!0,modify:!0},approvals:{view:!0,modify:!0},employees:{view:!0,modify:!0},workflows:{view:!0,modify:!0},roles:{view:!0,modify:!0},adminReports:{view:!0,modify:!0},importLeaveData:{view:!0,modify:!0},adminLeaveTypes:{view:!0,modify:!0},adminCompOff:{view:!0,modify:!0},adminBTO:{view:!0,modify:!0},adminSettings:{view:!0,modify:!0},allowOnBehalf:{bto:!0,leave:!0,compOff:!0}};case"manager":return{employeeOverview:{view:!0,modify:!1},leaveApplications:{view:!0,modify:!1},holidays:{view:!0,modify:!1},compensatoryOff:{view:!0,modify:!1},bto:{view:!0,modify:!1},employeeReports:{view:!0,modify:!1},adminOverview:{view:!0,modify:!1},approvals:{view:!0,modify:!0},employees:{view:!0,modify:!1},workflows:{view:!1,modify:!1},roles:{view:!1,modify:!1},adminReports:{view:!0,modify:!1},importLeaveData:{view:!1,modify:!1},adminLeaveTypes:{view:!1,modify:!1},adminCompOff:{view:!1,modify:!1},adminBTO:{view:!1,modify:!1},adminSettings:{view:!1,modify:!1},allowOnBehalf:{bto:!0,leave:!0,compOff:!0}};case"employee":default:return{employeeOverview:{view:!0,modify:!1},leaveApplications:{view:!0,modify:!0},holidays:{view:!0,modify:!1},compensatoryOff:{view:!0,modify:!0},bto:{view:!0,modify:!0},employeeReports:{view:!0,modify:!1},adminOverview:{view:!1,modify:!1},approvals:{view:!1,modify:!1},employees:{view:!1,modify:!1},workflows:{view:!1,modify:!1},roles:{view:!1,modify:!1},adminReports:{view:!1,modify:!1},importLeaveData:{view:!1,modify:!1},adminLeaveTypes:{view:!1,modify:!1},adminCompOff:{view:!1,modify:!1},adminBTO:{view:!1,modify:!1},adminSettings:{view:!1,modify:!1},allowOnBehalf:{bto:!1,leave:!1,compOff:!1}}}};function n0(){const[e,t]=N.useState(Ka),[r,n]=N.useState(!Ka);N.useEffect(()=>{const c=async()=>{try{const f=localStorage.getItem("role_name")||localStorage.getItem("role")||"employee",h=localStorage.getItem("org_id"),m=Date.now();if(Ka&&m-Si<xY){console.log("Using cached permissions to prevent flickering"),t(Ka),n(!1);return}if(console.log("Loading permissions for role:",f),Ka=null,Si=0,h)try{const p={"Content-Type":"application/json"};h&&(p["X-Org-Id"]=h);const y=await fetch("/api/roles",{headers:p,credentials:"include"});if(y.ok){const x=(await y.json()).find(w=>w.name.toLowerCase()===f.toLowerCase());if(x&&x.permissions){console.log("Using database role permissions for",f,":",x.permissions),console.log("Workflows permission:",x.permissions.workflows);let w=x.permissions;f.toLowerCase()==="admin"&&Object.keys(x.permissions).length===0&&(w={employeeOverview:{view:!0,modify:!0},leaveApplications:{view:!0,modify:!0},holidays:{view:!0,modify:!0},compensatoryOff:{view:!0,modify:!0},pto:{view:!0,modify:!0},employeeReports:{view:!0,modify:!0},adminOverview:{view:!0,modify:!0},approvals:{view:!0,modify:!0},employees:{view:!0,modify:!0},workflows:{view:!0,modify:!0},roles:{view:!0,modify:!0},adminReports:{view:!0,modify:!0},importLeaveData:{view:!0,modify:!0},adminLeaveTypes:{view:!0,modify:!0},adminCompOff:{view:!0,modify:!0},adminPTO:{view:!0,modify:!0},adminSettings:{view:!0,modify:!0},allowOnBehalf:{pto:!0,leave:!0,compOff:!0}}),Ka=w,Si=Date.now(),t(w),n(!1);return}}}catch(p){console.error("Error fetching role permissions from database:",p)}const g=localStorage.getItem("user_permissions");if(g){console.log("Using user_permissions:",JSON.parse(g));const p=JSON.parse(g);Ka=p,Si=Date.now(),t(p)}else{const p=`role_permissions_${f.toLowerCase()}`,y=localStorage.getItem(p);if(console.log("Checking role key:",p),console.log("Role permissions found:",!!y),y){const b=JSON.parse(y);console.log("Using role permissions:",b),Ka=b,Si=Date.now(),t(b)}else{const b=CC(f);console.log("Using default permissions for role:",f,b),Ka=b,Si=Date.now(),t(b)}}}catch(f){console.error("Error loading permissions:",f);const h=CC("employee");Ka=h,Si=Date.now(),t(h)}finally{n(!1)}};c();const u=f=>{(!f||f.key==="user_permissions"||f.key==="role"||f.key==="org_id")&&(console.log("Storage change detected, invalidating permissions cache"),Ka=null,Si=0,n(!0),c())},d=f=>{console.log("Custom permissions change detected, invalidating cache"),Ka=null,Si=0,n(!0),c()};return window.addEventListener("storage",u),window.addEventListener("permissions-updated",d),()=>{window.removeEventListener("storage",u),window.removeEventListener("permissions-updated",d)}},[]);const a=(c,u="view")=>{if(!e)return!1;const d=e[c];return d?c==="allowOnBehalf"?!0:d[u]===!0:!1};return{permissions:e,loading:r,hasPermission:a,canViewScreen:c=>a(c,"view"),canModifyScreen:c=>a(c,"modify"),updatePermissions:c=>{localStorage.setItem("user_permissions",JSON.stringify(c)),Ka=c,Si=Date.now(),t(c)}}}function yY(){const[e,t]=N.useState(null);N.useEffect(()=>{const i=localStorage.getItem("jwt_token");t(i)},[]);const{data:r,isLoading:n,error:a}=Fe({queryKey:["client-products"],queryFn:async()=>{if(!e)throw new Error("No JWT token available");console.log("[ClientProducts] Fetching enabled modules from API...");const i=await fetch("https://apiv1.resolvepay.in/organization/get-client-products",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!i.ok)throw console.error("[ClientProducts] API request failed:",i.status,i.statusText),new Error(`Failed to fetch client products: ${i.status}`);const o=await i.json();return console.log("[ClientProducts] Enabled modules:",o),o},enabled:!!e,staleTime:5*60*1e3,retry:2});return{clientProducts:r,isLoading:n,error:a,hasToken:!!e}}const vY=async()=>{const e=localStorage.getItem("jwt_token");if(!e||e==="null"||e==="undefined"||e.trim()==="")throw new Error("JWT token not found");const t=await fetch("https://apiv1.resolvepay.in/organization/plan-status",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()},wY=()=>Fe({queryKey:["plan-status"],queryFn:vY,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:2,enabled:!!localStorage.getItem("jwt_token")}),bY=(e,t)=>{const r=t?"https://qa.ezii.co.in":"https://qa.resolveindia.com";switch(e){case"core":return`${r}/company-setup-for-customer`;case"payroll":return`${r}/dashboard/team-dashboard/team-dashboard`;default:return r}},jY=(e,t)=>{const r=bY(e,t);window.location.href=r},NY=async e=>{const t=localStorage.getItem("jwt_token");if(!t||t==="null"||t==="undefined"||t.trim()==="")throw new Error("JWT token not found");const n={attendance:5,expense:2}[e];if(!n)throw new Error(`Unsupported module: ${e}`);const a=await fetch(`https://apiv1.resolvepay.in/organization/login-string/${n}/Qa`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return a.json()},SY=async e=>{try{console.log(`[Module Click] ${e} clicked, fetching login string...`);const t=await NY(e);if(t.statuscode==="200")if(t!=null&&t.redirectUrl){const n=`https://rc.resolveindia.in/${t.redirectUrl}`;console.log(`[Module Click] Redirecting to: ${n}`),window.location.href=n}else console.error(`[Module Click] No redirect URL in response for ${e}`),alert("Access Denied, please contact your Organisation!");else console.error(`[Module Click] Invalid status code: ${t.statuscode}`),alert("Access Denied, please contact your Organisation!")}catch(t){console.error(`[Module Click] Error accessing ${e}:`,t),alert("Access Denied, please contact your Organisation!")}},_Y="https://apiv1.resolvepay.in";async function vi(){console.log("[ExternalAPI] Starting fetchEmployeeData...");const e=localStorage.getItem("jwt_token");console.log("[ExternalAPI] JWT token available:",!!e),console.log("[ExternalAPI] Token length:",(e==null?void 0:e.length)||0),console.log("[ExternalAPI] Token preview:",(e==null?void 0:e.substring(0,50))+"..."),console.log("[ExternalAPI] Full Authorization header:",`Bearer ${e}`);const t=window.location.pathname.startsWith("/id/");if(!e||e.trim()===""||e==="null"||e==="undefined")throw t?(console.log("[ExternalAPI] On token setup route, skipping redirect"),new Error("JWT token being processed. Please wait...")):(console.error("[ExternalAPI] Invalid or missing JWT token, redirecting to authentication..."),console.log("[ExternalAPI] Available localStorage keys:",Object.keys(localStorage)),window.location.href="https://services.resolvepay.in",new Error("JWT token required. Redirecting to authentication..."));const r={userBlocks:[1,3,4],userWise:0,workerType:0,attribute:0,subAttributeId:0};try{console.log("[ExternalAPI] Making request to worker-master-leave endpoint..."),console.log("[ExternalAPI] Payload:",r);const n=await fetch(`${_Y}/reports/worker-master-leave`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(r)});if(console.log("[ExternalAPI] Response status:",n.status),!n.ok){const i=await n.text();throw console.error("[ExternalAPI] Response error:",i),new Error(`Failed to fetch employee data: ${n.status} ${n.statusText}`)}const a=await n.json();if(console.log("[ExternalAPI] Response data:",a),a.result!=="Success")throw console.error("[ExternalAPI] API returned error:",a.message),new Error(`API returned error: ${a.message}`);return console.log(`[ExternalAPI] Successfully fetched ${a.data.data.length} employees from external API`),a.data.data}catch(n){throw console.error("[ExternalAPI] Error fetching employee data:",n),n}}function eh(e){try{return{id:e.user_id||"N/A",firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",employeeNumber:e.employee_number||"",designation:e.designation_name||"Employee",dateOfJoining:e.date_of_joining||null,userRole:e.user_role_name||"General",workerType:e.worker_type||"Employee",profilePhoto:e.user_profile||null,phoneNumber:e.Mobile_number_1||e.Mobile_number_2||null,dateOfBirth:e.date_of_birth||null,gender:e.gender_name||"Not Specified",reportingManager:e.reporting_manager_id||null,leaveId:e.leave_id||null,isDifferentlyAbled:e.is_differently_abled==="Yes",lastWorkingDay:e.last_working_day||null,user_id:e.user_id||"N/A",user_name:e.user_name||`${e.first_name||""} ${e.last_name||""}`.trim()||e.employee_number||`User ${e.user_id}`||"Employee",employee_number:e.employee_number||""}}catch(t){return console.error("[ExternalAPI] Error transforming employee data:",t,e),{id:e.user_id||"N/A",firstName:"Unknown",lastName:"Employee",email:"",employeeNumber:"",designation:"Employee",dateOfJoining:null,userRole:"General",workerType:"Employee",profilePhoto:null,phoneNumber:null,dateOfBirth:null,gender:"Not Specified",reportingManager:null,leaveId:null,isDifferentlyAbled:!1,lastWorkingDay:null,user_id:e.user_id||"N/A",user_name:e.user_name||`${e.first_name||""} ${e.last_name||""}`.trim()||e.employee_number||`User ${e.user_id}`||"Employee",employee_number:e.employee_number||""}}}const TY=Object.freeze(Object.defineProperty({__proto__:null,fetchEmployeeData:vi,transformEmployeeData:eh},Symbol.toStringTag,{value:"Module"})),EY=async()=>{try{const e=localStorage.getItem("jwt_token");console.log("[UserProfile] Fetching user profile..."),console.log("[UserProfile] JWT token available:",!!e);const t=window.location.pathname.startsWith("/id/");if(!e||e.trim()===""||e==="null"||e==="undefined")return t?(console.log("[UserProfile] On token setup route, skipping redirect"),null):(console.log("[UserProfile] Invalid or missing JWT token, redirecting to authentication..."),window.location.href="https://services.resolvepay.in",null);const r=await fetch("https://apiv1.resolvepay.in/organization/user-profile",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(console.log("[UserProfile] API response status:",r.status),!r.ok)return console.error("[UserProfile] API request failed:",r.status,r.statusText),null;const n=await r.json();return console.log("[UserProfile] API response data:",n),n.result==="Success"&&n.statuscode===200?(console.log("[UserProfile] Organization:",n.data.organization_name),console.log("[UserProfile] Organization logo:",n.data.organization_logo),n):null}catch(e){return console.error("[UserProfile] Error fetching user profile:",e),null}};var AY=N.createContext(void 0);function a0(e){const t=N.useContext(AY);return e||t||"ltr"}var Bw=0;function Lv(){N.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??DC()),document.body.insertAdjacentElement("beforeend",e[1]??DC()),Bw++,()=>{Bw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Bw--}},[])}function DC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Uw="focusScope.autoFocusOnMount",Ww="focusScope.autoFocusOnUnmount",kC={bubbles:!1,cancelable:!0},CY="FocusScope",s0=N.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=N.useState(null),u=Ea(a),d=Ea(i),f=N.useRef(null),h=Kt(t,p=>c(p)),m=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(n){let p=function(w){if(m.paused||!l)return;const v=w.target;l.contains(v)?f.current=v:Zo(f.current,{select:!0})},y=function(w){if(m.paused||!l)return;const v=w.relatedTarget;v!==null&&(l.contains(v)||Zo(f.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&Zo(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",y);const x=new MutationObserver(b);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",y),x.disconnect()}}},[n,l,m.paused]),N.useEffect(()=>{if(l){PC.add(m);const p=document.activeElement;if(!l.contains(p)){const b=new CustomEvent(Uw,kC);l.addEventListener(Uw,u),l.dispatchEvent(b),b.defaultPrevented||(DY(MY(T3(l)),{select:!0}),document.activeElement===p&&Zo(l))}return()=>{l.removeEventListener(Uw,u),setTimeout(()=>{const b=new CustomEvent(Ww,kC);l.addEventListener(Ww,d),l.dispatchEvent(b),b.defaultPrevented||Zo(p??document.body,{select:!0}),l.removeEventListener(Ww,d),PC.remove(m)},0)}}},[l,u,d,m]);const g=N.useCallback(p=>{if(!r&&!n||m.paused)return;const y=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,b=document.activeElement;if(y&&b){const x=p.currentTarget,[w,v]=kY(x);w&&v?!p.shiftKey&&b===v?(p.preventDefault(),r&&Zo(w,{select:!0})):p.shiftKey&&b===w&&(p.preventDefault(),r&&Zo(v,{select:!0})):b===x&&p.preventDefault()}},[r,n,m.paused]);return s.jsx(_t.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});s0.displayName=CY;function DY(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Zo(n,{select:t}),document.activeElement!==r)return}function kY(e){const t=T3(e),r=OC(t,e),n=OC(t.reverse(),e);return[r,n]}function T3(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function OC(e,t){for(const r of e)if(!OY(r,{upTo:t}))return r}function OY(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function PY(e){return e instanceof HTMLInputElement&&"select"in e}function Zo(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&PY(e)&&t&&e.select()}}var PC=IY();function IY(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=IC(e,t),e.unshift(t)},remove(t){var r;e=IC(e,t),(r=e[0])==null||r.resume()}}}function IC(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function MY(e){return e.filter(t=>t.tagName!=="A")}var Vw="rovingFocusGroup.onEntryFocus",RY={bubbles:!1,cancelable:!0},i0="RovingFocusGroup",[oN,E3,FY]=wv(i0),[LY,th]=pa(i0,[FY]),[$Y,BY]=LY(i0),A3=N.forwardRef((e,t)=>s.jsx(oN.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(oN.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(UY,{...e,ref:t})})}));A3.displayName=i0;var UY=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=N.useRef(null),m=Kt(t,h),g=a0(i),[p,y]=mi({prop:o,defaultProp:l??null,onChange:c,caller:i0}),[b,x]=N.useState(!1),w=Ea(u),v=E3(r),j=N.useRef(!1),[S,_]=N.useState(0);return N.useEffect(()=>{const A=h.current;if(A)return A.addEventListener(Vw,w),()=>A.removeEventListener(Vw,w)},[w]),s.jsx($Y,{scope:r,orientation:n,dir:g,loop:a,currentTabStopId:p,onItemFocus:N.useCallback(A=>y(A),[y]),onItemShiftTab:N.useCallback(()=>x(!0),[]),onFocusableItemAdd:N.useCallback(()=>_(A=>A+1),[]),onFocusableItemRemove:N.useCallback(()=>_(A=>A-1),[]),children:s.jsx(_t.div,{tabIndex:b||S===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:Xe(e.onMouseDown,()=>{j.current=!0}),onFocus:Xe(e.onFocus,A=>{const C=!j.current;if(A.target===A.currentTarget&&C&&!b){const D=new CustomEvent(Vw,RY);if(A.currentTarget.dispatchEvent(D),!D.defaultPrevented){const k=v().filter(W=>W.focusable),O=k.find(W=>W.active),V=k.find(W=>W.id===p),Y=[O,V,...k].filter(Boolean).map(W=>W.ref.current);k3(Y,d)}}j.current=!1}),onBlur:Xe(e.onBlur,()=>x(!1))})})}),C3="RovingFocusGroupItem",D3=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=ui(),u=i||c,d=BY(C3,r),f=d.currentTabStopId===u,h=E3(r),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:p}=d;return N.useEffect(()=>{if(n)return m(),()=>g()},[n,m,g]),s.jsx(oN.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:s.jsx(_t.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Xe(e.onMouseDown,y=>{n?d.onItemFocus(u):y.preventDefault()}),onFocus:Xe(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Xe(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const b=HY(y,d.orientation,d.dir);if(b!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let w=h().filter(v=>v.focusable).map(v=>v.ref.current);if(b==="last")w.reverse();else if(b==="prev"||b==="next"){b==="prev"&&w.reverse();const v=w.indexOf(y.currentTarget);w=d.loop?zY(w,v+1):w.slice(v+1)}setTimeout(()=>k3(w))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:p!=null}):o})})});D3.displayName=C3;var WY={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function VY(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function HY(e,t,r){const n=VY(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return WY[n]}function k3(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function zY(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var b_=A3,j_=D3,qY=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ku=new WeakMap,rg=new WeakMap,ng={},Hw=0,O3=function(e){return e&&(e.host||O3(e.parentNode))},GY=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=O3(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},KY=function(e,t,r,n){var a=GY(t,Array.isArray(e)?e:[e]);ng[r]||(ng[r]=new WeakMap);var i=ng[r],o=[],l=new Set,c=new Set(a),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var m=h.getAttribute(n),g=m!==null&&m!=="false",p=(Ku.get(h)||0)+1,y=(i.get(h)||0)+1;Ku.set(h,p),i.set(h,y),o.push(h),p===1&&g&&rg.set(h,!0),y===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return d(t),l.clear(),Hw++,function(){o.forEach(function(f){var h=Ku.get(f)-1,m=i.get(f)-1;Ku.set(f,h),i.set(f,m),h||(rg.has(f)||f.removeAttribute(n),rg.delete(f)),m||f.removeAttribute(r)}),Hw--,Hw||(Ku=new WeakMap,Ku=new WeakMap,rg=new WeakMap,ng={})}},$v=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=qY(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),KY(n,a,r,"aria-hidden")):function(){return null}},Pi=function(){return Pi=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Pi.apply(this,arguments)};function P3(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function YY(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var qg="right-scroll-bar-position",Gg="width-before-scroll-bar",XY="with-scroll-bars-hidden",QY="--removed-body-scroll-bar-size";function zw(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function JY(e,t){var r=N.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var ZY=typeof window<"u"?N.useLayoutEffect:N.useEffect,MC=new WeakMap;function eX(e,t){var r=JY(null,function(n){return e.forEach(function(a){return zw(a,n)})});return ZY(function(){var n=MC.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||zw(l,null)}),i.forEach(function(l){a.has(l)||zw(l,o)})}MC.set(r,e)},[e]),r}function tX(e){return e}function rX(e,t){t===void 0&&(t=tX);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return a}function nX(e){e===void 0&&(e={});var t=rX(null);return t.options=Pi({async:!0,ssr:!1},e),t}var I3=function(e){var t=e.sideCar,r=P3(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return N.createElement(n,Pi({},r))};I3.isSideCarExport=!0;function aX(e,t){return e.useMedium(t),I3}var M3=nX(),qw=function(){},Bv=N.forwardRef(function(e,t){var r=N.useRef(null),n=N.useState({onScrollCapture:qw,onWheelCapture:qw,onTouchMoveCapture:qw}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noRelative,g=e.noIsolation,p=e.inert,y=e.allowPinchZoom,b=e.as,x=b===void 0?"div":b,w=e.gapMode,v=P3(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,S=eX([r,t]),_=Pi(Pi({},v),a);return N.createElement(N.Fragment,null,d&&N.createElement(j,{sideCar:M3,removeScrollBar:u,shards:f,noRelative:m,noIsolation:g,inert:p,setCallbacks:i,allowPinchZoom:!!y,lockRef:r,gapMode:w}),o?N.cloneElement(N.Children.only(l),Pi(Pi({},_),{ref:S})):N.createElement(x,Pi({},_,{className:c,ref:S}),l))});Bv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bv.classNames={fullWidth:Gg,zeroRight:qg};var sX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iX(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=sX();return t&&e.setAttribute("nonce",t),e}function oX(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function lX(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var cX=function(){var e=0,t=null;return{add:function(r){e==0&&(t=iX())&&(oX(t,r),lX(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},uX=function(){var e=cX();return function(t,r){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},R3=function(){var e=uX(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},dX={left:0,top:0,right:0,gap:0},Gw=function(e){return parseInt(e||"",10)||0},fX=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Gw(r),Gw(n),Gw(a)]},hX=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return dX;var t=fX(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},mX=R3(),Pd="data-scroll-locked",pX=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(XY,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Pd,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(qg,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Gg,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(qg," .").concat(qg,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Gg," .").concat(Gg,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Pd,`] {
    `).concat(QY,": ").concat(l,`px;
  }
`)},RC=function(){var e=parseInt(document.body.getAttribute(Pd)||"0",10);return isFinite(e)?e:0},gX=function(){N.useEffect(function(){return document.body.setAttribute(Pd,(RC()+1).toString()),function(){var e=RC()-1;e<=0?document.body.removeAttribute(Pd):document.body.setAttribute(Pd,e.toString())}},[])},xX=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;gX();var i=N.useMemo(function(){return hX(a)},[a]);return N.createElement(mX,{styles:pX(i,!t,a,r?"":"!important")})},lN=!1;if(typeof window<"u")try{var ag=Object.defineProperty({},"passive",{get:function(){return lN=!0,!0}});window.addEventListener("test",ag,ag),window.removeEventListener("test",ag,ag)}catch{lN=!1}var Yu=lN?{passive:!1}:!1,yX=function(e){return e.tagName==="TEXTAREA"},F3=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!yX(e)&&r[t]==="visible")},vX=function(e){return F3(e,"overflowY")},wX=function(e){return F3(e,"overflowX")},FC=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=L3(e,n);if(a){var i=$3(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},bX=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},jX=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},L3=function(e,t){return e==="v"?vX(t):wX(t)},$3=function(e,t){return e==="v"?bX(t):jX(t)},NX=function(e,t){return e==="h"&&t==="rtl"?-1:1},SX=function(e,t,r,n,a){var i=NX(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{if(!l)break;var m=$3(e,l),g=m[0],p=m[1],y=m[2],b=p-y-i*g;(g||b)&&L3(e,l)&&(f+=b,h+=g);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(f)<1||!d&&Math.abs(h)<1)&&(u=!0),u},sg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},LC=function(e){return[e.deltaX,e.deltaY]},$C=function(e){return e&&"current"in e?e.current:e},_X=function(e,t){return e[0]===t[0]&&e[1]===t[1]},TX=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},EX=0,Xu=[];function AX(e){var t=N.useRef([]),r=N.useRef([0,0]),n=N.useRef(),a=N.useState(EX++)[0],i=N.useState(R3)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var p=YY([e.lockRef.current],(e.shards||[]).map($C),!0).filter(Boolean);return p.forEach(function(y){return y.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=N.useCallback(function(p,y){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var b=sg(p),x=r.current,w="deltaX"in p?p.deltaX:x[0]-b[0],v="deltaY"in p?p.deltaY:x[1]-b[1],j,S=p.target,_=Math.abs(w)>Math.abs(v)?"h":"v";if("touches"in p&&_==="h"&&S.type==="range")return!1;var A=FC(_,S);if(!A)return!0;if(A?j=_:(j=_==="v"?"h":"v",A=FC(_,S)),!A)return!1;if(!n.current&&"changedTouches"in p&&(w||v)&&(n.current=j),!j)return!0;var C=n.current||j;return SX(C,y,p,C==="h"?w:v)},[]),c=N.useCallback(function(p){var y=p;if(!(!Xu.length||Xu[Xu.length-1]!==i)){var b="deltaY"in y?LC(y):sg(y),x=t.current.filter(function(j){return j.name===y.type&&(j.target===y.target||y.target===j.shadowParent)&&_X(j.delta,b)})[0];if(x&&x.should){y.cancelable&&y.preventDefault();return}if(!x){var w=(o.current.shards||[]).map($C).filter(Boolean).filter(function(j){return j.contains(y.target)}),v=w.length>0?l(y,w[0]):!o.current.noIsolation;v&&y.cancelable&&y.preventDefault()}}},[]),u=N.useCallback(function(p,y,b,x){var w={name:p,delta:y,target:b,should:x,shadowParent:CX(b)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(v){return v!==w})},1)},[]),d=N.useCallback(function(p){r.current=sg(p),n.current=void 0},[]),f=N.useCallback(function(p){u(p.type,LC(p),p.target,l(p,e.lockRef.current))},[]),h=N.useCallback(function(p){u(p.type,sg(p),p.target,l(p,e.lockRef.current))},[]);N.useEffect(function(){return Xu.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Yu),document.addEventListener("touchmove",c,Yu),document.addEventListener("touchstart",d,Yu),function(){Xu=Xu.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,Yu),document.removeEventListener("touchmove",c,Yu),document.removeEventListener("touchstart",d,Yu)}},[]);var m=e.removeScrollBar,g=e.inert;return N.createElement(N.Fragment,null,g?N.createElement(i,{styles:TX(a)}):null,m?N.createElement(xX,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function CX(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const DX=aX(M3,AX);var o0=N.forwardRef(function(e,t){return N.createElement(Bv,Pi({},e,{ref:t,sideCar:DX}))});o0.classNames=Bv.classNames;var cN=["Enter"," "],kX=["ArrowDown","PageUp","Home"],B3=["ArrowUp","PageDown","End"],OX=[...kX,...B3],PX={ltr:[...cN,"ArrowRight"],rtl:[...cN,"ArrowLeft"]},IX={ltr:["ArrowLeft"],rtl:["ArrowRight"]},l0="Menu",[zm,MX,RX]=wv(l0),[Su,U3]=pa(l0,[RX,rc,th]),Uv=rc(),W3=th(),[FX,_u]=Su(l0),[LX,c0]=Su(l0),V3=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=Uv(t),[c,u]=N.useState(null),d=N.useRef(!1),f=Ea(i),h=a0(a);return N.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),s.jsx(v_,{...l,children:s.jsx(FX,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:u,children:s.jsx(LX,{scope:t,onClose:N.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:o,children:n})})})};V3.displayName=l0;var $X="MenuAnchor",N_=N.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=Uv(r);return s.jsx(t0,{...a,...n,ref:t})});N_.displayName=$X;var S_="MenuPortal",[BX,H3]=Su(S_,{forceMount:void 0}),z3=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=_u(S_,t);return s.jsx(BX,{scope:t,forceMount:r,children:s.jsx(Da,{present:r||i.open,children:s.jsx(Kf,{asChild:!0,container:a,children:n})})})};z3.displayName=S_;var Os="MenuContent",[UX,__]=Su(Os),q3=N.forwardRef((e,t)=>{const r=H3(Os,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=_u(Os,e.__scopeMenu),o=c0(Os,e.__scopeMenu);return s.jsx(zm.Provider,{scope:e.__scopeMenu,children:s.jsx(Da,{present:n||i.open,children:s.jsx(zm.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(WX,{...a,ref:t}):s.jsx(VX,{...a,ref:t})})})})}),WX=N.forwardRef((e,t)=>{const r=_u(Os,e.__scopeMenu),n=N.useRef(null),a=Kt(t,n);return N.useEffect(()=>{const i=n.current;if(i)return $v(i)},[]),s.jsx(T_,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Xe(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),VX=N.forwardRef((e,t)=>{const r=_u(Os,e.__scopeMenu);return s.jsx(T_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),HX=Ul("MenuContent.ScrollLock"),T_=N.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...p}=e,y=_u(Os,r),b=c0(Os,r),x=Uv(r),w=W3(r),v=MX(r),[j,S]=N.useState(null),_=N.useRef(null),A=Kt(t,_,y.onContentChange),C=N.useRef(0),D=N.useRef(""),k=N.useRef(0),O=N.useRef(null),V=N.useRef("right"),G=N.useRef(0),Y=g?o0:N.Fragment,W=g?{as:HX,allowPinchZoom:!0}:void 0,P=R=>{var ce,ge;const I=D.current+R,ee=v().filter(he=>!he.disabled),L=document.activeElement,q=(ce=ee.find(he=>he.ref.current===L))==null?void 0:ce.textValue,H=ee.map(he=>he.textValue),B=rQ(H,I,q),de=(ge=ee.find(he=>he.textValue===B))==null?void 0:ge.ref.current;(function he(K){D.current=K,window.clearTimeout(C.current),K!==""&&(C.current=window.setTimeout(()=>he(""),1e3))})(I),de&&setTimeout(()=>de.focus())};N.useEffect(()=>()=>window.clearTimeout(C.current),[]),Lv();const E=N.useCallback(R=>{var ee,L;return V.current===((ee=O.current)==null?void 0:ee.side)&&aQ(R,(L=O.current)==null?void 0:L.area)},[]);return s.jsx(UX,{scope:r,searchRef:D,onItemEnter:N.useCallback(R=>{E(R)&&R.preventDefault()},[E]),onItemLeave:N.useCallback(R=>{var I;E(R)||((I=_.current)==null||I.focus(),S(null))},[E]),onTriggerLeave:N.useCallback(R=>{E(R)&&R.preventDefault()},[E]),pointerGraceTimerRef:k,onPointerGraceIntentChange:N.useCallback(R=>{O.current=R},[]),children:s.jsx(Y,{...W,children:s.jsx(s0,{asChild:!0,trapped:a,onMountAutoFocus:Xe(i,R=>{var I;R.preventDefault(),(I=_.current)==null||I.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(ju,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,children:s.jsx(b_,{asChild:!0,...w,dir:b.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:S,onEntryFocus:Xe(c,R=>{b.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(Iv,{role:"menu","aria-orientation":"vertical","data-state":lL(y.open),"data-radix-menu-content":"",dir:b.dir,...x,...p,ref:A,style:{outline:"none",...p.style},onKeyDown:Xe(p.onKeyDown,R=>{const ee=R.target.closest("[data-radix-menu-content]")===R.currentTarget,L=R.ctrlKey||R.altKey||R.metaKey,q=R.key.length===1;ee&&(R.key==="Tab"&&R.preventDefault(),!L&&q&&P(R.key));const H=_.current;if(R.target!==H||!OX.includes(R.key))return;R.preventDefault();const de=v().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);B3.includes(R.key)&&de.reverse(),eQ(de)}),onBlur:Xe(e.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(C.current),D.current="")}),onPointerMove:Xe(e.onPointerMove,qm(R=>{const I=R.target,ee=G.current!==R.clientX;if(R.currentTarget.contains(I)&&ee){const L=R.clientX>G.current?"right":"left";V.current=L,G.current=R.clientX}}))})})})})})})});q3.displayName=Os;var zX="MenuGroup",E_=N.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(_t.div,{role:"group",...n,ref:t})});E_.displayName=zX;var qX="MenuLabel",G3=N.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(_t.div,{...n,ref:t})});G3.displayName=qX;var Ax="MenuItem",BC="menu.itemSelect",Wv=N.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=N.useRef(null),o=c0(Ax,e.__scopeMenu),l=__(Ax,e.__scopeMenu),c=Kt(t,i),u=N.useRef(!1),d=()=>{const f=i.current;if(!r&&f){const h=new CustomEvent(BC,{bubbles:!0,cancelable:!0});f.addEventListener(BC,m=>n==null?void 0:n(m),{once:!0}),a_(f,h),h.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(K3,{...a,ref:c,disabled:r,onClick:Xe(e.onClick,d),onPointerDown:f=>{var h;(h=e.onPointerDown)==null||h.call(e,f),u.current=!0},onPointerUp:Xe(e.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:Xe(e.onKeyDown,f=>{const h=l.searchRef.current!=="";r||h&&f.key===" "||cN.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Wv.displayName=Ax;var K3=N.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=__(Ax,r),l=W3(r),c=N.useRef(null),u=Kt(t,c),[d,f]=N.useState(!1),[h,m]=N.useState("");return N.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[i.children]),s.jsx(zm.ItemSlot,{scope:r,disabled:n,textValue:a??h,children:s.jsx(j_,{asChild:!0,...l,focusable:!n,children:s.jsx(_t.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:Xe(e.onPointerMove,qm(g=>{n?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Xe(e.onPointerLeave,qm(g=>o.onItemLeave(g))),onFocus:Xe(e.onFocus,()=>f(!0)),onBlur:Xe(e.onBlur,()=>f(!1))})})})}),GX="MenuCheckboxItem",Y3=N.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return s.jsx(eL,{scope:e.__scopeMenu,checked:r,children:s.jsx(Wv,{role:"menuitemcheckbox","aria-checked":Cx(r)?"mixed":r,...a,ref:t,"data-state":C_(r),onSelect:Xe(a.onSelect,()=>n==null?void 0:n(Cx(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Y3.displayName=GX;var X3="MenuRadioGroup",[KX,YX]=Su(X3,{value:void 0,onValueChange:()=>{}}),Q3=N.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=Ea(n);return s.jsx(KX,{scope:e.__scopeMenu,value:r,onValueChange:i,children:s.jsx(E_,{...a,ref:t})})});Q3.displayName=X3;var J3="MenuRadioItem",Z3=N.forwardRef((e,t)=>{const{value:r,...n}=e,a=YX(J3,e.__scopeMenu),i=r===a.value;return s.jsx(eL,{scope:e.__scopeMenu,checked:i,children:s.jsx(Wv,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":C_(i),onSelect:Xe(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});Z3.displayName=J3;var A_="MenuItemIndicator",[eL,XX]=Su(A_,{checked:!1}),tL=N.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=XX(A_,r);return s.jsx(Da,{present:n||Cx(i.checked)||i.checked===!0,children:s.jsx(_t.span,{...a,ref:t,"data-state":C_(i.checked)})})});tL.displayName=A_;var QX="MenuSeparator",rL=N.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(_t.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});rL.displayName=QX;var JX="MenuArrow",nL=N.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=Uv(r);return s.jsx(Mv,{...a,...n,ref:t})});nL.displayName=JX;var ZX="MenuSub",[GMe,aL]=Su(ZX),Jh="MenuSubTrigger",sL=N.forwardRef((e,t)=>{const r=_u(Jh,e.__scopeMenu),n=c0(Jh,e.__scopeMenu),a=aL(Jh,e.__scopeMenu),i=__(Jh,e.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>d,[d]),N.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),s.jsx(N_,{asChild:!0,...u,children:s.jsx(K3,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":lL(r.open),...e,ref:vv(t,a.onTriggerChange),onClick:f=>{var h;(h=e.onClick)==null||h.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Xe(e.onPointerMove,qm(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:Xe(e.onPointerLeave,qm(f=>{var m,g;d();const h=(m=r.content)==null?void 0:m.getBoundingClientRect();if(h){const p=(g=r.content)==null?void 0:g.dataset.side,y=p==="right",b=y?-5:5,x=h[y?"left":"right"],w=h[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+b,y:f.clientY},{x,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x,y:h.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Xe(e.onKeyDown,f=>{var m;const h=i.searchRef.current!=="";e.disabled||h&&f.key===" "||PX[n.dir].includes(f.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),f.preventDefault())})})})});sL.displayName=Jh;var iL="MenuSubContent",oL=N.forwardRef((e,t)=>{const r=H3(Os,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=_u(Os,e.__scopeMenu),o=c0(Os,e.__scopeMenu),l=aL(iL,e.__scopeMenu),c=N.useRef(null),u=Kt(t,c);return s.jsx(zm.Provider,{scope:e.__scopeMenu,children:s.jsx(Da,{present:n||i.open,children:s.jsx(zm.Slot,{scope:e.__scopeMenu,children:s.jsx(T_,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Xe(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Xe(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Xe(e.onKeyDown,d=>{var m;const f=d.currentTarget.contains(d.target),h=IX[o.dir].includes(d.key);f&&h&&(i.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});oL.displayName=iL;function lL(e){return e?"open":"closed"}function Cx(e){return e==="indeterminate"}function C_(e){return Cx(e)?"indeterminate":e?"checked":"unchecked"}function eQ(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function tQ(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function rQ(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=tQ(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function nQ(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function aQ(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return nQ(r,t)}function qm(e){return t=>t.pointerType==="mouse"?e(t):void 0}var sQ=V3,iQ=N_,oQ=z3,lQ=q3,cQ=E_,uQ=G3,dQ=Wv,fQ=Y3,hQ=Q3,mQ=Z3,pQ=tL,gQ=rL,xQ=nL,yQ=sL,vQ=oL,Vv="DropdownMenu",[wQ,KMe]=pa(Vv,[U3]),ka=U3(),[bQ,cL]=wQ(Vv),uL=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=ka(t),u=N.useRef(null),[d,f]=mi({prop:a,defaultProp:i??!1,onChange:o,caller:Vv});return s.jsx(bQ,{scope:t,triggerId:ui(),triggerRef:u,contentId:ui(),open:d,onOpenChange:f,onOpenToggle:N.useCallback(()=>f(h=>!h),[f]),modal:l,children:s.jsx(sQ,{...c,open:d,onOpenChange:f,dir:n,modal:l,children:r})})};uL.displayName=Vv;var dL="DropdownMenuTrigger",fL=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=cL(dL,r),o=ka(r);return s.jsx(iQ,{asChild:!0,...o,children:s.jsx(_t.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:vv(t,i.triggerRef),onPointerDown:Xe(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Xe(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});fL.displayName=dL;var jQ="DropdownMenuPortal",hL=e=>{const{__scopeDropdownMenu:t,...r}=e,n=ka(t);return s.jsx(oQ,{...n,...r})};hL.displayName=jQ;var mL="DropdownMenuContent",pL=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=cL(mL,r),i=ka(r),o=N.useRef(!1);return s.jsx(lQ,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:Xe(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Xe(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});pL.displayName=mL;var NQ="DropdownMenuGroup",SQ=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ka(r);return s.jsx(cQ,{...a,...n,ref:t})});SQ.displayName=NQ;var _Q="DropdownMenuLabel",gL=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ka(r);return s.jsx(uQ,{...a,...n,ref:t})});gL.displayName=_Q;var TQ="DropdownMenuItem",xL=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ka(r);return s.jsx(dQ,{...a,...n,ref:t})});xL.displayName=TQ;var EQ="DropdownMenuCheckboxItem",yL=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ka(r);return s.jsx(fQ,{...a,...n,ref:t})});yL.displayName=EQ;var AQ="DropdownMenuRadioGroup",CQ=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ka(r);return s.jsx(hQ,{...a,...n,ref:t})});CQ.displayName=AQ;var DQ="DropdownMenuRadioItem",vL=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ka(r);return s.jsx(mQ,{...a,...n,ref:t})});vL.displayName=DQ;var kQ="DropdownMenuItemIndicator",wL=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ka(r);return s.jsx(pQ,{...a,...n,ref:t})});wL.displayName=kQ;var OQ="DropdownMenuSeparator",bL=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ka(r);return s.jsx(gQ,{...a,...n,ref:t})});bL.displayName=OQ;var PQ="DropdownMenuArrow",IQ=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ka(r);return s.jsx(xQ,{...a,...n,ref:t})});IQ.displayName=PQ;var MQ="DropdownMenuSubTrigger",jL=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ka(r);return s.jsx(yQ,{...a,...n,ref:t})});jL.displayName=MQ;var RQ="DropdownMenuSubContent",NL=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=ka(r);return s.jsx(vQ,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});NL.displayName=RQ;var FQ=uL,LQ=fL,$Q=hL,SL=pL,_L=gL,TL=xL,EL=yL,AL=vL,CL=wL,DL=bL,kL=jL,OL=NL;const BQ=FQ,UQ=LQ,WQ=N.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(kL,{ref:a,className:Ge("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n,children:[r,s.jsx(Wi,{className:"ml-auto"})]}));WQ.displayName=kL.displayName;const VQ=N.forwardRef(({className:e,...t},r)=>s.jsx(OL,{ref:r,className:Ge("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));VQ.displayName=OL.displayName;const PL=N.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx($Q,{children:s.jsx(SL,{ref:n,sideOffset:t,className:Ge("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...r})}));PL.displayName=SL.displayName;const IL=N.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(TL,{ref:n,className:Ge("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r}));IL.displayName=TL.displayName;const HQ=N.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(EL,{ref:a,className:Ge("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(CL,{children:s.jsx(_v,{className:"h-4 w-4"})})}),t]}));HQ.displayName=EL.displayName;const zQ=N.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(AL,{ref:n,className:Ge("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(CL,{children:s.jsx(PF,{className:"h-2 w-2 fill-current"})})}),t]}));zQ.displayName=AL.displayName;const qQ=N.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(_L,{ref:n,className:Ge("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));qQ.displayName=_L.displayName;const GQ=N.forwardRef(({className:e,...t},r)=>s.jsx(DL,{ref:r,className:Ge("-mx-1 my-1 h-px bg-muted",e),...t}));GQ.displayName=DL.displayName;function Sr({children:e}){var q,H;const{user:t}=r0(),{canViewScreen:r,loading:n,permissions:a}=n0(),{clientProducts:i,isLoading:o}=yY(),{data:l,isLoading:c}=wY(),[u]=qf(),[d,f]=N.useState(!1),[h,m]=N.useState(!1),[g,p]=N.useState(!1),[y,b]=N.useState(()=>"leaves"),x=async()=>{localStorage.removeItem("jwt_token"),localStorage.removeItem("user_id"),localStorage.removeItem("role"),localStorage.removeItem("role_name"),localStorage.removeItem("org_id"),localStorage.removeItem("leave_year"),await Ex()},w=async B=>{const de=["core","payroll"],ce=["attendance","expense"];de.includes(B)?l&&!c?(console.log(`[Module Click] ${B} clicked, isSaas: ${l.isSaas}`),jY(B,l.isSaas)):console.log(`[Module Click] ${B} clicked, but plan status not loaded yet`):ce.includes(B)?await SY(B):b(B)};_3();const{data:v=[]}=Fe({queryKey:["external-employees"],queryFn:vi,staleTime:5*60*1e3}),{data:j}=Fe({queryKey:["user-profile"],queryFn:EY,staleTime:10*60*1e3,retry:2}),S=localStorage.getItem("user_id"),_=t;let A="User",C="U";if(S&&S!==(_==null?void 0:_.id)){const B=v.find(de=>de.user_id===S);if(B!=null&&B.user_name)A=B.user_name,C=B.user_name.split(" ").map(de=>de[0]).join("").substring(0,2).toUpperCase();else{const ce={6005:{name:"George Mathews",initials:"GM"},7243:{name:"Sumalatha Thadimari",initials:"ST"},7246:{name:"Anjali Kumari",initials:"AK"},12080:{name:"Rahul Sharma",initials:"RS"}}[S];ce?(A=ce.name,C=ce.initials):S==="1435"?(A="admin",C="AD"):(A=`Employee ${S}`,C=S.substring(0,2).toUpperCase())}}else A=_!=null&&_.firstName&&(_!=null&&_.lastName)?`${_.firstName} ${_.lastName}`:_!=null&&_.email?_.email.split("@")[0]:"User",C=_!=null&&_.firstName&&(_!=null&&_.lastName)?`${_.firstName[0]}${_.lastName[0]}`.toUpperCase():_!=null&&_.firstName?_.firstName[0].toUpperCase():"U";const D=localStorage.getItem("role_name")||localStorage.getItem("role"),[k,O]=N.useState(()=>localStorage.getItem("currentView")||"admin");N.useEffect(()=>{const B=localStorage.getItem("currentView");B&&B!==k&&O(B)},[]);const V=()=>{const B=k==="admin"?"employee":"admin";O(B),localStorage.setItem("currentView",B)},G=[{name:"Admin Overview",href:"/overview",icon:Jj,permission:"adminOverview",type:"admin"},{name:"Approvals",href:"/approvals",icon:qn,permission:"approvals",type:"admin"},{name:"Employees",href:"/employees",icon:Bn,permission:"employees",type:"admin"},{name:"Workflows",href:"/workflows",icon:Cq,permission:"workflows",type:"admin"},{name:"Roles",href:"/roles",icon:Bq,permission:"roles",type:"admin"},{name:"Import Leave Data",href:"/import-leave-data",icon:l_,permission:"importLeaveData",type:"admin"},{name:"My Dashboard",href:"/employee-overview",icon:Jj,permission:"employeeOverview",type:"employee"},{name:"Leave Applications",href:"/applications",icon:Aq,permission:"leaveApplications",type:"employee"},{name:"Holidays",href:"/holidays",icon:_q,permission:"holidays",type:"employee"},{name:"Compensatory Off",href:"/compensatory-off",icon:Eq,permission:"compensatoryOff",type:"employee"},{name:"BTO",href:"/pto",icon:An,permission:"bto",type:"employee"},{name:"Task Manager",href:"/task-manager",icon:kq,permission:"employeeOverview",type:"employee"}],Y=[{name:"Leave Types",href:"/admin/leave-types",icon:ki,permission:"adminLeaveTypes"},{name:"Comp Off",href:"/admin/comp-off",icon:ki,permission:"adminCompOff"},{name:"BTO",href:"/admin/pto",icon:ki,permission:"adminBTO"},{name:"Black Out Period",href:"/admin/blackout-periods",icon:ki,permission:"adminSettings"},{name:"Features",href:"/admin/feature-settings",icon:ki,permission:"adminSettings"}],W=[{name:"Leave Availed Report",href:"/admin/reports/leave-availed",icon:aa,permission:"adminReports"},{name:"Withdrawal Rejection Report",href:"/admin/reports/withdrawal-rejection",icon:aa,permission:"adminReports"},{name:"Collaborative Leave Report",href:"/admin/reports/collaborative-leave",icon:aa,permission:"adminReports"},{name:"BTO Report",href:"/admin/reports/bto-report",icon:aa,permission:"adminReports"},{name:"Comp-off Report",href:"/admin/reports/comp-off-report",icon:aa,permission:"adminReports"},{name:"HR Leave Balance Report",href:"/hr-leave-balance-report",icon:aa,permission:"adminReports"}],P=[{name:"My Leave History",href:"/reports/history",icon:aa,permission:"employeeReports"},{name:"My Balances",href:"/reports/balances",icon:aa,permission:"employeeReports"},{name:"My Withdrawal History",href:"/reports/withdrawal-history",icon:aa,permission:"employeeReports"}];localStorage.getItem("user_id"),!n&&a&&G.filter(B=>B.type==="admin").some(B=>r(B.permission)),!n&&a&&G.filter(B=>B.type==="employee").some(B=>r(B.permission));const E=n||!a?[]:G.filter(B=>{const de=r(B.permission);return B.type===k&&de}),R=n||!a?[]:Y.filter(B=>{const de=r(B.permission);return k==="admin"&&de}),I=n||!a?[]:W.filter(B=>k==="admin"&&r(B.permission)),ee=n||!a?[]:P.filter(B=>k==="employee"&&r(B.permission)),L=i?[...i.isCore?[{id:"core",name:"Core Master",icon:Nq,active:y==="core"}]:[],...i.isPayroll?[{id:"payroll",name:"Payroll",icon:Sq,active:y==="payroll"}]:[],...i.isAttendance?[{id:"attendance",name:"Attendance",icon:An,active:y==="attendance"}]:[],...i.isLeave?[{id:"leaves",name:"Leaves",icon:br,active:y==="leaves"}]:[],...i.isExpense?[{id:"expense",name:"Expense",icon:Rq,active:y==="expense"}]:[]]:[{id:"leaves",name:"Leaves",icon:br,active:y==="leaves"}];return N.useEffect(()=>{if(i&&!o){const B=L.map(de=>de.id);if(!B.includes(y)){const de=B[0];de&&b(de)}}},[i,o]),s.jsxs("div",{className:"flex h-screen overflow-hidden",children:[s.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-50 h-16 flex items-center justify-between px-4",children:[s.jsx("button",{onClick:()=>p(!0),className:"p-2 rounded-md hover:bg-gray-100",children:s.jsx(Pq,{className:"w-6 h-6"})}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("img",{src:"/eziileave-logo.png",alt:"eziileave",className:"h-8 w-auto"})}),s.jsx("div",{className:"w-10"})," "]}),g&&s.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>p(!1)}),s.jsx("div",{className:"hidden md:flex w-20 bg-gray-800 flex-col items-center py-6 space-y-4",children:L.map(B=>{const de=B.icon;return s.jsxs("button",{onClick:()=>w(B.id),className:`flex flex-col items-center justify-center w-16 h-16 rounded-lg transition-colors ${B.active?"bg-gray-700 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[s.jsx(de,{className:"w-6 h-6 mb-1"}),s.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:B.name})]},B.id)})}),s.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-gray-800 z-30 flex justify-around items-center py-2 border-t border-gray-700",children:L.map(B=>{const de=B.icon;return s.jsxs("button",{onClick:()=>w(B.id),className:`flex flex-col items-center justify-center p-2 rounded-lg transition-colors min-w-0 flex-1 ${B.active?"text-white":"text-gray-400"}`,children:[s.jsx(de,{className:"w-5 h-5 mb-1"}),s.jsx("span",{className:"text-xs font-medium text-center truncate",children:B.name})]},B.id)})}),s.jsxs("div",{className:`${g?"translate-x-0":"-translate-x-full"} md:translate-x-0 fixed md:relative w-80 md:w-64 bg-sidebar text-sidebar-foreground flex-shrink-0 z-40 flex flex-col h-full transition-transform duration-300 ease-in-out`,children:[s.jsxs("div",{className:"md:hidden flex justify-between items-center p-4 border-b border-sidebar-border",children:[s.jsx("span",{className:"text-lg font-semibold",children:"Menu"}),s.jsx("button",{onClick:()=>p(!1),className:"p-2 rounded-md hover:bg-sidebar-accent",children:s.jsx(da,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-4 md:p-6 border-b border-sidebar-border",children:s.jsx("div",{className:"flex justify-center",children:(q=j==null?void 0:j.data)!=null&&q.organization_logo?s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("img",{src:j.data.organization_logo,alt:j.data.organization_name||"Organization",className:"h-10 md:h-12 w-auto max-w-[120px] object-contain rounded-lg border border-sidebar-border bg-white p-2",onError:B=>{console.log("[Layout] Failed to load organization logo"),B.currentTarget.style.display="none"}}),s.jsx("span",{className:"text-sm md:text-sm text-sidebar-foreground/90 mt-2 text-center font-medium",children:j.data.organization_name})]}):s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"h-10 md:h-12 w-20 md:w-24 bg-sidebar-accent rounded-lg border border-sidebar-border flex items-center justify-center",children:s.jsx("span",{className:"text-sidebar-foreground/70 text-xs",children:"No Logo"})}),s.jsx("span",{className:"text-sm text-sidebar-foreground/90 mt-2 text-center font-medium",children:"Organization"})]})})}),s.jsxs("nav",{className:"mt-4 md:mt-6 overflow-y-auto flex-1 pb-4 md:pb-20",children:[s.jsx("div",{className:"px-3 md:px-4 mb-4 md:mb-6",children:s.jsxs("div",{className:"bg-sidebar-accent rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Dq,{className:"w-4 md:w-5 h-4 md:h-5 text-sidebar-foreground"}),s.jsx("span",{className:"text-sidebar-foreground font-medium text-sm md:text-base",children:"Home"})]}),s.jsx("div",{className:"ml-6 md:ml-7 mt-2 text-xs md:text-sm text-sidebar-foreground/70",children:"Leave"})]})}),s.jsxs("div",{className:"space-y-1 px-3 md:px-4",children:[E.map(B=>{const de=B.icon,ce=u===B.href;return s.jsx(Xh,{href:B.href,children:s.jsxs("a",{className:`flex items-center space-x-3 p-3 md:p-3 rounded-lg transition-colors touch-manipulation ${ce?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"}`,onClick:()=>p(!1),children:[s.jsx(de,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{className:"text-sm md:text-base",children:B.name})]})},B.name)}),D==="admin"&&R.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg text-sidebar-foreground/70 hover:bg-sidebar-accent cursor-pointer transition-colors touch-manipulation",onClick:()=>f(!d),children:[s.jsx(ki,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{className:"text-sm md:text-base",children:"Configurations"}),s.jsx(Dd,{className:`w-4 h-4 ml-auto transition-transform ${d?"rotate-180":""}`})]}),d&&s.jsx("div",{className:"ml-6 md:ml-8 space-y-1",children:R.map(B=>{const de=u===B.href;return s.jsx(Xh,{href:B.href,children:s.jsx("a",{className:`flex items-center space-x-3 p-2 md:p-2 rounded-lg transition-colors cursor-pointer touch-manipulation ${de?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"}`,onClick:()=>p(!1),children:s.jsx("span",{className:"text-sm",children:B.name})})},B.name)})})]}),k==="admin"&&I.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg text-sidebar-foreground/70 hover:bg-sidebar-accent cursor-pointer transition-colors",onClick:()=>m(!h),children:[s.jsx(aa,{className:"w-5 h-5"}),s.jsx("span",{children:"Reports"}),s.jsx(Dd,{className:`w-4 h-4 ml-auto transition-transform ${h?"rotate-180":""}`})]}),h&&s.jsx("div",{className:"ml-8 space-y-1",children:I.map(B=>{const de=u===B.href;return s.jsx(Xh,{href:B.href,children:s.jsx("div",{className:`flex items-center space-x-3 p-2 rounded-lg transition-colors cursor-pointer ${de?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"}`,children:s.jsx("span",{className:"text-sm",children:B.name})})},B.name)})})]}),k==="employee"&&ee.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg text-sidebar-foreground/70 hover:bg-sidebar-accent cursor-pointer transition-colors",onClick:()=>m(!h),children:[s.jsx(aa,{className:"w-5 h-5"}),s.jsx("span",{children:"Reports"}),s.jsx(Dd,{className:`w-4 h-4 ml-auto transition-transform ${h?"rotate-180":""}`})]}),h&&s.jsx("div",{className:"ml-8 space-y-1",children:ee.map(B=>{const de=u===B.href;return s.jsx(Xh,{href:B.href,children:s.jsx("div",{className:`flex items-center space-x-3 p-2 rounded-lg transition-colors cursor-pointer ${de?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"}`,children:s.jsx("span",{className:"text-sm",children:B.name})})},B.name)})})]})]})]}),D==="admin"&&s.jsx("div",{className:"mt-auto p-3 md:p-4",children:s.jsxs("div",{className:"flex items-center justify-between p-3 bg-sidebar-accent rounded-md",children:[s.jsx("span",{className:"text-xs md:text-sm text-sidebar-accent-foreground font-medium",children:k==="admin"?"Admin View":"Employee View"}),s.jsx("button",{onClick:V,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors touch-manipulation ${k==="admin"?"bg-blue-500":"bg-gray-400"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${k==="admin"?"translate-x-6":"translate-x-1"}`})})]})})]}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden pt-16 md:pt-0 pb-16 md:pb-0",children:[s.jsx("header",{className:"hidden md:flex bg-white border-b border-gray-200 px-4 md:px-6 py-3 md:py-4",children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4 min-w-0 flex-1",children:[s.jsx("img",{src:"/eziileave-logo.png",alt:"EziiLeave",className:"h-8 md:h-12 w-auto flex-shrink-0"}),s.jsx("div",{className:"h-4 md:h-6 w-px bg-gray-300 flex-shrink-0"}),s.jsx("h1",{className:"text-base md:text-lg font-medium text-gray-800 truncate",children:u==="/"?"Leave Management":u==="/setup"?"Leave Management / Setup":((H=E.find(B=>B.href===u))==null?void 0:H.name)||"Leave Management"})]}),s.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4 flex-shrink-0",children:[s.jsx("button",{className:"hidden md:block p-2 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(jq,{className:"w-4 md:w-5 h-4 md:h-5"})}),D==="admin"&&s.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"View:"}),s.jsx("button",{onClick:V,className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded transition-colors whitespace-nowrap",children:k==="admin"?"Admin":"Employee"})]}),s.jsxs(BQ,{children:[s.jsx(UQ,{asChild:!0,children:s.jsxs("div",{className:"flex items-center space-x-1 md:space-x-2 cursor-pointer hover:bg-gray-50 p-1 md:p-2 rounded-lg transition-colors",children:[s.jsx("span",{className:"hidden md:block text-sm text-gray-700 truncate max-w-[120px]",children:A}),s.jsx("div",{className:"w-7 h-7 md:w-8 md:h-8 bg-primary rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-white text-xs md:text-sm font-medium",children:C})})]})}),s.jsx(PL,{align:"end",className:"w-40",children:s.jsxs(IL,{className:"cursor-pointer text-red-600 focus:text-red-600",onClick:x,children:[s.jsx(Oq,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Logout"})]})})]})]})]})}),s.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 px-2 md:px-0",children:e})]})]})}var u0=e=>e.type==="checkbox",Cc=e=>e instanceof Date,ba=e=>e==null;const ML=e=>typeof e=="object";var rn=e=>!ba(e)&&!Array.isArray(e)&&ML(e)&&!Cc(e),RL=e=>rn(e)&&e.target?u0(e.target)?e.target.checked:e.target.value:e,KQ=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,FL=(e,t)=>e.has(KQ(t)),YQ=e=>{const t=e.constructor&&e.constructor.prototype;return rn(t)&&t.hasOwnProperty("isPrototypeOf")},D_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Nn(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(D_&&(e instanceof Blob||n))&&(r||rn(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!YQ(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Nn(e[a]));else return e;return t}var Hv=e=>/^\w*$/.test(e),en=e=>e===void 0,k_=e=>Array.isArray(e)?e.filter(Boolean):[],O_=e=>k_(e.replace(/["|']|\]/g,"").split(/\.|\[/)),st=(e,t,r)=>{if(!t||!rn(e))return r;const n=(Hv(t)?[t]:O_(t)).reduce((a,i)=>ba(a)?a:a[i],e);return en(n)||n===e?en(e[t])?r:e[t]:n},Za=e=>typeof e=="boolean",xr=(e,t,r)=>{let n=-1;const a=Hv(t)?[t]:O_(t),i=a.length,o=i-1;for(;++n<i;){const l=a[n];let c=r;if(n!==o){const u=e[l];c=rn(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const Dx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ei={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},no={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},P_=pe.createContext(null);P_.displayName="HookFormContext";const zv=()=>pe.useContext(P_),XQ=e=>{const{children:t,...r}=e;return pe.createElement(P_.Provider,{value:r},t)};var LL=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==ei.all&&(t._proxyFormState[o]=!n||ei.all),r&&(r[o]=!0),e[o]}});return a};const I_=typeof window<"u"?pe.useLayoutEffect:pe.useEffect;function QQ(e){const t=zv(),{control:r=t.control,disabled:n,name:a,exact:i}=e||{},[o,l]=pe.useState(r._formState),c=pe.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return I_(()=>r._subscribe({name:a,formState:c.current,exact:i,callback:u=>{!n&&l({...r._formState,...u})}}),[a,n,i]),pe.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),pe.useMemo(()=>LL(o,r,c.current,!1),[o,r])}var Li=e=>typeof e=="string",$L=(e,t,r,n,a)=>Li(e)?(n&&t.watch.add(e),st(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),st(r,i))):(n&&(t.watchAll=!0),r),uN=e=>ba(e)||!ML(e);function mo(e,t,r=new WeakSet){if(uN(e)||uN(t))return e===t;if(Cc(e)&&Cc(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const l=t[i];if(Cc(o)&&Cc(l)||rn(o)&&rn(l)||Array.isArray(o)&&Array.isArray(l)?!mo(o,l,r):o!==l)return!1}}return!0}function JQ(e){const t=zv(),{control:r=t.control,name:n,defaultValue:a,disabled:i,exact:o,compute:l}=e||{},c=pe.useRef(a),u=pe.useRef(l),d=pe.useRef(void 0);u.current=l;const f=pe.useMemo(()=>r._getWatch(n,c.current),[r,n]),[h,m]=pe.useState(u.current?u.current(f):f);return I_(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:g=>{if(!i){const p=$L(n,r._names,g.values||r._formValues,!1,c.current);if(u.current){const y=u.current(p);mo(y,d.current)||(m(y),d.current=y)}else m(p)}}}),[r,i,n,o]),pe.useEffect(()=>r._removeUnmounted()),h}function ZQ(e){const t=zv(),{name:r,disabled:n,control:a=t.control,shouldUnregister:i,defaultValue:o}=e,l=FL(a._names.array,r),c=pe.useMemo(()=>st(a._formValues,r,st(a._defaultValues,r,o)),[a,r,o]),u=JQ({control:a,name:r,defaultValue:c,exact:!0}),d=QQ({control:a,name:r,exact:!0}),f=pe.useRef(e),h=pe.useRef(a.register(r,{...e.rules,value:u,...Za(e.disabled)?{disabled:e.disabled}:{}}));f.current=e;const m=pe.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!st(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!st(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!st(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!st(d.validatingFields,r)},error:{enumerable:!0,get:()=>st(d.errors,r)}}),[d,r]),g=pe.useCallback(x=>h.current.onChange({target:{value:RL(x),name:r},type:Dx.CHANGE}),[r]),p=pe.useCallback(()=>h.current.onBlur({target:{value:st(a._formValues,r),name:r},type:Dx.BLUR}),[r,a._formValues]),y=pe.useCallback(x=>{const w=st(a._fields,r);w&&x&&(w._f.ref={focus:()=>x.focus&&x.focus(),select:()=>x.select&&x.select(),setCustomValidity:v=>x.setCustomValidity(v),reportValidity:()=>x.reportValidity()})},[a._fields,r]),b=pe.useMemo(()=>({name:r,value:u,...Za(n)||d.disabled?{disabled:d.disabled||n}:{},onChange:g,onBlur:p,ref:y}),[r,n,d.disabled,g,p,y,u]);return pe.useEffect(()=>{const x=a._options.shouldUnregister||i;a.register(r,{...f.current.rules,...Za(f.current.disabled)?{disabled:f.current.disabled}:{}});const w=(v,j)=>{const S=st(a._fields,v);S&&S._f&&(S._f.mount=j)};if(w(r,!0),x){const v=Nn(st(a._options.defaultValues,r));xr(a._defaultValues,r,v),en(st(a._formValues,r))&&xr(a._formValues,r,v)}return!l&&a.register(r),()=>{(l?x&&!a._state.action:x)?a.unregister(r):w(r,!1)}},[r,a,l,i]),pe.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),pe.useMemo(()=>({field:b,formState:d,fieldState:m}),[b,d,m])}const eJ=e=>e.render(ZQ(e));var BL=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},hm=e=>Array.isArray(e)?e:[e],UC=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},Ia=e=>rn(e)&&!Object.keys(e).length,M_=e=>e.type==="file",ti=e=>typeof e=="function",kx=e=>{if(!D_)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},UL=e=>e.type==="select-multiple",R_=e=>e.type==="radio",tJ=e=>R_(e)||u0(e),Kw=e=>kx(e)&&e.isConnected;function rJ(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=en(e)?n++:e[t[n++]];return e}function nJ(e){for(const t in e)if(e.hasOwnProperty(t)&&!en(e[t]))return!1;return!0}function ln(e,t){const r=Array.isArray(t)?t:Hv(t)?[t]:O_(t),n=r.length===1?e:rJ(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(rn(n)&&Ia(n)||Array.isArray(n)&&nJ(n))&&ln(e,r.slice(0,-1)),e}var WL=e=>{for(const t in e)if(ti(e[t]))return!0;return!1};function Ox(e,t={}){const r=Array.isArray(e);if(rn(e)||r)for(const n in e)Array.isArray(e[n])||rn(e[n])&&!WL(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Ox(e[n],t[n])):ba(e[n])||(t[n]=!0);return t}function VL(e,t,r){const n=Array.isArray(e);if(rn(e)||n)for(const a in e)Array.isArray(e[a])||rn(e[a])&&!WL(e[a])?en(t)||uN(r[a])?r[a]=Array.isArray(e[a])?Ox(e[a],[]):{...Ox(e[a])}:VL(e[a],ba(t)?{}:t[a],r[a]):r[a]=!mo(e[a],t[a]);return r}var kh=(e,t)=>VL(e,t,Ox(t));const WC={value:!1,isValid:!1},VC={value:!0,isValid:!0};var HL=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!en(e[0].attributes.value)?en(e[0].value)||e[0].value===""?VC:{value:e[0].value,isValid:!0}:VC:WC}return WC},zL=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>en(e)?e:t?e===""?NaN:e&&+e:r&&Li(e)?new Date(e):n?n(e):e;const HC={isValid:!1,value:null};var qL=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,HC):HC;function zC(e){const t=e.ref;return M_(t)?t.files:R_(t)?qL(e.refs).value:UL(t)?[...t.selectedOptions].map(({value:r})=>r):u0(t)?HL(e.refs).value:zL(en(t.value)?e.ref.value:t.value,e)}var aJ=(e,t,r,n)=>{const a={};for(const i of e){const o=st(t,i);o&&xr(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},Px=e=>e instanceof RegExp,Oh=e=>en(e)?e:Px(e)?e.source:rn(e)?Px(e.value)?e.value.source:e.value:e,qC=e=>({isOnSubmit:!e||e===ei.onSubmit,isOnBlur:e===ei.onBlur,isOnChange:e===ei.onChange,isOnAll:e===ei.all,isOnTouch:e===ei.onTouched});const GC="AsyncFunction";var sJ=e=>!!e&&!!e.validate&&!!(ti(e.validate)&&e.validate.constructor.name===GC||rn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===GC)),iJ=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),KC=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const mm=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=st(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(mm(l,t))break}else if(rn(l)&&mm(l,t))break}}};function YC(e,t,r){const n=st(e,r);if(n||Hv(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=st(t,i),l=st(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:r}}var oJ=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return Ia(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||ei.all))},lJ=(e,t,r)=>!e||!t||e===t||hm(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),cJ=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,uJ=(e,t)=>!k_(st(e,t)).length&&ln(e,t),dJ=(e,t,r)=>{const n=hm(st(e,r));return xr(n,"root",t[r]),xr(e,r,n),e},Kg=e=>Li(e);function XC(e,t,r="validate"){if(Kg(e)||Array.isArray(e)&&e.every(Kg)||Za(e)&&!e)return{type:r,message:Kg(e)?e:"",ref:t}}var Qu=e=>rn(e)&&!Px(e)?e:{value:e,message:""},QC=async(e,t,r,n,a,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:g,name:p,valueAsNumber:y,mount:b}=e._f,x=st(r,p);if(!b||t.has(p))return{};const w=l?l[0]:o,v=O=>{a&&w.reportValidity&&(w.setCustomValidity(Za(O)?"":O||""),w.reportValidity())},j={},S=R_(o),_=u0(o),A=S||_,C=(y||M_(o))&&en(o.value)&&en(x)||kx(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,D=BL.bind(null,p,n,j),k=(O,V,G,Y=no.maxLength,W=no.minLength)=>{const P=O?V:G;j[p]={type:O?Y:W,message:P,ref:o,...D(O?Y:W,P)}};if(i?!Array.isArray(x)||!x.length:c&&(!A&&(C||ba(x))||Za(x)&&!x||_&&!HL(l).isValid||S&&!qL(l).isValid)){const{value:O,message:V}=Kg(c)?{value:!!c,message:c}:Qu(c);if(O&&(j[p]={type:no.required,message:V,ref:w,...D(no.required,V)},!n))return v(V),j}if(!C&&(!ba(f)||!ba(h))){let O,V;const G=Qu(h),Y=Qu(f);if(!ba(x)&&!isNaN(x)){const W=o.valueAsNumber||x&&+x;ba(G.value)||(O=W>G.value),ba(Y.value)||(V=W<Y.value)}else{const W=o.valueAsDate||new Date(x),P=I=>new Date(new Date().toDateString()+" "+I),E=o.type=="time",R=o.type=="week";Li(G.value)&&x&&(O=E?P(x)>P(G.value):R?x>G.value:W>new Date(G.value)),Li(Y.value)&&x&&(V=E?P(x)<P(Y.value):R?x<Y.value:W<new Date(Y.value))}if((O||V)&&(k(!!O,G.message,Y.message,no.max,no.min),!n))return v(j[p].message),j}if((u||d)&&!C&&(Li(x)||i&&Array.isArray(x))){const O=Qu(u),V=Qu(d),G=!ba(O.value)&&x.length>+O.value,Y=!ba(V.value)&&x.length<+V.value;if((G||Y)&&(k(G,O.message,V.message),!n))return v(j[p].message),j}if(m&&!C&&Li(x)){const{value:O,message:V}=Qu(m);if(Px(O)&&!x.match(O)&&(j[p]={type:no.pattern,message:V,ref:o,...D(no.pattern,V)},!n))return v(V),j}if(g){if(ti(g)){const O=await g(x,r),V=XC(O,w);if(V&&(j[p]={...V,...D(no.validate,V.message)},!n))return v(V.message),j}else if(rn(g)){let O={};for(const V in g){if(!Ia(O)&&!n)break;const G=XC(await g[V](x,r),w,V);G&&(O={...G,...D(V,G.message)},v(G.message),n&&(j[p]=O))}if(!Ia(O)&&(j[p]={ref:w,...O},!n))return j}}return v(!0),j};const fJ={mode:ei.onSubmit,reValidateMode:ei.onChange,shouldFocusError:!0};function hJ(e={}){let t={...fJ,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:ti(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=rn(t.defaultValues)||rn(t.values)?Nn(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Nn(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:UC(),state:UC()},m=t.criteriaMode===ei.all,g=U=>te=>{clearTimeout(u),u=setTimeout(U,te)},p=async U=>{if(!t.disabled&&(d.isValid||f.isValid||U)){const te=t.resolver?Ia((await _()).errors):await C(n,!0);te!==r.isValid&&h.state.next({isValid:te})}},y=(U,te)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((U||Array.from(l.mount)).forEach(xe=>{xe&&(te?xr(r.validatingFields,xe,te):ln(r.validatingFields,xe))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Ia(r.validatingFields)}))},b=(U,te=[],xe,le,ye=!0,ve=!0)=>{if(le&&xe&&!t.disabled){if(o.action=!0,ve&&Array.isArray(st(n,U))){const ke=xe(st(n,U),le.argA,le.argB);ye&&xr(n,U,ke)}if(ve&&Array.isArray(st(r.errors,U))){const ke=xe(st(r.errors,U),le.argA,le.argB);ye&&xr(r.errors,U,ke),uJ(r.errors,U)}if((d.touchedFields||f.touchedFields)&&ve&&Array.isArray(st(r.touchedFields,U))){const ke=xe(st(r.touchedFields,U),le.argA,le.argB);ye&&xr(r.touchedFields,U,ke)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=kh(a,i)),h.state.next({name:U,isDirty:k(U,te),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else xr(i,U,te)},x=(U,te)=>{xr(r.errors,U,te),h.state.next({errors:r.errors})},w=U=>{r.errors=U,h.state.next({errors:r.errors,isValid:!1})},v=(U,te,xe,le)=>{const ye=st(n,U);if(ye){const ve=st(i,U,en(xe)?st(a,U):xe);en(ve)||le&&le.defaultChecked||te?xr(i,U,te?ve:zC(ye._f)):G(U,ve),o.mount&&p()}},j=(U,te,xe,le,ye)=>{let ve=!1,ke=!1;const it={name:U};if(!t.disabled){if(!xe||le){(d.isDirty||f.isDirty)&&(ke=r.isDirty,r.isDirty=it.isDirty=k(),ve=ke!==it.isDirty);const ot=mo(st(a,U),te);ke=!!st(r.dirtyFields,U),ot?ln(r.dirtyFields,U):xr(r.dirtyFields,U,!0),it.dirtyFields=r.dirtyFields,ve=ve||(d.dirtyFields||f.dirtyFields)&&ke!==!ot}if(xe){const ot=st(r.touchedFields,U);ot||(xr(r.touchedFields,U,xe),it.touchedFields=r.touchedFields,ve=ve||(d.touchedFields||f.touchedFields)&&ot!==xe)}ve&&ye&&h.state.next(it)}return ve?it:{}},S=(U,te,xe,le)=>{const ye=st(r.errors,U),ve=(d.isValid||f.isValid)&&Za(te)&&r.isValid!==te;if(t.delayError&&xe?(c=g(()=>x(U,xe)),c(t.delayError)):(clearTimeout(u),c=null,xe?xr(r.errors,U,xe):ln(r.errors,U)),(xe?!mo(ye,xe):ye)||!Ia(le)||ve){const ke={...le,...ve&&Za(te)?{isValid:te}:{},errors:r.errors,name:U};r={...r,...ke},h.state.next(ke)}},_=async U=>{y(U,!0);const te=await t.resolver(i,t.context,aJ(U||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return y(U),te},A=async U=>{const{errors:te}=await _(U);if(U)for(const xe of U){const le=st(te,xe);le?xr(r.errors,xe,le):ln(r.errors,xe)}else r.errors=te;return te},C=async(U,te,xe={valid:!0})=>{for(const le in U){const ye=U[le];if(ye){const{_f:ve,...ke}=ye;if(ve){const it=l.array.has(ve.name),ot=ye._f&&sJ(ye._f);ot&&d.validatingFields&&y([le],!0);const Nt=await QC(ye,l.disabled,i,m,t.shouldUseNativeValidation&&!te,it);if(ot&&d.validatingFields&&y([le]),Nt[ve.name]&&(xe.valid=!1,te))break;!te&&(st(Nt,ve.name)?it?dJ(r.errors,Nt,ve.name):xr(r.errors,ve.name,Nt[ve.name]):ln(r.errors,ve.name))}!Ia(ke)&&await C(ke,te,xe)}}return xe.valid},D=()=>{for(const U of l.unMount){const te=st(n,U);te&&(te._f.refs?te._f.refs.every(xe=>!Kw(xe)):!Kw(te._f.ref))&&ce(U)}l.unMount=new Set},k=(U,te)=>!t.disabled&&(U&&te&&xr(i,U,te),!mo(I(),a)),O=(U,te,xe)=>$L(U,l,{...o.mount?i:en(te)?a:Li(U)?{[U]:te}:te},xe,te),V=U=>k_(st(o.mount?i:a,U,t.shouldUnregister?st(a,U,[]):[])),G=(U,te,xe={})=>{const le=st(n,U);let ye=te;if(le){const ve=le._f;ve&&(!ve.disabled&&xr(i,U,zL(te,ve)),ye=kx(ve.ref)&&ba(te)?"":te,UL(ve.ref)?[...ve.ref.options].forEach(ke=>ke.selected=ye.includes(ke.value)):ve.refs?u0(ve.ref)?ve.refs.forEach(ke=>{(!ke.defaultChecked||!ke.disabled)&&(Array.isArray(ye)?ke.checked=!!ye.find(it=>it===ke.value):ke.checked=ye===ke.value||!!ye)}):ve.refs.forEach(ke=>ke.checked=ke.value===ye):M_(ve.ref)?ve.ref.value="":(ve.ref.value=ye,ve.ref.type||h.state.next({name:U,values:Nn(i)})))}(xe.shouldDirty||xe.shouldTouch)&&j(U,ye,xe.shouldTouch,xe.shouldDirty,!0),xe.shouldValidate&&R(U)},Y=(U,te,xe)=>{for(const le in te){if(!te.hasOwnProperty(le))return;const ye=te[le],ve=U+"."+le,ke=st(n,ve);(l.array.has(U)||rn(ye)||ke&&!ke._f)&&!Cc(ye)?Y(ve,ye,xe):G(ve,ye,xe)}},W=(U,te,xe={})=>{const le=st(n,U),ye=l.array.has(U),ve=Nn(te);xr(i,U,ve),ye?(h.array.next({name:U,values:Nn(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&xe.shouldDirty&&h.state.next({name:U,dirtyFields:kh(a,i),isDirty:k(U,ve)})):le&&!le._f&&!ba(ve)?Y(U,ve,xe):G(U,ve,xe),KC(U,l)&&h.state.next({...r,name:U}),h.state.next({name:o.mount?U:void 0,values:Nn(i)})},P=async U=>{o.mount=!0;const te=U.target;let xe=te.name,le=!0;const ye=st(n,xe),ve=ot=>{le=Number.isNaN(ot)||Cc(ot)&&isNaN(ot.getTime())||mo(ot,st(i,xe,ot))},ke=qC(t.mode),it=qC(t.reValidateMode);if(ye){let ot,Nt;const Le=te.type?zC(ye._f):RL(U),rt=U.type===Dx.BLUR||U.type===Dx.FOCUS_OUT,Mt=!iJ(ye._f)&&!t.resolver&&!st(r.errors,xe)&&!ye._f.deps||cJ(rt,st(r.touchedFields,xe),r.isSubmitted,it,ke),at=KC(xe,l,rt);xr(i,xe,Le),rt?(!te||!te.readOnly)&&(ye._f.onBlur&&ye._f.onBlur(U),c&&c(0)):ye._f.onChange&&ye._f.onChange(U);const $t=j(xe,Le,rt),Ke=!Ia($t)||at;if(!rt&&h.state.next({name:xe,type:U.type,values:Nn(i)}),Mt)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?rt&&p():rt||p()),Ke&&h.state.next({name:xe,...at?{}:$t});if(!rt&&at&&h.state.next({...r}),t.resolver){const{errors:Dt}=await _([xe]);if(ve(Le),le){const Jt=YC(r.errors,n,xe),Gr=YC(Dt,n,Jt.name||xe);ot=Gr.error,xe=Gr.name,Nt=Ia(Dt)}}else y([xe],!0),ot=(await QC(ye,l.disabled,i,m,t.shouldUseNativeValidation))[xe],y([xe]),ve(Le),le&&(ot?Nt=!1:(d.isValid||f.isValid)&&(Nt=await C(n,!0)));le&&(ye._f.deps&&R(ye._f.deps),S(xe,Nt,ot,$t))}},E=(U,te)=>{if(st(r.errors,te)&&U.focus)return U.focus(),1},R=async(U,te={})=>{let xe,le;const ye=hm(U);if(t.resolver){const ve=await A(en(U)?U:ye);xe=Ia(ve),le=U?!ye.some(ke=>st(ve,ke)):xe}else U?(le=(await Promise.all(ye.map(async ve=>{const ke=st(n,ve);return await C(ke&&ke._f?{[ve]:ke}:ke)}))).every(Boolean),!(!le&&!r.isValid)&&p()):le=xe=await C(n);return h.state.next({...!Li(U)||(d.isValid||f.isValid)&&xe!==r.isValid?{}:{name:U},...t.resolver||!U?{isValid:xe}:{},errors:r.errors}),te.shouldFocus&&!le&&mm(n,E,U?ye:l.mount),le},I=U=>{const te={...o.mount?i:a};return en(U)?te:Li(U)?st(te,U):U.map(xe=>st(te,xe))},ee=(U,te)=>({invalid:!!st((te||r).errors,U),isDirty:!!st((te||r).dirtyFields,U),error:st((te||r).errors,U),isValidating:!!st(r.validatingFields,U),isTouched:!!st((te||r).touchedFields,U)}),L=U=>{U&&hm(U).forEach(te=>ln(r.errors,te)),h.state.next({errors:U?r.errors:{}})},q=(U,te,xe)=>{const le=(st(n,U,{_f:{}})._f||{}).ref,ye=st(r.errors,U)||{},{ref:ve,message:ke,type:it,...ot}=ye;xr(r.errors,U,{...ot,...te,ref:le}),h.state.next({name:U,errors:r.errors,isValid:!1}),xe&&xe.shouldFocus&&le&&le.focus&&le.focus()},H=(U,te)=>ti(U)?h.state.subscribe({next:xe=>"values"in xe&&U(O(void 0,te),xe)}):O(U,te,!0),B=U=>h.state.subscribe({next:te=>{lJ(U.name,te.name,U.exact)&&oJ(te,U.formState||d,M,U.reRenderRoot)&&U.callback({values:{...i},...r,...te,defaultValues:a})}}).unsubscribe,de=U=>(o.mount=!0,f={...f,...U.formState},B({...U,formState:f})),ce=(U,te={})=>{for(const xe of U?hm(U):l.mount)l.mount.delete(xe),l.array.delete(xe),te.keepValue||(ln(n,xe),ln(i,xe)),!te.keepError&&ln(r.errors,xe),!te.keepDirty&&ln(r.dirtyFields,xe),!te.keepTouched&&ln(r.touchedFields,xe),!te.keepIsValidating&&ln(r.validatingFields,xe),!t.shouldUnregister&&!te.keepDefaultValue&&ln(a,xe);h.state.next({values:Nn(i)}),h.state.next({...r,...te.keepDirty?{isDirty:k()}:{}}),!te.keepIsValid&&p()},ge=({disabled:U,name:te})=>{(Za(U)&&o.mount||U||l.disabled.has(te))&&(U?l.disabled.add(te):l.disabled.delete(te))},he=(U,te={})=>{let xe=st(n,U);const le=Za(te.disabled)||Za(t.disabled);return xr(n,U,{...xe||{},_f:{...xe&&xe._f?xe._f:{ref:{name:U}},name:U,mount:!0,...te}}),l.mount.add(U),xe?ge({disabled:Za(te.disabled)?te.disabled:t.disabled,name:U}):v(U,!0,te.value),{...le?{disabled:te.disabled||t.disabled}:{},...t.progressive?{required:!!te.required,min:Oh(te.min),max:Oh(te.max),minLength:Oh(te.minLength),maxLength:Oh(te.maxLength),pattern:Oh(te.pattern)}:{},name:U,onChange:P,onBlur:P,ref:ye=>{if(ye){he(U,te),xe=st(n,U);const ve=en(ye.value)&&ye.querySelectorAll&&ye.querySelectorAll("input,select,textarea")[0]||ye,ke=tJ(ve),it=xe._f.refs||[];if(ke?it.find(ot=>ot===ve):ve===xe._f.ref)return;xr(n,U,{_f:{...xe._f,...ke?{refs:[...it.filter(Kw),ve,...Array.isArray(st(a,U))?[{}]:[]],ref:{type:ve.type,name:U}}:{ref:ve}}}),v(U,!1,void 0,ve)}else xe=st(n,U,{}),xe._f&&(xe._f.mount=!1),(t.shouldUnregister||te.shouldUnregister)&&!(FL(l.array,U)&&o.action)&&l.unMount.add(U)}}},K=()=>t.shouldFocusError&&mm(n,E,l.mount),fe=U=>{Za(U)&&(h.state.next({disabled:U}),mm(n,(te,xe)=>{const le=st(n,xe);le&&(te.disabled=le._f.disabled||U,Array.isArray(le._f.refs)&&le._f.refs.forEach(ye=>{ye.disabled=le._f.disabled||U}))},0,!1))},ae=(U,te)=>async xe=>{let le;xe&&(xe.preventDefault&&xe.preventDefault(),xe.persist&&xe.persist());let ye=Nn(i);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ve,values:ke}=await _();r.errors=ve,ye=Nn(ke)}else await C(n);if(l.disabled.size)for(const ve of l.disabled)ln(ye,ve);if(ln(r.errors,"root"),Ia(r.errors)){h.state.next({errors:{}});try{await U(ye,xe)}catch(ve){le=ve}}else te&&await te({...r.errors},xe),K(),setTimeout(K);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ia(r.errors)&&!le,submitCount:r.submitCount+1,errors:r.errors}),le)throw le},Ne=(U,te={})=>{st(n,U)&&(en(te.defaultValue)?W(U,Nn(st(a,U))):(W(U,te.defaultValue),xr(a,U,Nn(te.defaultValue))),te.keepTouched||ln(r.touchedFields,U),te.keepDirty||(ln(r.dirtyFields,U),r.isDirty=te.defaultValue?k(U,Nn(st(a,U))):k()),te.keepError||(ln(r.errors,U),d.isValid&&p()),h.state.next({...r}))},Se=(U,te={})=>{const xe=U?Nn(U):a,le=Nn(xe),ye=Ia(U),ve=ye?a:le;if(te.keepDefaultValues||(a=xe),!te.keepValues){if(te.keepDirtyValues){const ke=new Set([...l.mount,...Object.keys(kh(a,i))]);for(const it of Array.from(ke))st(r.dirtyFields,it)?xr(ve,it,st(i,it)):W(it,st(ve,it))}else{if(D_&&en(U))for(const ke of l.mount){const it=st(n,ke);if(it&&it._f){const ot=Array.isArray(it._f.refs)?it._f.refs[0]:it._f.ref;if(kx(ot)){const Nt=ot.closest("form");if(Nt){Nt.reset();break}}}}if(te.keepFieldsRef)for(const ke of l.mount)W(ke,st(ve,ke));else n={}}i=t.shouldUnregister?te.keepDefaultValues?Nn(a):{}:Nn(ve),h.array.next({values:{...ve}}),h.state.next({values:{...ve}})}l={mount:te.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!te.keepIsValid||!!te.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:te.keepSubmitCount?r.submitCount:0,isDirty:ye?!1:te.keepDirty?r.isDirty:!!(te.keepDefaultValues&&!mo(U,a)),isSubmitted:te.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ye?{}:te.keepDirtyValues?te.keepDefaultValues&&i?kh(a,i):r.dirtyFields:te.keepDefaultValues&&U?kh(a,U):te.keepDirty?r.dirtyFields:{},touchedFields:te.keepTouched?r.touchedFields:{},errors:te.keepErrors?r.errors:{},isSubmitSuccessful:te.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Ae=(U,te)=>Se(ti(U)?U(i):U,te),Oe=(U,te={})=>{const xe=st(n,U),le=xe&&xe._f;if(le){const ye=le.refs?le.refs[0]:le.ref;ye.focus&&(ye.focus(),te.shouldSelect&&ti(ye.select)&&ye.select())}},M=U=>{r={...r,...U}},be={control:{register:he,unregister:ce,getFieldState:ee,handleSubmit:ae,setError:q,_subscribe:B,_runSchema:_,_focusError:K,_getWatch:O,_getDirty:k,_setValid:p,_setFieldArray:b,_setDisabledField:ge,_setErrors:w,_getFieldArray:V,_reset:Se,_resetDefaultValues:()=>ti(t.defaultValues)&&t.defaultValues().then(U=>{Ae(U,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:fe,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(U){o=U},get _defaultValues(){return a},get _names(){return l},set _names(U){l=U},get _formState(){return r},get _options(){return t},set _options(U){t={...t,...U}}},subscribe:de,trigger:R,register:he,handleSubmit:ae,watch:H,setValue:W,getValues:I,reset:Ae,resetField:Ne,clearErrors:L,unregister:ce,setError:q,setFocus:Oe,getFieldState:ee};return{...be,formControl:be}}function os(e={}){const t=pe.useRef(void 0),r=pe.useRef(void 0),[n,a]=pe.useState({isDirty:!1,isValidating:!1,isLoading:ti(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ti(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!ti(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=hJ(e);t.current={...l,formState:n}}const i=t.current.control;return i._options=e,I_(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),pe.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),pe.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),pe.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),pe.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),pe.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),pe.useEffect(()=>{e.values&&!mo(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),pe.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=LL(n,i),t.current}const JC=(e,t,r)=>{if(e&&"reportValidity"in e){const n=st(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},GL=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?JC(n.ref,r,e):n.refs&&n.refs.forEach(a=>JC(a,r,e))}},mJ=(e,t)=>{t.shouldUseNativeValidation&&GL(e,t);const r={};for(const n in e){const a=st(t.fields,n),i=Object.assign(e[n]||{},{ref:a&&a.ref});if(pJ(t.names||Object.keys(e),n)){const o=Object.assign({},st(r,n));xr(o,"root",i),xr(r,n,o)}else xr(r,n,i)}return r},pJ=(e,t)=>e.some(r=>r.startsWith(t+"."));var gJ=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return e.push(f)})}),t){var c=r[o].types,u=c&&c[n.code];r[o]=BL(o,t,r,a,u?[].concat(u,n.message):n.message)}e.shift()}return r},Cs=function(e,t,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(u){return i.shouldUseNativeValidation&&GL({},i),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:mJ(gJ(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},cr;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(cr||(cr={}));var ZC;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(ZC||(ZC={}));const bt=cr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),rl=e=>{switch(typeof e){case"undefined":return bt.undefined;case"string":return bt.string;case"number":return Number.isNaN(e)?bt.nan:bt.number;case"boolean":return bt.boolean;case"function":return bt.function;case"bigint":return bt.bigint;case"symbol":return bt.symbol;case"object":return Array.isArray(e)?bt.array:e===null?bt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?bt.promise:typeof Map<"u"&&e instanceof Map?bt.map:typeof Set<"u"&&e instanceof Set?bt.set:typeof Date<"u"&&e instanceof Date?bt.date:bt.object;default:return bt.unknown}},ze=cr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ro extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return a(this),n}static assert(t){if(!(t instanceof Ro))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,cr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Ro.create=e=>new Ro(e);const dN=(e,t)=>{let r;switch(e.code){case ze.invalid_type:e.received===bt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case ze.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,cr.jsonStringifyReplacer)}`;break;case ze.unrecognized_keys:r=`Unrecognized key(s) in object: ${cr.joinValues(e.keys,", ")}`;break;case ze.invalid_union:r="Invalid input";break;case ze.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${cr.joinValues(e.options)}`;break;case ze.invalid_enum_value:r=`Invalid enum value. Expected ${cr.joinValues(e.options)}, received '${e.received}'`;break;case ze.invalid_arguments:r="Invalid function arguments";break;case ze.invalid_return_type:r="Invalid function return type";break;case ze.invalid_date:r="Invalid date";break;case ze.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:cr.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case ze.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case ze.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case ze.custom:r="Invalid input";break;case ze.invalid_intersection_types:r="Intersection results could not be merged";break;case ze.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case ze.not_finite:r="Number must be finite";break;default:r=t.defaultError,cr.assertNever(e)}return{message:r}};let xJ=dN;function yJ(){return xJ}const vJ=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function ut(e,t){const r=yJ(),n=vJ({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===dN?void 0:dN].filter(a=>!!a)});e.common.issues.push(n)}class ds{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return Vt;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return ds.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return Vt;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const Vt=Object.freeze({status:"aborted"}),Zh=e=>({status:"dirty",value:e}),Fs=e=>({status:"valid",value:e}),eD=e=>e.status==="aborted",tD=e=>e.status==="dirty",mf=e=>e.status==="valid",Ix=e=>typeof Promise<"u"&&e instanceof Promise;var St;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(St||(St={}));class Hl{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const rD=(e,t)=>{if(mf(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ro(e.common.issues);return this._error=r,this._error}}};function Xt(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:a}}class ir{get description(){return this._def.description}_getType(t){return rl(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:rl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ds,ctx:{common:t.parent.common,data:t.data,parsedType:rl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Ix(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:rl(t)},a=this._parseSync({data:t,path:n.path,parent:n});return rD(n,a)}"~validate"(t){var n,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:rl(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:r});return mf(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>mf(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:rl(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(Ix(a)?a:Promise.resolve(a));return rD(n,i)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:ze.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new xf({schema:this,typeName:Ht.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Il.create(this,this._def)}nullable(){return yf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return zi.create(this)}promise(){return Fx.create(this,this._def)}or(t){return Mx.create([this,t],this._def)}and(t){return Rx.create(this,t,this._def)}transform(t){return new xf({...Xt(this._def),schema:this,typeName:Ht.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new mN({...Xt(this._def),innerType:this,defaultValue:r,typeName:Ht.ZodDefault})}brand(){return new WJ({typeName:Ht.ZodBranded,type:this,...Xt(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new pN({...Xt(this._def),innerType:this,catchValue:r,typeName:Ht.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return F_.create(this,t)}readonly(){return gN.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const wJ=/^c[^\s-]{8,}$/i,bJ=/^[0-9a-z]+$/,jJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,NJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,SJ=/^[a-z0-9_-]{21}$/i,_J=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,TJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,EJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,AJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Yw;const CJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,DJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,kJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,OJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,PJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,IJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,KL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",MJ=new RegExp(`^${KL}$`);function YL(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function RJ(e){return new RegExp(`^${YL(e)}$`)}function FJ(e){let t=`${KL}T${YL(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function LJ(e,t){return!!((t==="v4"||!t)&&CJ.test(e)||(t==="v6"||!t)&&kJ.test(e))}function $J(e,t){if(!_J.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function BJ(e,t){return!!((t==="v4"||!t)&&DJ.test(e)||(t==="v6"||!t)&&OJ.test(e))}class vl extends ir{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==bt.string){const i=this._getOrReturnCtx(t);return ut(i,{code:ze.invalid_type,expected:bt.string,received:i.parsedType}),Vt}const n=new ds;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),ut(a,{code:ze.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),ut(a,{code:ze.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?ut(a,{code:ze.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&ut(a,{code:ze.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")EJ.test(t.data)||(a=this._getOrReturnCtx(t,a),ut(a,{validation:"email",code:ze.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Yw||(Yw=new RegExp(AJ,"u")),Yw.test(t.data)||(a=this._getOrReturnCtx(t,a),ut(a,{validation:"emoji",code:ze.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")NJ.test(t.data)||(a=this._getOrReturnCtx(t,a),ut(a,{validation:"uuid",code:ze.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")SJ.test(t.data)||(a=this._getOrReturnCtx(t,a),ut(a,{validation:"nanoid",code:ze.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")wJ.test(t.data)||(a=this._getOrReturnCtx(t,a),ut(a,{validation:"cuid",code:ze.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")bJ.test(t.data)||(a=this._getOrReturnCtx(t,a),ut(a,{validation:"cuid2",code:ze.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")jJ.test(t.data)||(a=this._getOrReturnCtx(t,a),ut(a,{validation:"ulid",code:ze.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),ut(a,{validation:"url",code:ze.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),ut(a,{validation:"regex",code:ze.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),ut(a,{code:ze.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),ut(a,{code:ze.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),ut(a,{code:ze.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?FJ(i).test(t.data)||(a=this._getOrReturnCtx(t,a),ut(a,{code:ze.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?MJ.test(t.data)||(a=this._getOrReturnCtx(t,a),ut(a,{code:ze.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?RJ(i).test(t.data)||(a=this._getOrReturnCtx(t,a),ut(a,{code:ze.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?TJ.test(t.data)||(a=this._getOrReturnCtx(t,a),ut(a,{validation:"duration",code:ze.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?LJ(t.data,i.version)||(a=this._getOrReturnCtx(t,a),ut(a,{validation:"ip",code:ze.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?$J(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),ut(a,{validation:"jwt",code:ze.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?BJ(t.data,i.version)||(a=this._getOrReturnCtx(t,a),ut(a,{validation:"cidr",code:ze.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?PJ.test(t.data)||(a=this._getOrReturnCtx(t,a),ut(a,{validation:"base64",code:ze.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?IJ.test(t.data)||(a=this._getOrReturnCtx(t,a),ut(a,{validation:"base64url",code:ze.invalid_string,message:i.message}),n.dirty()):cr.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:ze.invalid_string,...St.errToObj(n)})}_addCheck(t){return new vl({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...St.errToObj(t)})}url(t){return this._addCheck({kind:"url",...St.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...St.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...St.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...St.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...St.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...St.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...St.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...St.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...St.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...St.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...St.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...St.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...St.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...St.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...St.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...St.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...St.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...St.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...St.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...St.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...St.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...St.errToObj(r)})}nonempty(t){return this.min(1,St.errToObj(t))}trim(){return new vl({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new vl({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new vl({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}vl.create=e=>new vl({checks:[],typeName:Ht.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Xt(e)});function UJ(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class pf extends ir{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==bt.number){const i=this._getOrReturnCtx(t);return ut(i,{code:ze.invalid_type,expected:bt.number,received:i.parsedType}),Vt}let n;const a=new ds;for(const i of this._def.checks)i.kind==="int"?cr.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),ut(n,{code:ze.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),ut(n,{code:ze.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),ut(n,{code:ze.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?UJ(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),ut(n,{code:ze.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),ut(n,{code:ze.not_finite,message:i.message}),a.dirty()):cr.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,St.toString(r))}gt(t,r){return this.setLimit("min",t,!1,St.toString(r))}lte(t,r){return this.setLimit("max",t,!0,St.toString(r))}lt(t,r){return this.setLimit("max",t,!1,St.toString(r))}setLimit(t,r,n,a){return new pf({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:St.toString(a)}]})}_addCheck(t){return new pf({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:St.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:St.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:St.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:St.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:St.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:St.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:St.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:St.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:St.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&cr.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}pf.create=e=>new pf({checks:[],typeName:Ht.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Xt(e)});class Gm extends ir{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==bt.bigint)return this._getInvalidInput(t);let n;const a=new ds;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),ut(n,{code:ze.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),ut(n,{code:ze.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),ut(n,{code:ze.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):cr.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return ut(r,{code:ze.invalid_type,expected:bt.bigint,received:r.parsedType}),Vt}gte(t,r){return this.setLimit("min",t,!0,St.toString(r))}gt(t,r){return this.setLimit("min",t,!1,St.toString(r))}lte(t,r){return this.setLimit("max",t,!0,St.toString(r))}lt(t,r){return this.setLimit("max",t,!1,St.toString(r))}setLimit(t,r,n,a){return new Gm({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:St.toString(a)}]})}_addCheck(t){return new Gm({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:St.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:St.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:St.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:St.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:St.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Gm.create=e=>new Gm({checks:[],typeName:Ht.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Xt(e)});class fN extends ir{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==bt.boolean){const n=this._getOrReturnCtx(t);return ut(n,{code:ze.invalid_type,expected:bt.boolean,received:n.parsedType}),Vt}return Fs(t.data)}}fN.create=e=>new fN({typeName:Ht.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Xt(e)});class Km extends ir{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==bt.date){const i=this._getOrReturnCtx(t);return ut(i,{code:ze.invalid_type,expected:bt.date,received:i.parsedType}),Vt}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return ut(i,{code:ze.invalid_date}),Vt}const n=new ds;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),ut(a,{code:ze.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),ut(a,{code:ze.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):cr.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Km({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:St.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:St.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Km.create=e=>new Km({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Ht.ZodDate,...Xt(e)});class nD extends ir{_parse(t){if(this._getType(t)!==bt.symbol){const n=this._getOrReturnCtx(t);return ut(n,{code:ze.invalid_type,expected:bt.symbol,received:n.parsedType}),Vt}return Fs(t.data)}}nD.create=e=>new nD({typeName:Ht.ZodSymbol,...Xt(e)});class aD extends ir{_parse(t){if(this._getType(t)!==bt.undefined){const n=this._getOrReturnCtx(t);return ut(n,{code:ze.invalid_type,expected:bt.undefined,received:n.parsedType}),Vt}return Fs(t.data)}}aD.create=e=>new aD({typeName:Ht.ZodUndefined,...Xt(e)});class sD extends ir{_parse(t){if(this._getType(t)!==bt.null){const n=this._getOrReturnCtx(t);return ut(n,{code:ze.invalid_type,expected:bt.null,received:n.parsedType}),Vt}return Fs(t.data)}}sD.create=e=>new sD({typeName:Ht.ZodNull,...Xt(e)});class iD extends ir{constructor(){super(...arguments),this._any=!0}_parse(t){return Fs(t.data)}}iD.create=e=>new iD({typeName:Ht.ZodAny,...Xt(e)});class oD extends ir{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Fs(t.data)}}oD.create=e=>new oD({typeName:Ht.ZodUnknown,...Xt(e)});class zl extends ir{_parse(t){const r=this._getOrReturnCtx(t);return ut(r,{code:ze.invalid_type,expected:bt.never,received:r.parsedType}),Vt}}zl.create=e=>new zl({typeName:Ht.ZodNever,...Xt(e)});class lD extends ir{_parse(t){if(this._getType(t)!==bt.undefined){const n=this._getOrReturnCtx(t);return ut(n,{code:ze.invalid_type,expected:bt.void,received:n.parsedType}),Vt}return Fs(t.data)}}lD.create=e=>new lD({typeName:Ht.ZodVoid,...Xt(e)});class zi extends ir{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==bt.array)return ut(r,{code:ze.invalid_type,expected:bt.array,received:r.parsedType}),Vt;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(ut(r,{code:o?ze.too_big:ze.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(ut(r,{code:ze.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(ut(r,{code:ze.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new Hl(r,o,r.path,l)))).then(o=>ds.mergeArray(n,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new Hl(r,o,r.path,l)));return ds.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new zi({...this._def,minLength:{value:t,message:St.toString(r)}})}max(t,r){return new zi({...this._def,maxLength:{value:t,message:St.toString(r)}})}length(t,r){return new zi({...this._def,exactLength:{value:t,message:St.toString(r)}})}nonempty(t){return this.min(1,t)}}zi.create=(e,t)=>new zi({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ht.ZodArray,...Xt(t)});function id(e){if(e instanceof un){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Il.create(id(n))}return new un({...e._def,shape:()=>t})}else return e instanceof zi?new zi({...e._def,type:id(e.element)}):e instanceof Il?Il.create(id(e.unwrap())):e instanceof yf?yf.create(id(e.unwrap())):e instanceof au?au.create(e.items.map(t=>id(t))):e}class un extends ir{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=cr.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==bt.object){const u=this._getOrReturnCtx(t);return ut(u,{code:ze.invalid_type,expected:bt.object,received:u.parsedType}),Vt}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof zl&&this._def.unknownKeys==="strip"))for(const u in a.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=i[u],f=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Hl(a,f,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof zl){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")l.length>0&&(ut(a,{code:ze.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Hl(a,f,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>ds.mergeObjectSync(n,u)):ds.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return St.errToObj,new un({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:St.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new un({...this._def,unknownKeys:"strip"})}passthrough(){return new un({...this._def,unknownKeys:"passthrough"})}extend(t){return new un({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new un({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ht.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new un({...this._def,catchall:t})}pick(t){const r={};for(const n of cr.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new un({...this._def,shape:()=>r})}omit(t){const r={};for(const n of cr.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new un({...this._def,shape:()=>r})}deepPartial(){return id(this)}partial(t){const r={};for(const n of cr.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}return new un({...this._def,shape:()=>r})}required(t){const r={};for(const n of cr.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Il;)i=i._def.innerType;r[n]=i}return new un({...this._def,shape:()=>r})}keyof(){return XL(cr.objectKeys(this.shape))}}un.create=(e,t)=>new un({shape:()=>e,unknownKeys:"strip",catchall:zl.create(),typeName:Ht.ZodObject,...Xt(t)});un.strictCreate=(e,t)=>new un({shape:()=>e,unknownKeys:"strict",catchall:zl.create(),typeName:Ht.ZodObject,...Xt(t)});un.lazycreate=(e,t)=>new un({shape:e,unknownKeys:"strip",catchall:zl.create(),typeName:Ht.ZodObject,...Xt(t)});class Mx extends ir{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Ro(l.ctx.common.issues));return ut(r,{code:ze.invalid_union,unionErrors:o}),Vt}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new Ro(c));return ut(r,{code:ze.invalid_union,unionErrors:l}),Vt}}get options(){return this._def.options}}Mx.create=(e,t)=>new Mx({options:e,typeName:Ht.ZodUnion,...Xt(t)});function hN(e,t){const r=rl(e),n=rl(t);if(e===t)return{valid:!0,data:e};if(r===bt.object&&n===bt.object){const a=cr.objectKeys(t),i=cr.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=hN(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===bt.array&&n===bt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=hN(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===bt.date&&n===bt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Rx extends ir{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(i,o)=>{if(eD(i)||eD(o))return Vt;const l=hN(i.value,o.value);return l.valid?((tD(i)||tD(o))&&r.dirty(),{status:r.value,value:l.data}):(ut(n,{code:ze.invalid_intersection_types}),Vt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Rx.create=(e,t,r)=>new Rx({left:e,right:t,typeName:Ht.ZodIntersection,...Xt(r)});class au extends ir{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==bt.array)return ut(n,{code:ze.invalid_type,expected:bt.array,received:n.parsedType}),Vt;if(n.data.length<this._def.items.length)return ut(n,{code:ze.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Vt;!this._def.rest&&n.data.length>this._def.items.length&&(ut(n,{code:ze.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Hl(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>ds.mergeArray(r,o)):ds.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new au({...this._def,rest:t})}}au.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new au({items:e,typeName:Ht.ZodTuple,rest:null,...Xt(t)})};class cD extends ir{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==bt.map)return ut(n,{code:ze.invalid_type,expected:bt.map,received:n.parsedType}),Vt;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],u)=>({key:a._parse(new Hl(n,l,n.path,[u,"key"])),value:i._parse(new Hl(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Vt;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Vt;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}cD.create=(e,t,r)=>new cD({valueType:t,keyType:e,typeName:Ht.ZodMap,...Xt(r)});class Ym extends ir{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==bt.set)return ut(n,{code:ze.invalid_type,expected:bt.set,received:n.parsedType}),Vt;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(ut(n,{code:ze.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(ut(n,{code:ze.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Vt;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>i._parse(new Hl(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new Ym({...this._def,minSize:{value:t,message:St.toString(r)}})}max(t,r){return new Ym({...this._def,maxSize:{value:t,message:St.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}Ym.create=(e,t)=>new Ym({valueType:e,minSize:null,maxSize:null,typeName:Ht.ZodSet,...Xt(t)});class uD extends ir{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}uD.create=(e,t)=>new uD({getter:e,typeName:Ht.ZodLazy,...Xt(t)});class dD extends ir{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return ut(r,{received:r.data,code:ze.invalid_literal,expected:this._def.value}),Vt}return{status:"valid",value:t.data}}get value(){return this._def.value}}dD.create=(e,t)=>new dD({value:e,typeName:Ht.ZodLiteral,...Xt(t)});function XL(e,t){return new gf({values:e,typeName:Ht.ZodEnum,...Xt(t)})}class gf extends ir{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return ut(r,{expected:cr.joinValues(n),received:r.parsedType,code:ze.invalid_type}),Vt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return ut(r,{received:r.data,code:ze.invalid_enum_value,options:n}),Vt}return Fs(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return gf.create(t,{...this._def,...r})}exclude(t,r=this._def){return gf.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}gf.create=XL;class fD extends ir{_parse(t){const r=cr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==bt.string&&n.parsedType!==bt.number){const a=cr.objectValues(r);return ut(n,{expected:cr.joinValues(a),received:n.parsedType,code:ze.invalid_type}),Vt}if(this._cache||(this._cache=new Set(cr.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=cr.objectValues(r);return ut(n,{received:n.data,code:ze.invalid_enum_value,options:a}),Vt}return Fs(t.data)}get enum(){return this._def.values}}fD.create=(e,t)=>new fD({values:e,typeName:Ht.ZodNativeEnum,...Xt(t)});class Fx extends ir{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==bt.promise&&r.common.async===!1)return ut(r,{code:ze.invalid_type,expected:bt.promise,received:r.parsedType}),Vt;const n=r.parsedType===bt.promise?r.data:Promise.resolve(r.data);return Fs(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Fx.create=(e,t)=>new Fx({type:e,typeName:Ht.ZodPromise,...Xt(t)});class xf extends ir{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ht.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{ut(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return Vt;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?Vt:c.status==="dirty"||r.value==="dirty"?Zh(c.value):c});{if(r.value==="aborted")return Vt;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?Vt:l.status==="dirty"||r.value==="dirty"?Zh(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Vt:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Vt:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!mf(o))return Vt;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>mf(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):Vt);cr.assertNever(a)}}xf.create=(e,t,r)=>new xf({schema:e,typeName:Ht.ZodEffects,effect:t,...Xt(r)});xf.createWithPreprocess=(e,t,r)=>new xf({schema:t,effect:{type:"preprocess",transform:e},typeName:Ht.ZodEffects,...Xt(r)});class Il extends ir{_parse(t){return this._getType(t)===bt.undefined?Fs(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Il.create=(e,t)=>new Il({innerType:e,typeName:Ht.ZodOptional,...Xt(t)});class yf extends ir{_parse(t){return this._getType(t)===bt.null?Fs(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}yf.create=(e,t)=>new yf({innerType:e,typeName:Ht.ZodNullable,...Xt(t)});class mN extends ir{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===bt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}mN.create=(e,t)=>new mN({innerType:e,typeName:Ht.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Xt(t)});class pN extends ir{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ix(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ro(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ro(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}pN.create=(e,t)=>new pN({innerType:e,typeName:Ht.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Xt(t)});class hD extends ir{_parse(t){if(this._getType(t)!==bt.nan){const n=this._getOrReturnCtx(t);return ut(n,{code:ze.invalid_type,expected:bt.nan,received:n.parsedType}),Vt}return{status:"valid",value:t.data}}}hD.create=e=>new hD({typeName:Ht.ZodNaN,...Xt(e)});class WJ extends ir{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class F_ extends ir{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Vt:i.status==="dirty"?(r.dirty(),Zh(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Vt:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new F_({in:t,out:r,typeName:Ht.ZodPipeline})}}class gN extends ir{_parse(t){const r=this._def.innerType._parse(t),n=a=>(mf(a)&&(a.value=Object.freeze(a.value)),a);return Ix(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}gN.create=(e,t)=>new gN({innerType:e,typeName:Ht.ZodReadonly,...Xt(t)});var Ht;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Ht||(Ht={}));const rr=vl.create,er=pf.create,or=fN.create,ql=Km.create;zl.create;const as=zi.create,Zn=un.create;Mx.create;Rx.create;au.create;const On=gf.create;Fx.create;Il.create;yf.create;var VJ="Label",QL=N.forwardRef((e,t)=>s.jsx(_t.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));QL.displayName=VJ;var JL=QL;const HJ=Jp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),tt=N.forwardRef(({className:e,...t},r)=>s.jsx(JL,{ref:r,className:Ge(HJ(),e),...t}));tt.displayName=JL.displayName;const ai=XQ,ZL=N.createContext({}),et=({...e})=>s.jsx(ZL.Provider,{value:{name:e.name},children:s.jsx(eJ,{...e})}),qv=()=>{const e=N.useContext(ZL),t=N.useContext(e6),{getFieldState:r,formState:n}=zv(),a=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},e6=N.createContext({}),Qe=N.forwardRef(({className:e,...t},r)=>{const n=N.useId();return s.jsx(e6.Provider,{value:{id:n},children:s.jsx("div",{ref:r,className:Ge("space-y-2",e),...t})})});Qe.displayName="FormItem";const ft=N.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:a}=qv();return s.jsx(tt,{ref:r,className:Ge(n&&"text-destructive",e),htmlFor:a,...t})});ft.displayName="FormLabel";const lt=N.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=qv();return s.jsx(aF,{ref:t,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...e})});lt.displayName="FormControl";const zJ=N.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=qv();return s.jsx("p",{ref:r,id:n,className:Ge("text-sm text-muted-foreground",e),...t})});zJ.displayName="FormDescription";const wt=N.forwardRef(({className:e,children:t,...r},n)=>{const{error:a,formMessageId:i}=qv(),o=a?String((a==null?void 0:a.message)??""):t;return o?s.jsx("p",{ref:n,id:i,className:Ge("text-sm font-medium text-destructive",e),...r,children:o}):null});wt.displayName="FormMessage";function nr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function fs(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function ia(e,t){const r=nr(e);return isNaN(t)?fs(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function xi(e,t){const r=nr(e);if(isNaN(t))return fs(e,NaN);if(!t)return r;const n=r.getDate(),a=fs(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return n>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}const L_=6048e5,qJ=864e5;let GJ={};function d0(){return GJ}function Yi(e,t){var l,c,u,d;const r=d0(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=nr(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function su(e){return Yi(e,{weekStartsOn:1})}function t6(e){const t=nr(e),r=t.getFullYear(),n=fs(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=su(n),i=fs(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=su(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function vf(e){const t=nr(e);return t.setHours(0,0,0,0),t}function Lx(e){const t=nr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function si(e,t){const r=vf(e),n=vf(t),a=+r-Lx(r),i=+n-Lx(n);return Math.round((a-i)/qJ)}function KJ(e){const t=t6(e),r=fs(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),su(r)}function xN(e,t){const r=t*7;return ia(e,r)}function YJ(e,t){return xi(e,t*12)}function XJ(e){let t;return e.forEach(function(r){const n=nr(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function QJ(e){let t;return e.forEach(r=>{const n=nr(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function Fa(e,t){const r=vf(e),n=vf(t);return+r==+n}function $_(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function JJ(e){if(!$_(e)&&typeof e!="number")return!1;const t=nr(e);return!isNaN(Number(t))}function Xm(e,t){const r=nr(e),n=nr(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function ZJ(e,t,r){const n=Yi(e,r),a=Yi(t,r),i=+n-Lx(n),o=+a-Lx(a);return Math.round((i-o)/L_)}function ig(e,t){const r=nr(e),n=nr(t),a=mD(r,n),i=Math.abs(si(r,n));r.setDate(r.getDate()-a*i);const o=+(mD(r,n)===-a),l=a*(i-o);return l===0?0:l}function mD(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function B_(e){const t=nr(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Wa(e){const t=nr(e);return t.setDate(1),t.setHours(0,0,0,0),t}function r6(e){const t=nr(e),r=fs(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function U_(e,t){var l,c,u,d;const r=d0(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=nr(e),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function n6(e){return U_(e,{weekStartsOn:1})}const eZ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tZ=(e,t,r)=>{let n;const a=eZ[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Xw(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const rZ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nZ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},aZ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sZ={date:Xw({formats:rZ,defaultWidth:"full"}),time:Xw({formats:nZ,defaultWidth:"full"}),dateTime:Xw({formats:aZ,defaultWidth:"full"})},iZ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oZ=(e,t,r,n)=>iZ[e];function Ph(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const lZ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cZ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},uZ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dZ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fZ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hZ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mZ=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},pZ={ordinalNumber:mZ,era:Ph({values:lZ,defaultWidth:"wide"}),quarter:Ph({values:cZ,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ph({values:uZ,defaultWidth:"wide"}),day:Ph({values:dZ,defaultWidth:"wide"}),dayPeriod:Ph({values:fZ,defaultWidth:"wide",formattingValues:hZ,defaultFormattingWidth:"wide"})};function Ih(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?xZ(l,f=>f.test(o)):gZ(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function gZ(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function xZ(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function yZ(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const vZ=/^(\d+)(th|st|nd|rd)?/i,wZ=/\d+/i,bZ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},jZ={any:[/^b/i,/^(a|c)/i]},NZ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},SZ={any:[/1/i,/2/i,/3/i,/4/i]},_Z={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},TZ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},EZ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},AZ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},CZ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},DZ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},kZ={ordinalNumber:yZ({matchPattern:vZ,parsePattern:wZ,valueCallback:e=>parseInt(e,10)}),era:Ih({matchPatterns:bZ,defaultMatchWidth:"wide",parsePatterns:jZ,defaultParseWidth:"any"}),quarter:Ih({matchPatterns:NZ,defaultMatchWidth:"wide",parsePatterns:SZ,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ih({matchPatterns:_Z,defaultMatchWidth:"wide",parsePatterns:TZ,defaultParseWidth:"any"}),day:Ih({matchPatterns:EZ,defaultMatchWidth:"wide",parsePatterns:AZ,defaultParseWidth:"any"}),dayPeriod:Ih({matchPatterns:CZ,defaultMatchWidth:"any",parsePatterns:DZ,defaultParseWidth:"any"})},a6={code:"en-US",formatDistance:tZ,formatLong:sZ,formatRelative:oZ,localize:pZ,match:kZ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function OZ(e){const t=nr(e);return si(t,r6(t))+1}function s6(e){const t=nr(e),r=+su(t)-+KJ(t);return Math.round(r/L_)+1}function i6(e,t){var d,f,h,m;const r=nr(e),n=r.getFullYear(),a=d0(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(h=a.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=fs(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Yi(o,t),c=fs(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=Yi(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function PZ(e,t){var l,c,u,d;const r=d0(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=i6(e,t),i=fs(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Yi(i,t)}function o6(e,t){const r=nr(e),n=+Yi(r,t)-+PZ(r,t);return Math.round(n/L_)+1}function vr(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Xo={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return vr(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):vr(r+1,2)},d(e,t){return vr(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return vr(e.getHours()%12||12,t.length)},H(e,t){return vr(e.getHours(),t.length)},m(e,t){return vr(e.getMinutes(),t.length)},s(e,t){return vr(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return vr(a,t.length)}},Ju={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},pD={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Xo.y(e,t)},Y:function(e,t,r,n){const a=i6(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return vr(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):vr(i,t.length)},R:function(e,t){const r=t6(e);return vr(r,t.length)},u:function(e,t){const r=e.getFullYear();return vr(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return vr(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return vr(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Xo.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return vr(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=o6(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):vr(a,t.length)},I:function(e,t,r){const n=s6(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):vr(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Xo.d(e,t)},D:function(e,t,r){const n=OZ(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):vr(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return vr(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return vr(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return vr(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=Ju.noon:n===0?a=Ju.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=Ju.evening:n>=12?a=Ju.afternoon:n>=4?a=Ju.morning:a=Ju.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Xo.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Xo.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):vr(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):vr(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Xo.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Xo.s(e,t)},S:function(e,t){return Xo.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return xD(n);case"XXXX":case"XX":return bc(n);case"XXXXX":case"XXX":default:return bc(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return xD(n);case"xxxx":case"xx":return bc(n);case"xxxxx":case"xxx":default:return bc(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+gD(n,":");case"OOOO":default:return"GMT"+bc(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+gD(n,":");case"zzzz":default:return"GMT"+bc(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return vr(n,t.length)},T:function(e,t,r){const n=e.getTime();return vr(n,t.length)}};function gD(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+vr(i,2)}function xD(e,t){return e%60===0?(e>0?"-":"+")+vr(Math.abs(e)/60,2):bc(e,t)}function bc(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=vr(Math.trunc(n/60),2),i=vr(n%60,2);return r+a+t+i}const yD=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},l6=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},IZ=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return yD(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",yD(n,t)).replace("{{time}}",l6(a,t))},MZ={p:l6,P:IZ},RZ=/^D+$/,FZ=/^Y+$/,LZ=["D","DD","YY","YYYY"];function $Z(e){return RZ.test(e)}function BZ(e){return FZ.test(e)}function UZ(e,t,r){const n=WZ(e,t,r);if(console.warn(n),LZ.includes(e))throw new RangeError(n)}function WZ(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const VZ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,HZ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,zZ=/^'([^]*?)'?$/,qZ=/''/g,GZ=/[a-zA-Z]/;function dt(e,t,r){var d,f,h,m,g,p,y,b;const n=d0(),a=(r==null?void 0:r.locale)??n.locale??a6,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((p=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((b=(y=n.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??0,l=nr(e);if(!JJ(l))throw new RangeError("Invalid time value");let c=t.match(HZ).map(x=>{const w=x[0];if(w==="p"||w==="P"){const v=MZ[w];return v(x,a.formatLong)}return x}).join("").match(VZ).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const w=x[0];if(w==="'")return{isToken:!1,value:KZ(x)};if(pD[w])return{isToken:!0,value:x};if(w.match(GZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:x}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(x=>{if(!x.isToken)return x.value;const w=x.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&BZ(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&$Z(w))&&UZ(w,t,String(e));const v=pD[w[0]];return v(l,w,a.localize,u)}).join("")}function KZ(e){const t=e.match(zZ);return t?t[1].replace(qZ,"'"):e}function YZ(e){const t=nr(e),r=t.getFullYear(),n=t.getMonth(),a=fs(e,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function XZ(e){return Math.trunc(+nr(e)/1e3)}function QZ(e){const t=nr(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function JZ(e,t){return ZJ(QZ(e),Wa(e),t)+1}function yN(e,t){const r=nr(e),n=nr(t);return r.getTime()>n.getTime()}function $x(e,t){const r=nr(e),n=nr(t);return+r<+n}function W_(e,t){const r=nr(e),n=nr(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function ZZ(e,t){const r=nr(e),n=nr(t);return r.getFullYear()===n.getFullYear()}function Qw(e,t){return ia(e,-t)}function Jw(e,t){const r=nr(e),n=r.getFullYear(),a=r.getDate(),i=fs(e,0);i.setFullYear(n,t,15),i.setHours(0,0,0,0);const o=YZ(i);return r.setMonth(t,Math.min(a,o)),r}function vD(e,t){const r=nr(e);return isNaN(+r)?fs(e,NaN):(r.setFullYear(t),r)}var Wt=function(){return Wt=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Wt.apply(this,arguments)};function eee(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function c6(e,t,r){for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function f0(e){return e.mode==="multiple"}function h0(e){return e.mode==="range"}function Gv(e){return e.mode==="single"}var tee={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function ree(e,t){return dt(e,"LLLL y",t)}function nee(e,t){return dt(e,"d",t)}function aee(e,t){return dt(e,"LLLL",t)}function see(e){return"".concat(e)}function iee(e,t){return dt(e,"cccccc",t)}function oee(e,t){return dt(e,"yyyy",t)}var lee=Object.freeze({__proto__:null,formatCaption:ree,formatDay:nee,formatMonthCaption:aee,formatWeekNumber:see,formatWeekdayName:iee,formatYearCaption:oee}),cee=function(e,t,r){return dt(e,"do MMMM (EEEE)",r)},uee=function(){return"Month: "},dee=function(){return"Go to next month"},fee=function(){return"Go to previous month"},hee=function(e,t){return dt(e,"cccc",t)},mee=function(e){return"Week n. ".concat(e)},pee=function(){return"Year: "},gee=Object.freeze({__proto__:null,labelDay:cee,labelMonthDropdown:uee,labelNext:dee,labelPrevious:fee,labelWeekNumber:mee,labelWeekday:hee,labelYearDropdown:pee});function xee(){var e="buttons",t=tee,r=a6,n={},a={},i=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:lee,labels:gee,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:o,today:l,mode:"default"}}function yee(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,i=e.fromDate,o=e.toDate;return n?i=Wa(n):t&&(i=new Date(t,0,1)),a?o=B_(a):r&&(o=new Date(r,11,31)),{fromDate:i?vf(i):void 0,toDate:o?vf(o):void 0}}var u6=N.createContext(void 0);function vee(e){var t,r=e.initialProps,n=xee(),a=yee(r),i=a.fromDate,o=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(Gv(r)||f0(r)||h0(r))&&(c=r.onSelect);var u=Wt(Wt(Wt({},n),r),{captionLayout:l,classNames:Wt(Wt({},n.classNames),r.classNames),components:Wt({},r.components),formatters:Wt(Wt({},n.formatters),r.formatters),fromDate:i,labels:Wt(Wt({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Wt(Wt({},n.modifiers),r.modifiers),modifiersClassNames:Wt(Wt({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Wt(Wt({},n.styles),r.styles),toDate:o});return s.jsx(u6.Provider,{value:u,children:e.children})}function Ir(){var e=N.useContext(u6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function d6(e){var t=Ir(),r=t.locale,n=t.classNames,a=t.styles,i=t.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function wee(e){return s.jsx("svg",Wt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function f6(e){var t,r,n=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,c=e.style,u=Ir(),d=(r=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:wee;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:n,children:i}),s.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function bee(e){var t,r=Ir(),n=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});var f=[];if(ZZ(n,a))for(var h=Wa(n),m=n.getMonth();m<=a.getMonth();m++)f.push(Jw(h,m));else for(var h=Wa(new Date),m=0;m<=11;m++)f.push(Jw(h,m));var g=function(y){var b=Number(y.target.value),x=Jw(Wa(e.displayMonth),b);e.onChange(x)},p=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:f6;return s.jsx(p,{name:"months","aria-label":d(),className:c.dropdown_month,style:i.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:f.map(function(y){return s.jsx("option",{value:y.getMonth(),children:l(y,{locale:o})},y.getMonth())})})}function jee(e){var t,r=e.displayMonth,n=Ir(),a=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!a)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});for(var m=a.getFullYear(),g=i.getFullYear(),p=m;p<=g;p++)h.push(vD(r6(new Date),p));var y=function(x){var w=vD(Wa(r),Number(x.target.value));e.onChange(w)},b=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:f6;return s.jsx(b,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:y,value:r.getFullYear(),caption:d(r,{locale:o}),children:h.map(function(x){return s.jsx("option",{value:x.getFullYear(),children:d(x,{locale:o})},x.getFullYear())})})}function Nee(e,t){var r=N.useState(e),n=r[0],a=r[1],i=t===void 0?n:t;return[i,a]}function See(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,i=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&Xm(i,a)<0){var u=-1*(c-1);a=xi(i,u)}return o&&Xm(a,o)<0&&(a=o),Wa(a)}function _ee(){var e=Ir(),t=See(e),r=Nee(t,e.month),n=r[0],a=r[1],i=function(o){var l;if(!e.disableNavigation){var c=Wa(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,i]}function Tee(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=Wa(e),i=Wa(xi(a,n)),o=Xm(i,a),l=[],c=0;c<o;c++){var u=xi(a,c);l.push(u)}return r&&(l=l.reverse()),l}function Eee(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Wa(e);if(!r)return xi(l,o);var c=Xm(r,e);if(!(c<i))return xi(l,o)}}function Aee(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Wa(e);if(!r)return xi(l,-o);var c=Xm(l,r);if(!(c<=0))return xi(l,-o)}}var h6=N.createContext(void 0);function Cee(e){var t=Ir(),r=_ee(),n=r[0],a=r[1],i=Tee(n,t),o=Eee(n,t),l=Aee(n,t),c=function(f){return i.some(function(h){return W_(f,h)})},u=function(f,h){c(f)||(h&&$x(f,h)?a(xi(f,1+t.numberOfMonths*-1)):a(f))},d={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(h6.Provider,{value:d,children:e.children})}function m0(){var e=N.useContext(h6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function wD(e){var t,r=Ir(),n=r.classNames,a=r.styles,i=r.components,o=m0().goToMonth,l=function(d){o(xi(d,e.displayIndex?-e.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:d6,u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:u}),s.jsx(bee,{onChange:l,displayMonth:e.displayMonth}),s.jsx(jee,{onChange:l,displayMonth:e.displayMonth})]})}function Dee(e){return s.jsx("svg",Wt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function kee(e){return s.jsx("svg",Wt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Bx=N.forwardRef(function(e,t){var r=Ir(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];e.className&&i.push(e.className);var o=i.join(" "),l=Wt(Wt({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),s.jsx("button",Wt({},e,{ref:t,type:"button",className:o,style:l}))});function Oee(e){var t,r,n=Ir(),a=n.dir,i=n.locale,o=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var h=u(e.previousMonth,{locale:i}),m=[o.nav_button,o.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:i}),p=[o.nav_button,o.nav_button_next].join(" "),y=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:kee,b=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:Dee;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(Bx,{name:"previous-month","aria-label":h,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?s.jsx(y,{className:o.nav_icon,style:l.nav_icon}):s.jsx(b,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(Bx,{name:"next-month","aria-label":g,className:p,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?s.jsx(b,{className:o.nav_icon,style:l.nav_icon}):s.jsx(y,{className:o.nav_icon,style:l.nav_icon})})]})}function bD(e){var t=Ir().numberOfMonths,r=m0(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(g){return W_(e.displayMonth,g)}),c=l===0,u=l===o.length-1,d=t>1&&(c||!u),f=t>1&&(u||!c),h=function(){n&&i(n)},m=function(){a&&i(a)};return s.jsx(Oee,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:m})}function Pee(e){var t,r=Ir(),n=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:d6,u;return a?u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=s.jsx(wD,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=s.jsxs(s.Fragment,{children:[s.jsx(wD,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(bD,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(bD,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:n.caption,style:i.caption,children:u})}function Iee(e){var t=Ir(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?s.jsx("tfoot",{className:a,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function Mee(e,t,r){for(var n=r?su(new Date):Yi(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var o=ia(n,i);a.push(o)}return a}function Ree(){var e=Ir(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=Mee(a,i,o);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),u.map(function(d,f){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(d,{locale:a}),children:l(d,{locale:a})},f)})]})}function Fee(){var e,t=Ir(),r=t.classNames,n=t.styles,a=t.components,i=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:Ree;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(i,{})})}function Lee(e){var t=Ir(),r=t.locale,n=t.formatters.formatDay;return s.jsx(s.Fragment,{children:n(e.date,{locale:r})})}var V_=N.createContext(void 0);function $ee(e){if(!f0(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(V_.Provider,{value:t,children:e.children})}return s.jsx(Bee,{initialProps:e.initialProps,children:e.children})}function Bee(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,i=t.max,o=function(u,d,f){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,d,f);var g=!!(d.selected&&a&&(n==null?void 0:n.length)===a);if(!g){var p=!!(!d.selected&&i&&(n==null?void 0:n.length)===i);if(!p){var y=n?c6([],n):[];if(d.selected){var b=y.findIndex(function(x){return Fa(u,x)});y.splice(b,1)}else y.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,y,u,d,f)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=i&&n.length>i-1,f=n.some(function(h){return Fa(h,u)});return!!(d&&!f)});var c={selected:n,onDayClick:o,modifiers:l};return s.jsx(V_.Provider,{value:c,children:r})}function H_(){var e=N.useContext(V_);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Uee(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?Fa(a,e)&&Fa(n,e)?void 0:Fa(a,e)?{from:a,to:void 0}:Fa(n,e)?void 0:yN(n,e)?{from:e,to:a}:{from:n,to:e}:a?yN(e,a)?{from:a,to:e}:{from:e,to:a}:n?$x(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var z_=N.createContext(void 0);function Wee(e){if(!h0(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(z_.Provider,{value:t,children:e.children})}return s.jsx(Vee,{initialProps:e.initialProps,children:e.children})}function Vee(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},i=a.from,o=a.to,l=t.min,c=t.max,u=function(m,g,p){var y,b;(y=t.onDayClick)===null||y===void 0||y.call(t,m,g,p);var x=Uee(m,n);(b=t.onSelect)===null||b===void 0||b.call(t,x,m,g,p)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],o?(d.range_end=[o],Fa(i,o)||(d.range_middle=[{after:i,before:o}])):d.range_end=[i]):o&&(d.range_start=[o],d.range_end=[o]),l&&(i&&!o&&d.disabled.push({after:Qw(i,l-1),before:ia(i,l-1)}),i&&o&&d.disabled.push({after:i,before:ia(i,l-1)}),!i&&o&&d.disabled.push({after:Qw(o,l-1),before:ia(o,l-1)})),c){if(i&&!o&&(d.disabled.push({before:ia(i,-c+1)}),d.disabled.push({after:ia(i,c-1)})),i&&o){var f=si(o,i)+1,h=c-f;d.disabled.push({before:Qw(i,h)}),d.disabled.push({after:ia(o,h)})}!i&&o&&(d.disabled.push({before:ia(o,-c+1)}),d.disabled.push({after:ia(o,c-1)}))}return s.jsx(z_.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function q_(){var e=N.useContext(z_);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Yg(e){return Array.isArray(e)?c6([],e):e!==void 0?[e]:[]}function Hee(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=Yg(a)}),t}var yi;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(yi||(yi={}));var zee=yi.Selected,ao=yi.Disabled,qee=yi.Hidden,Gee=yi.Today,Zw=yi.RangeEnd,eb=yi.RangeMiddle,tb=yi.RangeStart,Kee=yi.Outside;function Yee(e,t,r){var n,a=(n={},n[zee]=Yg(e.selected),n[ao]=Yg(e.disabled),n[qee]=Yg(e.hidden),n[Gee]=[e.today],n[Zw]=[],n[eb]=[],n[tb]=[],n[Kee]=[],n);return e.fromDate&&a[ao].push({before:e.fromDate}),e.toDate&&a[ao].push({after:e.toDate}),f0(e)?a[ao]=a[ao].concat(t.modifiers[ao]):h0(e)&&(a[ao]=a[ao].concat(r.modifiers[ao]),a[tb]=r.modifiers[tb],a[eb]=r.modifiers[eb],a[Zw]=r.modifiers[Zw]),a}var m6=N.createContext(void 0);function Xee(e){var t=Ir(),r=H_(),n=q_(),a=Yee(t,r,n),i=Hee(t.modifiers),o=Wt(Wt({},a),i);return s.jsx(m6.Provider,{value:o,children:e.children})}function p6(){var e=N.useContext(m6);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Qee(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Jee(e){return!!(e&&typeof e=="object"&&"from"in e)}function Zee(e){return!!(e&&typeof e=="object"&&"after"in e)}function ete(e){return!!(e&&typeof e=="object"&&"before"in e)}function tte(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function rte(e,t){var r,n=t.from,a=t.to;if(n&&a){var i=si(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var o=si(e,n)>=0&&si(a,e)>=0;return o}return a?Fa(a,e):n?Fa(n,e):!1}function nte(e){return $_(e)}function ate(e){return Array.isArray(e)&&e.every($_)}function ste(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(nte(r))return Fa(e,r);if(ate(r))return r.includes(e);if(Jee(r))return rte(e,r);if(tte(r))return r.dayOfWeek.includes(e.getDay());if(Qee(r)){var n=si(r.before,e),a=si(r.after,e),i=n>0,o=a<0,l=yN(r.before,r.after);return l?o&&i:i||o}return Zee(r)?si(e,r.after)>0:ete(r)?si(r.before,e)>0:typeof r=="function"?r(e):!1})}function G_(e,t,r){var n=Object.keys(t).reduce(function(i,o){var l=t[o];return ste(e,l)&&i.push(o),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!W_(e,r)&&(a.outside=!0),a}function ite(e,t){for(var r=Wa(e[0]),n=B_(e[e.length-1]),a,i,o=r;o<=n;){var l=G_(o,t),c=!l.disabled&&!l.hidden;if(!c){o=ia(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),a||(a=o),o=ia(o,1)}return i||a}var ote=365;function g6(e,t){var r=t.moveBy,n=t.direction,a=t.context,i=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,d=a.toDate,f=a.locale,h={day:ia,week:xN,month:xi,year:YJ,startOfWeek:function(y){return a.ISOWeek?su(y):Yi(y,{locale:f,weekStartsOn:c})},endOfWeek:function(y){return a.ISOWeek?n6(y):U_(y,{locale:f,weekStartsOn:c})}},m=h[r](e,n==="after"?1:-1);n==="before"&&u?m=XJ([u,m]):n==="after"&&d&&(m=QJ([d,m]));var g=!0;if(i){var p=G_(m,i);g=!p.disabled&&!p.hidden}return g?m:l.count>ote?l.lastFocused:g6(m,{moveBy:r,direction:n,context:a,modifiers:i,retry:Wt(Wt({},l),{count:l.count+1})})}var x6=N.createContext(void 0);function lte(e){var t=m0(),r=p6(),n=N.useState(),a=n[0],i=n[1],o=N.useState(),l=o[0],c=o[1],u=ite(t.displayMonths,r),d=a??(l&&t.isDateDisplayed(l))?l:u,f=function(){c(a),i(void 0)},h=function(y){i(y)},m=Ir(),g=function(y,b){if(a){var x=g6(a,{moveBy:y,direction:b,context:m,modifiers:r});Fa(a,x)||(t.goToDate(x,a),h(x))}},p={focusedDay:a,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return s.jsx(x6.Provider,{value:p,children:e.children})}function K_(){var e=N.useContext(x6);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function cte(e,t){var r=p6(),n=G_(e,r,t);return n}var Y_=N.createContext(void 0);function ute(e){if(!Gv(e.initialProps)){var t={selected:void 0};return s.jsx(Y_.Provider,{value:t,children:e.children})}return s.jsx(dte,{initialProps:e.initialProps,children:e.children})}function dte(e){var t=e.initialProps,r=e.children,n=function(i,o,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,i,o,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,i,i,o,l)},a={selected:t.selected,onDayClick:n};return s.jsx(Y_.Provider,{value:a,children:r})}function y6(){var e=N.useContext(Y_);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function fte(e,t){var r=Ir(),n=y6(),a=H_(),i=q_(),o=K_(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,h=o.focus,m=o.focusMonthBefore,g=o.focusMonthAfter,p=o.focusYearBefore,y=o.focusYearAfter,b=o.focusStartOfWeek,x=o.focusEndOfWeek,w=function(P){var E,R,I,ee;Gv(r)?(E=n.onDayClick)===null||E===void 0||E.call(n,e,t,P):f0(r)?(R=a.onDayClick)===null||R===void 0||R.call(a,e,t,P):h0(r)?(I=i.onDayClick)===null||I===void 0||I.call(i,e,t,P):(ee=r.onDayClick)===null||ee===void 0||ee.call(r,e,t,P)},v=function(P){var E;h(e),(E=r.onDayFocus)===null||E===void 0||E.call(r,e,t,P)},j=function(P){var E;f(),(E=r.onDayBlur)===null||E===void 0||E.call(r,e,t,P)},S=function(P){var E;(E=r.onDayMouseEnter)===null||E===void 0||E.call(r,e,t,P)},_=function(P){var E;(E=r.onDayMouseLeave)===null||E===void 0||E.call(r,e,t,P)},A=function(P){var E;(E=r.onDayPointerEnter)===null||E===void 0||E.call(r,e,t,P)},C=function(P){var E;(E=r.onDayPointerLeave)===null||E===void 0||E.call(r,e,t,P)},D=function(P){var E;(E=r.onDayTouchCancel)===null||E===void 0||E.call(r,e,t,P)},k=function(P){var E;(E=r.onDayTouchEnd)===null||E===void 0||E.call(r,e,t,P)},O=function(P){var E;(E=r.onDayTouchMove)===null||E===void 0||E.call(r,e,t,P)},V=function(P){var E;(E=r.onDayTouchStart)===null||E===void 0||E.call(r,e,t,P)},G=function(P){var E;(E=r.onDayKeyUp)===null||E===void 0||E.call(r,e,t,P)},Y=function(P){var E;switch(P.key){case"ArrowLeft":P.preventDefault(),P.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":P.preventDefault(),P.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":P.preventDefault(),P.stopPropagation(),u();break;case"ArrowUp":P.preventDefault(),P.stopPropagation(),d();break;case"PageUp":P.preventDefault(),P.stopPropagation(),P.shiftKey?p():m();break;case"PageDown":P.preventDefault(),P.stopPropagation(),P.shiftKey?y():g();break;case"Home":P.preventDefault(),P.stopPropagation(),b();break;case"End":P.preventDefault(),P.stopPropagation(),x();break}(E=r.onDayKeyDown)===null||E===void 0||E.call(r,e,t,P)},W={onClick:w,onFocus:v,onBlur:j,onKeyDown:Y,onKeyUp:G,onMouseEnter:S,onMouseLeave:_,onPointerEnter:A,onPointerLeave:C,onTouchCancel:D,onTouchEnd:k,onTouchMove:O,onTouchStart:V};return W}function hte(){var e=Ir(),t=y6(),r=H_(),n=q_(),a=Gv(e)?t.selected:f0(e)?r.selected:h0(e)?n.selected:void 0;return a}function mte(e){return Object.values(yi).includes(e)}function pte(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(mte(n)){var i=e.classNames["day_".concat(n)];i&&r.push(i)}}),r}function gte(e,t){var r=Wt({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=Wt(Wt({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function xte(e,t,r){var n,a,i,o=Ir(),l=K_(),c=cte(e,t),u=fte(e,c),d=hte(),f=!!(o.onDayClick||o.mode!=="default");N.useEffect(function(){var S;c.outside||l.focusedDay&&f&&Fa(l.focusedDay,e)&&((S=r.current)===null||S===void 0||S.focus())},[l.focusedDay,e,r,f,c.outside]);var h=pte(o,c).join(" "),m=gte(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),p=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:Lee,y=s.jsx(p,{date:e,displayMonth:t,activeModifiers:c}),b={style:m,className:h,children:y,role:"gridcell"},x=l.focusTarget&&Fa(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&Fa(l.focusedDay,e),v=Wt(Wt(Wt({},b),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=w||x?0:-1,n)),u),j={isButton:f,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:v,divProps:b};return j}function yte(e){var t=N.useRef(null),r=xte(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(Bx,Wt({name:"day",ref:t},r.buttonProps)):s.jsx("div",Wt({},r.divProps))}function vte(e){var t=e.number,r=e.dates,n=Ir(),a=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!a)return s.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:d});var f=c(Number(t),{locale:l}),h=function(m){a(t,r,m)};return s.jsx(Bx,{name:"week-number","aria-label":f,className:o.weeknumber,style:i.weeknumber,onClick:h,children:d})}function wte(e){var t,r,n=Ir(),a=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:yte,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:vte,d;return o&&(d=s.jsx("td",{className:i.cell,style:a.cell,children:s.jsx(u,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:i.row,style:a.row,children:[d,e.dates.map(function(f){return s.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:f})},XZ(f))})]})}function jD(e,t,r){for(var n=r!=null&&r.ISOWeek?n6(t):U_(t,r),a=r!=null&&r.ISOWeek?su(e):Yi(e,r),i=si(n,a),o=[],l=0;l<=i;l++)o.push(ia(a,l));var c=o.reduce(function(u,d){var f=r!=null&&r.ISOWeek?s6(d):o6(d,r),h=u.find(function(m){return m.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function bte(e,t){var r=jD(Wa(e),B_(e),t);if(t!=null&&t.useFixedWeeks){var n=JZ(e,t);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],o=xN(i,6-n),l=jD(xN(i,1),o,t);r.push.apply(r,l)}}return r}function jte(e){var t,r,n,a=Ir(),i=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,d=a.components,f=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,g=bte(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:i,weekStartsOn:f,firstWeekContainsDate:h}),p=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:Fee,y=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:wte,b=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:Iee;return s.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(p,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(x){return s.jsx(y,{displayMonth:e.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),s.jsx(b,{displayMonth:e.displayMonth})]})}function Nte(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Ste=Nte()?N.useLayoutEffect:N.useEffect,rb=!1,_te=0;function ND(){return"react-day-picker-".concat(++_te)}function Tte(e){var t,r=e??(rb?ND():null),n=N.useState(r),a=n[0],i=n[1];return Ste(function(){a===null&&i(ND())},[]),N.useEffect(function(){rb===!1&&(rb=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function Ete(e){var t,r,n=Ir(),a=n.dir,i=n.classNames,o=n.styles,l=n.components,c=m0().displayMonths,u=Tte(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[i.month],h=o.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,p=!m&&!g;a==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(f.push(i.caption_start),h=Wt(Wt({},h),o.caption_start)),g&&(f.push(i.caption_end),h=Wt(Wt({},h),o.caption_end)),p&&(f.push(i.caption_between),h=Wt(Wt({},h),o.caption_between));var y=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:Pee;return s.jsxs("div",{className:f.join(" "),style:h,children:[s.jsx(y,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(jte,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function Ate(e){var t=Ir(),r=t.classNames,n=t.styles;return s.jsx("div",{className:r.months,style:n.months,children:e.children})}function Cte(e){var t,r,n=e.initialProps,a=Ir(),i=K_(),o=m0(),l=N.useState(!1),c=l[0],u=l[1];N.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var f=Wt(Wt({},a.styles.root),a.style),h=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,p){var y;return Wt(Wt({},g),(y={},y[p]=n[p],y))},{}),m=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:Ate;return s.jsx("div",Wt({className:d.join(" "),style:f,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:s.jsx(m,{children:o.displayMonths.map(function(g,p){return s.jsx(Ete,{displayIndex:p,displayMonth:g},p)})})}))}function Dte(e){var t=e.children,r=eee(e,["children"]);return s.jsx(vee,{initialProps:r,children:s.jsx(Cee,{children:s.jsx(ute,{initialProps:r,children:s.jsx($ee,{initialProps:r,children:s.jsx(Wee,{initialProps:r,children:s.jsx(Xee,{children:s.jsx(lte,{children:t})})})})})})})}function kte(e){return s.jsx(Dte,Wt({},e,{children:s.jsx(Cte,{initialProps:e})}))}function xo({className:e,classNames:t,showOutsideDays:r=!0,...n}){return s.jsx(kte,{showOutsideDays:r,className:Ge("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Ge(iN({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Ge(iN({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({className:a,...i})=>s.jsx(Yf,{className:Ge("h-4 w-4",a),...i}),IconRight:({className:a,...i})=>s.jsx(Wi,{className:Ge("h-4 w-4",a),...i})},...n})}xo.displayName="Calendar";var Kv="Popover",[v6,YMe]=pa(Kv,[rc]),p0=rc(),[Ote,nc]=v6(Kv),w6=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=p0(t),c=N.useRef(null),[u,d]=N.useState(!1),[f,h]=mi({prop:n,defaultProp:a??!1,onChange:i,caller:Kv});return s.jsx(v_,{...l,children:s.jsx(Ote,{scope:t,contentId:ui(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:N.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:N.useCallback(()=>d(!0),[]),onCustomAnchorRemove:N.useCallback(()=>d(!1),[]),modal:o,children:r})})};w6.displayName=Kv;var b6="PopoverAnchor",Pte=N.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=nc(b6,r),i=p0(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return N.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(t0,{...i,...n,ref:t})});Pte.displayName=b6;var j6="PopoverTrigger",N6=N.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=nc(j6,r),i=p0(r),o=Kt(t,a.triggerRef),l=s.jsx(_t.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":A6(a.open),...n,ref:o,onClick:Xe(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(t0,{asChild:!0,...i,children:l})});N6.displayName=j6;var X_="PopoverPortal",[Ite,Mte]=v6(X_,{forceMount:void 0}),S6=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=nc(X_,t);return s.jsx(Ite,{scope:t,forceMount:r,children:s.jsx(Da,{present:r||i.open,children:s.jsx(Kf,{asChild:!0,container:a,children:n})})})};S6.displayName=X_;var wf="PopoverContent",_6=N.forwardRef((e,t)=>{const r=Mte(wf,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=nc(wf,e.__scopePopover);return s.jsx(Da,{present:n||i.open,children:i.modal?s.jsx(Fte,{...a,ref:t}):s.jsx(Lte,{...a,ref:t})})});_6.displayName=wf;var Rte=Ul("PopoverContent.RemoveScroll"),Fte=N.forwardRef((e,t)=>{const r=nc(wf,e.__scopePopover),n=N.useRef(null),a=Kt(t,n),i=N.useRef(!1);return N.useEffect(()=>{const o=n.current;if(o)return $v(o)},[]),s.jsx(o0,{as:Rte,allowPinchZoom:!0,children:s.jsx(T6,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Xe(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Xe(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Xe(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Lte=N.forwardRef((e,t)=>{const r=nc(wf,e.__scopePopover),n=N.useRef(!1),a=N.useRef(!1);return s.jsx(T6,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),T6=N.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,h=nc(wf,r),m=p0(r);return Lv(),s.jsx(s0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(ju,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:s.jsx(Iv,{"data-state":A6(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),E6="PopoverClose",$te=N.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=nc(E6,r);return s.jsx(_t.button,{type:"button",...n,ref:t,onClick:Xe(e.onClick,()=>a.onOpenChange(!1))})});$te.displayName=E6;var Bte="PopoverArrow",Ute=N.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=p0(r);return s.jsx(Mv,{...a,...n,ref:t})});Ute.displayName=Bte;function A6(e){return e?"open":"closed"}var Wte=w6,Vte=N6,Hte=S6,C6=_6;const wl=Wte,bl=Vte,yo=N.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(Hte,{children:s.jsx(C6,{ref:a,align:t,sideOffset:r,className:Ge("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...n})}));yo.displayName=C6.displayName;const zte=Zn({effectiveDate:ql({required_error:"Please select an effective date"})});function qte({onNext:e,onPrevious:t,isLast:r,isLoading:n,company:a}){const{toast:i}=Vr();function o(){const h=localStorage.getItem("leave_year");if(!h)return{startDate:null,endDate:null};const m=h.split("-");if(m.length!==3)return{startDate:null,endDate:null};const g=m[0],p=m[1],y=m[2].split(" ")[0],b=m[2].split(" ")[1],x={January:0,February:1,March:2,April:3,May:4,June:5,July:6,August:7,September:8,October:9,November:10,December:11},w=new Date(parseInt(p),x[g],1),v=new Date(parseInt(b),x[y]+1,0);return{startDate:w,endDate:v}}const{startDate:l,endDate:c}=o(),u=os({resolver:Cs(zte),defaultValues:{effectiveDate:a!=null&&a.effectiveDate?new Date(a.effectiveDate):new Date}}),d=Ut({mutationFn:async h=>{if(l&&c&&(h.effectiveDate<l||h.effectiveDate>c))throw new Error(`Effective date must be between ${dt(l,"MMMM d, yyyy")} and ${dt(c,"MMMM d, yyyy")} based on your leave year`);const m={effectiveDate:h.effectiveDate.toISOString(),setupStatus:"in_progress",name:(a==null?void 0:a.name)||"Company",workingDaysPerWeek:5,industry:"technology",leaveYearStart:"January 1st"};let g;a!=null&&a.id?g=await Ct("PATCH",`/api/company/${a.id}`,m):g=await Ct("POST","/api/company",m);try{const y=await(await Ct("GET","/api/roles")).json();if(!y||y.length===0){console.log("No existing roles found, creating default roles...");const b=[{name:"Admin",description:"",permissions:{employeeOverview:{view:!0,modify:!0},leaveApplications:{view:!0,modify:!0},holidays:{view:!0,modify:!0},compensatoryOff:{view:!0,modify:!0},bto:{view:!0,modify:!0},adminOverview:{view:!0,modify:!0},approvals:{view:!0,modify:!0},employees:{view:!0,modify:!0},workflows:{view:!0,modify:!0},roles:{view:!0,modify:!0},importLeaveData:{view:!0,modify:!0},adminLeaveTypes:{view:!0,modify:!0},adminCompOff:{view:!0,modify:!0},adminBTO:{view:!0,modify:!0},allowOnBehalf:{bto:!0,leave:!0,compOff:!0}}},{name:"Reporting Manager",description:"",permissions:{employeeOverview:{view:!0,modify:!1},leaveApplications:{view:!0,modify:!0},holidays:{view:!0,modify:!1},compensatoryOff:{view:!0,modify:!0},bto:{view:!0,modify:!0},adminOverview:{view:!0,modify:!1},approvals:{view:!0,modify:!0},employees:{view:!0,modify:!1},workflows:{view:!1,modify:!1},roles:{view:!1,modify:!1},importLeaveData:{view:!1,modify:!1},adminLeaveTypes:{view:!1,modify:!1},adminCompOff:{view:!1,modify:!1},adminBTO:{view:!1,modify:!1},allowOnBehalf:{bto:!0,leave:!0,compOff:!0}}},{name:"Employee",description:"",permissions:{employeeOverview:{view:!0,modify:!1},leaveApplications:{view:!0,modify:!0},holidays:{view:!0,modify:!1},compensatoryOff:{view:!0,modify:!0},bto:{view:!0,modify:!0},adminOverview:{view:!1,modify:!1},approvals:{view:!1,modify:!1},employees:{view:!1,modify:!1},workflows:{view:!1,modify:!1},roles:{view:!1,modify:!1},importLeaveData:{view:!1,modify:!1},adminLeaveTypes:{view:!1,modify:!1},adminCompOff:{view:!1,modify:!1},adminBTO:{view:!1,modify:!1},allowOnBehalf:{bto:!1,leave:!1,compOff:!1}}}];for(const x of b)await Ct("POST","/api/roles",x);console.log("Default roles created successfully")}else console.log("Existing roles found, skipping default role creation")}catch(p){console.error("Error creating default roles:",p)}return g},onSuccess:()=>{console.log("Effective date and default roles setup completed successfully"),Ye.invalidateQueries({queryKey:["/api/company"]}),Ye.invalidateQueries({queryKey:["/api/roles"]}),i({title:"Success",description:"Module enabled successfully with default roles created."}),setTimeout(()=>{console.log("About to call onNext() after timeout"),e()},100)},onError:h=>{console.error("Effective date error:",h),i({title:"Error",description:"Failed to save effective date. Please try again.",variant:"destructive"})}}),f=h=>{d.mutate(h)};return s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs(Ce,{children:[s.jsxs(Tt,{children:[s.jsx(Et,{children:"Set Effective Date"}),s.jsx(hf,{children:"Choose when your leave management system should become effective. This date will be used as the starting point for all leave calculations."})]}),s.jsx(Ie,{children:s.jsx(ai,{...u,children:s.jsxs("form",{onSubmit:u.handleSubmit(f),className:"space-y-6",children:[s.jsx(et,{control:u.control,name:"effectiveDate",render:({field:h})=>s.jsxs(Qe,{className:"flex flex-col",children:[s.jsx(ft,{children:"Effective Date"}),s.jsxs(wl,{children:[s.jsx(bl,{asChild:!0,children:s.jsx(lt,{children:s.jsxs(se,{variant:"outline",className:Ge("w-full pl-3 text-left font-normal",!h.value&&"text-muted-foreground"),children:[h.value?dt(h.value,"PPP"):s.jsx("span",{children:"Pick a date"}),s.jsx(br,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(yo,{className:"w-auto p-0",align:"start",children:s.jsx(xo,{mode:"single",selected:h.value,onSelect:h.onChange,disabled:m=>l&&c?m<l||m>c:m<new Date("1900-01-01"),initialFocus:!0})})]}),s.jsx(wt,{}),l&&c&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Please select a date between ",dt(l,"MMMM d, yyyy")," and ",dt(c,"MMMM d, yyyy")," based on your leave year (",localStorage.getItem("leave_year"),")."]})]})}),s.jsxs("div",{className:"flex justify-between pt-6",children:[s.jsx(se,{type:"button",variant:"outline",onClick:t,disabled:d.isPending,children:"Previous"}),s.jsx(se,{type:"submit",disabled:d.isPending||n,children:d.isPending?"Saving...":r?"Complete Setup":"Next"})]})]})})})]})})}const SD=e=>({stethoscope:Av,smile:Zp,umbrella:Cv,baby:Sv,heart:Ev,users:Bn,user:uf,calendar:br,briefcase:kF,clock:An,star:LF,gift:RF})[e]||br,ht=N.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:Ge("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));ht.displayName="Input";const Cn=N.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:Ge("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));Cn.displayName="Textarea";function Yv(e){const t=N.useRef({value:e,previous:e});return N.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Xv="Checkbox",[Gte,XMe]=pa(Xv),[Kte,Q_]=Gte(Xv);function Yte(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=e,[h,m]=mi({prop:r,defaultProp:a??!1,onChange:c,caller:Xv}),[g,p]=N.useState(null),[y,b]=N.useState(null),x=N.useRef(!1),w=g?!!o||!!g.closest("form"):!0,v={checked:h,disabled:i,setChecked:m,control:g,setControl:p,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:x,required:u,defaultChecked:Ml(a)?!1:a,isFormControl:w,bubbleInput:y,setBubbleInput:b};return s.jsx(Kte,{scope:t,...v,children:Xte(f)?f(v):n})}var D6="CheckboxTrigger",k6=N.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:g}=Q_(D6,e),p=Kt(a,d),y=N.useRef(c);return N.useEffect(()=>{const b=i==null?void 0:i.form;if(b){const x=()=>f(y.current);return b.addEventListener("reset",x),()=>b.removeEventListener("reset",x)}},[i,f]),s.jsx(_t.button,{type:"button",role:"checkbox","aria-checked":Ml(c)?"mixed":c,"aria-required":u,"data-state":R6(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:p,onKeyDown:Xe(t,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:Xe(r,b=>{f(x=>Ml(x)?!0:!x),g&&m&&(h.current=b.isPropagationStopped(),h.current||b.stopPropagation())})})});k6.displayName=D6;var J_=N.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...f}=e;return s.jsx(Yte,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>s.jsxs(s.Fragment,{children:[s.jsx(k6,{...f,ref:t,__scopeCheckbox:r}),h&&s.jsx(M6,{__scopeCheckbox:r})]})})});J_.displayName=Xv;var O6="CheckboxIndicator",P6=N.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=Q_(O6,r);return s.jsx(Da,{present:n||Ml(i.checked)||i.checked===!0,children:s.jsx(_t.span,{"data-state":R6(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});P6.displayName=O6;var I6="CheckboxBubbleInput",M6=N.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:h,setBubbleInput:m}=Q_(I6,e),g=Kt(r,m),p=Yv(i),y=Pv(n);N.useEffect(()=>{const x=h;if(!x)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set,S=!a.current;if(p!==i&&j){const _=new Event("click",{bubbles:S});x.indeterminate=Ml(i),j.call(x,Ml(i)?!1:i),x.dispatchEvent(_)}},[h,p,i,a]);const b=N.useRef(Ml(i)?!1:i);return s.jsx(_t.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:l,disabled:c,name:u,value:d,form:f,...t,tabIndex:-1,ref:g,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});M6.displayName=I6;function Xte(e){return typeof e=="function"}function Ml(e){return e==="indeterminate"}function R6(e){return Ml(e)?"indeterminate":e?"checked":"unchecked"}const Pt=N.forwardRef(({className:e,...t},r)=>s.jsx(J_,{ref:r,className:Ge("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(P6,{className:Ge("flex items-center justify-center text-current"),children:s.jsx(_v,{className:"h-4 w-4"})})}));Pt.displayName=J_.displayName;function _D(e,[t,r]){return Math.min(r,Math.max(t,e))}var Qte=[" ","Enter","ArrowUp","ArrowDown"],Jte=[" ","Enter"],iu="Select",[Qv,Jv,Zte]=wv(iu),[rh,QMe]=pa(iu,[Zte,rc]),Zv=rc(),[ere,ac]=rh(iu),[tre,rre]=rh(iu),F6=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:g}=e,p=Zv(t),[y,b]=N.useState(null),[x,w]=N.useState(null),[v,j]=N.useState(!1),S=a0(u),[_,A]=mi({prop:n,defaultProp:a??!1,onChange:i,caller:iu}),[C,D]=mi({prop:o,defaultProp:l,onChange:c,caller:iu}),k=N.useRef(null),O=y?g||!!y.closest("form"):!0,[V,G]=N.useState(new Set),Y=Array.from(V).map(W=>W.props.value).join(";");return s.jsx(v_,{...p,children:s.jsxs(ere,{required:m,scope:t,trigger:y,onTriggerChange:b,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:v,onValueNodeHasChildrenChange:j,contentId:ui(),value:C,onValueChange:D,open:_,onOpenChange:A,dir:S,triggerPointerDownPosRef:k,disabled:h,children:[s.jsx(Qv.Provider,{scope:t,children:s.jsx(tre,{scope:e.__scopeSelect,onNativeOptionAdd:N.useCallback(W=>{G(P=>new Set(P).add(W))},[]),onNativeOptionRemove:N.useCallback(W=>{G(P=>{const E=new Set(P);return E.delete(W),E})},[]),children:r})}),O?s.jsxs(o5,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:C,onChange:W=>D(W.target.value),disabled:h,form:g,children:[C===void 0?s.jsx("option",{value:""}):null,Array.from(V)]},Y):null]})})};F6.displayName=iu;var L6="SelectTrigger",$6=N.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=Zv(r),o=ac(L6,r),l=o.disabled||n,c=Kt(t,o.onTriggerChange),u=Jv(r),d=N.useRef("touch"),[f,h,m]=c5(p=>{const y=u().filter(w=>!w.disabled),b=y.find(w=>w.value===o.value),x=u5(y,p,b);x!==void 0&&o.onValueChange(x.value)}),g=p=>{l||(o.onOpenChange(!0),m()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return s.jsx(t0,{asChild:!0,...i,children:s.jsx(_t.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":l5(o.value)?"":void 0,...a,ref:c,onClick:Xe(a.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&g(p)}),onPointerDown:Xe(a.onPointerDown,p=>{d.current=p.pointerType;const y=p.target;y.hasPointerCapture(p.pointerId)&&y.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:Xe(a.onKeyDown,p=>{const y=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(y&&p.key===" ")&&Qte.includes(p.key)&&(g(),p.preventDefault())})})})});$6.displayName=L6;var B6="SelectValue",U6=N.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=ac(B6,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=Kt(t,c.onValueNodeChange);return vn(()=>{u(d)},[u,d]),s.jsx(_t.span,{...l,ref:f,style:{pointerEvents:"none"},children:l5(c.value)?s.jsx(s.Fragment,{children:o}):i})});U6.displayName=B6;var nre="SelectIcon",W6=N.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(_t.span,{"aria-hidden":!0,...a,ref:t,children:n||"▼"})});W6.displayName=nre;var are="SelectPortal",V6=e=>s.jsx(Kf,{asChild:!0,...e});V6.displayName=are;var ou="SelectContent",H6=N.forwardRef((e,t)=>{const r=ac(ou,e.__scopeSelect),[n,a]=N.useState();if(vn(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?wu.createPortal(s.jsx(z6,{scope:e.__scopeSelect,children:s.jsx(Qv.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(q6,{...e,ref:t})});H6.displayName=ou;var qs=10,[z6,sc]=rh(ou),sre="SelectContentImpl",ire=Ul("SelectContent.RemoveScroll"),q6=N.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:y,...b}=e,x=ac(ou,r),[w,v]=N.useState(null),[j,S]=N.useState(null),_=Kt(t,ce=>v(ce)),[A,C]=N.useState(null),[D,k]=N.useState(null),O=Jv(r),[V,G]=N.useState(!1),Y=N.useRef(!1);N.useEffect(()=>{if(w)return $v(w)},[w]),Lv();const W=N.useCallback(ce=>{const[ge,...he]=O().map(ae=>ae.ref.current),[K]=he.slice(-1),fe=document.activeElement;for(const ae of ce)if(ae===fe||(ae==null||ae.scrollIntoView({block:"nearest"}),ae===ge&&j&&(j.scrollTop=0),ae===K&&j&&(j.scrollTop=j.scrollHeight),ae==null||ae.focus(),document.activeElement!==fe))return},[O,j]),P=N.useCallback(()=>W([A,w]),[W,A,w]);N.useEffect(()=>{V&&P()},[V,P]);const{onOpenChange:E,triggerPointerDownPosRef:R}=x;N.useEffect(()=>{if(w){let ce={x:0,y:0};const ge=K=>{var fe,ae;ce={x:Math.abs(Math.round(K.pageX)-(((fe=R.current)==null?void 0:fe.x)??0)),y:Math.abs(Math.round(K.pageY)-(((ae=R.current)==null?void 0:ae.y)??0))}},he=K=>{ce.x<=10&&ce.y<=10?K.preventDefault():w.contains(K.target)||E(!1),document.removeEventListener("pointermove",ge),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",he,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",he,{capture:!0})}}},[w,E,R]),N.useEffect(()=>{const ce=()=>E(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[E]);const[I,ee]=c5(ce=>{const ge=O().filter(fe=>!fe.disabled),he=ge.find(fe=>fe.ref.current===document.activeElement),K=u5(ge,ce,he);K&&setTimeout(()=>K.ref.current.focus())}),L=N.useCallback((ce,ge,he)=>{const K=!Y.current&&!he;(x.value!==void 0&&x.value===ge||K)&&(C(ce),K&&(Y.current=!0))},[x.value]),q=N.useCallback(()=>w==null?void 0:w.focus(),[w]),H=N.useCallback((ce,ge,he)=>{const K=!Y.current&&!he;(x.value!==void 0&&x.value===ge||K)&&k(ce)},[x.value]),B=n==="popper"?vN:G6,de=B===vN?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:y}:{};return s.jsx(z6,{scope:r,content:w,viewport:j,onViewportChange:S,itemRefCallback:L,selectedItem:A,onItemLeave:q,itemTextRefCallback:H,focusSelectedItem:P,selectedItemText:D,position:n,isPositioned:V,searchRef:I,children:s.jsx(o0,{as:ire,allowPinchZoom:!0,children:s.jsx(s0,{asChild:!0,trapped:x.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:Xe(a,ce=>{var ge;(ge=x.trigger)==null||ge.focus({preventScroll:!0}),ce.preventDefault()}),children:s.jsx(ju,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:s.jsx(B,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:ce=>ce.preventDefault(),...b,...de,onPlaced:()=>G(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Xe(b.onKeyDown,ce=>{const ge=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!ge&&ce.key.length===1&&ee(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let K=O().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(K=K.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const fe=ce.target,ae=K.indexOf(fe);K=K.slice(ae+1)}setTimeout(()=>W(K)),ce.preventDefault()}})})})})})})});q6.displayName=sre;var ore="SelectItemAlignedPosition",G6=N.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=ac(ou,r),o=sc(ou,r),[l,c]=N.useState(null),[u,d]=N.useState(null),f=Kt(t,_=>d(_)),h=Jv(r),m=N.useRef(!1),g=N.useRef(!0),{viewport:p,selectedItem:y,selectedItemText:b,focusSelectedItem:x}=o,w=N.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&p&&y&&b){const _=i.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),D=b.getBoundingClientRect();if(i.dir!=="rtl"){const fe=D.left-A.left,ae=C.left-fe,Ne=_.left-ae,Se=_.width+Ne,Ae=Math.max(Se,A.width),Oe=window.innerWidth-qs,M=_D(ae,[qs,Math.max(qs,Oe-Ae)]);l.style.minWidth=Se+"px",l.style.left=M+"px"}else{const fe=A.right-D.right,ae=window.innerWidth-C.right-fe,Ne=window.innerWidth-_.right-ae,Se=_.width+Ne,Ae=Math.max(Se,A.width),Oe=window.innerWidth-qs,M=_D(ae,[qs,Math.max(qs,Oe-Ae)]);l.style.minWidth=Se+"px",l.style.right=M+"px"}const k=h(),O=window.innerHeight-qs*2,V=p.scrollHeight,G=window.getComputedStyle(u),Y=parseInt(G.borderTopWidth,10),W=parseInt(G.paddingTop,10),P=parseInt(G.borderBottomWidth,10),E=parseInt(G.paddingBottom,10),R=Y+W+V+E+P,I=Math.min(y.offsetHeight*5,R),ee=window.getComputedStyle(p),L=parseInt(ee.paddingTop,10),q=parseInt(ee.paddingBottom,10),H=_.top+_.height/2-qs,B=O-H,de=y.offsetHeight/2,ce=y.offsetTop+de,ge=Y+W+ce,he=R-ge;if(ge<=H){const fe=k.length>0&&y===k[k.length-1].ref.current;l.style.bottom="0px";const ae=u.clientHeight-p.offsetTop-p.offsetHeight,Ne=Math.max(B,de+(fe?q:0)+ae+P),Se=ge+Ne;l.style.height=Se+"px"}else{const fe=k.length>0&&y===k[0].ref.current;l.style.top="0px";const Ne=Math.max(H,Y+p.offsetTop+(fe?L:0)+de)+he;l.style.height=Ne+"px",p.scrollTop=ge-H+p.offsetTop}l.style.margin=`${qs}px 0`,l.style.minHeight=I+"px",l.style.maxHeight=O+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,l,u,p,y,b,i.dir,n]);vn(()=>w(),[w]);const[v,j]=N.useState();vn(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const S=N.useCallback(_=>{_&&g.current===!0&&(w(),x==null||x(),g.current=!1)},[w,x]);return s.jsx(cre,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:v},children:s.jsx(_t.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});G6.displayName=ore;var lre="SelectPopperPosition",vN=N.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=qs,...i}=e,o=Zv(r);return s.jsx(Iv,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vN.displayName=lre;var[cre,Z_]=rh(ou,{}),wN="SelectViewport",K6=N.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=sc(wN,r),o=Z_(wN,r),l=Kt(t,i.onViewportChange),c=N.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(Qv.Slot,{scope:r,children:s.jsx(_t.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Xe(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const g=window.innerHeight-qs*2,p=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),b=Math.max(p,y);if(b<g){const x=b+m,w=Math.min(g,x),v=x-w;f.style.height=w+"px",f.style.bottom==="0px"&&(d.scrollTop=v>0?v:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});K6.displayName=wN;var Y6="SelectGroup",[ure,dre]=rh(Y6),fre=N.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=ui();return s.jsx(ure,{scope:r,id:a,children:s.jsx(_t.div,{role:"group","aria-labelledby":a,...n,ref:t})})});fre.displayName=Y6;var X6="SelectLabel",Q6=N.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=dre(X6,r);return s.jsx(_t.div,{id:a.id,...n,ref:t})});Q6.displayName=X6;var Ux="SelectItem",[hre,J6]=rh(Ux),Z6=N.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=ac(Ux,r),c=sc(Ux,r),u=l.value===n,[d,f]=N.useState(i??""),[h,m]=N.useState(!1),g=Kt(t,x=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,x,n,a)}),p=ui(),y=N.useRef("touch"),b=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(hre,{scope:r,value:n,disabled:a,textId:p,isSelected:u,onItemTextChange:N.useCallback(x=>{f(w=>w||((x==null?void 0:x.textContent)??"").trim())},[]),children:s.jsx(Qv.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:s.jsx(_t.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:Xe(o.onFocus,()=>m(!0)),onBlur:Xe(o.onBlur,()=>m(!1)),onClick:Xe(o.onClick,()=>{y.current!=="mouse"&&b()}),onPointerUp:Xe(o.onPointerUp,()=>{y.current==="mouse"&&b()}),onPointerDown:Xe(o.onPointerDown,x=>{y.current=x.pointerType}),onPointerMove:Xe(o.onPointerMove,x=>{var w;y.current=x.pointerType,a?(w=c.onItemLeave)==null||w.call(c):y.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Xe(o.onPointerLeave,x=>{var w;x.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:Xe(o.onKeyDown,x=>{var v;((v=c.searchRef)==null?void 0:v.current)!==""&&x.key===" "||(Jte.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});Z6.displayName=Ux;var em="SelectItemText",e5=N.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=ac(em,r),l=sc(em,r),c=J6(em,r),u=rre(em,r),[d,f]=N.useState(null),h=Kt(t,b=>f(b),c.onItemTextChange,b=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,b,c.value,c.disabled)}),m=d==null?void 0:d.textContent,g=N.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:p,onNativeOptionRemove:y}=u;return vn(()=>(p(g),()=>y(g)),[p,y,g]),s.jsxs(s.Fragment,{children:[s.jsx(_t.span,{id:c.textId,...i,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?wu.createPortal(i.children,o.valueNode):null]})});e5.displayName=em;var t5="SelectItemIndicator",r5=N.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return J6(t5,r).isSelected?s.jsx(_t.span,{"aria-hidden":!0,...n,ref:t}):null});r5.displayName=t5;var bN="SelectScrollUpButton",n5=N.forwardRef((e,t)=>{const r=sc(bN,e.__scopeSelect),n=Z_(bN,e.__scopeSelect),[a,i]=N.useState(!1),o=Kt(t,n.onScrollButtonChange);return vn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(s5,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});n5.displayName=bN;var jN="SelectScrollDownButton",a5=N.forwardRef((e,t)=>{const r=sc(jN,e.__scopeSelect),n=Z_(jN,e.__scopeSelect),[a,i]=N.useState(!1),o=Kt(t,n.onScrollButtonChange);return vn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(s5,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});a5.displayName=jN;var s5=N.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=sc("SelectScrollButton",r),o=N.useRef(null),l=Jv(r),c=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>c(),[c]),vn(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(_t.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Xe(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Xe(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Xe(a.onPointerLeave,()=>{c()})})}),mre="SelectSeparator",i5=N.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(_t.div,{"aria-hidden":!0,...n,ref:t})});i5.displayName=mre;var NN="SelectArrow",pre=N.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Zv(r),i=ac(NN,r),o=sc(NN,r);return i.open&&o.position==="popper"?s.jsx(Mv,{...a,...n,ref:t}):null});pre.displayName=NN;var gre="SelectBubbleInput",o5=N.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=N.useRef(null),i=Kt(n,a),o=Yv(t);return N.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(_t.select,{...r,style:{...cF,...r.style},ref:i,defaultValue:t})});o5.displayName=gre;function l5(e){return e===""||e===void 0}function c5(e){const t=Ea(e),r=N.useRef(""),n=N.useRef(0),a=N.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=N.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function u5(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=xre(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function xre(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var yre=F6,d5=$6,vre=U6,wre=W6,bre=V6,f5=H6,jre=K6,h5=Q6,m5=Z6,Nre=e5,Sre=r5,p5=n5,g5=a5,x5=i5;const yt=yre,vt=vre,gt=N.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(d5,{ref:n,className:Ge("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(wre,{asChild:!0,children:s.jsx(Dd,{className:"h-4 w-4 opacity-50"})})]}));gt.displayName=d5.displayName;const y5=N.forwardRef(({className:e,...t},r)=>s.jsx(p5,{ref:r,className:Ge("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(OF,{className:"h-4 w-4"})}));y5.displayName=p5.displayName;const v5=N.forwardRef(({className:e,...t},r)=>s.jsx(g5,{ref:r,className:Ge("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Dd,{className:"h-4 w-4"})}));v5.displayName=g5.displayName;const xt=N.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(bre,{children:s.jsxs(f5,{ref:a,className:Ge("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(y5,{}),s.jsx(jre,{className:Ge("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(v5,{})]})}));xt.displayName=f5.displayName;const _re=N.forwardRef(({className:e,...t},r)=>s.jsx(h5,{ref:r,className:Ge("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));_re.displayName=h5.displayName;const je=N.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(m5,{ref:n,className:Ge("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Sre,{children:s.jsx(_v,{className:"h-4 w-4"})})}),s.jsx(Nre,{children:t})]}));je.displayName=m5.displayName;const Tre=N.forwardRef(({className:e,...t},r)=>s.jsx(x5,{ref:r,className:Ge("-mx-1 my-1 h-px bg-muted",e),...t}));Tre.displayName=x5.displayName;var e1="Switch",[Ere,JMe]=pa(e1),[Are,Cre]=Ere(e1),w5=N.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,m]=N.useState(null),g=Kt(t,w=>m(w)),p=N.useRef(!1),y=h?d||!!h.closest("form"):!0,[b,x]=mi({prop:a,defaultProp:i??!1,onChange:u,caller:e1});return s.jsxs(Are,{scope:r,checked:b,disabled:l,children:[s.jsx(_t.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":S5(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:g,onClick:Xe(e.onClick,w=>{x(v=>!v),y&&(p.current=w.isPropagationStopped(),p.current||w.stopPropagation())})}),y&&s.jsx(N5,{control:h,bubbles:!p.current,name:n,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});w5.displayName=e1;var b5="SwitchThumb",j5=N.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=Cre(b5,r);return s.jsx(_t.span,{"data-state":S5(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});j5.displayName=b5;var Dre="SwitchBubbleInput",N5=N.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=N.useRef(null),l=Kt(o,i),c=Yv(r),u=Pv(t);return N.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const g=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(g)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});N5.displayName=Dre;function S5(e){return e?"checked":"unchecked"}var _5=w5,kre=j5;const Gl=N.forwardRef(({className:e,...t},r)=>s.jsx(_5,{className:Ge("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx(kre,{className:Ge("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Gl.displayName=_5.displayName;var t1="Tabs",[Ore,ZMe]=pa(t1,[th]),T5=th(),[Pre,eT]=Ore(t1),E5=N.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=a0(l),[f,h]=mi({prop:n,onChange:a,defaultProp:i??"",caller:t1});return s.jsx(Pre,{scope:r,baseId:ui(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:c,children:s.jsx(_t.div,{dir:d,"data-orientation":o,...u,ref:t})})});E5.displayName=t1;var A5="TabsList",C5=N.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=eT(A5,r),o=T5(r);return s.jsx(b_,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(_t.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});C5.displayName=A5;var D5="TabsTrigger",k5=N.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=eT(D5,r),l=T5(r),c=I5(o.baseId,n),u=M5(o.baseId,n),d=n===o.value;return s.jsx(j_,{asChild:!0,...l,focusable:!a,active:d,children:s.jsx(_t.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Xe(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:Xe(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:Xe(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!a&&f&&o.onValueChange(n)})})})});k5.displayName=D5;var O5="TabsContent",P5=N.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=eT(O5,r),c=I5(l.baseId,n),u=M5(l.baseId,n),d=n===l.value,f=N.useRef(d);return N.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),s.jsx(Da,{present:a||d,children:({present:h})=>s.jsx(_t.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&i})})});P5.displayName=O5;function I5(e,t){return`${e}-trigger-${t}`}function M5(e,t){return`${e}-content-${t}`}var Ire=E5,R5=C5,F5=k5,L5=P5;const tT=Ire,r1=N.forwardRef(({className:e,...t},r)=>s.jsx(R5,{ref:r,className:Ge("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));r1.displayName=R5.displayName;const Rl=N.forwardRef(({className:e,...t},r)=>s.jsx(F5,{ref:r,className:Ge("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Rl.displayName=F5.displayName;const Fl=N.forwardRef(({className:e,...t},r)=>s.jsx(L5,{ref:r,className:Ge("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Fl.displayName=L5.displayName;var n1="Dialog",[$5,eRe]=pa(n1),[Mre,wi]=$5(n1),B5=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=N.useRef(null),c=N.useRef(null),[u,d]=mi({prop:n,defaultProp:a??!1,onChange:i,caller:n1});return s.jsx(Mre,{scope:t,triggerRef:l,contentRef:c,contentId:ui(),titleId:ui(),descriptionId:ui(),open:u,onOpenChange:d,onOpenToggle:N.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};B5.displayName=n1;var U5="DialogTrigger",W5=N.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=wi(U5,r),i=Kt(t,a.triggerRef);return s.jsx(_t.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":aT(a.open),...n,ref:i,onClick:Xe(e.onClick,a.onOpenToggle)})});W5.displayName=U5;var rT="DialogPortal",[Rre,V5]=$5(rT,{forceMount:void 0}),H5=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=wi(rT,t);return s.jsx(Rre,{scope:t,forceMount:r,children:N.Children.map(n,o=>s.jsx(Da,{present:r||i.open,children:s.jsx(Kf,{asChild:!0,container:a,children:o})}))})};H5.displayName=rT;var Wx="DialogOverlay",z5=N.forwardRef((e,t)=>{const r=V5(Wx,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=wi(Wx,e.__scopeDialog);return i.modal?s.jsx(Da,{present:n||i.open,children:s.jsx(Lre,{...a,ref:t})}):null});z5.displayName=Wx;var Fre=Ul("DialogOverlay.RemoveScroll"),Lre=N.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=wi(Wx,r);return s.jsx(o0,{as:Fre,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(_t.div,{"data-state":aT(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),lu="DialogContent",q5=N.forwardRef((e,t)=>{const r=V5(lu,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=wi(lu,e.__scopeDialog);return s.jsx(Da,{present:n||i.open,children:i.modal?s.jsx($re,{...a,ref:t}):s.jsx(Bre,{...a,ref:t})})});q5.displayName=lu;var $re=N.forwardRef((e,t)=>{const r=wi(lu,e.__scopeDialog),n=N.useRef(null),a=Kt(t,r.contentRef,n);return N.useEffect(()=>{const i=n.current;if(i)return $v(i)},[]),s.jsx(G5,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Xe(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Xe(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Xe(e.onFocusOutside,i=>i.preventDefault())})}),Bre=N.forwardRef((e,t)=>{const r=wi(lu,e.__scopeDialog),n=N.useRef(!1),a=N.useRef(!1);return s.jsx(G5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),G5=N.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=wi(lu,r),c=N.useRef(null),u=Kt(t,c);return Lv(),s.jsxs(s.Fragment,{children:[s.jsx(s0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(ju,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":aT(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(Ure,{titleId:l.titleId}),s.jsx(Vre,{contentRef:c,descriptionId:l.descriptionId})]})]})}),nT="DialogTitle",K5=N.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=wi(nT,r);return s.jsx(_t.h2,{id:a.titleId,...n,ref:t})});K5.displayName=nT;var Y5="DialogDescription",X5=N.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=wi(Y5,r);return s.jsx(_t.p,{id:a.descriptionId,...n,ref:t})});X5.displayName=Y5;var Q5="DialogClose",J5=N.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=wi(Q5,r);return s.jsx(_t.button,{type:"button",...n,ref:t,onClick:Xe(e.onClick,()=>a.onOpenChange(!1))})});J5.displayName=Q5;function aT(e){return e?"open":"closed"}var Z5="DialogTitleWarning",[tRe,e$]=Cz(Z5,{contentName:lu,titleName:nT,docsSlug:"dialog"}),Ure=({titleId:e})=>{const t=e$(Z5),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return N.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Wre="DialogDescriptionWarning",Vre=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${e$(Wre).contentName}}.`;return N.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Hre=B5,zre=W5,qre=H5,t$=z5,r$=q5,n$=K5,a$=X5,Gre=J5;const fn=Hre,cu=zre,Kre=qre,s$=N.forwardRef(({className:e,...t},r)=>s.jsx(t$,{ref:r,className:Ge("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));s$.displayName=t$.displayName;const hn=N.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Kre,{children:[s.jsx(s$,{}),s.jsxs(r$,{ref:n,className:Ge("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(Gre,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(da,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));hn.displayName=r$.displayName;const mn=({className:e,...t})=>s.jsx("div",{className:Ge("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});mn.displayName="DialogHeader";const Vx=({className:e,...t})=>s.jsx("div",{className:Ge("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Vx.displayName="DialogFooter";const pn=N.forwardRef(({className:e,...t},r)=>s.jsx(n$,{ref:r,className:Ge("text-lg font-semibold leading-none tracking-tight",e),...t}));pn.displayName=n$.displayName;const Yre=N.forwardRef(({className:e,...t},r)=>s.jsx(a$,{ref:r,className:Ge("text-sm text-muted-foreground",e),...t}));Yre.displayName=a$.displayName;const TD=async e=>{try{console.log("[ExternalAPI] Starting fetchEmployeeData with new API...");const t=localStorage.getItem("jwt_token"),r=window.location.pathname.startsWith("/id/");if(!t||t.trim()===""||t==="null"||t==="undefined")throw r?(console.log("[ExternalAPI] On token setup route, skipping redirect"),new Error("JWT token being processed. Please wait...")):(console.log("[ExternalAPI] Invalid or missing JWT token, redirecting to authentication..."),window.location.href="https://services.resolvepay.in",new Error("JWT token required. Redirecting to authentication..."));console.log("[ExternalAPI] JWT token available:",!!t),console.log("[ExternalAPI] Applying filters:",e);const n=[],a=(e==null?void 0:e.attributeIds)||[],i=(e==null?void 0:e.subAttributeIds)||[];if(a.length>0&&i.length>0){const d={};if(a.length===i.length)a.forEach((f,h)=>{const m=parseInt(f),g=parseInt(i[h]);d[m]||(d[m]=[]),d[m].push(g)});else{const f=parseInt(a[0]);d[f]=i.map(h=>parseInt(h))}Object.keys(d).forEach(f=>{n.push({attributeId:parseInt(f),subAttributeId:d[f]})})}const o={workerTypeId:(e==null?void 0:e.workerTypeIds)||[],AttributeFilters:n,isActive:(e==null?void 0:e.userType)??2,patternId:(e==null?void 0:e.patternId)||0};console.log("[ExternalAPI] New payload structure:"),console.log("- workerTypeId:",o.workerTypeId),console.log("- AttributeFilters:",o.AttributeFilters),console.log("- isActive:",o.isActive),console.log("- patternId:",o.patternId),console.log("[ExternalAPI] Full request payload:",JSON.stringify(o,null,2));const l=await fetch("https://apiv1.resolvepay.in/organization/employees?page=1&pageSize=0",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(o)});if(!l.ok)throw new Error(`API request failed with status: ${l.status}`);const c=await l.json();if(console.log("[ExternalAPI] New API response:",c),!c||c.result!=="Success"||!c.data||!Array.isArray(c.data.employee_data))throw new Error("Invalid employee data format received from new API");const u=c.data.employee_data.map(d=>({id:d.user_id.toString(),firstName:d.user_name.split(" ")[0]||d.user_name,lastName:d.user_name.split(" ").slice(1).join(" ")||"",email:`${d.user_name.toLowerCase().replace(/\s+/g,".")}@company.com`,employeeNumber:d.employee_number,designation:d.designation||"Not Assigned",dateOfJoining:d.date_of_joining,userRole:"employee",workerType:d.worker_type,profilePhoto:null,phoneNumber:null,dateOfBirth:"1990-01-01",gender:"Not Specified",reportingManager:null,leaveId:`leave_${d.user_id}`,isDifferentlyAbled:!1,lastWorkingDay:d.last_working_day||null,user_id:d.user_id.toString(),user_name:d.user_name,employee_number:d.employee_number,department:d.department,location:d.location,emp_status:d.emp_status}));return console.log("[ExternalAPI] Transformed employee data from new API:",u),u}catch(t){throw console.error("[ExternalAPI] Error fetching employees from new API:",t),t}},Xre=async()=>{try{const e=localStorage.getItem("jwt_token");if(!e)throw new Error("JWT token required");const t=await fetch("https://apiv1.resolvepay.in/organization/customer/worker-type-list",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`Worker types API failed: ${t.status}`);const r=await t.json();return console.log("[FilterAPI] Worker types response:",r),r.result==="Success"&&r.worker_type_list?r.worker_type_list:[]}catch(e){return console.error("[FilterAPI] Error fetching worker types:",e),[]}},Qre=async()=>{try{const e=localStorage.getItem("jwt_token");if(!e)throw new Error("JWT token required");const t=await fetch("https://apiv1.resolvepay.in/organization/attribute-list",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`Attributes API failed: ${t.status}`);const r=await t.json();return console.log("[FilterAPI] Attributes response:",r),r.result==="Success"&&r.attributes?r.attributes:[]}catch(e){return console.error("[FilterAPI] Error fetching attributes:",e),[]}},Jre=async e=>{try{const t=localStorage.getItem("jwt_token");if(!t)throw new Error("JWT token required");const r=await fetch(`https://apiv1.resolvepay.in/organization/attribute-details/${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error(`Sub-attributes API failed: ${r.status}`);const n=await r.json();return console.log("[FilterAPI] Sub-attributes response for",e,":",n),n.result==="Success"&&n.sub_attributes?n.sub_attributes:[]}catch(t){return console.error("[FilterAPI] Error fetching sub-attributes for",e,":",t),[]}};function g0({onClose:e,onAssign:t,preSelectedEmployees:r=[],applicableGenders:n=[]}){var he;const[a,i]=N.useState(""),[o,l]=N.useState([]),[c,u]=N.useState(1),[d,f]=N.useState([]),[h,m]=N.useState(!0),[g,p]=N.useState(null),y=10,[b,x]=N.useState(!1),[w,v]=N.useState([]),[j,S]=N.useState([]),[_,A]=N.useState([]),[C,D]=N.useState({}),[k,O]=N.useState({workerTypeIds:[],attributeIds:[],subAttributeIds:[],userType:2}),[V,G]=N.useState(2);N.useEffect(()=>{(async()=>{try{m(!0),console.log("[EmployeeAssignment] Starting to load employees from external API...");const fe=localStorage.getItem("jwt_token");if(console.log("[EmployeeAssignment] JWT token available:",!!fe),!fe){console.log("[EmployeeAssignment] No JWT token found"),p("JWT token required. Please obtain a JWT token and visit /id/{your-jwt-token} to authenticate."),m(!1);return}const ae=await TD(k);console.log("[EmployeeAssignment] Loaded employees:",ae.length),f(ae),p(null)}catch(fe){console.error("[EmployeeAssignment] Error loading employees:",fe),console.log("[EmployeeAssignment] Falling back to sample employees"),f([{id:"225",user_id:"225",firstName:"John",lastName:"Doe",user_name:"John Doe",email:"john.doe@company.com",employeeNumber:"EMP001",employee_number:"EMP001",designation:"Software Engineer",dateOfJoining:"2023-01-15",userRole:"employee",workerType:"regular",profilePhoto:null,phoneNumber:"+1-555-0101",dateOfBirth:"1990-05-15",gender:"Male",reportingManager:null,leaveId:"225",isDifferentlyAbled:!1,lastWorkingDay:null},{id:"226",user_id:"226",firstName:"Jane",lastName:"Smith",user_name:"Jane Smith",email:"jane.smith@company.com",employeeNumber:"EMP002",employee_number:"EMP002",designation:"Project Manager",dateOfJoining:"2022-08-10",userRole:"manager",workerType:"regular",profilePhoto:null,phoneNumber:"+1-555-0102",dateOfBirth:"1988-12-20",gender:"Female",reportingManager:null,leaveId:"226",isDifferentlyAbled:!1,lastWorkingDay:null}]),p(null)}finally{m(!1)}})()},[k]),N.useEffect(()=>{b&&(async()=>{try{const[fe,ae]=await Promise.all([Xre(),Qre()]);S(fe),A(ae),console.log("[FilterAPI] Loaded filter data:",{workerTypesData:fe,attributesData:ae})}catch(fe){console.error("[FilterAPI] Error loading filter data:",fe)}})()},[b]),N.useEffect(()=>{if(r&&r.length>0&&d.length>0){const K=r.map(fe=>d.find(ae=>ae.user_id===fe.user_id)).filter(Boolean);l(K)}},[r,d]);const Y=d.filter(K=>{if(!K)return!1;if(n&&n.length>0){const ae=(K.gender||"").toLowerCase();if(!(ae==="not specified"||ae===""||!ae)){if(!n.some(Se=>Se.toLowerCase()===ae))return!1}}const fe=a.toLowerCase();return(K.user_name||"").toLowerCase().includes(fe)||(K.employee_number||"").toLowerCase().includes(fe)||(K.email||"").toLowerCase().includes(fe)});d.length>0&&Y.length===0&&(console.log("[EmployeeAssignment] FILTER DEBUG - All employees filtered out!"),console.log("- Total employees:",d.length),console.log("- Applicable genders:",n),console.log("- Search term:",a),console.log("- Sample employee gender:",(he=d[0])==null?void 0:he.gender));const W=Math.ceil(Y.length/y),P=(c-1)*y,E=Y.slice(P,P+y),R=K=>{l(fe=>fe.find(Ne=>Ne.user_id===K.user_id)?fe.filter(Ne=>Ne.user_id!==K.user_id):[...fe,K])},I=()=>{o.length===Y.length?l([]):l(Y)},ee=()=>{console.log("EmployeeAssignment - handleAssign called with:",o),console.log("Number of selected employees:",o.length),t(o)},L=K=>o.some(fe=>fe.user_id===K.user_id),q=()=>{const K={id:Date.now().toString(),type:"workerType",selectedValues:[],selectedLabels:[]};v([...w,K])},H=K=>{v(w.filter(fe=>fe.id!==K))},B=(K,fe)=>{v(w.map(ae=>ae.id===K?{...ae,...fe}:ae))},de=async(K,fe,ae)=>{if(B(K,{type:"attribute",attributeId:fe,attributeName:ae,selectedValues:[],selectedLabels:[]}),!C[fe])try{const Ne=await Jre(fe);D(Se=>({...Se,[fe]:Ne}))}catch(Ne){console.error("Error fetching sub-attributes:",Ne)}},ce=()=>{const K=[],fe=[],ae=[];w.forEach(Ne=>{Ne.type==="workerType"&&Ne.selectedValues.length>0?K.push(...Ne.selectedValues.map(Se=>parseInt(Se))):Ne.type==="attribute"&&Ne.selectedValues.length>0&&Ne.attributeId&&(fe.push(Ne.attributeId),ae.push(...Ne.selectedValues))}),O({workerTypeIds:K,attributeIds:fe,subAttributeIds:ae,userType:V}),x(!1),console.log("[Filter] Applied filters:",{workerTypeIds:K,attributeIds:fe,subAttributeIds:ae,userType:V})},ge=()=>{v([]),G(2),O({workerTypeIds:[],attributeIds:[],subAttributeIds:[],userType:2}),x(!1)};return h?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg p-6",children:s.jsx("div",{className:"text-center",children:"Loading employees..."})})}):g?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-red-600 mb-4",children:[s.jsx(da,{className:"h-12 w-12 mx-auto mb-2"}),s.jsx("h3",{className:"text-lg font-semibold",children:"Unable to Load Employees"})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:g}),s.jsxs("div",{className:"flex gap-2 justify-center",children:[s.jsx(se,{variant:"outline",onClick:e,children:"Cancel"}),s.jsx(se,{onClick:()=>{p(null),m(!0),(async()=>{try{const fe=await TD();f(fe),p(null)}catch(fe){fe instanceof Error&&fe.message.includes("JWT token")?p("Authentication required. Please obtain a JWT token and visit /id/{your-jwt-token} to authenticate."):p("Failed to load employee data. Please try again or contact your administrator."),f([])}finally{m(!1)}})()},children:"Retry"})]})]})})}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[80vh] flex flex-col m-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Assign Employees"}),s.jsx(se,{variant:"outline",size:"sm",onClick:e,className:"text-gray-500 hover:text-gray-700",children:s.jsx(da,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"p-4 border-b bg-white",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ht,{placeholder:"Search employees...",value:a,onChange:K=>i(K.target.value),className:"flex-1"}),s.jsxs(fn,{open:b,onOpenChange:x,children:[s.jsx(cu,{asChild:!0,children:s.jsxs(se,{variant:"outline",size:"sm",children:[s.jsx(Tv,{className:"h-4 w-4 mr-2"}),"Filter"]})}),s.jsxs(hn,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[s.jsx(mn,{children:s.jsx(pn,{children:"Filter Employees"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 p-4 border rounded-lg bg-blue-50",children:[s.jsx("span",{className:"text-sm text-gray-500 min-w-12",children:"Show"}),s.jsxs(yt,{value:V.toString(),onValueChange:K=>{const fe=parseInt(K);G(fe)},children:[s.jsx(gt,{className:"w-40",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"2",children:"All Users"}),s.jsx(je,{value:"1",children:"Active Users"}),s.jsx(je,{value:"0",children:"Inactive Users"})]})]}),s.jsx("span",{className:"text-sm text-gray-500",children:"employees"})]}),w.map((K,fe)=>{var ae,Ne;return s.jsxs("div",{className:"flex items-center gap-2 p-4 border rounded-lg",children:[s.jsx("span",{className:"text-sm text-gray-500 min-w-12",children:fe===0?"Where":"And"}),s.jsxs(yt,{value:K.type==="workerType"?"workerType":K.attributeName||"",onValueChange:Se=>{if(Se==="workerType")B(K.id,{type:"workerType",attributeId:void 0,attributeName:void 0,selectedValues:[],selectedLabels:[]});else{const Ae=_.find(Oe=>Oe.attribute===Se);Ae&&de(K.id,Ae.attribute_id,Ae.attribute)}},children:[s.jsx(gt,{className:"w-40",children:s.jsx(vt,{placeholder:"Select filter type"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"workerType",children:"Worker Type"}),_.map(Se=>s.jsx(je,{value:Se.attribute,children:Se.attribute},Se.attribute_id))]})]}),s.jsx("span",{className:"text-sm text-gray-500",children:"is"}),s.jsxs(yt,{value:"",onValueChange:Se=>{const Ae=K.selectedValues||[],Oe=K.selectedLabels||[];if(K.type==="workerType"){const M=j.find(oe=>oe.id.toString()===Se);M&&!Ae.includes(Se)&&B(K.id,{selectedValues:[...Ae,Se],selectedLabels:[...Oe,M.customer_worker_type]})}else if(K.type==="attribute"&&K.attributeId){const oe=(C[K.attributeId]||[]).find(be=>be.attribute_sub_id===Se);oe&&!Ae.includes(Se)&&B(K.id,{selectedValues:[...Ae,Se],selectedLabels:[...Oe,oe.attribute_sub]})}},children:[s.jsx(gt,{className:"flex-1",children:s.jsx(vt,{placeholder:K.selectedLabels&&K.selectedLabels.length>0?`${K.selectedLabels.length} selected`:K.type==="workerType"?"Select worker types":K.attributeId&&C[K.attributeId]?`Select ${(ae=K.attributeName)==null?void 0:ae.toLowerCase()}s`:"Loading options..."})}),s.jsx(xt,{children:K.type==="workerType"?j.map(Se=>s.jsx(je,{value:Se.id.toString(),children:Se.customer_worker_type},Se.id)):K.attributeId&&C[K.attributeId]?C[K.attributeId].map(Se=>s.jsx(je,{value:Se.attribute_sub_id,children:Se.attribute_sub},Se.attribute_sub_id)):null})]}),s.jsx("div",{className:"flex flex-wrap gap-1 max-w-xs",children:(Ne=K.selectedLabels)==null?void 0:Ne.map((Se,Ae)=>s.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full flex items-center gap-1",children:[Se,s.jsx("button",{onClick:()=>{const Oe=[...K.selectedValues||[]],M=[...K.selectedLabels||[]];Oe.splice(Ae,1),M.splice(Ae,1),B(K.id,{selectedValues:Oe,selectedLabels:M})},className:"text-blue-600 hover:text-blue-800",children:s.jsx(da,{className:"h-3 w-3"})})]},Ae))}),s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>H(K.id),className:"text-red-500 hover:text-red-700",children:s.jsx(ua,{className:"h-4 w-4"})})]},K.id)}),s.jsx(se,{variant:"outline",onClick:q,className:"w-full",children:"+ Add Filter Condition"}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(se,{variant:"outline",onClick:ge,children:"Clear"}),s.jsx(se,{onClick:ce,className:"flex-1",children:"Apply Filters"})]})]})]})]})]})}),s.jsx("div",{className:"flex-1 overflow-auto min-h-[250px] max-h-[350px]",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-left",children:s.jsx("input",{type:"checkbox",checked:o.length===Y.length&&Y.length>0,onChange:I,className:"rounded border-gray-300"})}),s.jsx("th",{className:"p-4 text-left text-sm font-medium text-gray-700",children:"Employee ID"}),s.jsx("th",{className:"p-4 text-left text-sm font-medium text-gray-700",children:"Name"}),s.jsx("th",{className:"p-4 text-left text-sm font-medium text-gray-700",children:"Email"}),s.jsx("th",{className:"p-4 text-left text-sm font-medium text-gray-700",children:"Designation"}),s.jsx("th",{className:"p-4 text-left text-sm font-medium text-gray-700",children:"Department"})]})}),s.jsx("tbody",{children:E.map(K=>s.jsxs("tr",{className:`border-b hover:bg-gray-50 transition-colors ${L(K)?"bg-blue-50":""}`,children:[s.jsx("td",{className:"p-4",children:s.jsx("input",{type:"checkbox",checked:L(K),onChange:()=>R(K),className:"rounded border-gray-300"})}),s.jsx("td",{className:"p-4 text-sm text-gray-900 font-medium",children:K.employee_number}),s.jsx("td",{className:"p-4 text-sm text-gray-900 font-medium",children:K.user_name}),s.jsx("td",{className:"p-4 text-sm text-gray-600",children:K.email}),s.jsx("td",{className:"p-4 text-sm text-gray-600",children:K.designation}),s.jsx("td",{className:"p-4 text-sm text-gray-600",children:K.department||K.workerType})]},K.user_id))})]})}),s.jsxs("div",{className:"p-3 border-t bg-gray-50 flex items-center justify-between",children:[s.jsxs("div",{className:"text-xs text-gray-600",children:["Showing ",P+1,"-",Math.min(P+y,Y.length)," of"," ",Y.length," employees"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>u(K=>Math.max(1,K-1)),disabled:c===1,children:s.jsx(Yf,{className:"h-3 w-3"})}),s.jsxs("span",{className:"text-xs px-2",children:[c,"/",W]}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>u(K=>Math.min(W,K+1)),disabled:c===W,children:s.jsx(Wi,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"p-4 border-t bg-white flex items-center justify-between flex-shrink-0",children:[s.jsxs("div",{className:"text-sm text-gray-600 font-medium",children:[o.length," employee",o.length!==1?"s":""," selected"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(se,{variant:"outline",onClick:e,children:"Cancel"}),s.jsxs(se,{onClick:ee,disabled:o.length===0,className:"bg-blue-600 hover:bg-blue-700 text-white",children:["Assign Selected (",o.length,")"]})]})]})]})})}let xc=[];const Zre=Zn({earnDays:er().min(0,"Earn days must be at least 0"),daysWorked:er().min(0,"Days worked must be at least 0")}),ED=Zn({fromDay:er().min(1).max(31),toDay:er().min(1).max(31),earnDays:er().min(0)}),ene=Zn({leaveVariantName:rr().min(1,"Leave variant name is required"),description:rr().min(1,"Description is required"),minimumLeaveUnit:as(On(["full_day","half_day"])).min(1,"At least one leave unit must be selected"),leavesGrantedOn:On(["calendar_days","compliance"]),paidDaysInYear:er().min(1,"Paid days in a year is required"),complianceGrantDays:er().optional(),complianceForEveryDays:er().optional(),grantLeaves:On(["in_advance","after_earning"]),grantFrequency:On(["per_month","per_quarter","per_year"]),proRataCalculation:On(["full_month","slab_system","rounding_off"]),slabs:as(Zre).optional(),onboardingSlabs:as(ED).optional(),exitSlabs:as(ED).optional(),fractionalLeaves:On(["rounded_up","rounded_down","normal_rounding"]).default("normal_rounding"),applicableGenders:as(On(["male","female"])).min(1,"At least one gender must be selected"),applicableAfter:er().min(0),applicableAfterType:On(["days","probation_end","date_of_joining"]).default("days"),mustBePlannedInAdvance:er().min(0),maxDaysInStretch:er().min(0),minDaysRequired:er().min(0),maxInstances:er().min(0),maxInstancesPeriod:On(["month","quarter","year"]),allowLeavesBeforeWeekend:or(),allowLeavesAfterWeekend:or(),allowLeavesBeforeHoliday:or(),allowLeavesAfterHoliday:or(),allowClubbing:or(),supportingDocuments:or(),supportingDocumentsText:rr().optional(),allowDuringNotice:or(),requiresWorkflow:or(),leaveBalanceDeduction:On(["before_workflow","after_workflow"]),gracePeriod:er().min(0),allowWithdrawalBeforeApproval:or(),allowWithdrawalAfterApproval:or(),allowWithdrawalNotAllowed:or(),negativeLeaveBalance:er().min(0),carryForwardLimit:er().min(0),carryForwardPeriod:On(["month","quarter","year"]),encashment:or(),encashmentCalculation:On(["basic_da","ctc","gross_salary"]).optional(),maxEncashmentDays:er().min(-1).optional(),encashmentTiming:On(["exit_retirement","annually"]).optional(),allowApplicationsOnBehalf:or(),showAvailedLeaves:or(),showBalanceLeaves:or(),maximumBalance:er().min(0)}).refine(e=>e.encashment?e.encashmentCalculation&&e.maxEncashmentDays!==void 0&&e.maxEncashmentDays!==null:!0,{message:"Calculate encashment using and Max days are required when encashment is enabled",path:["encashmentCalculation"]}).refine(e=>{if(e.proRataCalculation==="slab_system"&&e.slabs&&e.grantFrequency){let t;switch(e.grantFrequency){case"per_month":t=e.paidDaysInYear/12;break;case"per_quarter":t=e.paidDaysInYear/4;break;case"per_year":t=e.paidDaysInYear;break;default:t=e.paidDaysInYear/12}if(e.slabs.reduce((n,a)=>n+a.earnDays,0)>t)return!1}return!0},{message:"Total earned days in slabs cannot exceed allocation based on selected grant frequency",path:["slabs"]}).refine(e=>{const t=e.mustBePlannedInAdvance>0,r=e.gracePeriod>0;return!(t&&r)},{message:"Leave application advance planning and grace period are mutually exclusive - only one can be enabled",path:["mustBePlannedInAdvance"]});function sT({variant:e,leaveType:t,onClose:r}){var b,x,w;const{toast:n}=Vr(),[a,i]=N.useState(!1),[o,l]=N.useState([]),c=N.useRef([]),{data:u=[]}=Fe({queryKey:[`/api/employee-assignments/${e==null?void 0:e.id}`],enabled:!!(e!=null&&e.id),staleTime:5*60*1e3,refetchOnWindowFocus:!1}),[d,f]=N.useState([]);N.useEffect(()=>{(async()=>{try{const S=(await vi()).map(eh);f(S)}catch(j){console.error("Error loading employees:",j)}})()},[]),N.useEffect(()=>{if(console.log("Loading assigned employees - variant ID:",e==null?void 0:e.id),console.log("Existing assignments:",u),console.log("All employees from external API:",d.length,"employees"),e!=null&&e.id&&Array.isArray(u)&&u.length>0){const v=u.map(S=>S.userId);console.log("Assigned user IDs from database:",v);const j=d.filter(S=>{const _=S.user_id||S.id,A=v.includes(_);return A&&console.log("Found assigned employee:",S.user_name,"with ID:",_),A});console.log("Matched assigned employees:",j.length),l(j),c.current=j}else e!=null&&e.id?(console.log("No assignments found - clearing assigned employees"),l([]),c.current=[]):(console.log("New variant - using pending assignments:",xc.length),l(xc),c.current=xc)},[u,e==null?void 0:e.id,d]);const h=v=>{var j;v==="slab_system"?((!m.getValues("slabs")||((j=m.getValues("slabs"))==null?void 0:j.length)===0)&&m.setValue("slabs",[{earnDays:0,daysWorked:0}]),m.setValue("fractionalLeaves","normal_rounding")):v==="rounding_off"?(m.setValue("slabs",[]),m.getValues("fractionalLeaves")||m.setValue("fractionalLeaves","normal_rounding")):(m.setValue("slabs",[]),m.setValue("fractionalLeaves","normal_rounding"))},m=os({resolver:Cs(ene),defaultValues:{leaveVariantName:(e==null?void 0:e.leaveVariantName)||"",description:(e==null?void 0:e.description)||"",minimumLeaveUnit:e!=null&&e.minimumLeaveUnit?Array.isArray(e.minimumLeaveUnit)?e.minimumLeaveUnit:typeof e.minimumLeaveUnit=="string"?e.minimumLeaveUnit.replace(/^\{/,"").replace(/\}$/,"").replace(/"/g,"").split(",").map(v=>v.trim()).filter(v=>v):["full_day"]:["full_day"],leavesGrantedOn:(e==null?void 0:e.leavesGrantedOn)||"calendar_days",paidDaysInYear:(e==null?void 0:e.paidDaysInYear)||12,complianceGrantDays:(e==null?void 0:e.complianceGrantDays)||1,complianceForEveryDays:(e==null?void 0:e.complianceForEveryDays)||20,grantLeaves:(e==null?void 0:e.grantLeaves)||"in_advance",grantFrequency:(e==null?void 0:e.grantFrequency)||"per_month",proRataCalculation:(e==null?void 0:e.proRataCalculation)||"full_month",slabs:(e==null?void 0:e.slabs)||[],onboardingSlabs:(()=>{const j=((e==null?void 0:e.onboardingSlabs)||[{fromDay:1,toDay:31,earnDays:0}]).filter((S,_,A)=>A.findIndex(C=>C.fromDay===S.fromDay&&C.toDay===S.toDay)===_);return j.length>0?j:[{fromDay:1,toDay:31,earnDays:0}]})(),exitSlabs:(()=>{const j=((e==null?void 0:e.exitSlabs)||[{fromDay:1,toDay:31,earnDays:0}]).filter((S,_,A)=>A.findIndex(C=>C.fromDay===S.fromDay&&C.toDay===S.toDay)===_);return j.length>0?j:[{fromDay:1,toDay:31,earnDays:0}]})(),fractionalLeaves:(e==null?void 0:e.fractionalLeaves)||"normal_rounding",applicableGenders:(e==null?void 0:e.applicableGenders)||["male","female"],applicableAfter:(e==null?void 0:e.applicableAfter)||0,applicableAfterType:(e==null?void 0:e.applicableAfterType)||"days",mustBePlannedInAdvance:(e==null?void 0:e.mustBePlannedInAdvance)||0,maxDaysInStretch:(e==null?void 0:e.maxDaysInStretch)||0,minDaysRequired:(e==null?void 0:e.minDaysRequired)||0,maxInstances:(e==null?void 0:e.maxInstances)||0,maxInstancesPeriod:(e==null?void 0:e.maxInstancesPeriod)||"month",allowLeavesBeforeWeekend:(e==null?void 0:e.allowLeavesBeforeWeekend)??!0,allowLeavesAfterWeekend:(e==null?void 0:e.allowLeavesAfterWeekend)??!0,allowLeavesBeforeHoliday:(e==null?void 0:e.allowLeavesBeforeHoliday)??!0,allowLeavesAfterHoliday:(e==null?void 0:e.allowLeavesAfterHoliday)??!0,allowClubbing:(e==null?void 0:e.allowClubbing)??!0,supportingDocuments:(e==null?void 0:e.supportingDocuments)||!1,supportingDocumentsText:(e==null?void 0:e.supportingDocumentsText)||"",allowDuringNotice:(e==null?void 0:e.allowDuringNotice)??!0,requiresWorkflow:(e==null?void 0:e.requiresWorkflow)??!0,leaveBalanceDeduction:e!=null&&e.leaveBalanceDeductionBefore?"before_workflow":e!=null&&e.leaveBalanceDeductionAfter?"after_workflow":"before_workflow",gracePeriod:(e==null?void 0:e.gracePeriod)||0,allowWithdrawalBeforeApproval:(e==null?void 0:e.allowWithdrawalBeforeApproval)??!0,allowWithdrawalAfterApproval:(e==null?void 0:e.allowWithdrawalAfterApproval)||!1,allowWithdrawalNotAllowed:(e==null?void 0:e.allowWithdrawalNotAllowed)||!1,negativeLeaveBalance:(e==null?void 0:e.negativeLeaveBalance)||0,carryForwardLimit:(e==null?void 0:e.carryForwardLimit)||0,carryForwardPeriod:(e==null?void 0:e.carryForwardPeriod)||"month",encashment:(e==null?void 0:e.encashment)||!1,encashmentCalculation:(e==null?void 0:e.encashmentCalculation)||"basic_da",maxEncashmentDays:(e==null?void 0:e.maxEncashmentDays)===1e3?-1:(e==null?void 0:e.maxEncashmentDays)||0,encashmentTiming:(e==null?void 0:e.encashmentTiming)||"exit_retirement",allowApplicationsOnBehalf:(e==null?void 0:e.allowApplicationsOnBehalf)??!0,showAvailedLeaves:(e==null?void 0:e.showAvailedLeaves)??!1,showBalanceLeaves:(e==null?void 0:e.showBalanceLeaves)??!1,maximumBalance:(e==null?void 0:e.maximumBalance)||0}}),g=Ut({mutationFn:async v=>{console.log("=== MUTATION FUNCTION STARTED ==="),console.log("Mutation data received:",v),console.log("variant?.id:",e==null?void 0:e.id),console.log("Is this an update?",!!(e!=null&&e.id));let j=(e==null?void 0:e.leaveTypeId)||t.id;if(!j){const D=(await(await fetch("/api/leave-types",{headers:{"X-Org-Id":localStorage.getItem("org_id")||"60"},credentials:"include"})).json()).find(k=>k.name===t.name);D?j=D.id:j=(await(await Ct("POST","/api/leave-types",{name:t.name,icon:t.icon,color:t.color,annualAllowance:12,carryForward:!1,isActive:!0})).json()).id}const S={leaveTypeId:j,leaveTypeName:t.name,leaveVariantName:v.leaveVariantName,description:v.description,minimumLeaveUnit:v.minimumLeaveUnit,leavesGrantedOn:v.leavesGrantedOn,paidDaysInYear:v.paidDaysInYear,complianceGrantDays:v.complianceGrantDays,complianceForEveryDays:v.complianceForEveryDays,grantLeaves:v.grantLeaves,grantFrequency:v.grantFrequency,proRataCalculation:v.proRataCalculation,onboardingSlabs:v.onboardingSlabs,exitSlabs:v.exitSlabs,fractionalLeaves:v.fractionalLeaves,applicableGenders:v.applicableGenders,applicableAfter:v.applicableAfter,applicableAfterType:v.applicableAfterType,mustBePlannedInAdvance:v.mustBePlannedInAdvance,maxDaysInStretch:v.maxDaysInStretch,minDaysRequired:v.minDaysRequired,maxInstances:v.maxInstances,maxInstancesPeriod:v.maxInstancesPeriod,allowLeavesBeforeWeekend:v.allowLeavesBeforeWeekend,allowLeavesBeforeHoliday:v.allowLeavesBeforeHoliday,allowClubbing:v.allowClubbing,supportingDocuments:v.supportingDocuments,supportingDocumentsText:v.supportingDocumentsText,allowDuringNotice:v.allowDuringNotice,requiresWorkflow:v.requiresWorkflow,leaveBalanceDeductionBefore:v.leaveBalanceDeduction==="before_workflow",leaveBalanceDeductionAfter:v.leaveBalanceDeduction==="after_workflow",leaveBalanceDeductionNotAllowed:!1,gracePeriod:v.gracePeriod,allowWithdrawalBeforeApproval:v.allowWithdrawalBeforeApproval,allowWithdrawalAfterApproval:v.allowWithdrawalAfterApproval,allowWithdrawalNotAllowed:v.allowWithdrawalNotAllowed,negativeLeaveBalance:v.negativeLeaveBalance,carryForwardLimit:v.carryForwardLimit,carryForwardPeriod:v.carryForwardPeriod,encashment:v.encashment,encashmentCalculation:v.encashmentCalculation,maxEncashmentDays:v.maxEncashmentDays===-1?1e3:v.maxEncashmentDays,encashmentTiming:v.encashmentTiming,allowApplicationsOnBehalf:v.allowApplicationsOnBehalf,showAvailedLeaves:v.showAvailedLeaves,showBalanceLeaves:v.showBalanceLeaves,maximumBalance:v.maximumBalance};console.log("About to make API request..."),console.log("Request type:",e!=null&&e.id?"PATCH":"POST"),console.log("URL:",e!=null&&e.id?`/api/leave-variants/${e.id}`:"/api/leave-variants"),console.log("Variant data being sent:",JSON.stringify(S,null,2));const _=e!=null&&e.id?await Ct("PATCH",`/api/leave-variants/${e.id}`,S):await Ct("POST","/api/leave-variants",S);if(console.log("API request completed successfully"),console.log("Response:",_),e!=null&&e.id)return await _.json();{const A=await _.json(),C=A.id,D=xc.length>0?xc:c.current;if(D.length>0&&C){const k=D.map(O=>({userId:O.user_id||O.id||O.userId,leaveVariantId:C,assignmentType:"leave_variant"})).filter(O=>O.userId);try{await Ct("POST","/api/employee-assignments/bulk",{assignments:k}),xc=[]}catch(O){throw console.error("Failed to create employee assignments:",O),O}}return A}},onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/leave-types"]}),Ye.invalidateQueries({queryKey:["/api/leave-variants"]}),Ye.invalidateQueries({queryKey:["/api/employee-assignments"]}),n({title:"Success",description:`${t.name} variant has been ${e!=null&&e.id?"updated":"created"} successfully.`}),r()},onError:v=>{console.error("Leave config error:",v),n({title:"Error",description:"Failed to configure leave type. Please try again.",variant:"destructive"})}}),p=Ut({mutationFn:async()=>{if(!(e!=null&&e.id))throw new Error("No variant to delete");return await Ct("DELETE",`/api/leave-variants/${e.id}`)},onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/leave-types"]}),Ye.invalidateQueries({queryKey:["/api/leave-variants"]}),n({title:"Success",description:`${t.name} variant has been deleted successfully.`}),r()},onError:v=>{console.error("Delete variant error:",v),n({title:"Error",description:"Failed to delete variant. Please try again.",variant:"destructive"})}}),y=v=>{if(!v.leaveVariantName||v.leaveVariantName.trim()===""){n({title:"Validation Error",description:"Leave Variant Name is required.",variant:"destructive"});return}if(!v.description||v.description.trim()===""){n({title:"Validation Error",description:"Description is required.",variant:"destructive"});return}if(v.supportingDocuments&&(!v.supportingDocumentsText||v.supportingDocumentsText.trim()==="")){n({title:"Validation Error",description:"Supporting documents text is required when supporting documents are enabled.",variant:"destructive"});return}if(Object.keys(m.formState.errors).length>0){console.log("=== FORM VALIDATION ERRORS DETECTED ==="),Object.entries(m.formState.errors).forEach(([j,S])=>{console.log(`Field "${j}" error:`,S)}),console.log("=== END FORM VALIDATION ERRORS ===");return}if(e!=null&&e.id){console.log("BYPASS: This is an update operation, proceeding directly to mutation"),console.log("About to call mutation.mutate with data:",JSON.stringify(v,null,2)),g.mutate(v);return}if(v.proRataCalculation==="slab_system"){const j=v.onboardingSlabs&&v.onboardingSlabs.length>0,S=v.exitSlabs&&v.exitSlabs.length>0;if(!j&&!S){n({title:"Validation Error",description:"Please add at least one slab in either Onboarding or Exits tab when using Slab System.",variant:"destructive"});return}const _=v.leavesGrantedOn==="calendar_days"?31:30;if(j)for(let A=0;A<v.onboardingSlabs.length;A++){const C=v.onboardingSlabs[A];if(!C.fromDay||!C.toDay||C.earnDays===void 0||C.earnDays===null){n({title:"Validation Error",description:`Onboarding Slab ${A+1}: All fields (From Day, To Day, Earn Days) must be filled.`,variant:"destructive"});return}if(C.earnDays<0){n({title:"Validation Error",description:`Onboarding Slab ${A+1}: Earn days cannot be negative.`,variant:"destructive"});return}if(C.fromDay<1||C.fromDay>_){n({title:"Validation Error",description:`Onboarding Slab ${A+1}: From Day must be between 1 and ${_} (based on ${v.leavesGrantedOn==="calendar_days"?"calendar days":"working days"}).`,variant:"destructive"});return}if(C.toDay<1||C.toDay>_){n({title:"Validation Error",description:`Onboarding Slab ${A+1}: To Day must be between 1 and ${_} (based on ${v.leavesGrantedOn==="calendar_days"?"calendar days":"working days"}).`,variant:"destructive"});return}if(C.fromDay>C.toDay){n({title:"Validation Error",description:`Onboarding Slab ${A+1}: From Day cannot be greater than To Day.`,variant:"destructive"});return}}if(S)for(let A=0;A<v.exitSlabs.length;A++){const C=v.exitSlabs[A];if(!C.fromDay||!C.toDay||C.earnDays===void 0||C.earnDays===null){n({title:"Validation Error",description:`Exit Slab ${A+1}: All fields (From Day, To Day, Earn Days) must be filled.`,variant:"destructive"});return}if(C.earnDays<0){n({title:"Validation Error",description:`Exit Slab ${A+1}: Earn days cannot be negative.`,variant:"destructive"});return}if(C.fromDay<1||C.fromDay>_){n({title:"Validation Error",description:`Exit Slab ${A+1}: From Day must be between 1 and ${_} (based on ${v.leavesGrantedOn==="calendar_days"?"calendar days":"working days"}).`,variant:"destructive"});return}if(C.toDay<1||C.toDay>_){n({title:"Validation Error",description:`Exit Slab ${A+1}: To Day must be between 1 and ${_} (based on ${v.leavesGrantedOn==="calendar_days"?"calendar days":"working days"}).`,variant:"destructive"});return}if(C.fromDay>C.toDay){n({title:"Validation Error",description:`Exit Slab ${A+1}: From Day cannot be greater than To Day.`,variant:"destructive"});return}}if(v.paidDaysInYear&&v.grantFrequency){let A=0;switch(v.grantFrequency){case"per_month":A=v.paidDaysInYear/12;break;case"per_quarter":A=v.paidDaysInYear/4;break;case"per_half_year":A=v.paidDaysInYear/2;break;case"per_year":A=v.paidDaysInYear;break;default:A=v.paidDaysInYear}if(j)for(let C=0;C<v.onboardingSlabs.length;C++){const D=v.onboardingSlabs[C];if(D.earnDays&&D.earnDays>A){n({title:"Validation Error",description:`Onboarding Slab ${C+1}: Cannot earn ${D.earnDays} days. Maximum allowed per ${v.grantFrequency.replace("per_","")} is ${A.toFixed(2)} days (${v.paidDaysInYear} days ÷ ${v.grantFrequency==="per_month"?"12":v.grantFrequency==="per_quarter"?"4":v.grantFrequency==="per_half_year"?"2":"1"}).`,variant:"destructive"});return}}if(S)for(let C=0;C<v.exitSlabs.length;C++){const D=v.exitSlabs[C];if(D.earnDays&&D.earnDays>A){n({title:"Validation Error",description:`Exit Slab ${C+1}: Cannot earn ${D.earnDays} days. Maximum allowed per ${v.grantFrequency.replace("per_","")} is ${A.toFixed(2)} days (${v.paidDaysInYear} days ÷ ${v.grantFrequency==="per_month"?"12":v.grantFrequency==="per_quarter"?"4":v.grantFrequency==="per_half_year"?"2":"1"}).`,variant:"destructive"});return}}}if(j&&v.onboardingSlabs.length>1)for(let A=0;A<v.onboardingSlabs.length;A++){const C=v.onboardingSlabs[A];for(let D=A+1;D<v.onboardingSlabs.length;D++){const k=v.onboardingSlabs[D];if(C.fromDay&&C.toDay&&k.fromDay&&k.toDay&&C.fromDay<=k.toDay&&C.toDay>=k.fromDay){n({title:"Validation Error",description:`Onboarding Slabs ${A+1} and ${D+1} have overlapping date ranges (${C.fromDay}-${C.toDay} overlaps with ${k.fromDay}-${k.toDay}). Each day can only belong to one slab.`,variant:"destructive"});return}}}if(S&&v.exitSlabs.length>1)for(let A=0;A<v.exitSlabs.length;A++){const C=v.exitSlabs[A];for(let D=A+1;D<v.exitSlabs.length;D++){const k=v.exitSlabs[D];if(C.fromDay&&C.toDay&&k.fromDay&&k.toDay&&C.fromDay<=k.toDay&&C.toDay>=k.fromDay){n({title:"Validation Error",description:`Exit Slabs ${A+1} and ${D+1} have overlapping date ranges (${C.fromDay}-${C.toDay} overlaps with ${k.fromDay}-${k.toDay}). Each day can only belong to one slab.`,variant:"destructive"});return}}}if(j&&v.onboardingSlabs.length>0){const A=new Set;for(const D of v.onboardingSlabs)if(D.fromDay&&D.toDay)for(let k=D.fromDay;k<=D.toDay;k++)A.add(k);const C=[];for(let D=1;D<=31;D++)A.has(D)||C.push(D);if(C.length>0){n({title:"Validation Error",description:`Onboarding slabs must cover all days of the month (1st-31st). Missing coverage for days: ${C.join(", ")}. Please adjust your slab ranges to ensure complete month coverage.`,variant:"destructive"});return}}if(S&&v.exitSlabs.length>0){const A=new Set;for(const D of v.exitSlabs)if(D.fromDay&&D.toDay)for(let k=D.fromDay;k<=D.toDay;k++)A.add(k);const C=[];for(let D=1;D<=31;D++)A.has(D)||C.push(D);if(C.length>0){n({title:"Validation Error",description:`Exit slabs must cover all days of the month (1st-31st). Missing coverage for days: ${C.join(", ")}. Please adjust your slab ranges to ensure complete month coverage.`,variant:"destructive"});return}}}if(v.encashment){if(!v.encashmentCalculation){n({title:"Validation Error",description:"Please select how to calculate en-cashment.",variant:"destructive"});return}if(v.maxEncashmentDays===void 0||v.maxEncashmentDays===null||v.maxEncashmentDays<=0&&v.maxEncashmentDays!==-1){n({title:"Validation Error",description:"Please enter maximum days that can be en-cashed.",variant:"destructive"});return}}console.log("All validations passed, calling mutation.mutate"),g.mutate(v)};return s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[95vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center p-6 border-b",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:r,className:"mr-4",children:s.jsx(Nv,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:`${t.color}20`},children:s.jsx(Zp,{className:"w-4 h-4",style:{color:t.color}})}),s.jsx("h2",{className:"text-xl font-semibold",children:t.name})]})]}),s.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-180px)]",children:s.jsx(ai,{...m,children:s.jsxs("form",{onSubmit:m.handleSubmit(y),className:"p-8 space-y-8 pb-12",children:[s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Minimum leave unit *"})}),s.jsx(Ie,{children:s.jsx(et,{control:m.control,name:"minimumLeaveUnit",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx("div",{className:"flex space-x-4",children:[{value:"full_day",label:"Full Day"},{value:"half_day",label:"Half Day"}].map(j=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:Array.isArray(v.value)?v.value.includes(j.value):v.value===j.value,onCheckedChange:S=>{if(S){const _=Array.isArray(v.value)?v.value:[v.value].filter(Boolean);v.onChange([..._,j.value])}else{const _=Array.isArray(v.value)?v.value:[v.value].filter(Boolean);v.onChange(_.filter(A=>A!==j.value))}}}),s.jsx("span",{children:j.label})]},j.value))}),s.jsx(wt,{})]})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(et,{control:m.control,name:"leaveVariantName",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Leave Variant Name *"}),s.jsx(lt,{children:s.jsx(ht,{placeholder:"eg. For Factory Employees in Karnataka",...v})}),s.jsx("p",{className:"text-sm text-gray-600",children:"Create tailored leave policies for specific groups of employees using variants"}),s.jsx(wt,{})]})}),s.jsx(et,{control:m.control,name:"description",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Description *"}),s.jsx(lt,{children:s.jsx(Cn,{placeholder:"eg. It's essential to rest and recover when you are sick. Use your sick leaves accordingly.",className:"min-h-24",...v})}),s.jsx(wt,{})]})})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Leave granting"})}),s.jsxs(Ie,{className:"space-y-6",children:[s.jsx(et,{control:m.control,name:"leavesGrantedOn",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Leaves will be granted based on"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(se,{type:"button",variant:v.value==="calendar_days"?"default":"outline",onClick:()=>v.onChange("calendar_days"),className:v.value==="calendar_days"?"bg-green-600":"",children:"Calendar Days"}),s.jsx(se,{type:"button",variant:v.value==="compliance"?"default":"outline",onClick:()=>v.onChange("compliance"),className:v.value==="compliance"?"bg-green-600":"",children:"Compliance"})]}),s.jsx(wt,{})]})}),m.watch("leavesGrantedOn")==="compliance"&&s.jsx("div",{className:"space-y-4 p-4 bg-green-50 rounded-lg border border-green-200",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(et,{control:m.control,name:"complianceGrantDays",render:({field:v})=>s.jsxs(Qe,{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ft,{className:"text-gray-600",children:"Grants"}),s.jsx(lt,{children:s.jsx(ht,{type:"number",step:"0.1",min:"0",...v,onChange:j=>{const S=parseFloat(j.target.value)||0;v.onChange(S>=0?S:0)},className:"w-20"})}),s.jsx("span",{className:"text-gray-600",children:"(days)"})]}),s.jsx(wt,{})]})}),s.jsx(et,{control:m.control,name:"complianceForEveryDays",render:({field:v})=>s.jsxs(Qe,{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ft,{className:"text-gray-600",children:"For every"}),s.jsx(lt,{children:s.jsx(ht,{type:"number",min:"0",...v,onChange:j=>{const S=parseInt(j.target.value)||0;v.onChange(S>=0?S:0)},className:"w-20"})}),s.jsx("span",{className:"text-gray-600",children:"(days) Worked"})]}),s.jsx(wt,{})]})})]})}),m.watch("leavesGrantedOn")!=="compliance"&&s.jsxs(s.Fragment,{children:[s.jsx(et,{control:m.control,name:"paidDaysInYear",render:({field:v})=>{const S=(m.watch("minimumLeaveUnit")||[]).includes("half_day");return s.jsxs(Qe,{children:[s.jsx(ft,{children:"Paid days in a year *"}),s.jsx(lt,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ht,{type:"number",step:S?"0.5":"1",min:"0",...v,onChange:_=>{let A=parseFloat(_.target.value)||0;S||(A=Math.round(A)),v.onChange(A)},className:"w-24"}),s.jsx("span",{className:"text-gray-500",children:"(days)"})]})}),!S&&s.jsx("p",{className:"text-xs text-gray-500",children:'Only whole numbers allowed. Select "Half Day" in minimum leave unit to allow decimal values.'}),s.jsx(wt,{})]})}}),s.jsx(et,{control:m.control,name:"grantLeaves",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Grant Leaves"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(se,{type:"button",variant:v.value==="in_advance"?"default":"outline",onClick:()=>v.onChange("in_advance"),className:v.value==="in_advance"?"bg-green-600":"",children:"In Advance"}),s.jsx(se,{type:"button",variant:v.value==="after_earning"?"default":"outline",onClick:()=>v.onChange("after_earning"),children:"After Earning"}),s.jsxs(yt,{value:m.watch("grantFrequency"),onValueChange:j=>m.setValue("grantFrequency",j),children:[s.jsx(gt,{className:"w-40",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"per_month",children:"Per Month"}),s.jsx(je,{value:"per_quarter",children:"Per Quarter"}),s.jsx(je,{value:"per_half_year",children:"Per Half Year"}),s.jsx(je,{value:"per_year",children:"Per Year"})]})]})]}),s.jsx(wt,{})]})})]})]})]}),m.watch("leavesGrantedOn")!=="compliance"&&s.jsxs(Ce,{children:[s.jsxs(Tt,{children:[s.jsx(Et,{children:"Pro-Rata Calculations"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Adjust how you would like the employees to earn the leaves. This ensures fair allocation of benefits, especially for new hires or employees leaving mid-year."})]}),s.jsxs(Ie,{children:[s.jsx(et,{control:m.control,name:"proRataCalculation",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{value:"full_month",title:"Full Month",description:"Consider the entire month as worked for earned leaves, regardless of actual days worked."},{value:"slab_system",title:"Slab System",description:"Calculate pro-rata benefits by dividing the month into equal periods (e.g., 1st-10th, 11th-20th) and determining the number of days worked within each period."},{value:"rounding_off",title:"Rounding Off",description:"Round fractions of days worked to the nearest half or full day before calculating pro-rata benefits. This can be rounded up or down based on your organization's policy."}].map(j=>s.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-colors ${v.value===j.value?"border-green-600 bg-green-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{v.onChange(j.value),h(j.value)},children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("div",{className:`w-4 h-4 rounded border-2 mt-1 flex items-center justify-center ${v.value===j.value?"bg-green-600 border-green-600":"border-gray-300"}`,children:v.value===j.value&&s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:j.title}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:j.description})]})]})},j.value))}),s.jsx(wt,{})]})}),m.watch("proRataCalculation")==="slab_system"&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"font-medium mb-4",children:"Set Slabs *"}),((b=m.formState.errors)==null?void 0:b.slabs)&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Slab Configuration Error"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:m.formState.errors.slabs.message})]})]})}),s.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-2",children:"📅 Day-of-Month Based Slabs"}),s.jsx("p",{className:"text-xs",children:"Create slabs based on specific days of the month (1st-31st) that apply every year. For example, employees joining between the 1st-15th earn different amounts than those joining 16th-31st."})]})}),s.jsxs(tT,{defaultValue:"onboarding",className:"w-full",children:[s.jsxs(r1,{className:"grid w-full grid-cols-2",children:[s.jsx(Rl,{value:"onboarding",children:"Onboarding"}),s.jsx(Rl,{value:"exits",children:"Exits"})]}),s.jsxs(Fl,{value:"onboarding",className:"space-y-4 mt-4",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Configure leave earning slabs for employees joining during the year"}),s.jsxs("div",{className:"space-y-4",children:[(x=m.watch("onboardingSlabs"))==null?void 0:x.map((v,j)=>{var S,_;return s.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Onboarding Slab ",j+1]}),m.watch("onboardingSlabs").length>1&&s.jsx(se,{type:"button",variant:"outline",size:"sm",className:"text-red-600",onClick:()=>{var C;const A=((C=m.getValues("onboardingSlabs"))==null?void 0:C.filter((D,k)=>k!==j))||[];m.setValue("onboardingSlabs",A)},children:"Remove"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium whitespace-nowrap",children:"From (Day of Month) *"}),s.jsxs(yt,{value:((S=v.fromDay)==null?void 0:S.toString())||"",onValueChange:A=>{const C=[...m.getValues("onboardingSlabs")||[]];C[j]={...C[j],fromDay:parseInt(A)},m.setValue("onboardingSlabs",C)},children:[s.jsx(gt,{className:`w-20 ${v.fromDay?"":"border-red-300"}`,children:s.jsx(vt,{placeholder:"Day"})}),s.jsx(xt,{children:Array.from({length:m.watch("leavesGrantedOn")==="calendar_days"?31:30},(A,C)=>C+1).map(A=>s.jsxs(je,{value:A.toString(),children:[A,A===1?"st":A===2?"nd":A===3?"rd":"th"]},A))})]}),!v.fromDay&&s.jsx("span",{className:"text-xs text-red-500",children:"Required"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium whitespace-nowrap",children:"To (Day of Month) *"}),s.jsxs(yt,{value:((_=v.toDay)==null?void 0:_.toString())||"",onValueChange:A=>{const C=[...m.getValues("onboardingSlabs")||[]];C[j]={...C[j],toDay:parseInt(A)},m.setValue("onboardingSlabs",C)},children:[s.jsx(gt,{className:`w-20 ${v.toDay?"":"border-red-300"}`,children:s.jsx(vt,{placeholder:"Day"})}),s.jsx(xt,{children:Array.from({length:m.watch("leavesGrantedOn")==="calendar_days"?31:30},(A,C)=>C+1).map(A=>s.jsxs(je,{value:A.toString(),children:[A,A===1?"st":A===2?"nd":A===3?"rd":"th"]},A))})]}),!v.toDay&&s.jsx("span",{className:"text-xs text-red-500",children:"Required"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm whitespace-nowrap",children:"Employee will earn *"}),s.jsx(ht,{type:"number",step:"0.1",min:"0",placeholder:"0",className:`w-20 ${v.earnDays===void 0||v.earnDays===null||v.earnDays<0?"border-red-300":""}`,value:v.earnDays||"",onChange:A=>{const C=[...m.getValues("onboardingSlabs")||[]],D=A.target.value===""?0:parseFloat(A.target.value);C[j]={...C[j],earnDays:D>=0?D:0},m.setValue("onboardingSlabs",C)}}),s.jsx("span",{className:"text-sm",children:"days"}),(v.earnDays===void 0||v.earnDays===null)&&s.jsx("span",{className:"text-xs text-red-500",children:"Required"})]})]}),v.fromDay&&v.toDay&&v.fromDay>v.toDay&&s.jsx("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:"Error: From Day cannot be greater than To Day"}),m.watch("leavesGrantedOn")==="calendar_days"&&v.toDay&&v.toDay>31&&s.jsxs("div",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded",children:["Warning: Day ",v.toDay," may not exist in all months"]}),(()=>{const A=m.watch("paidDaysInYear"),C=m.watch("grantFrequency");if(A&&C&&v.earnDays){let D=0;switch(C){case"per_month":D=A/12;break;case"per_quarter":D=A/4;break;case"per_half_year":D=A/2;break;case"per_year":D=A;break;default:D=A}if(v.earnDays>D)return s.jsxs("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:["Error: Cannot earn ",v.earnDays," days. Maximum allowed per ",C.replace("per_","")," is ",D.toFixed(2)," days (",A," ÷ ",C==="per_month"?"12":C==="per_quarter"?"4":C==="per_half_year"?"2":"1",")"]})}return null})(),(m.watch("onboardingSlabs")||[]).filter((D,k)=>k===j||!D.fromDay||!D.toDay||!v.fromDay||!v.toDay?!1:v.fromDay<=D.toDay&&v.toDay>=D.fromDay).length>0?s.jsxs("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:["Error: Date range ",v.fromDay,"-",v.toDay," overlaps with another slab. Each day can only belong to one slab."]}):null]})]},j)}),(()=>{const v=m.watch("onboardingSlabs")||[];if(v.length>0){const j=new Set;for(const _ of v)if(_.fromDay&&_.toDay)for(let A=_.fromDay;A<=_.toDay;A++)j.add(A);const S=[];for(let _=1;_<=31;_++)j.has(_)||S.push(_);if(S.length>0)return s.jsxs("div",{className:"text-xs text-amber-600 bg-amber-50 p-3 rounded border border-amber-200 mb-3",children:[s.jsx("strong",{children:"Month Coverage Warning:"})," Missing coverage for days: ",S.join(", "),". All days from 1st-31st must be covered by slabs to handle employees joining on any day of the month."]})}return null})(),s.jsx(se,{type:"button",variant:"outline",onClick:()=>{const v=m.getValues("onboardingSlabs")||[],j=new Set;v.forEach(A=>{if(A.fromDay&&A.toDay)for(let C=A.fromDay;C<=A.toDay;C++)j.add(C)});let S=1;for(;S<=31&&j.has(S);)S++;let _=Math.min(S+14,31);for(;_<=31&&j.has(_);)_++;S>31&&(S=1,_=1),m.setValue("onboardingSlabs",[...v,{fromDay:S,toDay:_,earnDays:0}])},children:"+ Add Onboarding Slab"})]})]}),s.jsxs(Fl,{value:"exits",className:"space-y-4 mt-4",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Configure leave earning slabs for employees exiting during the year"}),s.jsxs("div",{className:"space-y-4",children:[(w=m.watch("exitSlabs"))==null?void 0:w.map((v,j)=>{var S,_;return s.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Exit Slab ",j+1]}),m.watch("exitSlabs").length>1&&s.jsx(se,{type:"button",variant:"outline",size:"sm",className:"text-red-600",onClick:()=>{var C;const A=((C=m.getValues("exitSlabs"))==null?void 0:C.filter((D,k)=>k!==j))||[];m.setValue("exitSlabs",A)},children:"Remove"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium whitespace-nowrap",children:"From (Day of Month) *"}),s.jsxs(yt,{value:((S=v.fromDay)==null?void 0:S.toString())||"",onValueChange:A=>{const C=[...m.getValues("exitSlabs")||[]];C[j]={...C[j],fromDay:parseInt(A)},m.setValue("exitSlabs",C)},children:[s.jsx(gt,{className:`w-20 ${v.fromDay?"":"border-red-300"}`,children:s.jsx(vt,{placeholder:"Day"})}),s.jsx(xt,{children:Array.from({length:m.watch("leavesGrantedOn")==="calendar_days"?31:30},(A,C)=>C+1).map(A=>s.jsxs(je,{value:A.toString(),children:[A,A===1?"st":A===2?"nd":A===3?"rd":"th"]},A))})]}),!v.fromDay&&s.jsx("span",{className:"text-xs text-red-500",children:"Required"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium whitespace-nowrap",children:"To (Day of Month) *"}),s.jsxs(yt,{value:((_=v.toDay)==null?void 0:_.toString())||"",onValueChange:A=>{const C=[...m.getValues("exitSlabs")||[]];C[j]={...C[j],toDay:parseInt(A)},m.setValue("exitSlabs",C)},children:[s.jsx(gt,{className:`w-20 ${v.toDay?"":"border-red-300"}`,children:s.jsx(vt,{placeholder:"Day"})}),s.jsx(xt,{children:Array.from({length:m.watch("leavesGrantedOn")==="calendar_days"?31:30},(A,C)=>C+1).map(A=>s.jsxs(je,{value:A.toString(),children:[A,A===1?"st":A===2?"nd":A===3?"rd":"th"]},A))})]}),!v.toDay&&s.jsx("span",{className:"text-xs text-red-500",children:"Required"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm whitespace-nowrap",children:"Employee will earn *"}),s.jsx(ht,{type:"number",step:"0.1",min:"0",placeholder:"0",className:`w-20 ${v.earnDays===void 0||v.earnDays===null||v.earnDays<0?"border-red-300":""}`,value:v.earnDays||"",onChange:A=>{const C=[...m.getValues("exitSlabs")||[]],D=A.target.value===""?0:parseFloat(A.target.value);C[j]={...C[j],earnDays:D>=0?D:0},m.setValue("exitSlabs",C)}}),s.jsx("span",{className:"text-sm",children:"days"}),(v.earnDays===void 0||v.earnDays===null)&&s.jsx("span",{className:"text-xs text-red-500",children:"Required"})]})]}),v.fromDay&&v.toDay&&v.fromDay>v.toDay&&s.jsx("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:"Error: From Day cannot be greater than To Day"}),m.watch("leavesGrantedOn")==="calendar_days"&&v.toDay&&v.toDay>31&&s.jsxs("div",{className:"text-xs text-amber-600 bg-amber-50 p-2 rounded",children:["Warning: Day ",v.toDay," may not exist in all months"]}),(()=>{const A=m.watch("paidDaysInYear"),C=m.watch("grantFrequency");if(A&&C&&v.earnDays){let D=0;switch(C){case"per_month":D=A/12;break;case"per_quarter":D=A/4;break;case"per_year":D=A;break;default:D=A}if(v.earnDays>D)return s.jsxs("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:["Error: Cannot earn ",v.earnDays," days. Maximum allowed per ",C.replace("per_","")," is ",D.toFixed(2)," days (",A," ÷ ",C==="per_month"?"12":C==="per_quarter"?"4":"1",")"]})}return null})(),(m.watch("exitSlabs")||[]).filter((D,k)=>k===j||!D.fromDay||!D.toDay||!v.fromDay||!v.toDay?!1:v.fromDay<=D.toDay&&v.toDay>=D.fromDay).length>0?s.jsxs("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded",children:["Error: Date range ",v.fromDay,"-",v.toDay," overlaps with another slab. Each day can only belong to one slab."]}):null]})]},j)}),(()=>{const v=m.watch("exitSlabs")||[];if(v.length>0){const j=new Set;for(const _ of v)if(_.fromDay&&_.toDay)for(let A=_.fromDay;A<=_.toDay;A++)j.add(A);const S=[];for(let _=1;_<=31;_++)j.has(_)||S.push(_);if(S.length>0)return s.jsxs("div",{className:"text-xs text-amber-600 bg-amber-50 p-3 rounded border border-amber-200 mb-3",children:[s.jsx("strong",{children:"Month Coverage Warning:"})," Missing coverage for days: ",S.join(", "),". All days from 1st-31st must be covered by slabs to handle employees leaving on any day of the month."]})}return null})(),s.jsx(se,{type:"button",variant:"outline",onClick:()=>{const v=m.getValues("exitSlabs")||[],j=new Set;v.forEach(A=>{if(A.fromDay&&A.toDay)for(let C=A.fromDay;C<=A.toDay;C++)j.add(C)});let S=1;for(;S<=31&&j.has(S);)S++;let _=Math.min(S+14,31);for(;_<=31&&j.has(_);)_++;S>31&&(S=1,_=1),m.setValue("exitSlabs",[...v,{fromDay:S,toDay:_,earnDays:0}])},children:"+ Add Exit Slab"})]})]})]})]}),m.watch("proRataCalculation")==="slab_system"&&!1,m.watch("proRataCalculation")==="rounding_off"&&s.jsx("div",{className:"mt-6",children:s.jsx(et,{control:m.control,name:"fractionalLeaves",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Fractional leaves will be *"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(se,{type:"button",variant:v.value==="rounded_up"?"default":"outline",onClick:()=>v.onChange("rounded_up"),className:v.value==="rounded_up"?"bg-green-600":"",children:"Rounded Up"}),s.jsx(se,{type:"button",variant:v.value==="rounded_down"?"default":"outline",onClick:()=>v.onChange("rounded_down"),className:v.value==="rounded_down"?"bg-green-600":"",children:"Rounded Down"}),s.jsx(se,{type:"button",variant:v.value==="normal_rounding"?"default":"outline",onClick:()=>v.onChange("normal_rounding"),className:v.value==="normal_rounding"?"bg-green-600":"",children:"Normal Rounding"})]}),s.jsx(wt,{})]})})})]})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Eligibility Criteria"})}),s.jsxs(Ie,{className:"space-y-6",children:[s.jsx(et,{control:m.control,name:"applicableGenders",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Applicable for the genders *"}),s.jsx("div",{className:"flex space-x-4",children:["male","female"].map(j=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:v.value.includes(j),onCheckedChange:S=>{S?v.onChange([...v.value,j]):v.onChange(v.value.filter(_=>_!==j))}}),s.jsx("span",{className:"capitalize",children:j})]},j))}),s.jsx(wt,{})]})}),s.jsx("div",{className:"space-y-4",children:s.jsx(et,{control:m.control,name:"applicableAfterType",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Applicable after"}),s.jsx(lt,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",id:"probation_end",name:"applicableAfterType",value:"probation_end",checked:v.value==="probation_end",onChange:()=>{v.onChange("probation_end"),m.setValue("applicableAfter",0)},className:"w-4 h-4"}),s.jsx("label",{htmlFor:"probation_end",className:"text-sm font-medium",children:"Probation period ends"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",id:"date_of_joining",name:"applicableAfterType",value:"date_of_joining",checked:v.value==="date_of_joining",onChange:()=>{v.onChange("date_of_joining"),m.setValue("applicableAfter",0)},className:"w-4 h-4"}),s.jsx("label",{htmlFor:"date_of_joining",className:"text-sm font-medium",children:"On date of joining"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",id:"days",name:"applicableAfterType",value:"days",checked:v.value==="days",onChange:()=>v.onChange("days"),className:"w-4 h-4"}),s.jsx("label",{htmlFor:"days",className:"text-sm font-medium",children:"Specified number of days:"}),s.jsx(et,{control:m.control,name:"applicableAfter",render:({field:j})=>s.jsxs(Qe,{className:"flex-1",children:[s.jsx(lt,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ht,{type:"number",min:"0",...j,onChange:S=>{const _=Number(S.target.value);j.onChange(_>=0?_:0)},className:"w-24",disabled:m.watch("applicableAfterType")!=="days",placeholder:"0"}),s.jsxs("span",{className:"text-gray-500",children:["(days) from date of joining ",m.watch("applicableAfter")===0?"(immediate applicability)":""]})]})}),s.jsx(wt,{})]})})]})]})}),s.jsx(wt,{})]})})}),s.jsx(et,{control:m.control,name:"mustBePlannedInAdvance",render:({field:v})=>{const j=m.watch("gracePeriod")>0;return s.jsxs(Qe,{children:[s.jsx(ft,{children:"Must be planned in advance by"}),s.jsx(lt,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ht,{type:"number",min:"0",...v,onChange:S=>{const _=Number(S.target.value);v.onChange(_>=0?_:0)},className:"w-24",disabled:j}),s.jsx("span",{className:"text-gray-500",children:"(days)"})]})}),j&&s.jsx("p",{className:"text-xs text-orange-600",children:"Disabled because grace period is enabled. Only one can be active at a time."}),s.jsx(wt,{})]})}}),s.jsx(et,{control:m.control,name:"gracePeriod",render:({field:v})=>{const j=m.watch("mustBePlannedInAdvance")>0;return s.jsxs(Qe,{children:[s.jsx(ft,{children:"Grace period for applying *"}),s.jsx(lt,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ht,{type:"number",min:"0",...v,onChange:S=>{const _=Number(S.target.value);v.onChange(_>=0?_:0)},className:"w-24",disabled:j}),s.jsx("span",{className:"text-gray-500",children:"(days) if left empty, there is no grace period"})]})}),j&&s.jsx("p",{className:"text-xs text-orange-600",children:"Disabled because advance planning is enabled. Only one can be active at a time."}),s.jsx(wt,{})]})}}),s.jsx(et,{control:m.control,name:"maxDaysInStretch",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Max days in a stretch"}),s.jsx(lt,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ht,{type:"number",min:"0",...v,onChange:j=>{const S=Number(j.target.value);v.onChange(S>=0?S:0)},className:"w-24"}),s.jsx("span",{className:"text-gray-500",children:"(days) if the value is 0, it is understood that there is no limit."})]})}),s.jsx(wt,{})]})}),s.jsx(et,{control:m.control,name:"minDaysRequired",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Min days required for a leave"}),s.jsx(lt,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ht,{type:"number",min:"0",...v,onChange:j=>{const S=Number(j.target.value);v.onChange(S>=0?S:0)},className:"w-24"}),s.jsx("span",{className:"text-gray-500",children:"(days)"})]})}),s.jsx(wt,{})]})}),s.jsx(et,{control:m.control,name:"maxInstances",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Max instances"}),s.jsx(lt,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ht,{type:"number",min:"0",...v,onChange:j=>{const S=Number(j.target.value);v.onChange(S>=0?S:0)},className:"w-24"}),s.jsx("span",{className:"text-gray-500",children:"(applications) in a"}),s.jsxs(yt,{value:m.watch("maxInstancesPeriod"),onValueChange:j=>m.setValue("maxInstancesPeriod",j),children:[s.jsx(gt,{className:"w-32",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"month",children:"Month"}),s.jsx(je,{value:"quarter",children:"Quarter"}),s.jsx(je,{value:"year",children:"Year"})]})]}),s.jsx("span",{className:"text-gray-500",children:"if the value is 0, it is understood that there is no limit."})]})}),s.jsx(wt,{})]})}),[{name:"allowLeavesBeforeWeekend",label:"Leaves immediately before and after a weekend are"},{name:"allowLeavesBeforeHoliday",label:"Leaves immediately before and after a holiday are"},{name:"allowClubbing",label:"Clubbing with other leave types is"}].map(v=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:v.label}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(se,{type:"button",size:"sm",variant:m.watch(v.name)?"default":"outline",onClick:()=>m.setValue(v.name,!0),className:m.watch(v.name)?"bg-green-600":"",children:"Allowed"}),s.jsx(se,{type:"button",size:"sm",variant:m.watch(v.name)?"outline":"default",onClick:()=>m.setValue(v.name,!1),className:m.watch(v.name)?"":"bg-red-600",children:"Not Allowed"})]})]},v.name)),s.jsx(et,{control:m.control,name:"supportingDocuments",render:({field:v})=>s.jsxs(Qe,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Supporting documents are"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(se,{type:"button",size:"sm",variant:v.value?"default":"outline",onClick:()=>v.onChange(!0),className:v.value?"bg-green-600":"",children:"Required"}),s.jsx(se,{type:"button",size:"sm",variant:v.value?"outline":"default",onClick:()=>v.onChange(!1),className:v.value?"":"bg-red-600",children:"Not Required"})]})]}),v.value&&s.jsx(et,{control:m.control,name:"supportingDocumentsText",render:({field:j})=>s.jsx(Qe,{children:s.jsx(lt,{children:s.jsx(Cn,{placeholder:"Enter the details of the documents to be added. This message will be displayed to your employees while uploading documents.",...j})})})}),s.jsx(wt,{})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"During notice period, leaves are"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(se,{type:"button",size:"sm",variant:m.watch("allowDuringNotice")?"default":"outline",onClick:()=>m.setValue("allowDuringNotice",!0),className:m.watch("allowDuringNotice")?"bg-green-600":"",children:"Allowed"}),s.jsx(se,{type:"button",size:"sm",variant:m.watch("allowDuringNotice")?"outline":"default",onClick:()=>m.setValue("allowDuringNotice",!1),className:m.watch("allowDuringNotice")?"":"bg-red-600",children:"Not Allowed"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Does this require a review workflow for approval?"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(se,{type:"button",size:"sm",variant:m.watch("requiresWorkflow")?"default":"outline",onClick:()=>m.setValue("requiresWorkflow",!0),className:m.watch("requiresWorkflow")?"bg-green-600":"",children:"Workflow"}),s.jsx(se,{type:"button",size:"sm",variant:m.watch("requiresWorkflow")?"outline":"default",onClick:()=>m.setValue("requiresWorkflow",!1),className:m.watch("requiresWorkflow")?"":"bg-red-600",children:"No Workflow"})]})]}),m.watch("requiresWorkflow")&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Leave balance is deducted"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(se,{type:"button",size:"sm",variant:m.watch("leaveBalanceDeduction")==="before_workflow"?"default":"outline",onClick:()=>m.setValue("leaveBalanceDeduction","before_workflow"),className:m.watch("leaveBalanceDeduction")==="before_workflow"?"bg-green-600":"",children:"Before the workflow"}),s.jsx(se,{type:"button",size:"sm",variant:m.watch("leaveBalanceDeduction")==="after_workflow"?"default":"outline",onClick:()=>m.setValue("leaveBalanceDeduction","after_workflow"),className:m.watch("leaveBalanceDeduction")==="after_workflow"?"bg-green-600":"",children:"After the workflow"})]})]}),s.jsx(et,{control:m.control,name:"allowWithdrawalBeforeApproval",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Withdrawal of application is allowed *"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:v.value,onCheckedChange:j=>{v.onChange(j),j&&m.setValue("allowWithdrawalNotAllowed",!1)}}),s.jsx("span",{children:"Before approval"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:m.watch("allowWithdrawalAfterApproval"),onCheckedChange:j=>{m.setValue("allowWithdrawalAfterApproval",!!j),j&&m.setValue("allowWithdrawalNotAllowed",!1)}}),s.jsx("span",{children:"After approval"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:m.watch("allowWithdrawalNotAllowed"),onCheckedChange:j=>{m.setValue("allowWithdrawalNotAllowed",!!j),j&&(m.setValue("allowWithdrawalBeforeApproval",!1),m.setValue("allowWithdrawalAfterApproval",!1))}}),s.jsx("span",{children:"Not allowed"})]})]}),s.jsx(wt,{})]})}),s.jsx(et,{control:m.control,name:"negativeLeaveBalance",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Negative leave balance"}),s.jsx(lt,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ht,{type:"number",...v,onChange:j=>v.onChange(Number(j.target.value)),className:"w-24"}),s.jsx("span",{className:"text-gray-500",children:"(days) if the value is 0, it is understood that negative leave balance is not allowed."})]})}),s.jsx(wt,{})]})}),s.jsx(et,{control:m.control,name:"carryForwardLimit",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Carry forward"}),s.jsx(lt,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ht,{type:"number",min:"0",...v,onChange:j=>{const S=Number(j.target.value);v.onChange(S>=0?S:0)},className:"w-24"}),s.jsx("span",{className:"text-gray-500",children:"(days) to the"}),s.jsxs(yt,{value:m.watch("carryForwardPeriod"),onValueChange:j=>m.setValue("carryForwardPeriod",j),children:[s.jsx(gt,{className:"w-32",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"month",children:"Next Month"}),s.jsx(je,{value:"quarter",children:"Next Quarter"}),s.jsx(je,{value:"year",children:"Next Year"})]})]}),s.jsx("span",{className:"text-gray-500",children:"if the value is 0, it is understood that carry forward is not allowed."})]})}),s.jsx(wt,{})]})})]})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Et,{children:"En-cashment"}),s.jsx(Gl,{checked:m.watch("encashment"),onCheckedChange:v=>m.setValue("encashment",v)})]})}),m.watch("encashment")&&s.jsxs(Ie,{className:"space-y-6",children:[s.jsx(et,{control:m.control,name:"encashmentCalculation",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Calculate en-cashment using *"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(se,{type:"button",variant:v.value==="basic_da"?"default":"outline",onClick:()=>v.onChange("basic_da"),className:v.value==="basic_da"?"bg-green-600":"",children:"Basic / DA"}),s.jsx(se,{type:"button",variant:v.value==="ctc"?"default":"outline",onClick:()=>v.onChange("ctc"),className:v.value==="ctc"?"bg-green-600":"",children:"CTC"}),s.jsx(se,{type:"button",variant:v.value==="gross_salary"?"default":"outline",onClick:()=>v.onChange("gross_salary"),className:v.value==="gross_salary"?"bg-green-600":"",children:"Gross Salary"})]}),s.jsx(wt,{})]})}),s.jsx(et,{control:m.control,name:"maxEncashmentDays",render:({field:v})=>{const j=v.value===-1;return s.jsxs(Qe,{children:[s.jsx(ft,{children:"Max. days that can be en-cashed *"}),s.jsx(lt,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:"encash-limit",name:"encashmentType",checked:!j,onChange:()=>v.onChange(0)}),s.jsx("label",{htmlFor:"encash-limit",className:"text-sm",children:"Set Limit"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",id:"encash-no-limit",name:"encashmentType",checked:j,onChange:()=>v.onChange(-1)}),s.jsx("label",{htmlFor:"encash-no-limit",className:"text-sm",children:"No Limit"})]})]}),!j&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ht,{type:"number",value:v.value===-1?0:v.value,onChange:S=>{const _=Number(S.target.value);v.onChange(_>=0?_:0)},className:"w-32",placeholder:"0",min:"0"}),s.jsx("span",{className:"text-gray-500",children:"(days)"})]}),j&&s.jsx("p",{className:"text-sm text-green-600",children:"No limit set - employees can encash any amount"})]})}),s.jsx(wt,{})]})}}),s.jsx(et,{control:m.control,name:"encashmentTiming",render:({field:v})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Leaves can be en-cashed at"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(se,{type:"button",variant:v.value==="exit_retirement"?"default":"outline",onClick:()=>v.onChange("exit_retirement"),className:v.value==="exit_retirement"?"bg-green-600":"",children:"Exit/Retirement"}),s.jsx(se,{type:"button",variant:v.value==="annually"?"default":"outline",onClick:()=>v.onChange("annually"),className:v.value==="annually"?"bg-green-600":"",children:"Annually"})]}),s.jsx(wt,{})]})})]})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Other Settings"})}),s.jsxs(Ie,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Allow applications on behalf of others"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(se,{type:"button",size:"sm",variant:m.watch("allowApplicationsOnBehalf")?"default":"outline",onClick:()=>m.setValue("allowApplicationsOnBehalf",!0),className:m.watch("allowApplicationsOnBehalf")?"bg-green-600 hover:bg-green-700 text-white":"",children:"Allowed"}),s.jsx(se,{type:"button",size:"sm",variant:m.watch("allowApplicationsOnBehalf")?"outline":"default",onClick:()=>m.setValue("allowApplicationsOnBehalf",!1),className:m.watch("allowApplicationsOnBehalf")?"":"bg-gray-600 hover:bg-gray-700 text-white",children:"Not Allowed"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("span",{className:"text-sm font-medium",children:"Leave data to be shown in Payslips"}),s.jsxs("div",{className:"flex space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:m.watch("showAvailedLeaves"),onCheckedChange:v=>m.setValue("showAvailedLeaves",!!v)}),s.jsx("span",{children:"Availed leaves"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:m.watch("showBalanceLeaves"),onCheckedChange:v=>m.setValue("showBalanceLeaves",!!v)}),s.jsx("span",{children:"Balance leaves"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Maximum balance"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ht,{type:"number",value:m.watch("maximumBalance"),onChange:v=>m.setValue("maximumBalance",Number(v.target.value)),className:"w-20 text-center",placeholder:"0"}),s.jsx("span",{className:"text-gray-500 text-sm",children:"(days) if the value is 0, it is understood that there is no limit."})]})]})]})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Et,{children:"Assign to Employees"}),s.jsxs(se,{variant:"outline",type:"button",onClick:()=>i(!0),className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:[s.jsx(Bn,{className:"w-4 h-4 mr-2"}),"Assign Employees"]})]})}),o.length>0&&s.jsx(Ie,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[o.length," employee",o.length>1?"s":""," assigned"]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.slice(0,3).map((v,j)=>s.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 rounded-lg px-3 py-1",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-blue-600",children:(v.name||v.user_name||`Employee ${v.user_id}`).charAt(0).toUpperCase()})}),s.jsx("span",{className:"text-xs text-gray-700",children:v.name||v.user_name||`Employee ${v.user_id}`})]},v.user_id)),o.length>3&&s.jsxs("span",{className:"text-xs text-gray-500",children:["+",o.length-3," more"]})]})]})})]})]})})}),s.jsxs("div",{className:"flex justify-between p-8 mt-4 border-t bg-gray-50 sticky bottom-0",children:[s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(se,{variant:"outline",onClick:r,type:"button",className:"px-6 py-3 min-h-[44px]",children:"Discard"}),(e==null?void 0:e.id)&&s.jsx(se,{variant:"destructive",onClick:()=>p.mutate(),disabled:p.isPending,type:"button",className:"px-6 py-3 min-h-[44px]",children:p.isPending?"Deleting...":"Delete Variant"})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsx(se,{type:"button",disabled:g.isPending,className:"bg-green-600 hover:bg-green-700 px-8 py-3 min-h-[44px]",onClick:()=>{const v=m.getValues();y(v)},children:g.isPending?e!=null&&e.id?"Updating...":"Creating...":e!=null&&e.id?"Update Leave Variant":"Create Leave Variant"})})]})]}),a&&s.jsx(g0,{onClose:()=>i(!1),preSelectedEmployees:o,applicableGenders:m.watch("applicableGenders"),onAssign:async v=>{try{if(!(e!=null&&e.id)){xc=[...v],l(v),c.current=[...v],i(!1),n({title:"Success",description:`${v.length} employee${v.length>1?"s":""} will be assigned when variant is created.`});return}const j=v.map(S=>({userId:S.user_id,leaveVariantId:e.id,assignmentType:"leave_variant"}));await Ct("POST","/api/employee-assignments/bulk",{assignments:j}),l(v),Ye.invalidateQueries({queryKey:[`/api/employee-assignments/${e.id}`]}),n({title:"Success",description:`${v.length} employee${v.length>1?"s":""} assigned successfully.`})}catch{n({title:"Error",description:"Failed to save employee assignments.",variant:"destructive"})}}})]})}const tne=Zn({name:rr().min(1,"Leave type name is required"),description:rr().optional(),icon:rr().min(1,"Icon is required"),color:rr().min(1,"Color is required"),isActive:or().default(!0)}),nb=[{value:"stethoscope",label:"Medical",icon:Av},{value:"smile",label:"General",icon:Zp},{value:"umbrella",label:"Casual",icon:Cv},{value:"baby",label:"Family",icon:Sv},{value:"heart",label:"Personal",icon:Ev},{value:"users",label:"Team",icon:Bn},{value:"user",label:"Individual",icon:uf},{value:"calendar",label:"Scheduled",icon:br},{value:"briefcase",label:"Professional",icon:kF},{value:"clock",label:"Time-off",icon:An},{value:"star",label:"Special",icon:LF},{value:"gift",label:"Benefit",icon:RF}],AD=[{value:"#f59e0b",label:"Orange",color:"#f59e0b"},{value:"#3b82f6",label:"Blue",color:"#3b82f6"},{value:"#10b981",label:"Green",color:"#10b981"},{value:"#ec4899",label:"Pink",color:"#ec4899"},{value:"#8b5cf6",label:"Purple",color:"#8b5cf6"},{value:"#6366f1",label:"Indigo",color:"#6366f1"},{value:"#ef4444",label:"Red",color:"#ef4444"},{value:"#06b6d4",label:"Cyan",color:"#06b6d4"},{value:"#84cc16",label:"Lime",color:"#84cc16"},{value:"#f97316",label:"Orange-Red",color:"#f97316"}];function rne({onClose:e}){const{toast:t}=Vr(),[r,n]=N.useState(""),[a,i]=N.useState(""),{data:o}=Fe({queryKey:["/api/leave-types"]}),l=["Sick Leave","Earned Leave","Casual Leave","Maternity Leave","Paternity Leave","Marriage Leave","Study Leave","Religious Leave","Community Service","Bereavement Leave","Emergency Leave"],c=os({resolver:Cs(tne),defaultValues:{name:"",description:"",icon:"",color:"",isActive:!0}}),u=Ut({mutationFn:async h=>{const m=h.name.trim();if([...Array.isArray(o)?o.map(y=>y.name.toLowerCase()):[],...l.map(y=>y.toLowerCase())].includes(m.toLowerCase()))throw new Error(`A leave type with the name "${m}" already exists. Please choose a different name.`);return Ct("POST","/api/leave-types",{...h,name:m,annualAllowance:12,carryForward:!1})},onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/leave-types"]}),Ye.invalidateQueries({queryKey:["/api/leave-variants"]}),Ye.refetchQueries({queryKey:["/api/leave-types"]}),t({title:"Success",description:"Custom leave type created successfully."}),e()},onError:h=>{console.error("Create custom leave type error:",h);const m=h instanceof Error?h.message:"Failed to create custom leave type. Please try again.";t({title:"Error",description:m,variant:"destructive"})}}),d=h=>{u.mutate(h)},f=h=>{const m=nb.find(g=>g.value===h);return(m==null?void 0:m.icon)||br};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs(Ce,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Tt,{className:"flex flex-row items-center justify-between",children:[s.jsx(Et,{children:"Create Custom Leave Type"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:e,children:s.jsx(da,{className:"w-4 h-4"})})]}),s.jsx(Ie,{children:s.jsx(ai,{...c,children:s.jsxs("form",{onSubmit:c.handleSubmit(d),className:"space-y-6",children:[s.jsx(et,{control:c.control,name:"name",render:({field:h})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Leave Type Name *"}),s.jsx(lt,{children:s.jsx(ht,{placeholder:"Enter leave type name",...h})}),s.jsx(wt,{})]})}),s.jsx(et,{control:c.control,name:"description",render:({field:h})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Description"}),s.jsx(lt,{children:s.jsx(Cn,{placeholder:"Enter description (optional)",...h,rows:3})}),s.jsx(wt,{})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(et,{control:c.control,name:"icon",render:({field:h})=>{var m;return s.jsxs(Qe,{children:[s.jsx(ft,{children:"Icon *"}),s.jsxs(yt,{onValueChange:g=>{h.onChange(g),n(g)},defaultValue:h.value,children:[s.jsx(lt,{children:s.jsx(gt,{children:s.jsx(vt,{placeholder:"Select an icon",children:h.value&&s.jsxs("div",{className:"flex items-center",children:[(()=>{const g=f(h.value);return s.jsx(g,{className:"w-4 h-4 mr-2"})})(),(m=nb.find(g=>g.value===h.value))==null?void 0:m.label]})})})}),s.jsx(xt,{children:nb.map(g=>{const p=g.icon;return s.jsx(je,{value:g.value,children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),g.label]})},g.value)})})]}),s.jsx(wt,{})]})}}),s.jsx(et,{control:c.control,name:"color",render:({field:h})=>{var m;return s.jsxs(Qe,{children:[s.jsx(ft,{children:"Color *"}),s.jsxs(yt,{onValueChange:g=>{h.onChange(g),i(g)},defaultValue:h.value,children:[s.jsx(lt,{children:s.jsx(gt,{children:s.jsx(vt,{placeholder:"Select a color",children:h.value&&s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-4 h-4 rounded mr-2",style:{backgroundColor:h.value}}),(m=AD.find(g=>g.value===h.value))==null?void 0:m.label]})})})}),s.jsx(xt,{children:AD.map(g=>s.jsx(je,{value:g.value,children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-4 h-4 rounded mr-2",style:{backgroundColor:g.color}}),g.label]})},g.value))})]}),s.jsx(wt,{})]})}})]}),r&&a&&s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx(tt,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Preview"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${a}20`},children:(()=>{const h=f(r);return s.jsx(h,{className:"w-5 h-5",style:{color:a}})})()}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:c.watch("name")||"Leave Type Name"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Custom leave type"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(se,{type:"button",variant:"outline",onClick:e,disabled:u.isPending,children:"Cancel"}),s.jsx(se,{type:"submit",disabled:u.isPending,className:"bg-green-600 hover:bg-green-700",children:u.isPending?"Creating...":"Create Leave Type"})]})]})})})]})})}const nne=e=>({heart:Ev,smile:Zp,umbrella:Cv,baby:Sv,users:Bn,user:uf,calendar:br,stethoscope:Av})[e]||br;function ane({leaveType:e,onBack:t}){const[r,n]=N.useState(!1),[a,i]=N.useState(null),{toast:o}=Vr(),{data:l=[],isLoading:c}=Fe({queryKey:["/api/leave-variants"]}),u=l.filter(g=>g.leaveTypeName===e.name),d=Ut({mutationFn:async g=>await Ct("DELETE",`/api/leave-variants/${g}`),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/leave-variants"]}),o({title:"Success",description:"Variant deleted successfully."})},onError:g=>{console.error("Delete variant error:",g),o({title:"Error",description:"Failed to delete variant. Please try again.",variant:"destructive"})}}),f=()=>{i(null),n(!0)},h=g=>{i(g),n(!0)},m=g=>{confirm("Are you sure you want to delete this variant?")&&d.mutate(g)};return c?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-lg",children:"Loading..."})}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-8",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(se,{variant:"outline",onClick:t,className:"p-2",children:s.jsx(Nv,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:`${e.color}20`},children:(()=>{const g=nne(e.icon);return s.jsx(g,{className:"w-6 h-6",style:{color:e.color}})})()}),s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:e.name})]})]})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Variants"}),u.length===0?s.jsxs(Ce,{className:"p-8 text-center",children:[s.jsx("div",{className:"text-gray-500 mb-4",children:"No variants created for this leave type"}),s.jsxs(se,{onClick:f,className:"bg-green-600 hover:bg-green-700",children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Create Leave Variant"]})]}):s.jsxs("div",{className:"space-y-4",children:[u.map(g=>{var p;return s.jsx(Ce,{className:"border border-gray-200",children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:g.leaveVariantName}),s.jsxs("p",{className:"text-sm text-gray-500",children:[g.leavesGrantedOn==="compliance"?`${g.complianceGrantDays||1} day for every ${g.complianceForEveryDays||20} days worked`:`${g.paidDaysInYear} days`," · Applied to ",((p=g.applicableGenders)==null?void 0:p.join(", "))||"All"," Employees"]}),g.description&&s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:g.description})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>m(g.id),disabled:d.isPending,className:"text-red-600 border-red-300 hover:bg-red-50",children:[s.jsx(ua,{className:"w-4 h-4"}),"Delete"]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>h(g),className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[s.jsx(Nu,{className:"w-4 h-4"}),"Edit"]})]})]})})},g.id)}),s.jsxs(se,{variant:"outline",onClick:f,className:"w-full border-dashed border-2 h-16 text-green-600 border-green-300 hover:bg-green-50",children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Create Leave Variant"]})]})]}),r&&s.jsx(sT,{variant:a,leaveType:e,onClose:()=>{n(!1),i(null)}})]})}const CD=[{name:"Sick Leave",icon:"stethoscope",color:"#f59e0b",variants:"1 variants",isDefault:!0},{name:"Earned Leave",icon:"smile",color:"#3b82f6",variants:"",isDefault:!0},{name:"Casual Leave",icon:"umbrella",color:"#10b981",variants:"",isDefault:!0},{name:"Maternity Leave",icon:"baby",color:"#ec4899",variants:"",isDefault:!0},{name:"Paternity Leave",icon:"briefcase",color:"#8b5cf6",variants:"",isDefault:!0},{name:"Marriage Leave",icon:"heart",color:"#ef4444",variants:"",isDefault:!0},{name:"Study Leave",icon:"graduation-cap",color:"#06b6d4",variants:"",isDefault:!0},{name:"Religious Leave",icon:"church",color:"#f97316",variants:"",isDefault:!0},{name:"Community Service",icon:"users",color:"#84cc16",variants:"",isDefault:!0},{name:"Bereavement Leave",icon:"user-x",color:"#6b7280",variants:"",isDefault:!0}];function i$({onNext:e,onPrevious:t,isLast:r,isLoading:n,showNavigation:a=!0}){const[i,o]=N.useState(null),[l,c]=N.useState(null),[u,d]=N.useState(!1),[f,h]=N.useState(!1),[m,g]=N.useState(!1),[p,y]=N.useState(null),[b,x]=N.useState({}),{toast:w}=Vr(),v=tc(),{data:j,isLoading:S}=Fe({queryKey:["/api/leave-types"]}),{data:_,isLoading:A}=Fe({queryKey:["/api/leave-variants"]}),C=Ut({mutationFn:async()=>{const P=CD.map(E=>Ct("POST","/api/leave-types",{name:E.name,icon:E.icon,color:E.color,annualAllowance:12,carryForward:!1,isActive:!0}));await Promise.all(P)},onSuccess:()=>{v.invalidateQueries({queryKey:["/api/leave-types"]}),w({title:"Success",description:"All leave types have been created successfully."}),e()},onError:P=>{console.error("Error creating leave types:",P),w({title:"Error",description:"Failed to create leave types. Please try again.",variant:"destructive"})}}),D=Ut({mutationFn:async P=>{await Ct("DELETE",`/api/leave-types/${P}`,{})},onSuccess:()=>{v.invalidateQueries({queryKey:["/api/leave-types"]}),v.invalidateQueries({queryKey:["/api/leave-variants"]}),w({title:"Success",description:"Leave type has been deleted successfully."})},onError:P=>{console.error("Error deleting leave type:",P),w({title:"Error",description:"Failed to delete leave type. Please try again.",variant:"destructive"})}});if(u&&i)return s.jsx(sT,{leaveType:i,variant:l,onClose:()=>{d(!1),o(null),c(null),v.invalidateQueries({queryKey:["/api/leave-variants"]})}});if(f)return s.jsx(rne,{onClose:()=>{h(!1),v.invalidateQueries({queryKey:["/api/leave-types"]})}});const k=P=>{const E=Array.isArray(j)?j.find(I=>I.name===P.name):null,R={...P,id:E==null?void 0:E.id};o(R),d(!0)},O=P=>{const E=Array.isArray(j)?j.find(I=>I.name===P.name):null,R={...P,id:E==null?void 0:E.id};y(R),g(!0)},V=P=>{P.id?D.mutate(P.id):w({title:"Cannot Discard",description:"This leave type hasn't been created yet.",variant:"destructive"})},G=P=>!_||!Array.isArray(_)?[]:_.filter(E=>E.leaveTypeName===P)||[],Y=()=>{j&&Array.isArray(j)&&j.length>0?e():C.mutate()},W=P=>{x(E=>({...E,[P]:!E[P]}))};return m&&p?s.jsx(ane,{leaveType:p,onBack:()=>{g(!1),y(null)}}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Configure Leave Types"}),s.jsxs(se,{variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-50",onClick:()=>h(!0),children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Create Custom Leave"]})]}),s.jsxs("div",{className:"space-y-3",children:[Array.isArray(j)&&j.map(P=>{const E=SD(P.icon),R=G(P.name),I=b[P.name],ee=R.length>0;return s.jsx(Ce,{className:"border border-gray-200 hover:border-gray-300 transition-colors",children:s.jsxs(Ie,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${P.color}20`},children:s.jsx(E,{className:"w-5 h-5",style:{color:P.color}})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:P.name}),ee?s.jsxs("p",{className:"text-sm text-gray-500",children:[R.length," variant",R.length>1?"s":""]}):s.jsx("p",{className:"text-sm text-gray-400",children:"No variants created"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[ee?s.jsx(se,{variant:"outline",size:"sm",onClick:()=>O(P),className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:"Manage Variants"}):s.jsxs(s.Fragment,{children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>V(P),className:"text-red-600 border-red-300 hover:bg-red-50",disabled:D.isPending,children:s.jsx(ua,{className:"w-4 h-4"})}),s.jsxs(se,{size:"sm",onClick:()=>k(P),className:"bg-green-600 hover:bg-green-700 text-white",children:["Create Leave",s.jsx(Wi,{className:"w-4 h-4 ml-1"})]})]}),ee&&s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>W(P.name),className:"text-gray-500 hover:text-gray-700",children:I?s.jsx(OF,{className:"w-4 h-4"}):s.jsx(Dd,{className:"w-4 h-4"})})]})]}),I&&ee&&s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:s.jsx("div",{className:"space-y-2",children:R.map(L=>s.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:L.leaveVariantName}),s.jsx("p",{className:"text-sm text-gray-500",children:L.leavesGrantedOn==="compliance"?`${L.complianceGrantDays||1} day for every ${L.complianceForEveryDays||20} days worked`:`${L.paidDaysInYear} days`})]})},L.id))})})]})},P.id)}),CD.filter(P=>!Array.isArray(j)||!j.find(E=>E.name===P.name)).map((P,E)=>{const R=P,I=SD(R.icon),ee=G(R.name),L=b[R.name],q=ee.length>0;return s.jsx(Ce,{className:"border border-gray-200 hover:border-gray-300 transition-colors",children:s.jsxs(Ie,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${R.color}20`},children:s.jsx(I,{className:"w-5 h-5",style:{color:R.color}})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:R.name}),q?s.jsxs("p",{className:"text-sm text-gray-500",children:[ee.length," variant",ee.length>1?"s":""]}):s.jsx("p",{className:"text-sm text-gray-400",children:"No variants created"})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:q?s.jsx(se,{variant:"outline",size:"sm",onClick:()=>O(R),className:"text-blue-600 border-blue-300 hover:bg-blue-50 p-2",children:s.jsx(Wi,{className:"w-4 h-4"})}):s.jsxs(s.Fragment,{children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>V(R),className:"text-red-600 border-red-300 hover:bg-red-50",disabled:D.isPending,children:s.jsx(ua,{className:"w-4 h-4"})}),s.jsxs(se,{size:"sm",onClick:()=>k(R),className:"bg-green-600 hover:bg-green-700 text-white",children:["Create Leave",s.jsx(Wi,{className:"w-4 h-4 ml-1"})]})]})})]}),L&&q&&s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsx("div",{className:"space-y-2",children:ee.map((H,B)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-800",children:H.leaveVariantName}),s.jsx("p",{className:"text-sm text-gray-600",children:H.leavesGrantedOn==="compliance"?`${H.complianceGrantDays||1} day for every ${H.complianceForEveryDays||20} days worked`:`${H.paidDaysInYear} days`})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>{c(H),o(R),d(!0)},className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:"Edit"}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>O(R),className:"text-green-600 border-green-300 hover:bg-green-50",children:"Manage"})]})]},B))})})]})},R.id||E)})]}),a&&s.jsxs("div",{className:"flex justify-between mt-8",children:[s.jsx(se,{variant:"outline",onClick:t,disabled:n,children:"Previous"}),s.jsx(se,{onClick:Y,disabled:n||C.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white",children:C.isPending?"Creating...":r?"Finish Setup":"Next"})]})]})}function o$({onNext:e,onPrevious:t,isLast:r,isLoading:n,showNavigation:a=!0}){const{toast:i}=Vr(),[o,l]=N.useState(""),[c,u]=N.useState(!1),[d,f]=N.useState(null),[h,m]=N.useState({name:"",description:"",permissions:{employeeOverview:{view:!1,modify:!1},leaveApplications:{view:!1,modify:!1},holidays:{view:!1,modify:!1},compensatoryOff:{view:!1,modify:!1},bto:{view:!1,modify:!1},employeeReports:{view:!1,modify:!1},adminOverview:{view:!1,modify:!1},approvals:{view:!1,modify:!1},employees:{view:!1,modify:!1},workflows:{view:!1,modify:!1},roles:{view:!1,modify:!1},importLeaveData:{view:!1,modify:!1},adminReports:{view:!1,modify:!1},adminLeaveTypes:{view:!1,modify:!1},adminCompOff:{view:!1,modify:!1},adminBTO:{view:!1,modify:!1},allowOnBehalf:{bto:!1,leave:!1,compOff:!1}}}),{data:g=[],isLoading:p,error:y,isFetching:b}=Fe({queryKey:["/api/roles"],staleTime:0,gcTime:0,refetchOnMount:"always",refetchOnWindowFocus:!0,retry:!1,enabled:!0}),x=Array.isArray(g)?g:[],w=x.filter(E=>E.name.toLowerCase().includes(o.toLowerCase())),v=!p&&x.length===0;N.useEffect(()=>{const E=localStorage.getItem("org_id");console.log("[RolesSetup] Debug state:",{orgId:E,isLoadingRoles:p,isFetching:b,dbRolesLength:g==null?void 0:g.length,displayRolesLength:w.length,showEmptyState:v,rolesData:g==null?void 0:g.map(R=>R.name)})},[p,b,g,w.length,v]);const j=Ut({mutationFn:async E=>d?await Ct("PATCH",`/api/roles/${d.id}`,E):await Ct("POST","/api/roles",E),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/roles"]}),i({title:"Success",description:`Role ${d?"updated":"created"} successfully.`}),u(!1),f(null)},onError:E=>{i({title:"Error",description:`Failed to ${d?"update":"create"} role. Please try again.`,variant:"destructive"})}}),S=Ut({mutationFn:async E=>await Ct("DELETE",`/api/roles/${E}`,{}),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/roles"]}),i({title:"Success",description:"Role deleted successfully."}),u(!1),f(null)},onError:E=>{i({title:"Error",description:"Failed to delete role. Please try again.",variant:"destructive"})}}),_=()=>{f(null),m({name:"",description:"",permissions:{employeeOverview:{view:!1,modify:!1},leaveApplications:{view:!1,modify:!1},holidays:{view:!1,modify:!1},compensatoryOff:{view:!1,modify:!1},bto:{view:!1,modify:!1},employeeReports:{view:!1,modify:!1},adminOverview:{view:!1,modify:!1},approvals:{view:!1,modify:!1},employees:{view:!1,modify:!1},workflows:{view:!1,modify:!1},roles:{view:!1,modify:!1},importLeaveData:{view:!1,modify:!1},adminReports:{view:!1,modify:!1},adminLeaveTypes:{view:!1,modify:!1},adminCompOff:{view:!1,modify:!1},adminBTO:{view:!1,modify:!1},allowOnBehalf:{bto:!1,leave:!1,compOff:!1}}}),u(!0)},A=E=>{f(E);let R;try{R=typeof E.permissions=="string"?JSON.parse(E.permissions):E.permissions}catch(I){console.error("Error parsing role permissions:",I),R=h.permissions}m({name:E.name,description:E.description||"",permissions:R}),u(!0)},C=()=>{u(!1),f(null)},D=()=>{if(!h.name||!h.permissions){i({title:"Error",description:"Please provide a role name and permissions",variant:"destructive"});return}const E={name:h.name,description:h.description||"",permissions:h.permissions};j.mutate(E)},k=()=>{d&&S.mutate(d.id)},O=(E,R,I)=>{m(ee=>({...ee,permissions:{...ee.permissions,[E]:{...ee.permissions[E],[R]:I}}}))},V=(E,R)=>{m(I=>({...I,permissions:{...I.permissions,allowOnBehalf:{...I.permissions.allowOnBehalf,[E]:R}}}))},G=()=>{const E=["employeeOverview","leaveApplications","holidays","compensatoryOff","bto","employeeReports","adminOverview","approvals","employees","workflows","roles","importLeaveData","adminReports","adminLeaveTypes","adminCompOff","adminBTO"];m(R=>{const I={...R.permissions};return E.forEach(ee=>{I[ee]&&(I[ee].view=!0)}),{...R,permissions:I}})},Y=()=>{const E=["employeeOverview","leaveApplications","holidays","compensatoryOff","bto","employeeReports","adminOverview","approvals","employees","workflows","roles","importLeaveData","adminReports","adminLeaveTypes","adminCompOff","adminBTO"];m(R=>{const I={...R.permissions};return E.forEach(ee=>{I[ee]&&(I[ee].modify=!0)}),{...R,permissions:I}})},W=()=>{const E=["employeeOverview","leaveApplications","holidays","compensatoryOff","bto","employeeReports","adminOverview","approvals","employees","workflows","roles","importLeaveData","adminReports","adminLeaveTypes","adminCompOff","adminBTO"];m(R=>{const I={...R.permissions};return E.forEach(ee=>{I[ee]&&(I[ee].view=!1)}),{...R,permissions:I}})},P=()=>{const E=["employeeOverview","leaveApplications","holidays","compensatoryOff","bto","employeeReports","adminOverview","approvals","employees","workflows","roles","importLeaveData","adminReports","adminLeaveTypes","adminCompOff","adminBTO"];m(R=>{const I={...R.permissions};return E.forEach(ee=>{I[ee]&&(I[ee].modify=!1)}),{...R,permissions:I}})};return c?s.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:d?"Update Role":"Create Role"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:C,className:"text-gray-400 hover:text-gray-600",children:s.jsx(da,{className:"w-5 h-5"})})]}),s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(ht,{value:h.name,onChange:E=>m(R=>({...R,name:E.target.value})),placeholder:"Enter role name",className:"flex-1"}),d&&s.jsx(se,{variant:"outline",onClick:k,className:"text-orange-600 border-orange-600 hover:bg-orange-50",children:"Delete Role"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),s.jsx(ht,{value:h.description,onChange:E=>m(R=>({...R,description:E.target.value})),placeholder:"Enter role description"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Role Permissions"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:G,className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:"Check All View"}),s.jsx(se,{variant:"outline",size:"sm",onClick:W,className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:"Uncheck All View"}),s.jsx(se,{variant:"outline",size:"sm",onClick:Y,className:"text-green-600 border-green-600 hover:bg-green-50",children:"Check All Modify"}),s.jsx(se,{variant:"outline",size:"sm",onClick:P,className:"text-green-600 border-green-600 hover:bg-green-50",children:"Uncheck All Modify"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"Employee Screens"}),s.jsx("div",{className:"space-y-2",children:[{key:"employeeOverview",label:"Employee Overview"},{key:"leaveApplications",label:"Leave Applications"},{key:"holidays",label:"Holidays"},{key:"compensatoryOff",label:"Compensatory Off"},{key:"bto",label:"BTO"},{key:"employeeReports",label:"Employee Reports"}].map(({key:E,label:R})=>{const I=h.permissions[E];return s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[s.jsx("span",{className:"text-sm text-gray-700",children:R}),s.jsxs("div",{className:"flex space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:(I==null?void 0:I.view)||!1,onCheckedChange:ee=>O(E,"view",ee)}),s.jsx("span",{className:"text-sm text-gray-600",children:"View"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:(I==null?void 0:I.modify)||!1,onCheckedChange:ee=>O(E,"modify",ee)}),s.jsx("span",{className:"text-sm text-gray-600",children:"Modify"})]})]})]},E)})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"Admin Screens"}),s.jsx("div",{className:"space-y-2",children:[{key:"adminOverview",label:"Admin Overview"},{key:"approvals",label:"Approvals"},{key:"employees",label:"Employees"},{key:"workflows",label:"Workflows"},{key:"roles",label:"Roles"},{key:"importLeaveData",label:"Import Leave Data"},{key:"adminReports",label:"Admin Reports"}].map(({key:E,label:R})=>{const I=h.permissions[E];return s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[s.jsx("span",{className:"text-sm text-gray-700",children:R}),s.jsxs("div",{className:"flex space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:(I==null?void 0:I.view)||!1,onCheckedChange:ee=>O(E,"view",ee)}),s.jsx("span",{className:"text-sm text-gray-600",children:"View"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:(I==null?void 0:I.modify)||!1,onCheckedChange:ee=>O(E,"modify",ee)}),s.jsx("span",{className:"text-sm text-gray-600",children:"Modify"})]})]})]},E)})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"Admin Configuration"}),s.jsx("div",{className:"space-y-2",children:[{key:"adminLeaveTypes",label:"Leave Types Configuration"},{key:"adminCompOff",label:"Comp Off Configuration"},{key:"adminBTO",label:"BTO Configuration"},{key:"adminSettings",label:"General Settings (Black Out Periods & Features)"}].map(({key:E,label:R})=>{const I=h.permissions[E];return s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[s.jsx("span",{className:"text-sm text-gray-700",children:R}),s.jsxs("div",{className:"flex space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:(I==null?void 0:I.view)||!1,onCheckedChange:ee=>O(E,"view",ee)}),s.jsx("span",{className:"text-sm text-gray-600",children:"View"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:(I==null?void 0:I.modify)||!1,onCheckedChange:ee=>O(E,"modify",ee)}),s.jsx("span",{className:"text-sm text-gray-600",children:"Modify"})]})]})]},E)})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"Allow On Behalf Actions"}),s.jsx("div",{className:"space-y-2",children:[{key:"bto",label:"BTO Applications"},{key:"leave",label:"Leave Applications"},{key:"compOff",label:"Comp Off Applications"}].map(({key:E,label:R})=>{var I;return s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[s.jsx("span",{className:"text-sm text-gray-700",children:R}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:((I=h.permissions.allowOnBehalf)==null?void 0:I[E])||!1,onCheckedChange:ee=>V(E,ee)}),s.jsx("span",{className:"text-sm text-gray-600",children:"Allow"})]})]},E)})})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[s.jsx(se,{variant:"outline",onClick:C,children:"Cancel"}),s.jsx(se,{onClick:D,disabled:j.isPending||S.isPending,children:j.isPending?"Saving...":d?"Update Role":"Create Role"})]})]})})]}):s.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Roles"}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(Xf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(ht,{placeholder:"Search for Roles",value:o,onChange:E=>l(E.target.value),className:"pl-10"})]}),s.jsxs(se,{onClick:_,className:"bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Create Role"]})]}),p&&s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"text-gray-500",children:"Loading roles..."})}),y&&s.jsx(Ce,{children:s.jsx(Ie,{className:"p-8 text-center",children:s.jsxs("div",{className:"text-red-500 mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error loading roles"}),s.jsx("p",{className:"text-sm",children:y.message})]})})}),v&&s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-8 text-center",children:[s.jsxs("div",{className:"text-gray-500 mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No roles created yet"}),s.jsx("p",{children:"Create your first role to get started with permission management."}),s.jsx("p",{className:"text-sm mt-2",children:"Default roles (Admin, Manager, Employee) will be created automatically when you complete the setup."})]}),s.jsxs(se,{onClick:_,className:"bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Create Custom Role"]})]})}),w.length>0&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(E=>s.jsx(Ce,{className:"hover:shadow-md transition-shadow",children:s.jsxs(Ie,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:E.name}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>A(E),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Nu,{className:"w-4 h-4"})})]}),E.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:E.description}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Created: ",E.createdAt?new Date(E.createdAt).toLocaleDateString():"Unknown"]})]})},E.id))})]}),a&&s.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[s.jsx(se,{variant:"outline",onClick:t,children:"Previous"}),s.jsx(se,{onClick:e,disabled:n,children:r?"Finish Setup":"Next"})]})]})}const sne=Jp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Lt({className:e,variant:t,...r}){return s.jsx("div",{className:Ge(sne({variant:t}),e),...r})}const ine=Zn({name:rr().min(1,"Workflow name is required"),effectiveDate:rr().min(1,"Effective date is required"),process:rr().min(1,"Process is required"),subProcesses:as(rr()).min(1,"At least one sub-process is required"),reviewSteps:as(Zn({title:rr(),roleIds:as(er()),autoApproval:or()})).optional()});function one({open:e,onOpenChange:t,onAssign:r,selectedRoleIds:n}){const[a,i]=N.useState(n),[o,l]=N.useState(""),{data:c=[]}=Fe({queryKey:["/api/roles"]}),u=c.filter(h=>h.name.toLowerCase().includes(o.toLowerCase())),d=()=>{r(a),t(!1)},f=h=>{i(m=>m.includes(h)?m.filter(g=>g!==h):[...m,h])};return s.jsx(fn,{open:e,onOpenChange:t,children:s.jsxs(hn,{className:"max-w-md",children:[s.jsx(mn,{children:s.jsx(pn,{children:"Assign Roles"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Xf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(ht,{placeholder:"Search roles...",value:o,onChange:h=>l(h.target.value),className:"pl-10"})]}),u.length===0?s.jsx("div",{className:"text-center text-gray-500 py-6",children:"No roles available. Please create roles first."}):s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:u.map(h=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:`role-${h.id}`,checked:a.includes(h.id),onCheckedChange:()=>f(h.id)}),s.jsx(tt,{htmlFor:`role-${h.id}`,className:"flex-1 cursor-pointer",children:h.name})]},h.id))}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[s.jsx(se,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(se,{onClick:d,children:"Assign Roles"})]})]})]})})}function lne({onNext:e,onPrevious:t,onComplete:r,isLast:n,isLoading:a}){var P;const{toast:i}=Vr(),[o,l]=N.useState(!1),[c,u]=N.useState([]),[d,f]=N.useState(!1),[h,m]=N.useState(null),[g,p]=N.useState(null),y=os({resolver:Cs(ine),defaultValues:{name:"",effectiveDate:"",process:"",subProcesses:[],reviewSteps:[]}}),{data:b=[]}=Fe({queryKey:["/api/workflows"]}),{data:x=[]}=Fe({queryKey:["/api/roles"]}),{data:w}=Fe({queryKey:["/api/company"]});N.useEffect(()=>{if(g&&o){console.log("Editing workflow data:",g);const E={name:g.name||"",effectiveDate:g.effectiveDate?new Date(g.effectiveDate).toISOString().split("T")[0]:"",process:g.process||"application",subProcesses:g.subProcesses?Array.isArray(g.subProcesses)?g.subProcesses:[g.subProcess||"apply-leave"]:["apply-leave"]};if(console.log("Form values being set:",E),y.reset(E),g.steps&&Array.isArray(g.steps)){const R=g.steps.map((I,ee)=>({id:I.id||Date.now().toString()+ee,title:I.title||"",roleIds:I.roleIds||[],autoApproval:I.autoApproval||!1,days:I.days||0,hours:I.hours||0}));u(R)}else u([])}},[g,o,y]);const v=Ut({mutationFn:async E=>{const R=localStorage.getItem("org_id")||"60";return Ct("POST","/api/workflows",{...E,orgId:parseInt(R)})},onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/workflows"]}),i({title:"Success",description:"Workflow created successfully"}),l(!1),y.reset(),u([])},onError:E=>{i({title:"Error",description:E.message||"Failed to create workflow",variant:"destructive"})}}),j=Ut({mutationFn:async({id:E,data:R})=>Ct("PATCH",`/api/workflows/${E}`,R),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/workflows"]}),l(!1),p(null),y.reset(),u([]),i({title:"Success",description:"Workflow updated successfully"})},onError:E=>{i({title:"Error",description:E.message||"Failed to update workflow",variant:"destructive"})}}),S=Ut({mutationFn:async E=>Ct("DELETE",`/api/workflows/${E}`),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/workflows"]}),i({title:"Success",description:"Workflow deleted successfully"})},onError:E=>{i({title:"Error",description:E.message||"Failed to delete workflow",variant:"destructive"})}}),_=()=>{const E={id:Date.now().toString(),title:"",roleIds:[],autoApproval:!1,days:0,hours:0};u(R=>[...R,E])},A=E=>{u(R=>R.filter(I=>I.id!==E))},C=(E,R)=>{u(I=>I.map(ee=>ee.id===E?{...ee,...R}:ee))},D=E=>{if(h!==null){const R=c[h];C(R.id,{roleIds:E})}},k=E=>{var R;console.log("[openAssignRolesDialog] Opening for step:",E),console.log("[openAssignRolesDialog] Current reviewSteps:",c),console.log("[openAssignRolesDialog] Step roleIds:",(R=c[E])==null?void 0:R.roleIds),m(E),f(!0)},O=E=>{if(w!=null&&w.effectiveDate&&E.effectiveDate){const I=new Date(w.effectiveDate);if(new Date(E.effectiveDate)<I){y.setError("effectiveDate",{message:"Effective date cannot be before company setup date"});return}}const R={...E,steps:c.map(I=>({title:I.title,roleIds:I.roleIds,autoApproval:I.autoApproval,days:I.days||0,hours:I.hours||0}))};g?j.mutate({id:g.id,data:R}):v.mutate(R)},V=E=>{p(E),l(!0)},G=E=>{window.confirm("Are you sure you want to delete this workflow?")&&S.mutate(E)},Y=E=>E.map(R=>{var I;return((I=x.find(ee=>ee.id===R))==null?void 0:I.name)||R.toString()}).join(", "),W=async()=>{r&&await r(),e()};return s.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Workflows Setup"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Create approval workflows to manage your organization's leave requests and compensation processes"})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Current Workflows"}),s.jsxs(fn,{open:o,onOpenChange:E=>{l(E),E||(p(null),y.reset(),u([]))},children:[s.jsx(cu,{asChild:!0,children:s.jsxs(se,{className:"bg-blue-600 hover:bg-blue-700",children:[s.jsx(gn,{className:"h-4 w-4 mr-2"}),"Create Workflow"]})}),s.jsxs(hn,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[s.jsx(mn,{children:s.jsx(pn,{className:"text-xl font-semibold text-gray-900",children:g?"Edit Workflow":"New Workflow"})}),s.jsx(ai,{...y,children:s.jsxs("form",{onSubmit:y.handleSubmit(O),className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx(et,{control:y.control,name:"name",render:({field:E})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Workflow Name *"}),s.jsx(lt,{children:s.jsx(ht,{placeholder:"Enter workflow name",...E})}),s.jsx(wt,{})]})}),s.jsx(et,{control:y.control,name:"effectiveDate",render:({field:E})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Effective Date *"}),s.jsx(lt,{children:s.jsx(ht,{type:"date",...E})}),s.jsx(wt,{})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx(et,{control:y.control,name:"process",render:({field:E})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Process *"}),s.jsxs(yt,{onValueChange:E.onChange,value:E.value,children:[s.jsx(lt,{children:s.jsx(gt,{children:s.jsx(vt,{placeholder:"Select process"})})}),s.jsxs(xt,{children:[s.jsx(je,{value:"application",children:"Application"}),s.jsx(je,{value:"pto",children:"BTO"}),s.jsx(je,{value:"comp-off",children:"Comp-off"})]})]}),s.jsx(wt,{})]})}),s.jsx(et,{control:y.control,name:"subProcesses",render:({field:E})=>{var R,I,ee,L,q,H,B;return s.jsxs(Qe,{children:[s.jsx(ft,{children:"Select sub-process *"}),s.jsx(lt,{children:s.jsxs("div",{className:"space-y-2",children:[y.watch("process")==="application"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"apply-leave",checked:((R=E.value)==null?void 0:R.includes("apply-leave"))||!1,onCheckedChange:de=>{const ce=E.value||[];de?E.onChange([...ce,"apply-leave"]):E.onChange(ce.filter(ge=>ge!=="apply-leave"))}}),s.jsx(tt,{htmlFor:"apply-leave",className:"text-sm",children:"Apply Leave"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"withdraw-leave",checked:((I=E.value)==null?void 0:I.includes("withdraw-leave"))||!1,onCheckedChange:de=>{const ce=E.value||[];de?E.onChange([...ce,"withdraw-leave"]):E.onChange(ce.filter(ge=>ge!=="withdraw-leave"))}}),s.jsx(tt,{htmlFor:"withdraw-leave",className:"text-sm",children:"Withdraw Leave"})]})]}),y.watch("process")==="pto"&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"apply-pto",checked:((ee=E.value)==null?void 0:ee.includes("apply-pto"))||!1,onCheckedChange:de=>{const ce=E.value||[];de?E.onChange([...ce,"apply-pto"]):E.onChange(ce.filter(ge=>ge!=="apply-pto"))}}),s.jsx(tt,{htmlFor:"apply-pto",className:"text-sm",children:"Apply BTO"})]})}),y.watch("process")==="comp-off"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"bank-comp-off",checked:((L=E.value)==null?void 0:L.includes("bank-comp-off"))||!1,onCheckedChange:de=>{const ce=E.value||[];de?E.onChange([...ce,"bank-comp-off"]):E.onChange(ce.filter(ge=>ge!=="bank-comp-off"))}}),s.jsx(tt,{htmlFor:"bank-comp-off",className:"text-sm",children:"Bank Comp-off"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"avail-comp-off",checked:((q=E.value)==null?void 0:q.includes("avail-comp-off"))||!1,onCheckedChange:de=>{const ce=E.value||[];de?E.onChange([...ce,"avail-comp-off"]):E.onChange(ce.filter(ge=>ge!=="avail-comp-off"))}}),s.jsx(tt,{htmlFor:"avail-comp-off",className:"text-sm",children:"Avail Comp-off"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"transfer-comp-off",checked:((H=E.value)==null?void 0:H.includes("transfer-comp-off"))||!1,onCheckedChange:de=>{const ce=E.value||[];de?E.onChange([...ce,"transfer-comp-off"]):E.onChange(ce.filter(ge=>ge!=="transfer-comp-off"))}}),s.jsx(tt,{htmlFor:"transfer-comp-off",className:"text-sm",children:"Transfer to Leaves"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"encash-comp-off",checked:((B=E.value)==null?void 0:B.includes("encash-comp-off"))||!1,onCheckedChange:de=>{const ce=E.value||[];de?E.onChange([...ce,"encash-comp-off"]):E.onChange(ce.filter(ge=>ge!=="encash-comp-off"))}}),s.jsx(tt,{htmlFor:"encash-comp-off",className:"text-sm",children:"En-Cash Comp"})]})]})]})}),s.jsx(wt,{})]})}})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Review Steps"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure the approval process for this workflow"})]}),s.jsxs(se,{type:"button",variant:"outline",onClick:_,className:"flex items-center gap-2",children:[s.jsx(gn,{className:"h-4 w-4"}),"Add Step"]})]}),s.jsx("div",{className:"space-y-4",children:c.map((E,R)=>s.jsxs(Ce,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h4",{className:"font-medium text-gray-900",children:["Review ",R+1]}),s.jsx(ht,{placeholder:"Step title",value:E.title,onChange:I=>C(E.id,{title:I.target.value}),className:"mt-2"})]}),c.length>1&&s.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>A(E.id),className:"text-red-600 hover:text-red-700",children:s.jsx(ua,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(tt,{className:"text-sm font-medium text-gray-700",children:"Assigned Roles"}),s.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[E.roleIds.length>0?s.jsx("div",{className:"flex flex-wrap gap-1",children:E.roleIds.map(I=>{var ee;return s.jsx(Lt,{variant:"secondary",children:((ee=x.find(L=>L.id===I))==null?void 0:ee.name)||I},I)})}):s.jsx("span",{className:"text-sm text-gray-500",children:"No roles assigned"}),s.jsx(se,{type:"button",variant:"outline",size:"sm",onClick:()=>k(R),children:"Assign Roles"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:`auto-approval-${E.id}`,checked:E.autoApproval,onCheckedChange:I=>C(E.id,{autoApproval:I})}),s.jsx(tt,{htmlFor:`auto-approval-${E.id}`,className:"text-sm",children:R===c.length-1?"Enable auto-approval if all conditions are met":"Forward to the next review"})]}),E.autoApproval&&s.jsxs("div",{className:"ml-6 space-y-2",children:[s.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"Auto-approve after:"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ht,{type:"number",min:"0",placeholder:"0",value:E.days||"",onChange:I=>C(E.id,{days:parseInt(I.target.value)||0}),className:"w-16 h-8 text-xs"}),s.jsx("span",{className:"text-xs text-gray-500",children:"days"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ht,{type:"number",min:"0",max:"23",placeholder:"0",value:E.hours||"",onChange:I=>C(E.id,{hours:parseInt(I.target.value)||0}),className:"w-16 h-8 text-xs"}),s.jsx("span",{className:"text-xs text-gray-500",children:"hours"})]})]})]})]})]})]},E.id))}),c.length===0&&s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No review steps configured. Add steps to create an approval workflow."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(se,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsx(se,{type:"submit",disabled:v.isPending||j.isPending,children:g?"Update Workflow":"Create Workflow"})]})]})})]})]})]}),b.length===0?s.jsxs(Ce,{className:"p-8 text-center",children:[s.jsx(ki,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No workflows configured"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first workflow to start managing approval processes"})]}):s.jsx("div",{className:"grid gap-4",children:b.map(E=>s.jsx(Ce,{className:"p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:E.name}),s.jsxs(Lt,{variant:"outline",children:[E.process," - ",E.subProcess]})]}),s.jsx("div",{className:"text-sm text-gray-600 mb-3",children:s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(br,{className:"h-4 w-4"}),"Effective from: ",new Date(E.effectiveDate).toLocaleDateString()]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Review Steps:"}),E.steps&&E.steps.length>0?s.jsx("div",{className:"grid gap-2",children:E.steps.map((R,I)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"font-medium",children:["Step ",I+1,": ",R.title||"Untitled Step"]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Roles: ",Y(R.roleIds)||"No roles assigned"]})]}),R.autoApproval&&s.jsx(Lt,{variant:"secondary",children:"Auto-approval"})]},I))}):s.jsx("p",{className:"text-gray-500 text-sm",children:"No review steps configured"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>V(E),children:"Edit"}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>G(E.id),className:"text-red-600 hover:text-red-700",children:"Delete"})]})]})},E.id))})]}),s.jsxs("div",{className:"flex items-center justify-between pt-6 border-t",children:[s.jsx(se,{variant:"outline",onClick:t,disabled:a,children:"Previous"}),s.jsx("div",{className:"flex items-center gap-3",children:b.length>0&&s.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[s.jsx(qn,{className:"h-5 w-5"}),s.jsxs("span",{className:"text-sm font-medium",children:[b.length," workflow(s) configured"]})]})}),s.jsx(se,{onClick:W,disabled:a,className:"bg-blue-600 hover:bg-blue-700",children:n?"Complete Setup":"Next"})]}),s.jsx(one,{open:d,onOpenChange:f,onAssign:D,selectedRoleIds:h!==null?((P=c[h])==null?void 0:P.roleIds)||[]:[]})]})}const cne=Zn({leaveVariantName:rr().min(1,"Comp-off variant name is required"),description:rr().min(1,"Description is required"),allowFullDay:or(),allowHalfDay:or(),allowQuarterDay:or(),fullDayHours:er().min(0).optional(),halfDayHours:er().min(0).optional(),quarterDayHours:er().min(0).optional(),maxApplications:er().min(1,"Max applications is required"),maxApplicationsPeriod:On(["Month","Quarter","Year"]),workflowRequired:or(),approvalAdvanceDays:er().min(0),availWithinDays:er().min(0),allowNonWorkingDays:or(),withdrawalBeforeApproval:or(),withdrawalAfterApproval:or(),withdrawalNotAllowed:or(),allowedDuringNotice:or(),enableCarryForward:or(),carryForwardDays:er().min(0).optional(),enableLapse:or(),lapsePeriod:er().min(0).optional(),lapsePeriodUnit:On(["Days","Month","Quarter","Year"]).optional(),enableCompensation:or(),maxEncashmentDays:er().min(0).optional(),maxEncashmentHours:er().min(0).optional(),encashmentOption:or(),convertToLeavesOption:or(),encashmentBasedOn:On(["basic_pay","basic_plus_dearness_allowance","gross_pay"]).optional(),convertibleLeaveTypes:as(er()).optional()});function une({variant:e,onClose:t}){const{toast:r}=Vr(),[n,a]=N.useState(!1),[i,o]=N.useState([]),{data:l=[]}=Fe({queryKey:[`/api/employee-assignments/comp-off-variant/${e==null?void 0:e.id}`],enabled:!!(e!=null&&e.id),staleTime:5*60*1e3,refetchOnWindowFocus:!1}),[c,u]=N.useState([]),d=N.useRef([]);N.useEffect(()=>{(async()=>{try{const v=(await vi()).map(eh);console.log("CompOff: Loaded",v.length,"employees from external API"),u(v)}catch(w){console.error("CompOff: Error loading employees:",w),u([])}})()},[]);const{data:f}=Fe({queryKey:["/api/leave-types"]}),{data:h}=Fe({queryKey:["/api/leave-variants"]}),m=(f||[]).filter(x=>(h||[]).some(w=>w.leaveTypeId===x.id)),g=os({resolver:Cs(cne),defaultValues:{leaveVariantName:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",allowFullDay:(e==null?void 0:e.allowFullDay)||!1,allowHalfDay:(e==null?void 0:e.allowHalfDay)||!1,allowQuarterDay:(e==null?void 0:e.allowQuarterDay)||!1,fullDayHours:(e==null?void 0:e.fullDayHours)||8,halfDayHours:(e==null?void 0:e.halfDayHours)||4,quarterDayHours:(e==null?void 0:e.quarterDayHours)||2,maxApplications:(e==null?void 0:e.maxApplications)||0,maxApplicationsPeriod:(e==null?void 0:e.maxApplicationsPeriod)||"Month",workflowRequired:(e==null?void 0:e.workflowRequired)||!1,approvalAdvanceDays:(e==null?void 0:e.approvalAdvanceDays)||0,availWithinDays:(e==null?void 0:e.availWithinDays)||0,allowNonWorkingDays:(e==null?void 0:e.allowNonWorkingDays)||!1,withdrawalBeforeApproval:(e==null?void 0:e.withdrawalBeforeApproval)||!0,withdrawalAfterApproval:(e==null?void 0:e.withdrawalAfterApproval)||!1,withdrawalNotAllowed:(e==null?void 0:e.withdrawalNotAllowed)||!1,allowedDuringNotice:(e==null?void 0:e.allowedDuringNotice)||!1,enableCarryForward:(e==null?void 0:e.enableCarryForward)||!1,carryForwardDays:(e==null?void 0:e.carryForwardDays)||0,enableLapse:(e==null?void 0:e.enableLapse)||!1,lapsePeriod:(e==null?void 0:e.lapsePeriod)||0,lapsePeriodUnit:(e==null?void 0:e.lapsePeriodUnit)||"Month",enableCompensation:(e==null?void 0:e.enableCompensation)||!1,maxEncashmentDays:(e==null?void 0:e.maxEncashmentDays)||0,maxEncashmentHours:(e==null?void 0:e.maxEncashmentHours)||0,encashmentOption:(e==null?void 0:e.encashmentOption)||!0,convertToLeavesOption:(e==null?void 0:e.convertToLeavesOption)||!1,encashmentBasedOn:(e==null?void 0:e.encashmentBasedOn)||"basic_pay",convertibleLeaveTypes:(e==null?void 0:e.convertibleLeaveTypes)||[]}});N.useEffect(()=>{if(e){console.log("=== FORM POPULATION DEBUG ==="),console.log("Variant data:",e);const x={leaveVariantName:e.name||"",description:e.description||"",workflowRequired:e.workflowRequired||!1,approvalAdvanceDays:e.approvalDays||0,availWithinDays:e.expiryDays===365?0:e.expiryDays||0,allowFullDay:e.allowFullDay!==void 0?e.allowFullDay:!0,allowHalfDay:e.allowHalfDay!==void 0?e.allowHalfDay:!0,allowQuarterDay:e.allowQuarterDay!==void 0?e.allowQuarterDay:!1,fullDayHours:e.fullDayHours||8,halfDayHours:e.halfDayHours||4,quarterDayHours:e.quarterDayHours||2,maxApplications:e.maxApplications||e.maxBalance||1,maxApplicationsPeriod:e.maxApplicationsPeriod||"Month",allowNonWorkingDays:e.allowNonWorkingDays||!1,withdrawalBeforeApproval:e.withdrawalBeforeApproval||!1,withdrawalAfterApproval:e.withdrawalAfterApproval||!1,withdrawalNotAllowed:e.withdrawalNotAllowed===!0&&!e.withdrawalBeforeApproval&&!e.withdrawalAfterApproval,allowedDuringNotice:e.allowedDuringNotice!==void 0?e.allowedDuringNotice:!1,enableCarryForward:e.enableCarryForward||!1,carryForwardDays:e.carryForwardDays||0,enableLapse:e.enableLapse||!1,lapsePeriod:e.lapsePeriod||0,lapsePeriodUnit:e.lapsePeriodUnit||"Month",enableCompensation:e.enableCompensation||!1,maxEncashmentDays:e.maxEncashmentDays||0,maxEncashmentHours:e.maxEncashmentHours||0,encashmentOption:e.encashmentOption!==void 0?e.encashmentOption:!0,convertToLeavesOption:e.convertToLeavesOption||!1,encashmentBasedOn:e.encashmentBasedOn||"basic_pay",convertibleLeaveTypes:e.convertibleLeaveTypes||[]};console.log("Form values being set:",x),g.reset(x),setTimeout(()=>{console.log("Actual form values after reset:",g.getValues())},100)}},[e,g]),N.useEffect(()=>{if(console.log("=== COMP-OFF EMPLOYEE MATCHING DEBUG ==="),console.log("CompOff: Loading assigned employees - variant ID:",e==null?void 0:e.id),console.log("CompOff: Existing assignments:",l),console.log("CompOff: All employees from external API:",c.length,"employees"),e!=null&&e.id&&Array.isArray(l)&&l.length>0){const x=l.map(w=>w.userId);if(console.log("CompOff: Assigned user IDs from database:",x),c.length===0){console.log("CompOff: External API failed, creating fallback employee objects");const w=x.map(v=>({user_id:v,user_name:`Employee ${v}`,employee_number:`E${v}`}));console.log("CompOff: Created fallback employees:",w),o(w),d.current=w}else{const w=c.filter(v=>{const j=v.user_id||v.id,S=x.includes(j);return S&&console.log("CompOff: Found assigned employee:",v.user_name,"with ID:",j),S});console.log("CompOff: Matched assigned employees from external API:",w.length),o(w),d.current=w}}else e!=null&&e.id?(console.log("CompOff: No assignments found - clearing assigned employees"),o([]),d.current=[]):(console.log("CompOff: New variant - clearing assignments"),o([]),d.current=[]);console.log("=== END COMP-OFF EMPLOYEE MATCHING DEBUG ===")},[l,e==null?void 0:e.id,c]);const p=Ut({mutationFn:async x=>{console.log("=== FORM SUBMISSION DEBUG ==="),console.log("Raw form data:",x);const w={name:x.leaveVariantName,description:x.description,enabled:!0,allowFullDay:x.allowFullDay||!1,fullDayHours:x.fullDayHours||0,allowHalfDay:x.allowHalfDay||!1,halfDayHours:x.halfDayHours||0,allowQuarterDay:x.allowQuarterDay||!1,quarterDayHours:x.quarterDayHours||0,maxApplications:x.maxApplications||1,maxApplicationsPeriod:x.maxApplicationsPeriod||"Month",workflowRequired:x.workflowRequired||!1,documentsRequired:!1,applicableAfter:0,approvalDays:x.approvalAdvanceDays||0,expiryDays:x.availWithinDays||365,allowNonWorkingDays:x.allowNonWorkingDays||!1,withdrawalBeforeApproval:x.withdrawalBeforeApproval||!1,withdrawalAfterApproval:x.withdrawalAfterApproval||!1,withdrawalNotAllowed:x.withdrawalNotAllowed||!0,allowedDuringNotice:x.allowedDuringNotice||!0,enableCarryForward:x.enableCarryForward||!1,carryForwardDays:x.carryForwardDays||0,enableLapse:x.enableLapse||!1,lapsePeriod:x.lapsePeriod||0,lapsePeriodUnit:x.lapsePeriodUnit||"Month",enableCompensation:x.enableCompensation||!1,encashmentOption:x.encashmentOption||!1,convertToLeavesOption:x.convertToLeavesOption||!1,encashmentBasedOn:x.encashmentBasedOn||null,maxEncashmentDays:x.maxEncashmentDays||0,maxEncashmentHours:x.maxEncashmentHours||0,convertibleLeaveTypes:x.convertibleLeaveTypes||[],maxBalance:x.maxApplications||1};return console.log("Payload being sent to API:",w),e!=null&&e.id?await Ct("PATCH",`/api/comp-off-variants/${e.id}`,w):await Ct("POST","/api/comp-off-variants",w)},onSuccess:()=>{r({title:"Success",description:e!=null&&e.id?"Comp-off variant updated successfully":"Comp-off variant created successfully"}),Ye.invalidateQueries({queryKey:["/api/comp-off-variants"]}),t()},onError:x=>{r({title:"Error",description:x.message||"Failed to save comp-off variant",variant:"destructive"})}}),y=x=>{if(console.log("=== FORM SUBMISSION TRIGGERED ==="),console.log("Form submission triggered with data:",x),console.log("Form errors:",g.formState.errors),console.log("Form is valid:",g.formState.isValid),!x.leaveVariantName||x.leaveVariantName.trim()===""){r({title:"Validation Error",description:"Comp-off variant name is required and cannot be left blank.",variant:"destructive"});return}if(!x.description||x.description.trim()===""){r({title:"Validation Error",description:"Description is required and cannot be left blank.",variant:"destructive"});return}if(!x.allowFullDay&&!x.allowHalfDay&&!x.allowQuarterDay){r({title:"Validation Error",description:"Please select at least one comp-off unit (Full Day, Half Day, or Quarter Day).",variant:"destructive"});return}const w=x.fullDayHours||0,v=x.halfDayHours||0,j=x.quarterDayHours||0;if(x.allowFullDay&&(!x.fullDayHours||x.fullDayHours<=0)){r({title:"Validation Error",description:"Full Day hours is required and must be greater than 0.",variant:"destructive"});return}if(x.allowHalfDay&&(!x.halfDayHours||x.halfDayHours<=0)){r({title:"Validation Error",description:"Half Day hours is required and must be greater than 0.",variant:"destructive"});return}if(x.allowQuarterDay&&(!x.quarterDayHours||x.quarterDayHours<=0)){r({title:"Validation Error",description:"Quarter Day hours is required and must be greater than 0.",variant:"destructive"});return}if(x.allowFullDay&&x.allowHalfDay&&w>0&&v>0&&w===v){r({title:"Validation Error",description:"Full Day and Half Day hours cannot be the same.",variant:"destructive"});return}if(x.allowFullDay&&x.allowQuarterDay&&w>0&&j>0&&w===j){r({title:"Validation Error",description:"Full Day and Quarter Day hours cannot be the same.",variant:"destructive"});return}if(x.allowHalfDay&&x.allowQuarterDay&&v>0&&j>0&&v===j){r({title:"Validation Error",description:"Half Day and Quarter Day hours cannot be the same.",variant:"destructive"});return}if(x.allowFullDay&&x.allowHalfDay&&w>0&&v>0&&w<=v){r({title:"Validation Error",description:"Full Day hours must be greater than Half Day hours.",variant:"destructive"});return}if(x.allowHalfDay&&x.allowQuarterDay&&v>0&&j>0&&v<=j){r({title:"Validation Error",description:"Half Day hours must be greater than Quarter Day hours.",variant:"destructive"});return}if(x.allowFullDay&&x.allowQuarterDay&&w>0&&j>0&&w<=j){r({title:"Validation Error",description:"Full Day hours must be greater than Quarter Day hours.",variant:"destructive"});return}p.mutate(x)},b=async x=>{if(o(x),a(!1),!(e!=null&&e.id)){r({title:"Info",description:"Employee assignments will be saved after creating the comp-off variant."});return}try{if(!(await fetch("/api/employee-assignments/bulk",{method:"POST",headers:{"Content-Type":"application/json","X-Org-Id":localStorage.getItem("org_id")||""},body:JSON.stringify({leaveVariantId:e.id,assignmentType:"comp_off_variant",userIds:x.map(v=>v.user_id||v.id)})})).ok)throw new Error("Failed to save employee assignments");d.current=x,r({title:"Success",description:"Employee assignments updated successfully"})}catch{r({title:"Error",description:"Failed to save employee assignments",variant:"destructive"})}};return n?s.jsx(g0,{onClose:()=>a(!1),onAssign:b,preSelectedEmployees:i}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[95vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center p-6 border-b",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:t,className:"mr-4",children:s.jsx(Nv,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center bg-green-100",children:s.jsx(Bn,{className:"w-4 h-4 text-green-600"})}),s.jsx("h2",{className:"text-xl font-semibold",children:e?"Edit Comp-off Variant":"Create Comp-off Variant"})]})]}),s.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-180px)]",children:s.jsx(ai,{...g,children:s.jsxs("form",{onSubmit:g.handleSubmit(y),className:"p-8 space-y-8 pb-12",children:[s.jsxs(Ce,{children:[s.jsxs(Tt,{children:[s.jsx(Et,{children:"Comp-off units allowed"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure the time units and their corresponding hours for comp-off applications"})]}),s.jsx(Ie,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(et,{control:g.control,name:"allowFullDay",render:({field:x})=>s.jsxs(Qe,{className:"flex flex-row items-center space-x-3 space-y-0",children:[s.jsx(lt,{children:s.jsx(Pt,{checked:x.value,onCheckedChange:x.onChange})}),s.jsx(ft,{children:"Full Day (hours)"})]})}),g.watch("allowFullDay")&&s.jsx(et,{control:g.control,name:"fullDayHours",render:({field:x})=>s.jsxs(Qe,{children:[s.jsx(lt,{children:s.jsx(ht,{type:"number",placeholder:"8",className:`w-24 ${g.watch("allowFullDay")&&(!x.value||x.value<=0)?"border-red-300":""}`,min:"1",step:"1",...x,onChange:w=>x.onChange(parseInt(w.target.value)||0)})}),g.watch("allowFullDay")&&(!x.value||x.value<=0)&&s.jsxs("span",{className:"text-xs text-red-500",children:["Required and must be ",">"," 0"]})]})})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(et,{control:g.control,name:"allowHalfDay",render:({field:x})=>s.jsxs(Qe,{className:"flex flex-row items-center space-x-3 space-y-0",children:[s.jsx(lt,{children:s.jsx(Pt,{checked:x.value,onCheckedChange:x.onChange})}),s.jsx(ft,{children:"Half Day (hours)"})]})}),g.watch("allowHalfDay")&&s.jsx(et,{control:g.control,name:"halfDayHours",render:({field:x})=>s.jsxs(Qe,{children:[s.jsx(lt,{children:s.jsx(ht,{type:"number",placeholder:"4",className:`w-24 ${g.watch("allowHalfDay")&&(!x.value||x.value<=0)?"border-red-300":""}`,min:"1",step:"1",...x,onChange:w=>x.onChange(parseInt(w.target.value)||0)})}),g.watch("allowHalfDay")&&(!x.value||x.value<=0)&&s.jsxs("span",{className:"text-xs text-red-500",children:["Required and must be ",">"," 0"]})]})})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(et,{control:g.control,name:"allowQuarterDay",render:({field:x})=>s.jsxs(Qe,{className:"flex flex-row items-center space-x-3 space-y-0",children:[s.jsx(lt,{children:s.jsx(Pt,{checked:x.value,onCheckedChange:x.onChange})}),s.jsx(ft,{children:"Quarter Day (hours)"})]})}),g.watch("allowQuarterDay")&&s.jsx(et,{control:g.control,name:"quarterDayHours",render:({field:x})=>s.jsxs(Qe,{children:[s.jsx(lt,{children:s.jsx(ht,{type:"number",placeholder:"2",className:`w-24 ${g.watch("allowQuarterDay")&&(!x.value||x.value<=0)?"border-red-300":""}`,min:"1",step:"1",...x,onChange:w=>x.onChange(parseInt(w.target.value)||0)})}),g.watch("allowQuarterDay")&&(!x.value||x.value<=0)&&s.jsxs("span",{className:"text-xs text-red-500",children:["Required and must be ",">"," 0"]})]})})]}),(()=>{const x=g.watch("fullDayHours")||0,w=g.watch("halfDayHours")||0,v=g.watch("quarterDayHours")||0,j=g.watch("allowFullDay"),S=g.watch("allowHalfDay"),_=g.watch("allowQuarterDay"),A=[];return j&&S&&x>0&&w>0&&x===w&&A.push("Full Day and Half Day hours cannot be the same"),j&&_&&x>0&&v>0&&x===v&&A.push("Full Day and Quarter Day hours cannot be the same"),S&&_&&w>0&&v>0&&w===v&&A.push("Half Day and Quarter Day hours cannot be the same"),j&&S&&x>0&&w>0&&x<=w&&A.push("Full Day hours must be greater than Half Day hours"),S&&_&&w>0&&v>0&&w<=v&&A.push("Half Day hours must be greater than Quarter Day hours"),j&&_&&x>0&&v>0&&x<=v&&A.push("Full Day hours must be greater than Quarter Day hours"),A.length>0?s.jsx("div",{className:"space-y-1",children:A.map((C,D)=>s.jsx("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded border border-red-200",children:C},D))}):null})()]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(et,{control:g.control,name:"leaveVariantName",render:({field:x})=>s.jsxs(Qe,{children:[s.jsxs(ft,{children:["Comp-off Variant Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(lt,{children:s.jsx(ht,{placeholder:"eg. For Factory Employees in Karnataka",className:!x.value||x.value.trim()===""?"border-red-300":"",...x})}),(!x.value||x.value.trim()==="")&&s.jsx("span",{className:"text-xs text-red-500",children:"Comp-off variant name is required and cannot be left blank"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Create tailored comp-off policies for specific groups of employees using variants"}),s.jsx(wt,{})]})}),s.jsx(et,{control:g.control,name:"description",render:({field:x})=>s.jsxs(Qe,{children:[s.jsxs(ft,{children:["Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(lt,{children:s.jsx(Cn,{placeholder:"eg. Earn comp-offs for working extra hours and use them for time off",rows:3,className:!x.value||x.value.trim()===""?"border-red-300":"",...x})}),(!x.value||x.value.trim()==="")&&s.jsx("span",{className:"text-xs text-red-500",children:"Description is required and cannot be left blank"}),s.jsx(wt,{})]})})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Eligibility Criteria"})}),s.jsxs(Ie,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm",children:"Maximum Comp-Off applications"}),s.jsx(et,{control:g.control,name:"maxApplications",render:({field:x})=>s.jsx(Qe,{children:s.jsx(lt,{children:s.jsx(ht,{type:"number",className:"w-20",min:"0",...x,onChange:w=>x.onChange(parseInt(w.target.value)||0)})})})}),s.jsx("span",{className:"text-sm text-gray-500",children:"(applications)"}),s.jsx("span",{className:"text-sm",children:"in a"}),s.jsx(et,{control:g.control,name:"maxApplicationsPeriod",render:({field:x})=>s.jsx(Qe,{children:s.jsxs(yt,{onValueChange:x.onChange,defaultValue:x.value,children:[s.jsx(lt,{children:s.jsx(gt,{className:"w-32",children:s.jsx(vt,{})})}),s.jsxs(xt,{children:[s.jsx(je,{value:"Month",children:"Month"}),s.jsx(je,{value:"Quarter",children:"Quarter"}),s.jsx(je,{value:"Year",children:"Year"})]})]})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm",children:"Does this require a review workflow for approval?"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(se,{type:"button",variant:g.watch("workflowRequired")?"default":"outline",className:`px-4 py-1 text-sm ${g.watch("workflowRequired")?"bg-green-600 text-white":""}`,onClick:()=>g.setValue("workflowRequired",!0),children:"Workflow"}),s.jsx(se,{type:"button",variant:g.watch("workflowRequired")?"outline":"default",className:`px-4 py-1 text-sm ${g.watch("workflowRequired")?"":"bg-green-600 text-white"}`,onClick:()=>g.setValue("workflowRequired",!1),children:"No Workflow"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm",children:"Approval request should be made"}),s.jsx(et,{control:g.control,name:"approvalAdvanceDays",render:({field:x})=>s.jsx(Qe,{children:s.jsx(lt,{children:s.jsx(ht,{type:"number",className:"w-20",min:"0",...x,onChange:w=>x.onChange(parseInt(w.target.value)||0)})})})}),s.jsx("span",{className:"text-sm text-gray-500",children:"(days)"}),s.jsx("span",{className:"text-sm",children:"in advance"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm",children:"Allow on non-working days?"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(se,{type:"button",variant:g.watch("allowNonWorkingDays")?"default":"outline",className:`px-4 py-1 text-sm ${g.watch("allowNonWorkingDays")?"bg-green-600 text-white":""}`,onClick:()=>g.setValue("allowNonWorkingDays",!0),children:"Allowed"}),s.jsx(se,{type:"button",variant:g.watch("allowNonWorkingDays")?"outline":"default",className:`px-4 py-1 text-sm ${g.watch("allowNonWorkingDays")?"":"bg-green-600 text-white"}`,onClick:()=>g.setValue("allowNonWorkingDays",!1),children:"Not Allowed"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-sm",children:"Withdrawal of application allowed"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:g.watch("withdrawalBeforeApproval"),onCheckedChange:x=>{g.setValue("withdrawalBeforeApproval",!!x),x&&g.setValue("withdrawalNotAllowed",!1)}}),s.jsx("span",{className:"text-sm",children:"Before approval"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:g.watch("withdrawalAfterApproval"),onCheckedChange:x=>{g.setValue("withdrawalAfterApproval",!!x),x&&g.setValue("withdrawalNotAllowed",!1)}}),s.jsx("span",{className:"text-sm",children:"After approval"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{checked:g.watch("withdrawalNotAllowed"),onCheckedChange:x=>{g.setValue("withdrawalNotAllowed",!!x),x&&(g.setValue("withdrawalBeforeApproval",!1),g.setValue("withdrawalAfterApproval",!1))}}),s.jsx("span",{className:"text-sm",children:"Not allowed"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm",children:"During notice period, Comp-offs are"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(se,{type:"button",variant:g.watch("allowedDuringNotice")?"default":"outline",className:`px-4 py-1 text-sm ${g.watch("allowedDuringNotice")?"bg-green-600 text-white":""}`,onClick:()=>g.setValue("allowedDuringNotice",!0),children:"Allowed"}),s.jsx(se,{type:"button",variant:g.watch("allowedDuringNotice")?"outline":"default",className:`px-4 py-1 text-sm ${g.watch("allowedDuringNotice")?"":"bg-green-600 text-white"}`,onClick:()=>g.setValue("allowedDuringNotice",!1),children:"Not Allowed"})]})]})]})]})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs(Et,{className:"flex items-center space-x-2",children:[s.jsx("span",{children:"Carry Forward and lapse"}),s.jsx(Gl,{checked:g.watch("enableCarryForward")||g.watch("enableLapse"),onCheckedChange:x=>{g.setValue("enableCarryForward",x),g.setValue("enableLapse",x)}})]})}),s.jsx(Ie,{className:"space-y-4",children:(g.watch("enableCarryForward")||g.watch("enableLapse"))&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm",children:"Earned Comp-Off days will lapse in"}),s.jsx(et,{control:g.control,name:"lapsePeriod",render:({field:x})=>s.jsx(Qe,{children:s.jsx(lt,{children:s.jsx(ht,{type:"number",className:"w-20",...x,onChange:w=>x.onChange(parseInt(w.target.value)||0)})})})}),s.jsx(et,{control:g.control,name:"lapsePeriodUnit",render:({field:x})=>s.jsx(Qe,{children:s.jsxs(yt,{onValueChange:x.onChange,defaultValue:x.value,children:[s.jsx(lt,{children:s.jsx(gt,{className:"w-32",children:s.jsx(vt,{})})}),s.jsxs(xt,{children:[s.jsx(je,{value:"Days",children:"Days"}),s.jsx(je,{value:"Month",children:"Month"}),s.jsx(je,{value:"Quarter",children:"Quarter"}),s.jsx(je,{value:"Year",children:"Year"})]})]})})})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm",children:"Carry forward to next cycle"}),s.jsx(et,{control:g.control,name:"carryForwardDays",render:({field:x})=>s.jsx(Qe,{children:s.jsx(lt,{children:s.jsx(ht,{type:"number",className:"w-20",...x,onChange:w=>x.onChange(parseInt(w.target.value)||0)})})})}),s.jsx("span",{className:"text-sm text-gray-500",children:"(days)"})]})]})})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs(Et,{className:"flex items-center space-x-2",children:[s.jsx("span",{children:"Compensation"}),s.jsx(Gl,{checked:g.watch("enableCompensation"),onCheckedChange:x=>g.setValue("enableCompensation",x)})]})}),s.jsx(Ie,{className:"space-y-4",children:g.watch("enableCompensation")&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm",children:"Maximum days that can be encashed"}),s.jsx(et,{control:g.control,name:"maxEncashmentDays",render:({field:x})=>s.jsx(Qe,{children:s.jsx(lt,{children:s.jsx(ht,{type:"number",className:"w-20",...x,onChange:w=>x.onChange(parseInt(w.target.value)||0)})})})}),s.jsx("span",{className:"text-sm text-gray-500",children:"(days)"}),s.jsx(et,{control:g.control,name:"maxEncashmentHours",render:({field:x})=>s.jsx(Qe,{children:s.jsx(lt,{children:s.jsx(ht,{type:"number",className:"w-20",...x,onChange:w=>x.onChange(parseInt(w.target.value)||0)})})})}),s.jsx("span",{className:"text-sm text-gray-500",children:"(hours)"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-sm",children:"Compensation options"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(et,{control:g.control,name:"encashmentOption",render:({field:x})=>s.jsxs(Qe,{className:"flex flex-row items-center space-x-2 space-y-0",children:[s.jsx(lt,{children:s.jsx(Pt,{checked:x.value,onCheckedChange:x.onChange})}),s.jsx(ft,{className:"text-sm",children:"En-cashment"})]})}),s.jsx(et,{control:g.control,name:"convertToLeavesOption",render:({field:x})=>s.jsxs(Qe,{className:"flex flex-row items-center space-x-2 space-y-0",children:[s.jsx(lt,{children:s.jsx(Pt,{checked:x.value,onCheckedChange:x.onChange})}),s.jsx(ft,{className:"text-sm",children:"Convert to leaves"})]})})]})]}),g.watch("encashmentOption")&&s.jsxs("div",{className:"space-y-4 pl-4 border-l-2 border-blue-200",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Encashment based on"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(et,{control:g.control,name:"encashmentBasedOn",render:({field:x})=>s.jsxs(Qe,{className:"flex flex-row items-center space-x-2 space-y-0",children:[s.jsx(lt,{children:s.jsx("input",{type:"radio",value:"basic_pay",checked:x.value==="basic_pay",onChange:()=>x.onChange("basic_pay")})}),s.jsx(ft,{className:"text-sm",children:"Basic Pay"})]})}),s.jsx(et,{control:g.control,name:"encashmentBasedOn",render:({field:x})=>s.jsxs(Qe,{className:"flex flex-row items-center space-x-2 space-y-0",children:[s.jsx(lt,{children:s.jsx("input",{type:"radio",value:"basic_plus_dearness_allowance",checked:x.value==="basic_plus_dearness_allowance",onChange:()=>x.onChange("basic_plus_dearness_allowance")})}),s.jsx(ft,{className:"text-sm",children:"Basic + Dearness Allowance"})]})}),s.jsx(et,{control:g.control,name:"encashmentBasedOn",render:({field:x})=>s.jsxs(Qe,{className:"flex flex-row items-center space-x-2 space-y-0",children:[s.jsx(lt,{children:s.jsx("input",{type:"radio",value:"gross_pay",checked:x.value==="gross_pay",onChange:()=>x.onChange("gross_pay")})}),s.jsx(ft,{className:"text-sm",children:"Gross Pay"})]})})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm",children:"Max encashment"}),s.jsx(et,{control:g.control,name:"maxEncashmentDays",render:({field:x})=>s.jsx(Qe,{children:s.jsx(lt,{children:s.jsx(ht,{type:"number",min:"0",className:"w-20",...x,onChange:w=>x.onChange(parseInt(w.target.value)||0)})})})}),s.jsx("span",{className:"text-sm text-gray-500",children:"(days)"})]})]}),g.watch("convertToLeavesOption")&&s.jsx("div",{className:"space-y-4 pl-4 border-l-2 border-green-200",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Convert to which leave types"}),s.jsxs("div",{className:"space-y-2",children:[m.map(x=>s.jsx(et,{control:g.control,name:"convertibleLeaveTypes",render:({field:w})=>{var v;return s.jsxs(Qe,{className:"flex flex-row items-center space-x-2 space-y-0",children:[s.jsx(lt,{children:s.jsx(Pt,{checked:((v=w.value)==null?void 0:v.includes(x.id))||!1,onCheckedChange:j=>{const S=w.value||[];j?w.onChange([...S,x.id]):w.onChange(S.filter(_=>_!==x.id))}})}),s.jsx(ft,{className:"text-sm",children:x.name})]})}},x.id)),m.length===0&&s.jsx("div",{className:"text-sm text-gray-500 italic",children:"No leave types with variants available"})]})]})})]})]})})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Et,{children:"Assign to Employees"}),s.jsxs(se,{variant:"outline",type:"button",onClick:()=>a(!0),className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:[s.jsx(Bn,{className:"w-4 h-4 mr-2"}),"Assign Employees"]})]})}),i.length>0&&s.jsx(Ie,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[i.length," employee",i.length>1?"s":""," assigned"]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.slice(0,3).map((x,w)=>s.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 rounded-lg px-3 py-1",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-blue-600",children:(x.name||x.user_name||`Employee ${x.user_id}`).charAt(0).toUpperCase()})}),s.jsx("span",{className:"text-xs text-gray-700",children:x.name||x.user_name||`Employee ${x.user_id}`})]},x.user_id)),i.length>3&&s.jsxs("span",{className:"text-xs text-gray-500",children:["+",i.length-3," more"]})]})]})})]}),s.jsxs("div",{className:"flex justify-between p-8 mt-4 border-t bg-gray-50 sticky bottom-0",children:[s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(se,{variant:"outline",onClick:t,type:"button",className:"px-6 py-3 min-h-[44px]",children:"Discard"}),(e==null?void 0:e.id)&&s.jsx(se,{variant:"destructive",onClick:()=>{console.log("Delete variant:",e.id)},type:"button",className:"px-6 py-3 min-h-[44px]",children:"Delete Variant"})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsx(se,{type:"button",onClick:()=>{console.log("Update button clicked - triggering manual form submission");const x=g.getValues();console.log("Current form values:",x),y(x)},disabled:p.isPending,className:"px-6 py-3 min-h-[44px]",children:p.isPending?"Saving...":e?"Update Comp-off Variant":"Create Comp-off Variant"})})]})]})})})]})})}function l$({onNext:e,onPrevious:t,isLast:r,isLoading:n,showNavigation:a=!0}){const{toast:i}=Vr(),[o,l]=N.useState(!0),[c,u]=N.useState(!1),[d,f]=N.useState(null),[h,m]=N.useState(!1),[g,p]=N.useState({}),[y,b]=N.useState(null),{data:x=[]}=Fe({queryKey:["/api/comp-off-variants"]}),w=x,[v,j]=N.useState([]);N.useEffect(()=>{(async()=>{try{const E=(await vi()).map(eh);console.log("CompOffSetup: External API loaded employees:",E.length),j(E)}catch(P){console.error("CompOffSetup: Error loading employees from external API:",P),j([])}})()},[]),N.useEffect(()=>{w&&w.length>0&&(async()=>{const P={};for(const E of w)try{const R=await fetch(`/api/employee-assignments/comp-off-variant/${E.id}`,{credentials:"include"});if(R.ok){const I=await R.json();if(console.log(`CompOff assignments for variant ${E.id}:`,I),Array.isArray(I)&&I.length>0){const ee=I.map(q=>q.userId);console.log(`CompOff assigned user IDs for variant ${E.id}:`,ee);const L=v.filter(q=>{const H=q.user_id||q.id,B=ee.includes(H)||ee.includes(H==null?void 0:H.toString());return B&&console.log(`CompOff employee matched: ${q.user_name||q.name} (ID: ${H})`),B});P[E.id]=L,console.log(`CompOff final assignments for variant ${E.id}:`,L)}}}catch(R){console.error(`Error loading assignments for variant ${E.id}:`,R)}p(P)})()},[w.length,v.length]);const{data:S}=Fe({queryKey:["/api/comp-off-config"]});N.useEffect(()=>{S&&typeof S=="object"&&"enabled"in S&&l(S.enabled!==!1)},[S]);const _=Ut({mutationFn:async W=>await Ct("POST","/api/comp-off-config",{enabled:W}),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/comp-off-config"]}),i({title:"Success",description:o?"Comp off enabled successfully.":"Comp off disabled successfully."})},onError:W=>{i({title:"Error",description:"Failed to update comp off configuration.",variant:"destructive"})}}),A=W=>{l(W),_.mutate(W)},C=()=>{f(null),u(!0)},D=W=>{f(W),u(!0)},k=W=>{b(W),m(!0)},O=async W=>{if(y)try{const P=W.map(E=>({userId:E.user_id||E.id,leaveVariantId:y.id,assignmentType:"comp_off_variant"}));console.log("CompOff Assignment payload:",P),await Ct("POST","/api/employee-assignments/bulk",{assignments:P}),p(E=>({...E,[y.id]:W})),i({title:"Success",description:`${W.length} employee${W.length>1?"s":""} assigned to ${y.leaveVariantName}.`})}catch{i({title:"Error",description:"Failed to save employee assignments.",variant:"destructive"})}m(!1),b(null)},V=Ut({mutationFn:async W=>await Ct("DELETE",`/api/comp-off-variants/${W}`),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/comp-off-variants"]}),i({title:"Success",description:"Comp-off variant deleted successfully."})},onError:W=>{i({title:"Error",description:"Failed to delete variant. Please try again.",variant:"destructive"})}}),G=W=>{W&&W.id&&confirm("Are you sure you want to delete this variant?")&&V.mutate(W.id)},Y=()=>{e()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"w-full",children:[s.jsx("div",{className:"flex items-center justify-between mb-8",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Comp off"}),s.jsx(Gl,{checked:o,onCheckedChange:A,className:"data-[state=checked]:bg-green-600"})]})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Variants"}),w.map(W=>{var P,E;return s.jsx(Ce,{className:"mb-4",children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:W.name||W.leaveVariantName}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Applied to ",((P=g[W.id])==null?void 0:P.length)||0," Employee",(((E=g[W.id])==null?void 0:E.length)||0)!==1?"s":""]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(se,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-200 hover:bg-blue-50",onClick:()=>k(W),children:[s.jsx(Bn,{className:"w-4 h-4 mr-1"}),"Assign Employees"]}),s.jsxs(se,{variant:"outline",size:"sm",className:"text-orange-600 border-orange-200 hover:bg-orange-50",onClick:()=>G(W),children:["Delete",s.jsx(ua,{className:"w-4 h-4 ml-1"})]}),s.jsxs(se,{variant:"outline",size:"sm",className:"text-gray-600 border-gray-300 hover:bg-gray-50",onClick:()=>D(W),children:["Edit",s.jsx(Nu,{className:"w-4 h-4 ml-1"})]})]})]})})},W.id)}),w.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("p",{children:"No comp off variants created yet."}),s.jsx("p",{className:"text-sm",children:'Click "Create Comp-off variant" to get started.'})]}),s.jsxs(se,{variant:"outline",onClick:C,className:"text-green-600 border-green-600 hover:bg-green-50",children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Create Comp-off variant"]})]}),a&&s.jsxs("div",{className:"flex justify-between pt-8",children:[s.jsx(se,{type:"button",variant:"outline",onClick:t,className:"text-gray-600 border-gray-300 hover:bg-gray-50",children:"Previous"}),s.jsx(se,{onClick:Y,disabled:n,className:"bg-primary hover:bg-primary/90",children:r?"Complete Setup":"Next"})]})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx(une,{variant:d,onClose:()=>u(!1)})}),h&&s.jsx(g0,{onClose:()=>m(!1),onAssign:O,applicableGenders:[]})]})}function Dc({size:e="md",text:t="Loading...",className:r}){const n={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"},a={sm:"text-sm",md:"text-base",lg:"text-lg"};return s.jsxs("div",{className:Ge("flex flex-col items-center justify-center space-y-4",r),children:[s.jsx("div",{className:Ge("relative",n[e]),children:s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full animate-dance",children:[s.jsx("circle",{cx:"50",cy:"20",r:"8",fill:"currentColor",className:"text-blue-500"}),s.jsx("rect",{x:"46",y:"28",width:"8",height:"25",rx:"4",fill:"currentColor",className:"text-blue-500"}),s.jsx("rect",{x:"38",y:"32",width:"8",height:"3",rx:"1.5",fill:"currentColor",className:"text-blue-500 animate-wave-left"}),s.jsx("rect",{x:"54",y:"32",width:"8",height:"3",rx:"1.5",fill:"currentColor",className:"text-blue-500 animate-wave-right"}),s.jsx("rect",{x:"44",y:"53",width:"4",height:"20",rx:"2",fill:"currentColor",className:"text-blue-500 animate-kick-left"}),s.jsx("rect",{x:"52",y:"53",width:"4",height:"20",rx:"2",fill:"currentColor",className:"text-blue-500 animate-kick-right"}),s.jsx("ellipse",{cx:"44",cy:"78",rx:"6",ry:"3",fill:"currentColor",className:"text-blue-600 animate-step-left"}),s.jsx("ellipse",{cx:"54",cy:"78",rx:"6",ry:"3",fill:"currentColor",className:"text-blue-600 animate-step-right"})]})}),t&&s.jsx("p",{className:Ge("text-gray-600 font-medium animate-pulse",a[e]),children:t})]})}function dne({text:e="Loading..."}){return s.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 backdrop-blur-sm flex items-center justify-center z-50",children:s.jsx(Dc,{size:"lg",text:e})})}function fne({text:e,className:t}){return s.jsx("div",{className:Ge("flex items-center justify-center py-8",t),children:s.jsx(Dc,{size:"md",text:e})})}function hne({variant:e,onClose:t}){const{toast:r}=Vr(),n=!!e,[a,i]=N.useState(!1),[o,l]=N.useState([]),[c,u]=N.useState((e==null?void 0:e.halfDay)||!1),[d,f]=N.useState((e==null?void 0:e.quarterDay)||!1),[h,m]=N.useState((e==null?void 0:e.hours)||!1),[g,p]=N.useState((e==null?void 0:e.workflowRequired)||!1),[y,b]=N.useState((e==null?void 0:e.noticePeriodAllowed)||!0),[x,w]=N.useState((e==null?void 0:e.documentsRequired)||!1),[v,j]=N.useState((e==null?void 0:e.lossOfPay)||!0),[S,_]=N.useState((e==null?void 0:e.deductHalfDay)||!1),[A,C]=N.useState((e==null?void 0:e.deductQuarterDay)||!1),[D,k]=N.useState((e==null?void 0:e.deductHours)||!1),[O,V]=N.useState((e==null?void 0:e.applicableAfterType)||"date_of_joining"),[G,Y]=N.useState((e==null?void 0:e.withdrawalBeforeApproval)!==!1),[W,P]=N.useState((e==null?void 0:e.withdrawalAfterApproval)||!1),[E,R]=N.useState((e==null?void 0:e.withdrawalNotAllowed)||!1),[I,ee]=N.useState([]),[L,q]=N.useState((e==null?void 0:e.documentDescription)||""),H=M=>{Y(M),M&&E&&R(!1)},B=M=>{P(M),M&&E&&R(!1)},de=M=>{R(M),M&&(Y(!1),P(!1))},{data:ce=[]}=Fe({queryKey:[`/api/employee-assignments/pto/${e==null?void 0:e.id}`],enabled:!!(e!=null&&e.id),staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchInterval:!1}),[ge,he]=N.useState([]),{data:K=[]}=Fe({queryKey:["/api/leave-types"],staleTime:5*60*1e3});N.useEffect(()=>{(async()=>{try{const be=(await vi()).map(eh);he(be),console.log("PTO Edit - External API loaded",be.length,"employees")}catch(oe){console.error("Error loading employees:",oe)}})()},[]),N.useEffect(()=>{if(ge.length>0&&o.length>0&&o.every(oe=>{var be;return((be=oe.user_name)==null?void 0:be.startsWith("Employee "))&&oe.firstName==="Employee"})){console.log("PTO Edit - Enhancing fallback data with external API data");const oe=o.map(U=>U.user_id||U.id),be=ge.filter(U=>{const te=oe.includes(U.user_id),xe=oe.includes(U.id);return te||xe});be.length>0&&(console.log("PTO Edit - Enhanced",be.length,"employees with API data"),l(be))}},[ge,o]),N.useEffect(()=>{if(!Array.isArray(ce))return;if(console.log("PTO Edit - Processing assignments:",ce.length,"assignments"),console.log("PTO Edit - All employees loaded:",ge.length,"employees"),ce.length===0){console.log("PTO Edit - No assignments found, clearing assigned employees"),l([]);return}const M=ce.map(be=>be.userId),oe=ce.map(be=>({user_id:be.userId,id:be.userId,user_name:`Employee ${be.userId}`,name:`Employee ${be.userId}`,firstName:"Employee",lastName:be.userId,email:`employee${be.userId}@company.com`,employeeNumber:be.userId,designation:"Employee",dateOfJoining:new Date().toISOString(),userRole:"employee",workerType:"regular",profilePhoto:null,phoneNumber:null,dateOfBirth:new Date().toISOString(),gender:"Other",reportingManager:null,leaveId:be.userId,isDifferentlyAbled:!1,lastWorkingDay:null,employee_number:be.userId}));if(ge.length>0){const be=ge.filter(U=>{const te=M.includes(U.user_id),xe=M.includes(U.id);return te||xe});be.length>0?(console.log("PTO Edit - Matched",be.length,"employees from external API"),l(be)):(console.log("PTO Edit - No matches found in external API, using fallback employees"),l(oe))}else console.log("PTO Edit - External API not loaded, using fallback employees to preserve assignments"),l(oe)},[ce,e==null?void 0:e.id]);const{register:fe,handleSubmit:ae,formState:{errors:Ne},reset:Se}=os({defaultValues:{leaveVariantName:(e==null?void 0:e.leaveVariantName)||(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",applicableAfter:(e==null?void 0:e.applicableAfter)||0,approvalDays:(e==null?void 0:e.approvalDays)||0,minimumHours:(e==null?void 0:e.minimumHours)||0,maxHours:(e==null?void 0:e.maxHours)||0,maxInstances:(e==null?void 0:e.maxInstances)||0,maxInstancesPeriod:(e==null?void 0:e.maxInstancesPeriod)||"Month",documentDescription:(e==null?void 0:e.documentDescription)||"",grantingPeriod:(e==null?void 0:e.grantingPeriod)||"Yearly"}});N.useEffect(()=>{e&&(console.log("PTO Form - Loading variant data:",e),u(e.halfDay||!1),f(e.quarterDay||!1),m(e.hours||!1),p(e.workflowRequired||!1),b(e.noticePeriodAllowed!==!1),w(e.documentsRequired||!1),j(e.lossOfPay!==!1),_(e.deductHalfDay||!1),C(e.deductQuarterDay||!1),k(e.deductHours||!1),V(e.applicableAfterType||"date_of_joining"),Y(e.withdrawalBeforeApproval!==!1),P(e.withdrawalAfterApproval||!1),R(e.withdrawalNotAllowed||!1),ee(e.deductibleLeaveTypes||[]),q(e.documentDescription||""),Se({leaveVariantName:e.name||"",description:e.description||"",applicableAfter:e.applicableAfter||0,approvalDays:e.approvalDays||0,minimumHours:e.minimumHours||0,maxHours:e.maxHours||0,maxInstances:e.maxInstances||0,maxInstancesPeriod:e.maxInstancesPeriod||"Month",documentDescription:e.documentDescription||"",grantingPeriod:e.grantingPeriod||"Yearly"}),console.log("PTO Form - Loaded applicableAfterType:",e.applicableAfterType||"date_of_joining"))},[e,Se]);const Ae=Ut({mutationFn:async M=>{const oe={name:M.leaveVariantName,description:M.description,enabled:!0,halfDay:c,quarterDay:d,hours:h,workflowRequired:g,documentsRequired:x,noticePeriodAllowed:y,applicableAfterType:O,applicableAfter:M.applicableAfter||0,approvalDays:M.approvalDays||0,minimumHours:M.minimumHours||0,maxHours:M.maxHours||0,maxInstances:M.maxInstances||0,maxInstancesPeriod:M.maxInstancesPeriod||"Month",grantingPeriod:M.grantingPeriod||"Yearly",lossOfPay:v,deductHalfDay:S,deductQuarterDay:A,deductHours:D,withdrawalBeforeApproval:G,withdrawalAfterApproval:W,withdrawalNotAllowed:E,deductibleLeaveTypes:I,documentDescription:L};console.log("PTO Variant Form - Submission payload:",oe);const be=n?await Ct("PATCH",`/api/pto-variants/${e.id}`,oe):await Ct("POST","/api/pto-variants",oe);if(!n&&o.length>0&&(be!=null&&be.id)){const U=o.map(te=>({userId:te.user_id||te.id,leaveVariantId:be.id,assignmentType:"pto_variant"}));console.log("PTO new variant assignment payload:",U),await Ct("POST","/api/employee-assignments/bulk",{assignments:U})}return be},onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/pto-variants"]}),Ye.invalidateQueries({queryKey:["/api/employee-assignments"]}),r({title:"Success",description:`PTO variant ${n?"updated":"created"} successfully.`}),t()},onError:()=>{r({title:"Error",description:`Failed to ${n?"update":"create"} PTO variant.`,variant:"destructive"})}}),Oe=M=>{var be,U;if(!((be=M.leaveVariantName)!=null&&be.trim())){r({title:"Validation Error",description:"PTO Variant Name is required.",variant:"destructive"});return}if(!((U=M.description)!=null&&U.trim())){r({title:"Validation Error",description:"Description is required.",variant:"destructive"});return}if(x&&!L.trim()){r({title:"Validation Error",description:"Document description is required when supporting documents are required.",variant:"destructive"});return}const oe={...M,name:M.leaveVariantName,halfDay:c,quarterDay:d,hours:h,workflowRequired:g,noticePeriodAllowed:y,documentsRequired:x,lossOfPay:v,deductHalfDay:S,deductQuarterDay:A,deductHours:D};Ae.mutate(oe)};return s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto relative",children:[Ae.isPending&&s.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 backdrop-blur-sm flex items-center justify-center z-50 rounded-lg",children:s.jsx(Dc,{size:"lg",text:n?"Updating PTO variant...":"Creating PTO variant..."})}),s.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n?"Edit PTO Variant":"New PTO Variant"}),s.jsx(se,{variant:"outline",onClick:t,className:"text-green-600 border-green-600 hover:bg-green-50",children:"Go Back"})]})}),s.jsx("form",{onSubmit:ae(Oe),className:"p-6",children:s.jsxs("div",{className:"space-y-8",children:[s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"PTO units allowed"}),s.jsxs("div",{className:"flex items-center space-x-8",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"halfDay",className:"rounded",checked:c,onChange:M=>u(M.target.checked)}),s.jsx("label",{htmlFor:"halfDay",className:"text-sm font-medium",children:"Half Day"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"quarterDay",className:"rounded",checked:d,onChange:M=>f(M.target.checked)}),s.jsx("label",{htmlFor:"quarterDay",className:"text-sm font-medium",children:"Quarter Day"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"hours",className:"rounded",checked:h,onChange:M=>m(M.target.checked)}),s.jsx("label",{htmlFor:"hours",className:"text-sm font-medium",children:"Hours"})]})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:["PTO Variant Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Create tailored PTO policies for specific groups of employees using variants"}),s.jsx("input",{...fe("leaveVariantName",{required:"PTO variant name is required"}),type:"text",placeholder:"eg. For Factory Employees",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${Ne.leaveVariantName?"border-red-500":"border-gray-300"}`}),Ne.leaveVariantName&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:Ne.leaveVariantName.message})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:["Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{...fe("description",{required:"Description is required"}),placeholder:"eg. Need time off for personal errands? Use PTO.",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[80px] ${Ne.description?"border-red-500":"border-gray-300"}`}),Ne.description&&s.jsx("p",{className:"text-xs text-red-500 mt-1",children:Ne.description.message})]})]}),s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Eligibility Criteria"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Applicable after"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",id:"probation_end",name:"applicableAfterType",value:"probation_end",checked:O==="probation_end",onChange:()=>V("probation_end"),className:"w-4 h-4"}),s.jsx("label",{htmlFor:"probation_end",className:"text-sm",children:"Probation period ends"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",id:"date_of_joining",name:"applicableAfterType",value:"date_of_joining",checked:O==="date_of_joining",onChange:()=>V("date_of_joining"),className:"w-4 h-4"}),s.jsx("label",{htmlFor:"date_of_joining",className:"text-sm",children:"On date of joining"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",id:"days",name:"applicableAfterType",value:"days",checked:O==="days",onChange:()=>V("days"),className:"w-4 h-4"}),s.jsx("label",{htmlFor:"days",className:"text-sm",children:"Specified number of days:"}),s.jsx("input",{...fe("applicableAfter",{valueAsNumber:!0}),type:"number",className:"w-20 text-center px-2 py-1 border border-gray-300 rounded",min:"0",disabled:O!=="days",placeholder:"0"}),s.jsx("span",{className:"text-sm text-gray-500",children:"(days) from date of joining"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"Does this require a review workflow for approval?"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{type:"button",size:"sm",onClick:()=>p(!0),className:g?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Workflow"}),s.jsx(se,{type:"button",size:"sm",onClick:()=>p(!1),className:g?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-green-600 hover:bg-green-700 text-white",children:"No Workflow"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"If leave you select 'No workflow' then PTO will be auto-approved and leave balance will be deducted immediately."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Withdrawal of application allowed"}),g?s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:G,onChange:M=>H(M.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Before approval"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:W,onChange:M=>B(M.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"After approval"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:E,onChange:M=>de(M.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Not allowed"})]})]}):s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:!E,onChange:M=>{M.target.checked?(R(!1),Y(!0)):(R(!0),Y(!1),P(!1))},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Allowed"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:E,onChange:M=>{M.target.checked?(R(!0),Y(!1),P(!1)):(R(!1),Y(!0))},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Not allowed"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"Approval request should be made"}),s.jsx("input",{...fe("approvalDays",{valueAsNumber:!0}),type:"number",className:"w-20 text-center px-2 py-1 border border-gray-300 rounded",min:"0"}),s.jsx("span",{className:"text-sm text-gray-500",children:"(days)"}),s.jsx("span",{className:"text-sm text-gray-700",children:"in advance"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"Minimum hours required"}),s.jsx("input",{...fe("minimumHours",{valueAsNumber:!0}),type:"number",className:"w-20 text-center px-2 py-1 border border-gray-300 rounded",min:"0"}),s.jsx("span",{className:"text-sm text-gray-500",children:"(hours)"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"Max hours allowed"}),s.jsx("input",{...fe("maxHours",{valueAsNumber:!0}),type:"number",className:"w-20 text-center px-2 py-1 border border-gray-300 rounded",min:"0"}),s.jsx("span",{className:"text-sm text-gray-500",children:"(hours)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"Max instances"}),s.jsx("input",{...fe("maxInstances",{valueAsNumber:!0}),type:"number",className:"w-20 text-center px-2 py-1 border border-gray-300 rounded",min:"0"}),s.jsx("span",{className:"text-sm text-gray-500",children:"(days)"}),s.jsx("span",{className:"text-sm text-gray-700",children:"in a"}),s.jsxs("select",{...fe("maxInstancesPeriod"),className:"px-3 py-1 border border-gray-300 rounded",children:[s.jsx("option",{value:"Month",children:"Month"}),s.jsx("option",{value:"Quarter",children:"Quarter"}),s.jsx("option",{value:"Year",children:"Year"})]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"If the value is 0, it is understood that there is no limit."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"During notice period, PTO is"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{type:"button",size:"sm",onClick:()=>b(!0),className:y?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Allowed"}),s.jsx(se,{type:"button",size:"sm",onClick:()=>b(!1),className:y?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-green-600 hover:bg-green-700 text-white",children:"Not Allowed"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"Supporting documents are"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{type:"button",size:"sm",onClick:()=>w(!0),className:x?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Required"}),s.jsx(se,{type:"button",size:"sm",onClick:()=>w(!1),className:x?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-green-600 hover:bg-green-700 text-white",children:"Not Required"})]}),x&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"text-sm text-gray-700",children:["Document Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:L,onChange:M=>q(M.target.value),placeholder:"Enter the details of the documents to be added. This message will be displayed to your employees while uploading documents.",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[80px] ${x&&!L.trim()?"border-red-500 focus:ring-red-500":"border-gray-300"}`}),x&&!L.trim()&&s.jsx("p",{className:"text-xs text-red-500",children:"Description is required when supporting documents are required."})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"If Max. PTO instances/ hours are crossed"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{type:"button",size:"sm",onClick:()=>j(!0),className:v?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Loss of Pay"}),s.jsx(se,{type:"button",size:"sm",onClick:()=>j(!1),className:v?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-green-600 hover:bg-green-700 text-white",children:"Deduct from Leave Balance"})]})]}),v&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"Deduct Pay for"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"deductHalfDay",className:"rounded",checked:S,onChange:M=>_(M.target.checked)}),s.jsx("label",{htmlFor:"deductHalfDay",className:"text-sm",children:"Half Day"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"deductQuarterDay",className:"rounded",checked:A,onChange:M=>C(M.target.checked)}),s.jsx("label",{htmlFor:"deductQuarterDay",className:"text-sm",children:"Quarter Day"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"deductHours",className:"rounded",checked:D,onChange:M=>k(M.target.checked)}),s.jsx("label",{htmlFor:"deductHours",className:"text-sm",children:"Hours"})]})]})]}),!v&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"Select leave types to deduct from:"}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-gray-200 rounded p-3",children:K.filter(M=>M.enabled!==!1).map(M=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:I.includes(M.id.toString()),onChange:oe=>{oe.target.checked?ee([...I,M.id.toString()]):ee(I.filter(be=>be!==M.id.toString()))},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:M.name})]},M.id))}),I.length===0&&s.jsx("p",{className:"text-xs text-red-500",children:"Please select at least one leave type for deduction."})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"PTO will be granted"}),s.jsxs("select",{...fe("grantingPeriod"),className:"px-3 py-1 border border-gray-300 rounded",children:[s.jsx("option",{value:"Yearly",children:"Yearly"}),s.jsx("option",{value:"Half yearly",children:"Half yearly"}),s.jsx("option",{value:"Quarterly",children:"Quarterly"}),s.jsx("option",{value:"Monthly",children:"Monthly"})]})]})]})]})]})}),s.jsxs(Ce,{children:[s.jsxs(Tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Et,{className:"text-lg",children:"Assign to Employees"}),s.jsxs(se,{type:"button",variant:"outline",size:"sm",onClick:()=>{console.log("Assign Employees button clicked!"),i(!0)},className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:[s.jsx(Bn,{className:"w-4 h-4 mr-2"}),o.length>0?"Edit Assignment":"Assign Employees"]})]}),o.length>0&&s.jsx(Ie,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[o.length," employee",o.length>1?"s":""," assigned"]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.slice(0,3).map((M,oe)=>s.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 rounded-lg px-3 py-1",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-blue-600",children:(M.user_name||M.name||`${M.firstName||""} ${M.lastName||""}`.trim()||M.employeeNumber||M.user_id).charAt(0).toUpperCase()})}),s.jsx("span",{className:"text-xs text-gray-700",children:M.user_name||M.name||`${M.firstName||""} ${M.lastName||""}`.trim()||M.employeeNumber||M.user_id})]},M.user_id)),o.length>3&&s.jsxs("span",{className:"text-xs text-gray-500",children:["+",o.length-3," more"]})]})]})})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[s.jsx(se,{type:"button",variant:"outline",onClick:t,className:"text-gray-600 border-gray-300 hover:bg-gray-50",children:"Discard"}),s.jsx(se,{type:"submit",disabled:Ae.isPending,className:"bg-green-600 hover:bg-green-700 text-white",children:Ae.isPending?"Processing...":n?"Update Variant":"Create Variant"})]})]})}),a&&s.jsx(g0,{onClose:()=>{console.log("Closing Employee Assignment dialog"),i(!1)},preSelectedEmployees:o,applicableGenders:[],onAssign:async M=>{try{if(!(e!=null&&e.id)){l(M),r({title:"Success",description:`${M.length} employee${M.length>1?"s":""} will be assigned when variant is created.`});return}const oe=M.map(be=>({userId:be.user_id||be.id,leaveVariantId:e.id,assignmentType:"pto_variant"}));console.log("PTO Assignment payload:",oe),await Ct("POST","/api/employee-assignments/bulk",{assignments:oe}),l(M),Ye.invalidateQueries({queryKey:[`/api/employee-assignments/${e.id}`]}),r({title:"Success",description:`${M.length} employee${M.length>1?"s":""} assigned successfully.`})}catch{r({title:"Error",description:"Failed to save employee assignments.",variant:"destructive"})}}})]})}function c$({onNext:e,onPrevious:t,isLast:r,isLoading:n,showNavigation:a=!0}){const{toast:i}=Vr(),[o,l]=N.useState(!0),[c,u]=N.useState(!1),[d,f]=N.useState(null),{data:h}=Fe({queryKey:["/api/pto-config"]}),{data:m=[]}=Fe({queryKey:["/api/pto-variants"]});N.useEffect(()=>{h&&typeof h=="object"&&"enabled"in h&&l(h.enabled!==!1)},[h]);const g=Ut({mutationFn:async j=>await Ct("POST","/api/pto-config",{enabled:j}),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/pto-config"]}),i({title:"Success",description:o?"BTO enabled successfully.":"BTO disabled successfully."})},onError:j=>{i({title:"Error",description:"Failed to update BTO configuration.",variant:"destructive"})}}),p=Ut({mutationFn:async j=>await Ct("DELETE",`/api/pto-variants/${j}`),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/pto-variants"]}),i({title:"Success",description:"BTO variant deleted successfully."})}}),y=j=>{l(j),g.mutate(j)},b=()=>{f(null),u(!0)},x=j=>{f(j),u(!0)},w=j=>{j&&j.id&&confirm("Are you sure you want to delete this variant?")&&p.mutate(j.id)},v=()=>{e()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"w-full",children:[s.jsx("div",{className:"flex items-center justify-between mb-8",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"BTO (Break Time Off)"}),s.jsx(Gl,{checked:o,onCheckedChange:y,className:"data-[state=checked]:bg-green-600"})]})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Variants"}),Array.isArray(m)&&m.map(j=>s.jsx(Ce,{className:"mb-4",children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:j.name}),s.jsx("p",{className:"text-sm text-gray-500",children:"BTO Variant"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(se,{variant:"outline",size:"sm",className:"text-orange-600 border-orange-200 hover:bg-orange-50",onClick:()=>w(j),children:["Delete",s.jsx(ua,{className:"w-4 h-4 ml-1"})]}),s.jsxs(se,{variant:"outline",size:"sm",className:"text-gray-600 border-gray-300 hover:bg-gray-50",onClick:()=>x(j),children:["Edit",s.jsx(Nu,{className:"w-4 h-4 ml-1"})]})]})]})})},j.id)),(!Array.isArray(m)||m.length===0)&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("p",{children:"No BTO variants created yet."}),s.jsx("p",{className:"text-sm",children:'Click "Create BTO variant" to get started.'})]}),s.jsxs(se,{variant:"outline",onClick:b,className:"text-green-600 border-green-600 hover:bg-green-50",children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Create BTO variant"]})]}),a&&s.jsxs("div",{className:"flex justify-between pt-8",children:[s.jsx(se,{type:"button",variant:"outline",onClick:t,className:"text-gray-600 border-gray-300 hover:bg-gray-50",children:"Previous"}),s.jsx(se,{onClick:v,disabled:n,className:"bg-primary hover:bg-primary/90",children:r?"Complete Setup":"Next"})]})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx(hne,{variant:d,onClose:()=>u(!1)})})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Hx={};Hx.version="0.18.5";var u$=1252,mne=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],d$=function(e){mne.indexOf(e)!=-1&&(u$=e)};function pne(){d$(1252)}var Qm=function(e){d$(e)};function gne(){Qm(1200),pne()}var og=function(t){return String.fromCharCode(t)},DD=function(t){return String.fromCharCode(t)},zx,jl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Jm(e){for(var t="",r=0,n=0,a=0,i=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,n=e.charCodeAt(u++),o=(r&3)<<4|n>>4,a=e.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),t+=jl.charAt(i)+jl.charAt(o)+jl.charAt(l)+jl.charAt(c);return t}function Fo(e){var t="",r=0,n=0,a=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=jl.indexOf(e.charAt(u++)),o=jl.indexOf(e.charAt(u++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=jl.indexOf(e.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=jl.indexOf(e.charAt(u++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var dr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Vo=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function uu(e){return dr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function kD(e){return dr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var ri=function(t){return dr?Vo(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function a1(e){if(typeof ArrayBuffer>"u")return ri(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function x0(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function xne(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var Gn=dr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Vo(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function yne(e){for(var t=[],r=0,n=e.length+250,a=uu(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(t.push(a.slice(0,r)),r=0,a=uu(65535),n=65530)}return t.push(a.slice(0,r)),Gn(t)}var pm=/\u0000/g,lg=/[\u0001-\u0006]/g;function Id(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function ii(e,t){var r=""+e;return r.length>=t?r:Qr("0",t-r.length)+r}function iT(e,t){var r=""+e;return r.length>=t?r:Qr(" ",t-r.length)+r}function qx(e,t){var r=""+e;return r.length>=t?r:r+Qr(" ",t-r.length)}function vne(e,t){var r=""+Math.round(e);return r.length>=t?r:Qr("0",t-r.length)+r}function wne(e,t){var r=""+e;return r.length>=t?r:Qr("0",t-r.length)+r}var OD=Math.pow(2,32);function Zu(e,t){if(e>OD||e<-OD)return vne(e,t);var r=Math.round(e);return wne(r,t)}function Gx(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var PD=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],ab=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function bne(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Zr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},ID={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},jne={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Kx(e,t,r){for(var n=e<0?-1:1,a=e*n,i=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),l=f*o+i,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),i=o,o=l,c=u,u=d;if(d>t&&(u>t?(d=c,l=i):(d=u,l=o)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function cg(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),i=0,o=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=Cne(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=i,l}var f$=new Date(1899,11,31,0,0,0),Nne=f$.getTime(),Sne=new Date(1900,2,1,0,0,0);function h$(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Sne&&(r+=24*60*60*1e3),(r-(Nne+(e.getTimezoneOffset()-f$.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function oT(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function _ne(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Tne(e){var t=e<0?12:11,r=oT(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Ene(e){var t=oT(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Ane(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Tne(e):t===10?r=e.toFixed(10).substr(0,12):r=Ene(e),oT(_ne(r.toUpperCase()))}function SN(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Ane(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Kl(14,h$(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Cne(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Dne(e,t,r,n){var a="",i=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return ab[r.m-1][1];case 5:return ab[r.m-1][0];default:return ab[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return PD[r.q][0];default:return PD[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?ii(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(a=ii(i,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?ii(c,u):"";return d}function Nl(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var m$=/%/g;function kne(e,t,r){var n=t.replace(m$,""),a=t.length-n.length;return No(e,n,r*Math.pow(10,2*a))+Qr("%",a)}function One(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return No(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function p$(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+p$(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var g$=/# (\?+)( ?)\/( ?)(\d+)/;function Pne(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),i=Math.floor(a/n),o=a-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?Qr(" ",e[1].length+1+e[4].length):iT(o,e[1].length)+e[2]+"/"+e[3]+ii(l,e[4].length))}function Ine(e,t,r){return r+(t===0?"":""+t)+Qr(" ",e[1].length+2+e[4].length)}var x$=/^#*0*\.([0#]+)/,y$=/\).*[0#]/,v$=/\(###\) ###\\?-####/;function ja(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function MD(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function RD(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Mne(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Rne(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function bs(e,t,r){if(e.charCodeAt(0)===40&&!t.match(y$)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?bs("n",n,r):"("+bs("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return One(e,t,r);if(t.indexOf("%")!==-1)return kne(e,t,r);if(t.indexOf("E")!==-1)return p$(t,r);if(t.charCodeAt(0)===36)return"$"+bs(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Zu(c,t.length);if(t.match(/^[#?]+$/))return a=Zu(r,0),a==="0"&&(a=""),a.length>t.length?a:ja(t.substr(0,t.length-a.length))+a;if(i=t.match(g$))return Pne(i,c,u);if(t.match(/^#+0+$/))return u+Zu(c,t.length-t.indexOf("0"));if(i=t.match(x$))return a=MD(r,i[1].length).replace(/^([^\.]+)$/,"$1."+ja(i[1])).replace(/\.$/,"."+ja(i[1])).replace(/\.(\d*)$/,function(g,p){return"."+p+Qr("0",ja(i[1]).length-p.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+MD(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Nl(Zu(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+bs(e,t,-r):Nl(""+(Math.floor(r)+Mne(r,i[1].length)))+"."+ii(RD(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return bs(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Id(bs(e,t.replace(/[\\-]/g,""),r)),o=0,Id(Id(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<a.length?a.charAt(o++):g==="0"?"0":""}));if(t.match(v$))return a=bs(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Kx(c,Math.pow(10,o)-1,!1),a=""+u,d=No("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=qx(l[2],o),d.length<i[4].length&&(d=ja(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Kx(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?iT(l[1],o)+i[2]+"/"+i[3]+qx(l[2],o):Qr(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=Zu(r,0),t.length<=a.length?a:ja(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,h=t.length-a.length-f;return ja(t.substr(0,f)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=RD(r,i[1].length),r<0?"-"+bs(e,t,-r):Nl(Rne(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?ii(0,3-g.length):"")+g})+"."+ii(o,i[1].length);switch(t){case"###,##0.00":return bs(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=Nl(Zu(c,0));return m!=="0"?u+m:"";case"###,###.00":return bs(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return bs(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Fne(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return No(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Lne(e,t,r){var n=t.replace(m$,""),a=t.length-n.length;return No(e,n,r*Math.pow(10,2*a))+Qr("%",a)}function w$(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+w$(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+i)%a)+"."+d.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function _i(e,t,r){if(e.charCodeAt(0)===40&&!t.match(y$)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?_i("n",n,r):"("+_i("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Fne(e,t,r);if(t.indexOf("%")!==-1)return Lne(e,t,r);if(t.indexOf("E")!==-1)return w$(t,r);if(t.charCodeAt(0)===36)return"$"+_i(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+ii(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:ja(t.substr(0,t.length-a.length))+a;if(i=t.match(g$))return Ine(i,c,u);if(t.match(/^#+0+$/))return u+ii(c,t.length-t.indexOf("0"));if(i=t.match(x$))return a=(""+r).replace(/^([^\.]+)$/,"$1."+ja(i[1])).replace(/\.$/,"."+ja(i[1])),a=a.replace(/\.(\d*)$/,function(g,p){return"."+p+Qr("0",ja(i[1]).length-p.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Nl(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+_i(e,t,-r):Nl(""+r)+"."+Qr("0",i[1].length);if(i=t.match(/^#,#*,#0/))return _i(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Id(_i(e,t.replace(/[\\-]/g,""),r)),o=0,Id(Id(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<a.length?a.charAt(o++):g==="0"?"0":""}));if(t.match(v$))return a=_i(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Kx(c,Math.pow(10,o)-1,!1),a=""+u,d=No("n",i[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+i[2]+"/"+i[3],d=qx(l[2],o),d.length<i[4].length&&(d=ja(i[4].substr(i[4].length-d.length))+d),a+=d,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Kx(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?iT(l[1],o)+i[2]+"/"+i[3]+qx(l[2],o):Qr(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:ja(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=t.indexOf(".")-o,h=t.length-a.length-f;return ja(t.substr(0,f)+a+t.substr(t.length-h))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+_i(e,t,-r):Nl(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?ii(0,3-g.length):"")+g})+"."+ii(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=Nl(""+c);return m!=="0"?u+m:"";default:if(t.match(/\.[0#?]*$/))return _i(e,t.slice(0,t.lastIndexOf(".")),r)+ja(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function No(e,t,r){return(r|0)===r?_i(e,t,r):bs(e,t,r)}function $ne(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var b$=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function j$(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":Gx(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(b$))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Bne(e,t,r,n){for(var a=[],i="",o=0,l="",c="t",u,d,f,h="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!Gx(e,o))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(f=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(f);a[a.length]={t:"t",v:i},++o;break;case"\\":var m=e.charAt(++o),g=m==="("||m===")"?m:"t";a[a.length]={t:g,v:m},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=cg(t,r,e.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=cg(t,r),u==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),a[a.length]={t:l,v:i},c=l;break;case"A":case"a":case"上":var p={t:l,v:l};if(u==null&&(u=cg(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",h="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",o+=5,h="h"):e.substr(o,5).toUpperCase()==="上午/下午"?(u!=null&&(p.v=u.H>=12?"下午":"上午"),p.t="T",o+=5,h="h"):(p.t="t",++o),u==null&&p.t==="T")return"";a[a.length]=p,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(b$)){if(u==null&&(u=cg(t,r),u==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",j$(e)||(a[a.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;a[a.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;a[a.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++o;break}var y=0,b=0,x;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=h,c="h",y<1&&(y=1);break;case"s":(x=a[o].v.match(/\.0+$/))&&(b=Math.max(b,x[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&a[o].v.match(/[Hh]/)&&(y=1),y<2&&a[o].v.match(/[Mm]/)&&(y=2),y<3&&a[o].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var w="",v;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=Dne(a[o].t.charCodeAt(0),a[o].v,u,b),a[o].t="t";break;case"n":case"?":for(v=o+1;a[v]!=null&&((l=a[v].t)==="?"||l==="D"||(l===" "||l==="t")&&a[v+1]!=null&&(a[v+1].t==="?"||a[v+1].t==="t"&&a[v+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[v].v==="/"||a[v].v===" "&&a[v+1]!=null&&a[v+1].t=="?"));)a[o].v+=a[v].v,a[v]={v:"",t:";"},++v;w+=a[o].v,o=v-1;break;case"G":a[o].t="t",a[o].v=SN(t,r);break}var j="",S,_;if(w.length>0){w.charCodeAt(0)==40?(S=t<0&&w.charCodeAt(0)===45?-t:t,_=No("n",w,S)):(S=t<0&&n>1?-t:t,_=No("n",w,S),S<0&&a[0]&&a[0].t=="t"&&(_=_.substr(1),a[0].v="-"+a[0].v)),v=_.length-1;var A=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){A=o;break}var C=a.length;if(A===a.length&&_.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(v>=a[o].v.length-1?(v-=a[o].v.length,a[o].v=_.substr(v+1,a[o].v.length)):v<0?a[o].v="":(a[o].v=_.substr(0,v+1),v=-1),a[o].t="t",C=o);v>=0&&C<a.length&&(a[C].v=_.substr(0,v+1)+a[C].v)}else if(A!==a.length&&_.indexOf("E")===-1){for(v=_.indexOf(".")-1,o=A;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===A?a[o].v.indexOf(".")-1:a[o].v.length-1,j=a[o].v.substr(d+1);d>=0;--d)v>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(j=_.charAt(v--)+j);a[o].v=j,a[o].t="t",C=o}for(v>=0&&C<a.length&&(a[C].v=_.substr(0,v+1)+a[C].v),v=_.indexOf(".")+1,o=A;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==A)){for(d=a[o].v.indexOf(".")>-1&&o===A?a[o].v.indexOf(".")+1:0,j=a[o].v.substr(0,d);d<a[o].v.length;++d)v<_.length&&(j+=_.charAt(v++));a[o].v=j,a[o].t="t",C=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(S=n>1&&t<0&&o>0&&a[o-1].v==="-"?-t:t,a[o].v=No(a[o].t,a[o].v,S),a[o].t="t");var D="";for(o=0;o!==a.length;++o)a[o]!=null&&(D+=a[o].v);return D}var FD=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function LD(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Une(e,t){var r=$ne(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(FD),l=r[1].match(FD);return LD(t,o)?[n,r[0]]:LD(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function Kl(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Zr)[e],n==null&&(n=r.table&&r.table[ID[e]]||Zr[ID[e]]),n==null&&(n=jne[e]||"General");break}if(Gx(n,0))return SN(t,r);t instanceof Date&&(t=h$(t,r.date1904));var a=Une(n,t);if(Gx(a[1]))return SN(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Bne(a[1],t,r,a[0])}function N$(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Zr[r]==null){t<0&&(t=r);continue}if(Zr[r]==e){t=r;break}}t<0&&(t=391)}return Zr[t]=e,t}function s1(e){for(var t=0;t!=392;++t)e[t]!==void 0&&N$(e[t],t)}function i1(){Zr=bne()}var S$=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Wne(e){var t=typeof e=="number"?Zr[e]:e;return t=t.replace(S$,"(\\d+)"),new RegExp("^"+t+"$")}function Vne(e,t,r){var n=-1,a=-1,i=-1,o=-1,l=-1,c=-1;(t.match(S$)||[]).forEach(function(f,h){var m=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=m;break;case"d":i=m;break;case"h":o=m;break;case"s":c=m;break;case"m":o>=0?l=m:a=m;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&i==-1?d:u+"T"+d}var Hne=function(){var e={};e.version="1.2.0";function t(){for(var _=0,A=new Array(256),C=0;C!=256;++C)_=C,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,A[C]=_;return typeof Int32Array<"u"?new Int32Array(A):A}var r=t();function n(_){var A=0,C=0,D=0,k=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)k[D]=_[D];for(D=0;D!=256;++D)for(C=_[D],A=256+D;A<4096;A+=256)C=k[A]=C>>>8^_[C&255];var O=[];for(D=1;D!=16;++D)O[D-1]=typeof Int32Array<"u"?k.subarray(D*256,D*256+256):k.slice(D*256,D*256+256);return O}var a=n(r),i=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],m=a[8],g=a[9],p=a[10],y=a[11],b=a[12],x=a[13],w=a[14];function v(_,A){for(var C=A^-1,D=0,k=_.length;D<k;)C=C>>>8^r[(C^_.charCodeAt(D++))&255];return~C}function j(_,A){for(var C=A^-1,D=_.length-15,k=0;k<D;)C=w[_[k++]^C&255]^x[_[k++]^C>>8&255]^b[_[k++]^C>>16&255]^y[_[k++]^C>>>24]^p[_[k++]]^g[_[k++]]^m[_[k++]]^h[_[k++]]^f[_[k++]]^d[_[k++]]^u[_[k++]]^c[_[k++]]^l[_[k++]]^o[_[k++]]^i[_[k++]]^r[_[k++]];for(D+=15;k<D;)C=C>>>8^r[(C^_[k++])&255];return~C}function S(_,A){for(var C=A^-1,D=0,k=_.length,O=0,V=0;D<k;)O=_.charCodeAt(D++),O<128?C=C>>>8^r[(C^O)&255]:O<2048?(C=C>>>8^r[(C^(192|O>>6&31))&255],C=C>>>8^r[(C^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,V=_.charCodeAt(D++)&1023,C=C>>>8^r[(C^(240|O>>8&7))&255],C=C>>>8^r[(C^(128|O>>2&63))&255],C=C>>>8^r[(C^(128|V>>6&15|(O&3)<<4))&255],C=C>>>8^r[(C^(128|V&63))&255]):(C=C>>>8^r[(C^(224|O>>12&15))&255],C=C>>>8^r[(C^(128|O>>6&63))&255],C=C>>>8^r[(C^(128|O&63))&255]);return~C}return e.table=r,e.bstr=v,e.buf=j,e.str=S,e}(),Er=function(){var t={};t.version="1.2.1";function r(z,re){for(var X=z.split("/"),J=re.split("/"),ne=0,T=0,F=Math.min(X.length,J.length);ne<F;++ne){if(T=X[ne].length-J[ne].length)return T;if(X[ne]!=J[ne])return X[ne]<J[ne]?-1:1}return X.length-J.length}function n(z){if(z.charAt(z.length-1)=="/")return z.slice(0,-1).indexOf("/")===-1?z:n(z.slice(0,-1));var re=z.lastIndexOf("/");return re===-1?z:z.slice(0,re+1)}function a(z){if(z.charAt(z.length-1)=="/")return a(z.slice(0,-1));var re=z.lastIndexOf("/");return re===-1?z:z.slice(re+1)}function i(z,re){typeof re=="string"&&(re=new Date(re));var X=re.getHours();X=X<<6|re.getMinutes(),X=X<<5|re.getSeconds()>>>1,z.write_shift(2,X);var J=re.getFullYear()-1980;J=J<<4|re.getMonth()+1,J=J<<5|re.getDate(),z.write_shift(2,J)}function o(z){var re=z.read_shift(2)&65535,X=z.read_shift(2)&65535,J=new Date,ne=X&31;X>>>=5;var T=X&15;X>>>=4,J.setMilliseconds(0),J.setFullYear(X+1980),J.setMonth(T-1),J.setDate(ne);var F=re&31;re>>>=5;var Z=re&63;return re>>>=6,J.setHours(re),J.setMinutes(Z),J.setSeconds(F<<1),J}function l(z){es(z,0);for(var re={},X=0;z.l<=z.length-4;){var J=z.read_shift(2),ne=z.read_shift(2),T=z.l+ne,F={};switch(J){case 21589:X=z.read_shift(1),X&1&&(F.mtime=z.read_shift(4)),ne>5&&(X&2&&(F.atime=z.read_shift(4)),X&4&&(F.ctime=z.read_shift(4))),F.mtime&&(F.mt=new Date(F.mtime*1e3));break}z.l=T,re[J]=F}return re}var c;function u(){return c||(c={})}function d(z,re){if(z[0]==80&&z[1]==75)return fc(z,re);if((z[0]|32)==109&&(z[1]|32)==105)return hc(z,re);if(z.length<512)throw new Error("CFB file size "+z.length+" < 512");var X=3,J=512,ne=0,T=0,F=0,Z=0,Q=0,ie=[],ue=z.slice(0,512);es(ue,0);var Te=f(ue);switch(X=Te[0],X){case 3:J=512;break;case 4:J=4096;break;case 0:if(Te[1]==0)return fc(z,re);default:throw new Error("Major Version: Expected 3 or 4 saw "+X)}J!==512&&(ue=z.slice(0,J),es(ue,28));var _e=z.slice(0,J);h(ue,X);var Ee=ue.read_shift(4,"i");if(X===3&&Ee!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ee);ue.l+=4,F=ue.read_shift(4,"i"),ue.l+=4,ue.chk("00100000","Mini Stream Cutoff Size: "),Z=ue.read_shift(4,"i"),ne=ue.read_shift(4,"i"),Q=ue.read_shift(4,"i"),T=ue.read_shift(4,"i");for(var we=-1,De=0;De<109&&(we=ue.read_shift(4,"i"),!(we<0));++De)ie[De]=we;var Be=m(z,J);y(Q,T,Be,J,ie);var Ve=x(Be,F,ie,J);Ve[F].name="!Directory",ne>0&&Z!==V&&(Ve[Z].name="!MiniFAT"),Ve[ie[0]].name="!FAT",Ve.fat_addrs=ie,Ve.ssz=J;var At={},Bt=[],nn=[],an=[];w(F,Ve,Be,Bt,ne,At,nn,Z),g(nn,an,Bt),Bt.shift();var He={FileIndex:nn,FullPaths:an};return re&&re.raw&&(He.raw={header:_e,sectors:Be}),He}function f(z){if(z[z.l]==80&&z[z.l+1]==75)return[0,0];z.chk(G,"Header Signature: "),z.l+=16;var re=z.read_shift(2,"u");return[z.read_shift(2,"u"),re]}function h(z,re){var X=9;switch(z.l+=2,X=z.read_shift(2)){case 9:if(re!=3)throw new Error("Sector Shift: Expected 9 saw "+X);break;case 12:if(re!=4)throw new Error("Sector Shift: Expected 12 saw "+X);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+X)}z.chk("0600","Mini Sector Shift: "),z.chk("000000000000","Reserved: ")}function m(z,re){for(var X=Math.ceil(z.length/re)-1,J=[],ne=1;ne<X;++ne)J[ne-1]=z.slice(ne*re,(ne+1)*re);return J[X-1]=z.slice(X*re),J}function g(z,re,X){for(var J=0,ne=0,T=0,F=0,Z=0,Q=X.length,ie=[],ue=[];J<Q;++J)ie[J]=ue[J]=J,re[J]=X[J];for(;Z<ue.length;++Z)J=ue[Z],ne=z[J].L,T=z[J].R,F=z[J].C,ie[J]===J&&(ne!==-1&&ie[ne]!==ne&&(ie[J]=ie[ne]),T!==-1&&ie[T]!==T&&(ie[J]=ie[T])),F!==-1&&(ie[F]=J),ne!==-1&&J!=ie[J]&&(ie[ne]=ie[J],ue.lastIndexOf(ne)<Z&&ue.push(ne)),T!==-1&&J!=ie[J]&&(ie[T]=ie[J],ue.lastIndexOf(T)<Z&&ue.push(T));for(J=1;J<Q;++J)ie[J]===J&&(T!==-1&&ie[T]!==T?ie[J]=ie[T]:ne!==-1&&ie[ne]!==ne&&(ie[J]=ie[ne]));for(J=1;J<Q;++J)if(z[J].type!==0){if(Z=J,Z!=ie[Z])do Z=ie[Z],re[J]=re[Z]+"/"+re[J];while(Z!==0&&ie[Z]!==-1&&Z!=ie[Z]);ie[J]=-1}for(re[0]+="/",J=1;J<Q;++J)z[J].type!==2&&(re[J]+="/")}function p(z,re,X){for(var J=z.start,ne=z.size,T=[],F=J;X&&ne>0&&F>=0;)T.push(re.slice(F*O,F*O+O)),ne-=O,F=_c(X,F*4);return T.length===0?Pe(0):Gn(T).slice(0,z.size)}function y(z,re,X,J,ne){var T=V;if(z===V){if(re!==0)throw new Error("DIFAT chain shorter than expected")}else if(z!==-1){var F=X[z],Z=(J>>>2)-1;if(!F)return;for(var Q=0;Q<Z&&(T=_c(F,Q*4))!==V;++Q)ne.push(T);y(_c(F,J-4),re-1,X,J,ne)}}function b(z,re,X,J,ne){var T=[],F=[];ne||(ne=[]);var Z=J-1,Q=0,ie=0;for(Q=re;Q>=0;){ne[Q]=!0,T[T.length]=Q,F.push(z[Q]);var ue=X[Math.floor(Q*4/J)];if(ie=Q*4&Z,J<4+ie)throw new Error("FAT boundary crossed: "+Q+" 4 "+J);if(!z[ue])break;Q=_c(z[ue],ie)}return{nodes:T,data:qD([F])}}function x(z,re,X,J){var ne=z.length,T=[],F=[],Z=[],Q=[],ie=J-1,ue=0,Te=0,_e=0,Ee=0;for(ue=0;ue<ne;++ue)if(Z=[],_e=ue+re,_e>=ne&&(_e-=ne),!F[_e]){Q=[];var we=[];for(Te=_e;Te>=0;){we[Te]=!0,F[Te]=!0,Z[Z.length]=Te,Q.push(z[Te]);var De=X[Math.floor(Te*4/J)];if(Ee=Te*4&ie,J<4+Ee)throw new Error("FAT boundary crossed: "+Te+" 4 "+J);if(!z[De]||(Te=_c(z[De],Ee),we[Te]))break}T[_e]={nodes:Z,data:qD([Q])}}return T}function w(z,re,X,J,ne,T,F,Z){for(var Q=0,ie=J.length?2:0,ue=re[z].data,Te=0,_e=0,Ee;Te<ue.length;Te+=128){var we=ue.slice(Te,Te+128);es(we,64),_e=we.read_shift(2),Ee=fT(we,0,_e-ie),J.push(Ee);var De={name:Ee,type:we.read_shift(1),color:we.read_shift(1),L:we.read_shift(4,"i"),R:we.read_shift(4,"i"),C:we.read_shift(4,"i"),clsid:we.read_shift(16),state:we.read_shift(4,"i"),start:0,size:0},Be=we.read_shift(2)+we.read_shift(2)+we.read_shift(2)+we.read_shift(2);Be!==0&&(De.ct=v(we,we.l-8));var Ve=we.read_shift(2)+we.read_shift(2)+we.read_shift(2)+we.read_shift(2);Ve!==0&&(De.mt=v(we,we.l-8)),De.start=we.read_shift(4,"i"),De.size=we.read_shift(4,"i"),De.size<0&&De.start<0&&(De.size=De.type=0,De.start=V,De.name=""),De.type===5?(Q=De.start,ne>0&&Q!==V&&(re[Q].name="!StreamData")):De.size>=4096?(De.storage="fat",re[De.start]===void 0&&(re[De.start]=b(X,De.start,re.fat_addrs,re.ssz)),re[De.start].name=De.name,De.content=re[De.start].data.slice(0,De.size)):(De.storage="minifat",De.size<0?De.size=0:Q!==V&&De.start!==V&&re[Q]&&(De.content=p(De,re[Q].data,(re[Z]||{}).data))),De.content&&es(De.content,0),T[Ee]=De,F.push(De)}}function v(z,re){return new Date((ns(z,re+4)/1e7*Math.pow(2,32)+ns(z,re)/1e7-11644473600)*1e3)}function j(z,re){return u(),d(c.readFileSync(z),re)}function S(z,re){var X=re&&re.type;switch(X||dr&&Buffer.isBuffer(z)&&(X="buffer"),X||"base64"){case"file":return j(z,re);case"base64":return d(ri(Fo(z)),re);case"binary":return d(ri(z),re)}return d(z,re)}function _(z,re){var X=re||{},J=X.root||"Root Entry";if(z.FullPaths||(z.FullPaths=[]),z.FileIndex||(z.FileIndex=[]),z.FullPaths.length!==z.FileIndex.length)throw new Error("inconsistent CFB structure");z.FullPaths.length===0&&(z.FullPaths[0]=J+"/",z.FileIndex[0]={name:J,type:5}),X.CLSID&&(z.FileIndex[0].clsid=X.CLSID),A(z)}function A(z){var re="Sh33tJ5";if(!Er.find(z,"/"+re)){var X=Pe(4);X[0]=55,X[1]=X[3]=50,X[2]=54,z.FileIndex.push({name:re,type:2,content:X,size:4,L:69,R:69,C:69}),z.FullPaths.push(z.FullPaths[0]+re),C(z)}}function C(z,re){_(z);for(var X=!1,J=!1,ne=z.FullPaths.length-1;ne>=0;--ne){var T=z.FileIndex[ne];switch(T.type){case 0:J?X=!0:(z.FileIndex.pop(),z.FullPaths.pop());break;case 1:case 2:case 5:J=!0,isNaN(T.R*T.L*T.C)&&(X=!0),T.R>-1&&T.L>-1&&T.R==T.L&&(X=!0);break;default:X=!0;break}}if(!(!X&&!re)){var F=new Date(1987,1,19),Z=0,Q=Object.create?Object.create(null):{},ie=[];for(ne=0;ne<z.FullPaths.length;++ne)Q[z.FullPaths[ne]]=!0,z.FileIndex[ne].type!==0&&ie.push([z.FullPaths[ne],z.FileIndex[ne]]);for(ne=0;ne<ie.length;++ne){var ue=n(ie[ne][0]);J=Q[ue],J||(ie.push([ue,{name:a(ue).replace("/",""),type:1,clsid:W,ct:F,mt:F,content:null}]),Q[ue]=!0)}for(ie.sort(function(Ee,we){return r(Ee[0],we[0])}),z.FullPaths=[],z.FileIndex=[],ne=0;ne<ie.length;++ne)z.FullPaths[ne]=ie[ne][0],z.FileIndex[ne]=ie[ne][1];for(ne=0;ne<ie.length;++ne){var Te=z.FileIndex[ne],_e=z.FullPaths[ne];if(Te.name=a(_e).replace("/",""),Te.L=Te.R=Te.C=-(Te.color=1),Te.size=Te.content?Te.content.length:0,Te.start=0,Te.clsid=Te.clsid||W,ne===0)Te.C=ie.length>1?1:-1,Te.size=0,Te.type=5;else if(_e.slice(-1)=="/"){for(Z=ne+1;Z<ie.length&&n(z.FullPaths[Z])!=_e;++Z);for(Te.C=Z>=ie.length?-1:Z,Z=ne+1;Z<ie.length&&n(z.FullPaths[Z])!=n(_e);++Z);Te.R=Z>=ie.length?-1:Z,Te.type=1}else n(z.FullPaths[ne+1]||"")==n(_e)&&(Te.R=ne+1),Te.type=2}}}function D(z,re){var X=re||{};if(X.fileType=="mad")return Kr(z,X);switch(C(z),X.fileType){case"zip":return ji(z,X)}var J=function(Ee){for(var we=0,De=0,Be=0;Be<Ee.FileIndex.length;++Be){var Ve=Ee.FileIndex[Be];if(Ve.content){var At=Ve.content.length;At>0&&(At<4096?we+=At+63>>6:De+=At+511>>9)}}for(var Bt=Ee.FullPaths.length+3>>2,nn=we+7>>3,an=we+127>>7,He=nn+De+Bt+an,kt=He+127>>7,Zt=kt<=109?0:Math.ceil((kt-109)/127);He+kt+Zt+127>>7>kt;)Zt=++kt<=109?0:Math.ceil((kt-109)/127);var It=[1,Zt,kt,an,Bt,De,we,0];return Ee.FileIndex[0].size=we<<6,It[7]=(Ee.FileIndex[0].start=It[0]+It[1]+It[2]+It[3]+It[4]+It[5])+(It[6]+7>>3),It}(z),ne=Pe(J[7]<<9),T=0,F=0;{for(T=0;T<8;++T)ne.write_shift(1,Y[T]);for(T=0;T<8;++T)ne.write_shift(2,0);for(ne.write_shift(2,62),ne.write_shift(2,3),ne.write_shift(2,65534),ne.write_shift(2,9),ne.write_shift(2,6),T=0;T<3;++T)ne.write_shift(2,0);for(ne.write_shift(4,0),ne.write_shift(4,J[2]),ne.write_shift(4,J[0]+J[1]+J[2]+J[3]-1),ne.write_shift(4,0),ne.write_shift(4,4096),ne.write_shift(4,J[3]?J[0]+J[1]+J[2]-1:V),ne.write_shift(4,J[3]),ne.write_shift(-4,J[1]?J[0]-1:V),ne.write_shift(4,J[1]),T=0;T<109;++T)ne.write_shift(-4,T<J[2]?J[1]+T:-1)}if(J[1])for(F=0;F<J[1];++F){for(;T<236+F*127;++T)ne.write_shift(-4,T<J[2]?J[1]+T:-1);ne.write_shift(-4,F===J[1]-1?V:F+1)}var Z=function(Ee){for(F+=Ee;T<F-1;++T)ne.write_shift(-4,T+1);Ee&&(++T,ne.write_shift(-4,V))};for(F=T=0,F+=J[1];T<F;++T)ne.write_shift(-4,P.DIFSECT);for(F+=J[2];T<F;++T)ne.write_shift(-4,P.FATSECT);Z(J[3]),Z(J[4]);for(var Q=0,ie=0,ue=z.FileIndex[0];Q<z.FileIndex.length;++Q)ue=z.FileIndex[Q],ue.content&&(ie=ue.content.length,!(ie<4096)&&(ue.start=F,Z(ie+511>>9)));for(Z(J[6]+7>>3);ne.l&511;)ne.write_shift(-4,P.ENDOFCHAIN);for(F=T=0,Q=0;Q<z.FileIndex.length;++Q)ue=z.FileIndex[Q],ue.content&&(ie=ue.content.length,!(!ie||ie>=4096)&&(ue.start=F,Z(ie+63>>6)));for(;ne.l&511;)ne.write_shift(-4,P.ENDOFCHAIN);for(T=0;T<J[4]<<2;++T){var Te=z.FullPaths[T];if(!Te||Te.length===0){for(Q=0;Q<17;++Q)ne.write_shift(4,0);for(Q=0;Q<3;++Q)ne.write_shift(4,-1);for(Q=0;Q<12;++Q)ne.write_shift(4,0);continue}ue=z.FileIndex[T],T===0&&(ue.start=ue.size?ue.start-1:V);var _e=T===0&&X.root||ue.name;if(ie=2*(_e.length+1),ne.write_shift(64,_e,"utf16le"),ne.write_shift(2,ie),ne.write_shift(1,ue.type),ne.write_shift(1,ue.color),ne.write_shift(-4,ue.L),ne.write_shift(-4,ue.R),ne.write_shift(-4,ue.C),ue.clsid)ne.write_shift(16,ue.clsid,"hex");else for(Q=0;Q<4;++Q)ne.write_shift(4,0);ne.write_shift(4,ue.state||0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,ue.start),ne.write_shift(4,ue.size),ne.write_shift(4,0)}for(T=1;T<z.FileIndex.length;++T)if(ue=z.FileIndex[T],ue.size>=4096)if(ne.l=ue.start+1<<9,dr&&Buffer.isBuffer(ue.content))ue.content.copy(ne,ne.l,0,ue.size),ne.l+=ue.size+511&-512;else{for(Q=0;Q<ue.size;++Q)ne.write_shift(1,ue.content[Q]);for(;Q&511;++Q)ne.write_shift(1,0)}for(T=1;T<z.FileIndex.length;++T)if(ue=z.FileIndex[T],ue.size>0&&ue.size<4096)if(dr&&Buffer.isBuffer(ue.content))ue.content.copy(ne,ne.l,0,ue.size),ne.l+=ue.size+63&-64;else{for(Q=0;Q<ue.size;++Q)ne.write_shift(1,ue.content[Q]);for(;Q&63;++Q)ne.write_shift(1,0)}if(dr)ne.l=ne.length;else for(;ne.l<ne.length;)ne.write_shift(1,0);return ne}function k(z,re){var X=z.FullPaths.map(function(Q){return Q.toUpperCase()}),J=X.map(function(Q){var ie=Q.split("/");return ie[ie.length-(Q.slice(-1)=="/"?2:1)]}),ne=!1;re.charCodeAt(0)===47?(ne=!0,re=X[0].slice(0,-1)+re):ne=re.indexOf("/")!==-1;var T=re.toUpperCase(),F=ne===!0?X.indexOf(T):J.indexOf(T);if(F!==-1)return z.FileIndex[F];var Z=!T.match(lg);for(T=T.replace(pm,""),Z&&(T=T.replace(lg,"!")),F=0;F<X.length;++F)if((Z?X[F].replace(lg,"!"):X[F]).replace(pm,"")==T||(Z?J[F].replace(lg,"!"):J[F]).replace(pm,"")==T)return z.FileIndex[F];return null}var O=64,V=-2,G="d0cf11e0a1b11ae1",Y=[208,207,17,224,161,177,26,225],W="00000000000000000000000000000000",P={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:V,FREESECT:-1,HEADER_SIGNATURE:G,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:W,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function E(z,re,X){u();var J=D(z,X);c.writeFileSync(re,J)}function R(z){for(var re=new Array(z.length),X=0;X<z.length;++X)re[X]=String.fromCharCode(z[X]);return re.join("")}function I(z,re){var X=D(z,re);switch(re&&re.type||"buffer"){case"file":return u(),c.writeFileSync(re.filename,X),X;case"binary":return typeof X=="string"?X:R(X);case"base64":return Jm(typeof X=="string"?X:R(X));case"buffer":if(dr)return Buffer.isBuffer(X)?X:Vo(X);case"array":return typeof X=="string"?ri(X):X}return X}var ee;function L(z){try{var re=z.InflateRaw,X=new re;if(X._processChunk(new Uint8Array([3,0]),X._finishFlushFlag),X.bytesRead)ee=z;else throw new Error("zlib does not expose bytesRead")}catch(J){console.error("cannot use native zlib: "+(J.message||J))}}function q(z,re){if(!ee)return Gr(z,re);var X=ee.InflateRaw,J=new X,ne=J._processChunk(z.slice(z.l),J._finishFlushFlag);return z.l+=J.bytesRead,ne}function H(z){return ee?ee.deflateRawSync(z):Le(z)}var B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],de=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ce=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ge(z){var re=(z<<1|z<<11)&139536|(z<<5|z<<15)&558144;return(re>>16|re>>8|re)&255}for(var he=typeof Uint8Array<"u",K=he?new Uint8Array(256):[],fe=0;fe<256;++fe)K[fe]=ge(fe);function ae(z,re){var X=K[z&255];return re<=8?X>>>8-re:(X=X<<8|K[z>>8&255],re<=16?X>>>16-re:(X=X<<8|K[z>>16&255],X>>>24-re))}function Ne(z,re){var X=re&7,J=re>>>3;return(z[J]|(X<=6?0:z[J+1]<<8))>>>X&3}function Se(z,re){var X=re&7,J=re>>>3;return(z[J]|(X<=5?0:z[J+1]<<8))>>>X&7}function Ae(z,re){var X=re&7,J=re>>>3;return(z[J]|(X<=4?0:z[J+1]<<8))>>>X&15}function Oe(z,re){var X=re&7,J=re>>>3;return(z[J]|(X<=3?0:z[J+1]<<8))>>>X&31}function M(z,re){var X=re&7,J=re>>>3;return(z[J]|(X<=1?0:z[J+1]<<8))>>>X&127}function oe(z,re,X){var J=re&7,ne=re>>>3,T=(1<<X)-1,F=z[ne]>>>J;return X<8-J||(F|=z[ne+1]<<8-J,X<16-J)||(F|=z[ne+2]<<16-J,X<24-J)||(F|=z[ne+3]<<24-J),F&T}function be(z,re,X){var J=re&7,ne=re>>>3;return J<=5?z[ne]|=(X&7)<<J:(z[ne]|=X<<J&255,z[ne+1]=(X&7)>>8-J),re+3}function U(z,re,X){var J=re&7,ne=re>>>3;return X=(X&1)<<J,z[ne]|=X,re+1}function te(z,re,X){var J=re&7,ne=re>>>3;return X<<=J,z[ne]|=X&255,X>>>=8,z[ne+1]=X,re+8}function xe(z,re,X){var J=re&7,ne=re>>>3;return X<<=J,z[ne]|=X&255,X>>>=8,z[ne+1]=X&255,z[ne+2]=X>>>8,re+16}function le(z,re){var X=z.length,J=2*X>re?2*X:re+5,ne=0;if(X>=re)return z;if(dr){var T=kD(J);if(z.copy)z.copy(T);else for(;ne<z.length;++ne)T[ne]=z[ne];return T}else if(he){var F=new Uint8Array(J);if(F.set)F.set(z);else for(;ne<X;++ne)F[ne]=z[ne];return F}return z.length=J,z}function ye(z){for(var re=new Array(z),X=0;X<z;++X)re[X]=0;return re}function ve(z,re,X){var J=1,ne=0,T=0,F=0,Z=0,Q=z.length,ie=he?new Uint16Array(32):ye(32);for(T=0;T<32;++T)ie[T]=0;for(T=Q;T<X;++T)z[T]=0;Q=z.length;var ue=he?new Uint16Array(Q):ye(Q);for(T=0;T<Q;++T)ie[ne=z[T]]++,J<ne&&(J=ne),ue[T]=0;for(ie[0]=0,T=1;T<=J;++T)ie[T+16]=Z=Z+ie[T-1]<<1;for(T=0;T<Q;++T)Z=z[T],Z!=0&&(ue[T]=ie[Z+16]++);var Te=0;for(T=0;T<Q;++T)if(Te=z[T],Te!=0)for(Z=ae(ue[T],J)>>J-Te,F=(1<<J+4-Te)-1;F>=0;--F)re[Z|F<<Te]=Te&15|T<<4;return J}var ke=he?new Uint16Array(512):ye(512),it=he?new Uint16Array(32):ye(32);if(!he){for(var ot=0;ot<512;++ot)ke[ot]=0;for(ot=0;ot<32;++ot)it[ot]=0}(function(){for(var z=[],re=0;re<32;re++)z.push(5);ve(z,it,32);var X=[];for(re=0;re<=143;re++)X.push(8);for(;re<=255;re++)X.push(9);for(;re<=279;re++)X.push(7);for(;re<=287;re++)X.push(8);ve(X,ke,288)})();var Nt=function(){for(var re=he?new Uint8Array(32768):[],X=0,J=0;X<ce.length-1;++X)for(;J<ce[X+1];++J)re[J]=X;for(;J<32768;++J)re[J]=29;var ne=he?new Uint8Array(259):[];for(X=0,J=0;X<de.length-1;++X)for(;J<de[X+1];++J)ne[J]=X;function T(Z,Q){for(var ie=0;ie<Z.length;){var ue=Math.min(65535,Z.length-ie),Te=ie+ue==Z.length;for(Q.write_shift(1,+Te),Q.write_shift(2,ue),Q.write_shift(2,~ue&65535);ue-- >0;)Q[Q.l++]=Z[ie++]}return Q.l}function F(Z,Q){for(var ie=0,ue=0,Te=he?new Uint16Array(32768):[];ue<Z.length;){var _e=Math.min(65535,Z.length-ue);if(_e<10){for(ie=be(Q,ie,+(ue+_e==Z.length)),ie&7&&(ie+=8-(ie&7)),Q.l=ie/8|0,Q.write_shift(2,_e),Q.write_shift(2,~_e&65535);_e-- >0;)Q[Q.l++]=Z[ue++];ie=Q.l*8;continue}ie=be(Q,ie,+(ue+_e==Z.length)+2);for(var Ee=0;_e-- >0;){var we=Z[ue];Ee=(Ee<<5^we)&32767;var De=-1,Be=0;if((De=Te[Ee])&&(De|=ue&-32768,De>ue&&(De-=32768),De<ue))for(;Z[De+Be]==Z[ue+Be]&&Be<250;)++Be;if(Be>2){we=ne[Be],we<=22?ie=te(Q,ie,K[we+1]>>1)-1:(te(Q,ie,3),ie+=5,te(Q,ie,K[we-23]>>5),ie+=3);var Ve=we<8?0:we-4>>2;Ve>0&&(xe(Q,ie,Be-de[we]),ie+=Ve),we=re[ue-De],ie=te(Q,ie,K[we]>>3),ie-=3;var At=we<4?0:we-2>>1;At>0&&(xe(Q,ie,ue-De-ce[we]),ie+=At);for(var Bt=0;Bt<Be;++Bt)Te[Ee]=ue&32767,Ee=(Ee<<5^Z[ue])&32767,++ue;_e-=Be-1}else we<=143?we=we+48:ie=U(Q,ie,1),ie=te(Q,ie,K[we]),Te[Ee]=ue&32767,++ue}ie=te(Q,ie,0)-1}return Q.l=(ie+7)/8|0,Q.l}return function(Q,ie){return Q.length<8?T(Q,ie):F(Q,ie)}}();function Le(z){var re=Pe(50+Math.floor(z.length*1.1)),X=Nt(z,re);return re.slice(0,X)}var rt=he?new Uint16Array(32768):ye(32768),Mt=he?new Uint16Array(32768):ye(32768),at=he?new Uint16Array(128):ye(128),$t=1,Ke=1;function Dt(z,re){var X=Oe(z,re)+257;re+=5;var J=Oe(z,re)+1;re+=5;var ne=Ae(z,re)+4;re+=4;for(var T=0,F=he?new Uint8Array(19):ye(19),Z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Q=1,ie=he?new Uint8Array(8):ye(8),ue=he?new Uint8Array(8):ye(8),Te=F.length,_e=0;_e<ne;++_e)F[B[_e]]=T=Se(z,re),Q<T&&(Q=T),ie[T]++,re+=3;var Ee=0;for(ie[0]=0,_e=1;_e<=Q;++_e)ue[_e]=Ee=Ee+ie[_e-1]<<1;for(_e=0;_e<Te;++_e)(Ee=F[_e])!=0&&(Z[_e]=ue[Ee]++);var we=0;for(_e=0;_e<Te;++_e)if(we=F[_e],we!=0){Ee=K[Z[_e]]>>8-we;for(var De=(1<<7-we)-1;De>=0;--De)at[Ee|De<<we]=we&7|_e<<3}var Be=[];for(Q=1;Be.length<X+J;)switch(Ee=at[M(z,re)],re+=Ee&7,Ee>>>=3){case 16:for(T=3+Ne(z,re),re+=2,Ee=Be[Be.length-1];T-- >0;)Be.push(Ee);break;case 17:for(T=3+Se(z,re),re+=3;T-- >0;)Be.push(0);break;case 18:for(T=11+M(z,re),re+=7;T-- >0;)Be.push(0);break;default:Be.push(Ee),Q<Ee&&(Q=Ee);break}var Ve=Be.slice(0,X),At=Be.slice(X);for(_e=X;_e<286;++_e)Ve[_e]=0;for(_e=J;_e<30;++_e)At[_e]=0;return $t=ve(Ve,rt,286),Ke=ve(At,Mt,30),re}function Jt(z,re){if(z[0]==3&&!(z[1]&3))return[uu(re),2];for(var X=0,J=0,ne=kD(re||1<<18),T=0,F=ne.length>>>0,Z=0,Q=0;!(J&1);){if(J=Se(z,X),X+=3,J>>>1)J>>1==1?(Z=9,Q=5):(X=Dt(z,X),Z=$t,Q=Ke);else{X&7&&(X+=8-(X&7));var ie=z[X>>>3]|z[(X>>>3)+1]<<8;if(X+=32,ie>0)for(!re&&F<T+ie&&(ne=le(ne,T+ie),F=ne.length);ie-- >0;)ne[T++]=z[X>>>3],X+=8;continue}for(;;){!re&&F<T+32767&&(ne=le(ne,T+32767),F=ne.length);var ue=oe(z,X,Z),Te=J>>>1==1?ke[ue]:rt[ue];if(X+=Te&15,Te>>>=4,!(Te>>>8&255))ne[T++]=Te;else{if(Te==256)break;Te-=257;var _e=Te<8?0:Te-4>>2;_e>5&&(_e=0);var Ee=T+de[Te];_e>0&&(Ee+=oe(z,X,_e),X+=_e),ue=oe(z,X,Q),Te=J>>>1==1?it[ue]:Mt[ue],X+=Te&15,Te>>>=4;var we=Te<4?0:Te-2>>1,De=ce[Te];for(we>0&&(De+=oe(z,X,we),X+=we),!re&&F<Ee&&(ne=le(ne,Ee+100),F=ne.length);T<Ee;)ne[T]=ne[T-De],++T}}}return re?[ne,X+7>>>3]:[ne.slice(0,T),X+7>>>3]}function Gr(z,re){var X=z.slice(z.l||0),J=Jt(X,re);return z.l+=J[1],J[0]}function Fu(z,re){if(z)typeof console<"u"&&console.error(re);else throw new Error(re)}function fc(z,re){var X=z;es(X,0);var J=[],ne=[],T={FileIndex:J,FullPaths:ne};_(T,{root:re.root});for(var F=X.length-4;(X[F]!=80||X[F+1]!=75||X[F+2]!=5||X[F+3]!=6)&&F>=0;)--F;X.l=F+4,X.l+=4;var Z=X.read_shift(2);X.l+=6;var Q=X.read_shift(4);for(X.l=Q,F=0;F<Z;++F){X.l+=20;var ie=X.read_shift(4),ue=X.read_shift(4),Te=X.read_shift(2),_e=X.read_shift(2),Ee=X.read_shift(2);X.l+=8;var we=X.read_shift(4),De=l(X.slice(X.l+Te,X.l+Te+_e));X.l+=Te+_e+Ee;var Be=X.l;X.l=we+4,gs(X,ie,ue,T,De),X.l=Be}return T}function gs(z,re,X,J,ne){z.l+=2;var T=z.read_shift(2),F=z.read_shift(2),Z=o(z);if(T&8257)throw new Error("Unsupported ZIP encryption");for(var Q=z.read_shift(4),ie=z.read_shift(4),ue=z.read_shift(4),Te=z.read_shift(2),_e=z.read_shift(2),Ee="",we=0;we<Te;++we)Ee+=String.fromCharCode(z[z.l++]);if(_e){var De=l(z.slice(z.l,z.l+_e));(De[21589]||{}).mt&&(Z=De[21589].mt),((ne||{})[21589]||{}).mt&&(Z=ne[21589].mt)}z.l+=_e;var Be=z.slice(z.l,z.l+ie);switch(F){case 8:Be=q(z,ue);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+F)}var Ve=!1;T&8&&(Q=z.read_shift(4),Q==134695760&&(Q=z.read_shift(4),Ve=!0),ie=z.read_shift(4),ue=z.read_shift(4)),ie!=re&&Fu(Ve,"Bad compressed size: "+re+" != "+ie),ue!=X&&Fu(Ve,"Bad uncompressed size: "+X+" != "+ue),Ga(J,Ee,Be,{unsafe:!0,mt:Z})}function ji(z,re){var X=re||{},J=[],ne=[],T=Pe(1),F=X.compression?8:0,Z=0,Q=0,ie=0,ue=0,Te=0,_e=z.FullPaths[0],Ee=_e,we=z.FileIndex[0],De=[],Be=0;for(Q=1;Q<z.FullPaths.length;++Q)if(Ee=z.FullPaths[Q].slice(_e.length),we=z.FileIndex[Q],!(!we.size||!we.content||Ee=="Sh33tJ5")){var Ve=ue,At=Pe(Ee.length);for(ie=0;ie<Ee.length;++ie)At.write_shift(1,Ee.charCodeAt(ie)&127);At=At.slice(0,At.l),De[Te]=Hne.buf(we.content,0);var Bt=we.content;F==8&&(Bt=H(Bt)),T=Pe(30),T.write_shift(4,67324752),T.write_shift(2,20),T.write_shift(2,Z),T.write_shift(2,F),we.mt?i(T,we.mt):T.write_shift(4,0),T.write_shift(-4,De[Te]),T.write_shift(4,Bt.length),T.write_shift(4,we.content.length),T.write_shift(2,At.length),T.write_shift(2,0),ue+=T.length,J.push(T),ue+=At.length,J.push(At),ue+=Bt.length,J.push(Bt),T=Pe(46),T.write_shift(4,33639248),T.write_shift(2,0),T.write_shift(2,20),T.write_shift(2,Z),T.write_shift(2,F),T.write_shift(4,0),T.write_shift(-4,De[Te]),T.write_shift(4,Bt.length),T.write_shift(4,we.content.length),T.write_shift(2,At.length),T.write_shift(2,0),T.write_shift(2,0),T.write_shift(2,0),T.write_shift(2,0),T.write_shift(4,0),T.write_shift(4,Ve),Be+=T.l,ne.push(T),Be+=At.length,ne.push(At),++Te}return T=Pe(22),T.write_shift(4,101010256),T.write_shift(2,0),T.write_shift(2,0),T.write_shift(2,Te),T.write_shift(2,Te),T.write_shift(4,Be),T.write_shift(4,ue),T.write_shift(2,0),Gn([Gn(J),Gn(ne),T])}var Us={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function to(z,re){if(z.ctype)return z.ctype;var X=z.name||"",J=X.match(/\.([^\.]+)$/);return J&&Us[J[1]]||re&&(J=(X=re).match(/[\.\\]([^\.\\])+$/),J&&Us[J[1]])?Us[J[1]]:"application/octet-stream"}function Lu(z){for(var re=Jm(z),X=[],J=0;J<re.length;J+=76)X.push(re.slice(J,J+76));return X.join(`\r
`)+`\r
`}function $u(z){var re=z.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ie){var ue=ie.charCodeAt(0).toString(16).toUpperCase();return"="+(ue.length==1?"0"+ue:ue)});re=re.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),re.charAt(0)==`
`&&(re="=0D"+re.slice(1)),re=re.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var X=[],J=re.split(`\r
`),ne=0;ne<J.length;++ne){var T=J[ne];if(T.length==0){X.push("");continue}for(var F=0;F<T.length;){var Z=76,Q=T.slice(F,F+Z);Q.charAt(Z-1)=="="?Z--:Q.charAt(Z-2)=="="?Z-=2:Q.charAt(Z-3)=="="&&(Z-=3),Q=T.slice(F,F+Z),F+=Z,F<T.length&&(Q+="="),X.push(Q)}}return X.join(`\r
`)}function Bu(z){for(var re=[],X=0;X<z.length;++X){for(var J=z[X];X<=z.length&&J.charAt(J.length-1)=="=";)J=J.slice(0,J.length-1)+z[++X];re.push(J)}for(var ne=0;ne<re.length;++ne)re[ne]=re[ne].replace(/[=][0-9A-Fa-f]{2}/g,function(T){return String.fromCharCode(parseInt(T.slice(1),16))});return ri(re.join(`\r
`))}function Uu(z,re,X){for(var J="",ne="",T="",F,Z=0;Z<10;++Z){var Q=re[Z];if(!Q||Q.match(/^\s*$/))break;var ie=Q.match(/^(.*?):\s*([^\s].*)$/);if(ie)switch(ie[1].toLowerCase()){case"content-location":J=ie[2].trim();break;case"content-type":T=ie[2].trim();break;case"content-transfer-encoding":ne=ie[2].trim();break}}switch(++Z,ne.toLowerCase()){case"base64":F=ri(Fo(re.slice(Z).join("")));break;case"quoted-printable":F=Bu(re.slice(Z));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ne)}var ue=Ga(z,J.slice(X.length),F,{unsafe:!0});T&&(ue.ctype=T)}function hc(z,re){if(R(z.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var X=re&&re.root||"",J=(dr&&Buffer.isBuffer(z)?z.toString("binary"):R(z)).split(`\r
`),ne=0,T="";for(ne=0;ne<J.length;++ne)if(T=J[ne],!!/^Content-Location:/i.test(T)&&(T=T.slice(T.indexOf("file")),X||(X=T.slice(0,T.lastIndexOf("/")+1)),T.slice(0,X.length)!=X))for(;X.length>0&&(X=X.slice(0,X.length-1),X=X.slice(0,X.lastIndexOf("/")+1),T.slice(0,X.length)!=X););var F=(J[1]||"").match(/boundary="(.*?)"/);if(!F)throw new Error("MAD cannot find boundary");var Z="--"+(F[1]||""),Q=[],ie=[],ue={FileIndex:Q,FullPaths:ie};_(ue);var Te,_e=0;for(ne=0;ne<J.length;++ne){var Ee=J[ne];Ee!==Z&&Ee!==Z+"--"||(_e++&&Uu(ue,J.slice(Te,ne),X),Te=ne)}return ue}function Kr(z,re){var X=re||{},J=X.boundary||"SheetJS";J="------="+J;for(var ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+J.slice(2)+'"',"","",""],T=z.FullPaths[0],F=T,Z=z.FileIndex[0],Q=1;Q<z.FullPaths.length;++Q)if(F=z.FullPaths[Q].slice(T.length),Z=z.FileIndex[Q],!(!Z.size||!Z.content||F=="Sh33tJ5")){F=F.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Be){return"_x"+Be.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Be){return"_u"+Be.charCodeAt(0).toString(16)+"_"});for(var ie=Z.content,ue=dr&&Buffer.isBuffer(ie)?ie.toString("binary"):R(ie),Te=0,_e=Math.min(1024,ue.length),Ee=0,we=0;we<=_e;++we)(Ee=ue.charCodeAt(we))>=32&&Ee<128&&++Te;var De=Te>=_e*4/5;ne.push(J),ne.push("Content-Location: "+(X.root||"file:///C:/SheetJS/")+F),ne.push("Content-Transfer-Encoding: "+(De?"quoted-printable":"base64")),ne.push("Content-Type: "+to(Z,F)),ne.push(""),ne.push(De?$u(ue):Lu(ue))}return ne.push(J+`--\r
`),ne.join(`\r
`)}function mc(z){var re={};return _(re,z),re}function Ga(z,re,X,J){var ne=J&&J.unsafe;ne||_(z);var T=!ne&&Er.find(z,re);if(!T){var F=z.FullPaths[0];re.slice(0,F.length)==F?F=re:(F.slice(-1)!="/"&&(F+="/"),F=(F+re).replace("//","/")),T={name:a(re),type:2},z.FileIndex.push(T),z.FullPaths.push(F),ne||Er.utils.cfb_gc(z)}return T.content=X,T.size=X?X.length:0,J&&(J.CLSID&&(T.clsid=J.CLSID),J.mt&&(T.mt=J.mt),J.ct&&(T.ct=J.ct)),T}function Wu(z,re){_(z);var X=Er.find(z,re);if(X){for(var J=0;J<z.FileIndex.length;++J)if(z.FileIndex[J]==X)return z.FileIndex.splice(J,1),z.FullPaths.splice(J,1),!0}return!1}function Vu(z,re,X){_(z);var J=Er.find(z,re);if(J){for(var ne=0;ne<z.FileIndex.length;++ne)if(z.FileIndex[ne]==J)return z.FileIndex[ne].name=a(X),z.FullPaths[ne]=X,!0}return!1}function pc(z){C(z,!0)}return t.find=k,t.read=S,t.parse=d,t.write=I,t.writeFile=E,t.utils={cfb_new:mc,cfb_add:Ga,cfb_del:Wu,cfb_mov:Vu,cfb_gc:pc,ReadShift:xm,CheckField:W$,prep_blob:es,bconcat:Gn,use_zlib:L,_deflateRaw:Le,_inflateRaw:Gr,consts:P},t}();function zne(e){return typeof e=="string"?a1(e):Array.isArray(e)?xne(e):e}function y0(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=a1(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?ep(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([zne(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=x0(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function ea(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function $D(e,t){for(var r=[],n=ea(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function lT(e){for(var t=[],r=ea(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function o1(e){for(var t=[],r=ea(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function qne(e){for(var t=[],r=ea(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var Yx=new Date(1899,11,30,0,0,0);function Ha(e,t){var r=e.getTime(),n=Yx.getTime()+(e.getTimezoneOffset()-Yx.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var _$=new Date,Gne=Yx.getTime()+(_$.getTimezoneOffset()-Yx.getTimezoneOffset())*6e4,BD=_$.getTimezoneOffset();function T$(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Gne),t.getTimezoneOffset()!==BD&&t.setTime(t.getTime()+(t.getTimezoneOffset()-BD)*6e4),t}var UD=new Date("2017-02-19T19:06:09.000Z"),E$=isNaN(UD.getFullYear())?new Date("2/19/17"):UD,Kne=E$.getFullYear()==2017;function Ta(e,t){var r=new Date(e);if(Kne)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(E$.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function l1(e,t){if(dr&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(i){return r[i]||i})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function za(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=za(e[r]));return t}function Qr(e,t){for(var r="";r.length<t;)r+=e;return r}function So(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var Yne=["january","february","march","april","may","june","july","august","september","october","november","december"];function Zm(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&Yne.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function Gt(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return dr?n=Vo(r):n=yne(r),Er.utils.cfb_add(e,t,n)}Er.utils.cfb_add(e,t,r)}else e.file(t,r)}function cT(){return Er.utils.cfb_new()}var wn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Xne={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},uT=lT(Xne),dT=/[&<>'"]/g,Qne=/[\u0000-\u0008\u000b-\u001f]/g;function jr(e){var t=e+"";return t.replace(dT,function(r){return uT[r]}).replace(Qne,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function WD(e){return jr(e).replace(/ /g,"_x0020_")}var A$=/[\u0000-\u001f]/g;function Jne(e){var t=e+"";return t.replace(dT,function(r){return uT[r]}).replace(/\n/g,"<br/>").replace(A$,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Zne(e){var t=e+"";return t.replace(dT,function(r){return uT[r]}).replace(A$,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function eae(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function tae(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function sb(e){for(var t="",r=0,n=0,a=0,i=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function VD(e){var t=uu(2*e.length),r,n,a=1,i=0,o=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function HD(e){return Vo(e,"binary").toString("utf8")}var ug="foo bar bazâð£",gm=dr&&(HD(ug)==sb(ug)&&HD||VD(ug)==sb(ug)&&VD)||sb,ep=dr?function(e){return Vo(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},rae=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),C$=/(^\s|\s$|\n)/;function Kn(e,t){return"<"+e+(t.match(C$)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function tp(e){return ea(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Je(e,t,r){return"<"+e+(r!=null?tp(r):"")+(t!=null?(t.match(C$)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function _N(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function nae(e,t){switch(typeof e){case"string":var r=Je("vt:lpwstr",jr(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Je((e|0)==e?"vt:i4":"vt:r8",jr(String(e)));case"boolean":return Je("vt:bool",e?"true":"false")}if(e instanceof Date)return Je("vt:filetime",_N(e));throw new Error("Unable to serialize "+e)}var Mn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},nh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],rs={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function aae(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function sae(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,o=n?-t:t;isFinite(o)?o==0?a=i=0:(a=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|n}var zD=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,i=e[0][n].length;a<i;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},qD=dr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Vo(t)})):zD(e)}:zD,GD=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(tm(e,a)));return n.join("").replace(pm,"")},fT=dr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(pm,""):GD(e,t,r)}:GD,KD=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},D$=dr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):KD(e,t,r)}:KD,YD=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(od(e,a)));return n.join("")},v0=dr?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):YD(t,r,n)}:YD,k$=function(e,t){var r=ns(e,t);return r>0?v0(e,t+4,t+4+r-1):""},O$=k$,P$=function(e,t){var r=ns(e,t);return r>0?v0(e,t+4,t+4+r-1):""},I$=P$,M$=function(e,t){var r=2*ns(e,t);return r>0?v0(e,t+4,t+4+r-1):""},R$=M$,F$=function(t,r){var n=ns(t,r);return n>0?fT(t,r+4,r+4+n):""},L$=F$,$$=function(e,t){var r=ns(e,t);return r>0?v0(e,t+4,t+4+r):""},B$=$$,U$=function(e,t){return aae(e,t)},Xx=U$,hT=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};dr&&(O$=function(t,r){if(!Buffer.isBuffer(t))return k$(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},I$=function(t,r){if(!Buffer.isBuffer(t))return P$(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},R$=function(t,r){if(!Buffer.isBuffer(t))return M$(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},L$=function(t,r){if(!Buffer.isBuffer(t))return F$(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},B$=function(t,r){if(!Buffer.isBuffer(t))return $$(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},Xx=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):U$(t,r)},hT=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var od=function(e,t){return e[t]},tm=function(e,t){return e[t+1]*256+e[t]},iae=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},ns=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},_c=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},oae=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function xm(e,t){var r="",n,a,i=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,dr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(tm(this,u)),u+=2;e*=2;break;case"utf8":r=v0(this,this.l,this.l+e);break;case"utf16le":e*=2,r=fT(this,this.l,this.l+e);break;case"wstr":return xm.call(this,e,"dbcs");case"lpstr-ansi":r=O$(this,this.l),e=4+ns(this,this.l);break;case"lpstr-cp":r=I$(this,this.l),e=4+ns(this,this.l);break;case"lpwstr":r=R$(this,this.l),e=4+2*ns(this,this.l);break;case"lpp4":e=4+ns(this,this.l),r=L$(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+ns(this,this.l),r=B$(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=od(this,this.l+e++))!==0;)i.push(og(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=tm(this,this.l+e))!==0;)i.push(og(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=od(this,u),this.l=u+1,l=xm.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(og(tm(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=od(this,u),this.l=u+1,l=xm.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(og(od(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return n=od(this,this.l),this.l++,n;case 2:return n=(t==="i"?iae:tm)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?_c:oae)(this,this.l),this.l+=4,n):(a=ns(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=Xx(this,this.l):a=Xx([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=D$(this,this.l,e);break}}return this.l+=e,r}var lae=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},cae=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},uae=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function dae(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)uae(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,lae(this,t,this.l);break;case 8:if(n=8,r==="f"){sae(this,t,this.l);break}case 16:break;case-4:n=4,cae(this,t,this.l);break}return this.l+=n,this}function W$(e,t){var r=D$(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function es(e,t){e.l=t,e.read_shift=xm,e.chk=W$,e.write_shift=dae}function Xi(e,t){e.l+=t}function Pe(e){var t=uu(e);return es(t,0),t}function Va(){var e=[],t=dr?256:2048,r=function(u){var d=Pe(u);return es(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},o=function(){return a(),Gn(e)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function $e(e,t,r,n){var a=+t,i;if(!isNaN(a)){n||(n=aue[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=e.next(i);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&hT(r)&&e.push(r)}}function ym(e,t,r){var n=za(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function XD(e,t,r){var n=za(e);return n.s=ym(n.s,t.s,r),n.e=ym(n.e,t.s,r),n}function vm(e,t){if(e.cRel&&e.c<0)for(e=za(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=za(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=_r(e);return!e.cRel&&e.cRel!=null&&(r=mae(r)),!e.rRel&&e.rRel!=null&&(r=fae(r)),r}function ib(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+fa(e.s.c)+":"+(e.e.cRel?"":"$")+fa(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Qn(e.s.r)+":"+(e.e.rRel?"":"$")+Qn(e.e.r):vm(e.s,t.biff)+":"+vm(e.e,t.biff)}function mT(e){return parseInt(hae(e),10)-1}function Qn(e){return""+(e+1)}function fae(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function hae(e){return e.replace(/\$(\d+)$/,"$1")}function pT(e){for(var t=pae(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function fa(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function mae(e){return e.replace(/^([A-Z])/,"$$$1")}function pae(e){return e.replace(/^\$([A-Z])/,"$1")}function gae(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Fn(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function _r(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function hs(e){var t=e.indexOf(":");return t==-1?{s:Fn(e),e:Fn(e)}:{s:Fn(e.slice(0,t)),e:Fn(e.slice(t+1))}}function xn(e,t){return typeof t>"u"||typeof t=="number"?xn(e.s,e.e):(typeof e!="string"&&(e=_r(e)),typeof t!="string"&&(t=_r(t)),e==t?e:e+":"+t)}function Br(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,i=e.length;for(r=0;n<i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function QD(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Kl(e.z,r?Ha(t):t)}catch{}try{return e.w=Kl((e.XF||{}).numFmtId||(r?14:0),r?Ha(t):t)}catch{return""+t}}function Lo(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?w0[e.v]||e.v:t==null?QD(e,e.v):QD(e,t))}function Tu(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function V$(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,i=e||(a?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Fn(n.origin):n.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var d=Br(i["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var m={v:t[f][h]},g=o+f,p=l+h;if(u.s.r>g&&(u.s.r=g),u.s.c>p&&(u.s.c=p),u.e.r<g&&(u.e.r=g),u.e.c<p&&(u.e.c=p),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))m=t[f][h];else if(Array.isArray(m.v)&&(m.f=t[f][h][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||Zr[14],n.cellDates?(m.t="d",m.w=Kl(m.z,Ha(m.v))):(m.t="n",m.v=Ha(m.v),m.w=Kl(m.z,m.v))):m.t="s";if(a)i[g]||(i[g]=[]),i[g][p]&&i[g][p].z&&(m.z=i[g][p].z),i[g][p]=m;else{var y=_r({c:p,r:g});i[y]&&i[y].z&&(m.z=i[y].z),i[y]=m}}}return u.s.c<1e7&&(i["!ref"]=xn(u)),i}function ah(e,t){return V$(null,e,t)}function xae(e){return e.read_shift(4,"i")}function di(e,t){return t||(t=Pe(4)),t.write_shift(4,e),t}function ha(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Ln(e,t){var r=!1;return t==null&&(r=!0,t=Pe(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function yae(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function vae(e,t){return t||(t=Pe(4)),t.write_shift(2,0),t.write_shift(2,0),t}function gT(e,t){var r=e.l,n=e.read_shift(1),a=ha(e),i=[],o={t:a,h:a};if(n&1){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(yae(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function wae(e,t){var r=!1;return t==null&&(r=!0,t=Pe(15+4*e.t.length)),t.write_shift(1,0),Ln(e.t,t),r?t.slice(0,t.l):t}var bae=gT;function jae(e,t){var r=!1;return t==null&&(r=!0,t=Pe(23+4*e.t.length)),t.write_shift(1,1),Ln(e.t,t),t.write_shift(4,1),vae({},t),r?t.slice(0,t.l):t}function Ls(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Eu(e,t){return t==null&&(t=Pe(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Au(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Cu(e,t){return t==null&&(t=Pe(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Nae=ha,H$=Ln;function xT(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Qx(e,t){var r=!1;return t==null&&(r=!0,t=Pe(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Sae=ha,TN=xT,yT=Qx;function z$(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?Xx([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):_c(t,0)>>2;return r?a/100:a}function q$(e,t){t==null&&(t=Pe(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function G$(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function _ae(e,t){return t||(t=Pe(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Du=G$,sh=_ae;function ih(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function du(e,t){return(t||Pe(8)).write_shift(8,e,"f")}function Tae(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Mae[a];u&&(t.rgb=lk(u));break;case 2:t.rgb=lk([o,l,c]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Jx(e,t){if(t||(t=Pe(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function Eae(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Aae(e,t){t||(t=Pe(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var K$=2,Xa=3,dg=11,Zx=19,fg=64,Cae=65,Dae=71,kae=4108,Oae=4126,zn=80,JD={1:{n:"CodePage",t:K$},2:{n:"Category",t:zn},3:{n:"PresentationFormat",t:zn},4:{n:"ByteCount",t:Xa},5:{n:"LineCount",t:Xa},6:{n:"ParagraphCount",t:Xa},7:{n:"SlideCount",t:Xa},8:{n:"NoteCount",t:Xa},9:{n:"HiddenCount",t:Xa},10:{n:"MultimediaClipCount",t:Xa},11:{n:"ScaleCrop",t:dg},12:{n:"HeadingPairs",t:kae},13:{n:"TitlesOfParts",t:Oae},14:{n:"Manager",t:zn},15:{n:"Company",t:zn},16:{n:"LinksUpToDate",t:dg},17:{n:"CharacterCount",t:Xa},19:{n:"SharedDoc",t:dg},22:{n:"HyperlinksChanged",t:dg},23:{n:"AppVersion",t:Xa,p:"version"},24:{n:"DigSig",t:Cae},26:{n:"ContentType",t:zn},27:{n:"ContentStatus",t:zn},28:{n:"Language",t:zn},29:{n:"Version",t:zn},255:{},2147483648:{n:"Locale",t:Zx},2147483651:{n:"Behavior",t:Zx},1919054434:{}},ZD={1:{n:"CodePage",t:K$},2:{n:"Title",t:zn},3:{n:"Subject",t:zn},4:{n:"Author",t:zn},5:{n:"Keywords",t:zn},6:{n:"Comments",t:zn},7:{n:"Template",t:zn},8:{n:"LastAuthor",t:zn},9:{n:"RevNumber",t:zn},10:{n:"EditTime",t:fg},11:{n:"LastPrinted",t:fg},12:{n:"CreatedDate",t:fg},13:{n:"ModifiedDate",t:fg},14:{n:"PageCount",t:Xa},15:{n:"WordCount",t:Xa},16:{n:"CharCount",t:Xa},17:{n:"Thumbnail",t:Dae},18:{n:"Application",t:zn},19:{n:"DocSecurity",t:Xa},255:{},2147483648:{n:"Locale",t:Zx},2147483651:{n:"Behavior",t:Zx},1919054434:{}};function Pae(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Iae=Pae([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Mae=za(Iae),w0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Rae={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},hg={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Y$(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function X$(e,t){var r=qne(Rae),n=[],a;n[n.length]=wn,n[n.length]=Je("Types",null,{xmlns:Mn.CT,"xmlns:xsd":Mn.xsd,"xmlns:xsi":Mn.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Je("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Je("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:hg[c][t.bookType]||hg[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Je("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:hg[c][t.bookType]||hg[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Je("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var lr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Q$(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Md(e){var t=[wn,Je("Relationships",null,{xmlns:Mn.RELS})];return ea(e["!id"]).forEach(function(r){t[t.length]=Je("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function wr(e,t,r,n,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[lr.HLINK,lr.XPATH,lr.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function Fae(e){var t=[wn];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function ek(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Lae(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function $ae(e){var t=[wn];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(ek(e[r][0],e[r][1])),t.push(Lae("",e[r][0]));return t.push(ek("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function J$(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Hx.version+"</meta:generator></office:meta></office:document-meta>"}var qc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function ob(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=jr(t),n[n.length]=r?Je(e,t,r):Kn(e,t))}function Z$(e,t){var r=t||{},n=[wn,Je("cp:coreProperties",null,{"xmlns:cp":Mn.CORE_PROPS,"xmlns:dc":Mn.dc,"xmlns:dcterms":Mn.dcterms,"xmlns:dcmitype":Mn.dcmitype,"xmlns:xsi":Mn.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&ob("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:_N(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&ob("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:_N(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var i=0;i!=qc.length;++i){var o=qc[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&ob(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Rd=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],e8=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function t8(e){var t=[],r=Je;return e||(e={}),e.Application="SheetJS",t[t.length]=wn,t[t.length]=Je("Properties",null,{xmlns:Mn.EXT_PROPS,"xmlns:vt":Mn.vt}),Rd.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=jr(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+jr(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function r8(e){var t=[wn,Je("Properties",null,{xmlns:Mn.CUST_PROPS,"xmlns:vt":Mn.vt})];if(!e)return t.join("");var r=1;return ea(e).forEach(function(a){++r,t[t.length]=Je("property",nae(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:jr(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var tk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Bae(e,t){var r=[];return ea(tk).map(function(n){for(var a=0;a<qc.length;++a)if(qc[a][1]==n)return qc[a];for(a=0;a<Rd.length;++a)if(Rd[a][1]==n)return Rd[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Kn(tk[n[1]]||n[1],a))}}),Je("DocumentProperties",r.join(""),{xmlns:rs.o})}function Uae(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&ea(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<qc.length;++o)if(i==qc[o][1])return;for(o=0;o<Rd.length;++o)if(i==Rd[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(Je(WD(i),l,{"dt:dt":c}))}}),t&&ea(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(Je(WD(i),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+rs.o+'">'+a.join("")+"</"+n+">"}function Wae(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),a+=i);var o=Pe(8);return o.write_shift(4,n),o.write_shift(4,a),o}function rk(e,t){var r=Pe(4),n=Pe(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Pe(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=Wae(t);break;case 31:case 80:for(n=Pe(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Gn([r,n])}var n8=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Vae(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function nk(e,t,r){var n=Pe(8),a=[],i=[],o=8,l=0,c=Pe(8),u=Pe(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),a.push(u),o+=8+c.length,!t){u=Pe(8),u.write_shift(4,0),a.unshift(u);var d=[Pe(4)];for(d[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=Pe(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Gn(d),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(n8.indexOf(e[l][0])>-1||e8.indexOf(e[l][0])>-1)&&e[l][1]!=null){var h=e[l][1],m=0;if(t){m=+t[e[l][0]];var g=r[m];if(g.p=="version"&&typeof h=="string"){var p=h.split(".");h=(+p[0]<<16)+(+p[1]||0)}c=rk(g.t,h)}else{var y=Vae(h);y==-1&&(y=31,h=String(h)),c=rk(y,h)}i.push(c),u=Pe(8),u.write_shift(4,t?m:2+l),a.push(u),o+=8+c.length}var b=8*(i.length+1);for(l=0;l<i.length;++l)a[l].write_shift(4,b),b+=i[l].length;return n.write_shift(4,o),n.write_shift(4,i.length),Gn([n].concat(a).concat(i))}function ak(e,t,r,n,a,i){var o=Pe(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Er.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,a?68:48);var c=nk(e,r,n);if(l.push(c),a){var u=nk(a,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Gn(l)}function Hae(e,t){t||(t=Pe(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function zae(e,t){return e.read_shift(t)===1}function Na(e,t){return t||(t=Pe(2)),t.write_shift(2,+!!e),t}function a8(e){return e.read_shift(2,"u")}function Ns(e,t){return t||(t=Pe(2)),t.write_shift(2,e),t}function s8(e,t,r){return r||(r=Pe(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function i8(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?e.read_shift(n,a):"";return o}function qae(e){var t=e.t||"",r=Pe(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Pe(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Gn(a)}function Gae(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function Kae(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Gae(e,n,r)}function Yae(e,t,r){if(r.biff>5)return Kae(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function o8(e,t,r){return r||(r=Pe(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function sk(e,t){t||(t=Pe(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Xae(e){var t=Pe(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),i=a>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)n=n.slice(1),sk(n,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&sk(a>-1?n.slice(a+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function fu(e,t,r,n){return n||(n=Pe(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function Qae(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[a,i,o]}function Jae(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function l8(e,t){return t||(t=Pe(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function vT(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Pe(a);return i.write_shift(2,n),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Zae(e,t){var r=!t||t.biff==8,n=Pe(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function ese(e,t){var r=!t||t.biff>=8?2:1,n=Pe(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function tse(e,t){var r=Pe(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=qae(e[a]);var i=Gn([r].concat(n));return i.parts=[r.length].concat(n.map(function(o){return o.length})),i}function rse(){var e=Pe(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function nse(e){var t=Pe(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function ase(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,i=Pe(a);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function sse(e,t,r,n){var a=Pe(10);return fu(e,t,n,a),a.write_shift(4,r),a}function ise(e,t,r,n,a){var i=!a||a.biff==8,o=Pe(8+ +i+(1+i)*r.length);return fu(e,t,n,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function ose(e,t,r,n){var a=r&&r.biff==5;n||(n=Pe(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}function lse(e,t){var r=t.biff==8||!t.biff?4:2,n=Pe(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function ik(e,t,r,n){var a=r&&r.biff==5;n||(n=Pe(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function cse(e){var t=Pe(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function use(e,t,r,n,a,i){var o=Pe(8);return fu(e,t,n,o),s8(r,i,o),o}function dse(e,t,r,n){var a=Pe(14);return fu(e,t,n,a),du(r,a),a}function fse(e,t,r){if(r.biff<8)return hse(e,t,r);for(var n=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(Qae(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function hse(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=i8(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function mse(e){var t=Pe(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)l8(e[r],t);return t}function pse(e){var t=Pe(24),r=Fn(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Gn([t,Xae(e[1])])}function gse(e){var t=e[1].Tooltip,r=Pe(10+2*(t.length+1));r.write_shift(2,2048);var n=Fn(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function xse(e){return e||(e=Pe(4)),e.write_shift(2,1),e.write_shift(2,1),e}function yse(e,t,r){if(!r.cellStyles)return Xi(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function vse(e,t){var r=Pe(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function wse(e){for(var t=Pe(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function bse(e,t,r){var n=Pe(15);return j0(n,e,t),n.write_shift(8,r,"f"),n}function jse(e,t,r){var n=Pe(9);return j0(n,e,t),n.write_shift(2,r),n}var Nse=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=lT({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=uu(1);switch(c.type){case"base64":d=ri(Fo(l));break;case"binary":d=ri(l);break;case"buffer":case"array":d=l;break}es(d,0);var f=d.read_shift(1),h=!!(f&136),m=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,h=!0;break;case 49:m=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,y=521;f==2&&(p=d.read_shift(2)),d.l+=3,f!=2&&(p=d.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(y=d.read_shift(2));var b=d.read_shift(2),x=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(x=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var w=[],v={},j=Math.min(d.length,f==2?521:y-10-(m?264:0)),S=g?32:11;d.l<j&&d[d.l]!=13;)switch(v={},v.name=zx.utils.decode(x,d.slice(d.l,d.l+S)).replace(/[\u0000\r\n].*$/g,""),d.l+=S,v.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(v.offset=d.read_shift(4)),v.len=d.read_shift(1),f==2&&(v.offset=d.read_shift(2)),v.dec=d.read_shift(1),v.name.length&&w.push(v),f!=2&&(d.l+=g?13:14),v.type){case"B":(!m||v.len!=8)&&c.WTF&&console.log("Skipping "+v.name+":"+v.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+v.name+":"+v.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+v.type)}if(d[d.l]!==13&&(d.l=y-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=y;var _=0,A=0;for(u[0]=[],A=0;A!=w.length;++A)u[0][A]=w[A].name;for(;p-- >0;){if(d[d.l]===42){d.l+=b;continue}for(++d.l,u[++_]=[],A=0,A=0;A!=w.length;++A){var C=d.slice(d.l,d.l+w[A].len);d.l+=w[A].len,es(C,0);var D=zx.utils.decode(x,C);switch(w[A].type){case"C":D.trim().length&&(u[_][A]=D.replace(/\s+$/,""));break;case"D":D.length===8?u[_][A]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):u[_][A]=D;break;case"F":u[_][A]=parseFloat(D.trim());break;case"+":case"I":u[_][A]=g?C.read_shift(-4,"i")^2147483648:C.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":u[_][A]=!0;break;case"N":case"F":u[_][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[_][A]="##MEMO##"+(g?parseInt(D.trim(),10):C.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(u[_][A]=+D||0);break;case"@":u[_][A]=new Date(C.read_shift(-8,"f")-621356832e5);break;case"T":u[_][A]=new Date((C.read_shift(4)-2440588)*864e5+C.read_shift(4));break;case"Y":u[_][A]=C.read_shift(4,"i")/1e4+C.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[_][A]=-C.read_shift(-8,"f");break;case"B":if(m&&w[A].len==8){u[_][A]=C.read_shift(8,"f");break}case"G":case"P":C.l+=w[A].len;break;case"0":if(w[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[A].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=w,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=ah(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return Tu(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&Qm(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Va(),f=ay(l,{header:1,raw:!0,cellDates:!0}),h=f[0],m=f.slice(1),g=l["!cols"]||[],p=0,y=0,b=0,x=1;for(p=0;p<h.length;++p){if(((g[p]||{}).DBF||{}).name){h[p]=g[p].DBF.name,++b;continue}if(h[p]!=null){if(++b,typeof h[p]=="number"&&(h[p]=h[p].toString(10)),typeof h[p]!="string")throw new Error("DBF Invalid column name "+h[p]+" |"+typeof h[p]+"|");if(h.indexOf(h[p])!==p){for(y=0;y<1024;++y)if(h.indexOf(h[p]+"_"+y)==-1){h[p]+="_"+y;break}}}}var w=Br(l["!ref"]),v=[],j=[],S=[];for(p=0;p<=w.e.c-w.s.c;++p){var _="",A="",C=0,D=[];for(y=0;y<m.length;++y)m[y][p]!=null&&D.push(m[y][p]);if(D.length==0||h[p]==null){v[p]="?";continue}for(y=0;y<D.length;++y){switch(typeof D[y]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=D[y]instanceof Date?"D":"C";break;default:A="C"}C=Math.max(C,String(D[y]).length),_=_&&_!=A?"C":A}C>250&&(C=250),A=((g[p]||{}).DBF||{}).type,A=="C"&&g[p].DBF.len>C&&(C=g[p].DBF.len),_=="B"&&A=="N"&&(_="N",S[p]=g[p].DBF.dec,C=g[p].DBF.len),j[p]=_=="C"||A=="N"?C:i[_]||0,x+=j[p],v[p]=_}var k=d.next(32);for(k.write_shift(4,318902576),k.write_shift(4,m.length),k.write_shift(2,296+32*b),k.write_shift(2,x),p=0;p<4;++p)k.write_shift(4,0);for(k.write_shift(4,0|(+t[u$]||3)<<8),p=0,y=0;p<h.length;++p)if(h[p]!=null){var O=d.next(32),V=(h[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,V,"sbcs"),O.write_shift(1,v[p]=="?"?"C":v[p],"sbcs"),O.write_shift(4,y),O.write_shift(1,j[p]||i[v[p]]||0),O.write_shift(1,S[p]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),y+=j[p]||i[v[p]]||0}var G=d.next(264);for(G.write_shift(4,13),p=0;p<65;++p)G.write_shift(4,0);for(p=0;p<m.length;++p){var Y=d.next(x);for(Y.write_shift(1,0),y=0;y<h.length;++y)if(h[y]!=null)switch(v[y]){case"L":Y.write_shift(1,m[p][y]==null?63:m[p][y]?84:70);break;case"B":Y.write_shift(8,m[p][y]||0,"f");break;case"N":var W="0";for(typeof m[p][y]=="number"&&(W=m[p][y].toFixed(S[y]||0)),b=0;b<j[y]-W.length;++b)Y.write_shift(1,32);Y.write_shift(1,W,"sbcs");break;case"D":m[p][y]?(Y.write_shift(4,("0000"+m[p][y].getFullYear()).slice(-4),"sbcs"),Y.write_shift(2,("00"+(m[p][y].getMonth()+1)).slice(-2),"sbcs"),Y.write_shift(2,("00"+m[p][y].getDate()).slice(-2),"sbcs")):Y.write_shift(8,"00000000","sbcs");break;case"C":var P=String(m[p][y]!=null?m[p][y]:"").slice(0,j[y]);for(Y.write_shift(1,P,"sbcs"),b=0;b<j[y]-P.length;++b)Y.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),Sse=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ea(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,m){var g=e[m];return typeof g=="number"?DD(g):g},n=function(h,m,g){var p=m.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return p==59?h:DD(p)};e["|"]=254;function a(h,m){switch(m.type){case"base64":return i(Fo(h),m);case"binary":return i(h,m);case"buffer":return i(dr&&Buffer.isBuffer(h)?h.toString("binary"):x0(h),m);case"array":return i(l1(h),m)}throw new Error("Unrecognized type "+m.type)}function i(h,m){var g=h.split(/[\n\r]+/),p=-1,y=-1,b=0,x=0,w=[],v=[],j=null,S={},_=[],A=[],C=[],D=0,k;for(+m.codepage>=0&&Qm(+m.codepage);b!==g.length;++b){D=0;var O=g[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),V=O.replace(/;;/g,"\0").split(";").map(function(B){return B.replace(/\u0000/g,";")}),G=V[0],Y;if(O.length>0)switch(G){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":V[1].charAt(0)=="P"&&v.push(O.slice(3).replace(/;;/g,";"));break;case"C":var W=!1,P=!1,E=!1,R=!1,I=-1,ee=-1;for(x=1;x<V.length;++x)switch(V[x].charAt(0)){case"A":break;case"X":y=parseInt(V[x].slice(1))-1,P=!0;break;case"Y":for(p=parseInt(V[x].slice(1))-1,P||(y=0),k=w.length;k<=p;++k)w[k]=[];break;case"K":Y=V[x].slice(1),Y.charAt(0)==='"'?Y=Y.slice(1,Y.length-1):Y==="TRUE"?Y=!0:Y==="FALSE"?Y=!1:isNaN(So(Y))?isNaN(Zm(Y).getDate())||(Y=Ta(Y)):(Y=So(Y),j!==null&&j$(j)&&(Y=T$(Y))),W=!0;break;case"E":R=!0;var L=jie(V[x].slice(1),{r:p,c:y});w[p][y]=[w[p][y],L];break;case"S":E=!0,w[p][y]=[w[p][y],"S5S"];break;case"G":break;case"R":I=parseInt(V[x].slice(1))-1;break;case"C":ee=parseInt(V[x].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+O)}if(W&&(w[p][y]&&w[p][y].length==2?w[p][y][0]=Y:w[p][y]=Y,j=null),E){if(R)throw new Error("SYLK shared formula cannot have own formula");var q=I>-1&&w[I][ee];if(!q||!q[1])throw new Error("SYLK shared formula cannot find base");w[p][y][1]=Nie(q[1],{r:p-I,c:y-ee})}break;case"F":var H=0;for(x=1;x<V.length;++x)switch(V[x].charAt(0)){case"X":y=parseInt(V[x].slice(1))-1,++H;break;case"Y":for(p=parseInt(V[x].slice(1))-1,k=w.length;k<=p;++k)w[k]=[];break;case"M":D=parseInt(V[x].slice(1))/20;break;case"F":break;case"G":break;case"P":j=v[parseInt(V[x].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(C=V[x].slice(1).split(" "),k=parseInt(C[0],10);k<=parseInt(C[1],10);++k)D=parseInt(C[2],10),A[k-1]=D===0?{hidden:!0}:{wch:D},wT(A[k-1]);break;case"C":y=parseInt(V[x].slice(1))-1,A[y]||(A[y]={});break;case"R":p=parseInt(V[x].slice(1))-1,_[p]||(_[p]={}),D>0?(_[p].hpt=D,_[p].hpx=h8(D)):D===0&&(_[p].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+O)}H<1&&(j=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+O)}}return _.length>0&&(S["!rows"]=_),A.length>0&&(S["!cols"]=A),m&&m.sheetRows&&(w=w.slice(0,m.sheetRows)),[w,S]}function o(h,m){var g=a(h,m),p=g[0],y=g[1],b=ah(p,m);return ea(y).forEach(function(x){b[x]=y[x]}),b}function l(h,m){return Tu(o(h,m),m)}function c(h,m,g,p){var y="C;Y"+(g+1)+";X"+(p+1)+";K";switch(h.t){case"n":y+=h.v||0,h.f&&!h.F&&(y+=";E"+jT(h.f,{r:g,c:p}));break;case"b":y+=h.v?"TRUE":"FALSE";break;case"e":y+=h.w||h.v;break;case"d":y+='"'+(h.w||h.v)+'"';break;case"s":y+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function u(h,m){m.forEach(function(g,p){var y="F;W"+(p+1)+" "+(p+1)+" ";g.hidden?y+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=ey(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=ty(g.wpx)),typeof g.wch=="number"&&(y+=Math.round(g.wch))),y.charAt(y.length-1)!=" "&&h.push(y)})}function d(h,m){m.forEach(function(g,p){var y="F;";g.hidden?y+="M0;":g.hpt?y+="M"+20*g.hpt+";":g.hpx&&(y+="M"+20*ry(g.hpx)+";"),y.length>2&&h.push(y+"R"+(p+1))})}function f(h,m){var g=["ID;PWXL;N;E"],p=[],y=Br(h["!ref"]),b,x=Array.isArray(h),w=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var v=y.s.r;v<=y.e.r;++v)for(var j=y.s.c;j<=y.e.c;++j){var S=_r({r:v,c:j});b=x?(h[v]||[])[j]:h[S],!(!b||b.v==null&&(!b.f||b.F))&&p.push(c(b,h,v,j))}return g.join(w)+w+p.join(w)+w+"E"+w}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),_se=function(){function e(i,o){switch(o.type){case"base64":return t(Fo(i),o);case"binary":return t(i,o);case"buffer":return t(dr&&Buffer.isBuffer(i)?i.toString("binary"):x0(i),o);case"array":return t(l1(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),m=h[0],g=h[1];++d;for(var p=l[d]||"";(p.match(/["]/g)||[]).length&1&&d<l.length-1;)p+=`
`+l[++d];switch(p=p.trim(),+m){case-1:if(p==="BOT"){f[++c]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?f[c][u]=!0:p==="FALSE"?f[c][u]=!1:isNaN(So(g))?isNaN(Zm(g).getDate())?f[c][u]=g:f[c][u]=Ta(g):f[c][u]=So(g),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),f[c][u++]=p!==""?p:null;break}if(p==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(i,o){return ah(e(i,o),o)}function n(i,o){return Tu(r(i,o),o)}var a=function(){var i=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Br(c["!ref"]),f,h=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,d.e.r-d.s.r+1,""),i(u,"TUPLES",0,d.e.c-d.s.c+1,""),i(u,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){o(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var p=_r({r:m,c:g});if(f=h?(c[m]||[])[g]:c[p],!f){o(u,1,0,"");continue}switch(f.t){case"n":var y=f.w;!y&&f.v!=null&&(y=f.v),y==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,y,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Kl(f.z||Zr[14],Ha(Ta(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var b=`\r
`,x=u.join(b);return x}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),c8=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var m=f.split(`
`),g=-1,p=-1,y=0,b=[];y!==m.length;++y){var x=m[y].trim().split(":");if(x[0]==="cell"){var w=Fn(x[1]);if(b.length<=w.r)for(g=b.length;g<=w.r;++g)b[g]||(b[g]=[]);switch(g=w.r,p=w.c,x[2]){case"t":b[g][p]=e(x[3]);break;case"v":b[g][p]=+x[3];break;case"vtf":var v=x[x.length-1];case"vtc":switch(x[3]){case"nl":b[g][p]=!!+x[4];break;default:b[g][p]=+x[4];break}x[2]=="vtf"&&(b[g][p]=[b[g][p],v])}}}return h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),b}function n(f,h){return ah(r(f,h),h)}function a(f,h){return Tu(n(f,h),h)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],m=[],g,p="",y=hs(f["!ref"]),b=Array.isArray(f),x=y.s.r;x<=y.e.r;++x)for(var w=y.s.c;w<=y.e.c;++w)if(p=_r({r:x,c:w}),g=b?(f[x]||[])[w]:f[p],!(!g||g.v==null||g.t==="z")){switch(m=["cell",p,"t"],g.t){case"s":case"str":m.push(t(g.v));break;case"n":g.f?(m[2]="vtf",m[3]="n",m[4]=g.v,m[5]=t(g.f)):(m[2]="v",m[3]=g.v);break;case"b":m[2]="vt"+(g.f?"f":"c"),m[3]="nl",m[4]=g.v?"1":"0",m[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var v=Ha(Ta(g.v));m[2]="vtc",m[3]="nd",m[4]=""+v,m[5]=g.w||Kl(g.z||Zr[14],v);break;case"e":continue}h.push(m.join(":"))}return h.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[i,o,l,o,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Tse=function(){function e(d,f,h,m,g){g.raw?f[h][m]=d:d===""||(d==="TRUE"?f[h][m]=!0:d==="FALSE"?f[h][m]=!1:isNaN(So(d))?isNaN(Zm(d).getDate())?f[h][m]=d:f[h][m]=Ta(d):f[h][m]=So(d))}function t(d,f){var h=f||{},m=[];if(!d||d.length===0)return m;for(var g=d.split(/[\r\n]/),p=g.length-1;p>=0&&g[p].length===0;)--p;for(var y=10,b=0,x=0;x<=p;++x)b=g[x].indexOf(" "),b==-1?b=g[x].length:b++,y=Math.max(y,b);for(x=0;x<=p;++x){m[x]=[];var w=0;for(e(g[x].slice(0,y).trim(),m,x,w,h),w=1;w<=(g[x].length-y)/10+1;++w)e(g[x].slice(y+(w-1)*10,y+w*10).trim(),m,x,w,h)}return h.sheetRows&&(m=m.slice(0,h.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,m=0,g=0;m<d.length;++m)(g=d.charCodeAt(m))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m]);if(!g.length){f=n;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&g.push([f[m],m])}return g.sort(function(p,y){return p[0]-y[0]||n[p[1]]-n[y[1]]}),r[g.pop()[1]]||44}function i(d,f){var h=f||{},m="",g=h.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=a(d.slice(0,1024)):h&&h.FS?m=h.FS:m=a(d.slice(0,1024));var y=0,b=0,x=0,w=0,v=0,j=m.charCodeAt(0),S=!1,_=0,A=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var C=h.dateNF!=null?Wne(h.dateNF):null;function D(){var k=d.slice(w,v),O={};if(k.charAt(0)=='"'&&k.charAt(k.length-1)=='"'&&(k=k.slice(1,-1).replace(/""/g,'"')),k.length===0)O.t="z";else if(h.raw)O.t="s",O.v=k;else if(k.trim().length===0)O.t="s",O.v=k;else if(k.charCodeAt(0)==61)k.charCodeAt(1)==34&&k.charCodeAt(k.length-1)==34?(O.t="s",O.v=k.slice(2,-1).replace(/""/g,'"')):Sie(k)?(O.t="n",O.f=k.slice(1)):(O.t="s",O.v=k);else if(k=="TRUE")O.t="b",O.v=!0;else if(k=="FALSE")O.t="b",O.v=!1;else if(!isNaN(x=So(k)))O.t="n",h.cellText!==!1&&(O.w=k),O.v=x;else if(!isNaN(Zm(k).getDate())||C&&k.match(C)){O.z=h.dateNF||Zr[14];var V=0;C&&k.match(C)&&(k=Vne(k,h.dateNF,k.match(C)||[]),V=1),h.cellDates?(O.t="d",O.v=Ta(k,V)):(O.t="n",O.v=Ha(Ta(k,V))),h.cellText!==!1&&(O.w=Kl(O.z,O.v instanceof Date?Ha(O.v):O.v)),h.cellNF||delete O.z}else O.t="s",O.v=k;if(O.t=="z"||(h.dense?(g[y]||(g[y]=[]),g[y][b]=O):g[_r({c:b,r:y})]=O),w=v+1,A=d.charCodeAt(w),p.e.c<b&&(p.e.c=b),p.e.r<y&&(p.e.r=y),_==j)++b;else if(b=0,++y,h.sheetRows&&h.sheetRows<=y)return!0}e:for(;v<d.length;++v)switch(_=d.charCodeAt(v)){case 34:A===34&&(S=!S);break;case j:case 10:case 13:if(!S&&D())break e;break}return v-w>0&&D(),g["!ref"]=xn(p),g}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?i(d,f):ah(t(d,f),f)}function l(d,f){var h="",m=f.type=="string"?[0,0,0,0]:Lue(d,f);switch(f.type){case"base64":h=Fo(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof zx<"u"||(h=dr&&Buffer.isBuffer(d)?d.toString("binary"):x0(d));break;case"array":h=l1(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?h=gm(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=gm(h):f.type=="binary"&&typeof zx<"u",h.slice(0,19)=="socialcalc:version:"?c8.to_sheet(f.type=="string"?h:gm(h),f):o(h,f)}function c(d,f){return Tu(l(d,f),f)}function u(d){for(var f=[],h=Br(d["!ref"]),m,g=Array.isArray(d),p=h.s.r;p<=h.e.r;++p){for(var y=[],b=h.s.c;b<=h.e.c;++b){var x=_r({r:p,c:b});if(m=g?(d[p]||[])[b]:d[x],!m||m.v==null){y.push("          ");continue}for(var w=(m.w||(Lo(m),m.w)||"").slice(0,10);w.length<10;)w+=" ";y.push(w+(b===0?" ":""))}f.push(y.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}(),ok=function(){function e(L,q,H){if(L){es(L,L.l||0);for(var B=H.Enum||I;L.l<L.length;){var de=L.read_shift(2),ce=B[de]||B[65535],ge=L.read_shift(2),he=L.l+ge,K=ce.f&&ce.f(L,ge,H);if(L.l=he,q(K,ce,de))return}}}function t(L,q){switch(q.type){case"base64":return r(ri(Fo(L)),q);case"binary":return r(ri(L),q);case"buffer":case"array":return r(L,q)}throw"Unsupported type "+q.type}function r(L,q){if(!L)return L;var H=q||{},B=H.dense?[]:{},de="Sheet1",ce="",ge=0,he={},K=[],fe=[],ae={s:{r:0,c:0},e:{r:0,c:0}},Ne=H.sheetRows||0;if(L[2]==0&&(L[3]==8||L[3]==9)&&L.length>=16&&L[14]==5&&L[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(L[2]==2)H.Enum=I,e(L,function(M,oe,be){switch(be){case 0:H.vers=M,M>=4096&&(H.qpro=!0);break;case 6:ae=M;break;case 204:M&&(ce=M);break;case 222:ce=M;break;case 15:case 51:H.qpro||(M[1].v=M[1].v.slice(1));case 13:case 14:case 16:be==14&&(M[2]&112)==112&&(M[2]&15)>1&&(M[2]&15)<15&&(M[1].z=H.dateNF||Zr[14],H.cellDates&&(M[1].t="d",M[1].v=T$(M[1].v))),H.qpro&&M[3]>ge&&(B["!ref"]=xn(ae),he[de]=B,K.push(de),B=H.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},ge=M[3],de=ce||"Sheet"+(ge+1),ce="");var U=H.dense?(B[M[0].r]||[])[M[0].c]:B[_r(M[0])];if(U){U.t=M[1].t,U.v=M[1].v,M[1].z!=null&&(U.z=M[1].z),M[1].f!=null&&(U.f=M[1].f);break}H.dense?(B[M[0].r]||(B[M[0].r]=[]),B[M[0].r][M[0].c]=M[1]):B[_r(M[0])]=M[1];break}},H);else if(L[2]==26||L[2]==14)H.Enum=ee,L[2]==14&&(H.qpro=!0,L.l=0),e(L,function(M,oe,be){switch(be){case 204:de=M;break;case 22:M[1].v=M[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(M[3]>ge&&(B["!ref"]=xn(ae),he[de]=B,K.push(de),B=H.dense?[]:{},ae={s:{r:0,c:0},e:{r:0,c:0}},ge=M[3],de="Sheet"+(ge+1)),Ne>0&&M[0].r>=Ne)break;H.dense?(B[M[0].r]||(B[M[0].r]=[]),B[M[0].r][M[0].c]=M[1]):B[_r(M[0])]=M[1],ae.e.c<M[0].c&&(ae.e.c=M[0].c),ae.e.r<M[0].r&&(ae.e.r=M[0].r);break;case 27:M[14e3]&&(fe[M[14e3][0]]=M[14e3][1]);break;case 1537:fe[M[0]]=M[1],M[0]==ge&&(de=M[1]);break}},H);else throw new Error("Unrecognized LOTUS BOF "+L[2]);if(B["!ref"]=xn(ae),he[ce||de]=B,K.push(ce||de),!fe.length)return{SheetNames:K,Sheets:he};for(var Se={},Ae=[],Oe=0;Oe<fe.length;++Oe)he[K[Oe]]?(Ae.push(fe[Oe]||K[Oe]),Se[fe[Oe]]=he[fe[Oe]]||he[K[Oe]]):(Ae.push(fe[Oe]),Se[fe[Oe]]={"!ref":"A1"});return{SheetNames:Ae,Sheets:Se}}function n(L,q){var H=q||{};if(+H.codepage>=0&&Qm(+H.codepage),H.type=="string")throw new Error("Cannot write WK1 to JS string");var B=Va(),de=Br(L["!ref"]),ce=Array.isArray(L),ge=[];Ze(B,0,i(1030)),Ze(B,6,c(de));for(var he=Math.min(de.e.r,8191),K=de.s.r;K<=he;++K)for(var fe=Qn(K),ae=de.s.c;ae<=de.e.c;++ae){K===de.s.r&&(ge[ae]=fa(ae));var Ne=ge[ae]+fe,Se=ce?(L[K]||[])[ae]:L[Ne];if(!(!Se||Se.t=="z"))if(Se.t=="n")(Se.v|0)==Se.v&&Se.v>=-32768&&Se.v<=32767?Ze(B,13,m(K,ae,Se.v)):Ze(B,14,p(K,ae,Se.v));else{var Ae=Lo(Se);Ze(B,15,f(K,ae,Ae.slice(0,239)))}}return Ze(B,1),B.end()}function a(L,q){var H=q||{};if(+H.codepage>=0&&Qm(+H.codepage),H.type=="string")throw new Error("Cannot write WK3 to JS string");var B=Va();Ze(B,0,o(L));for(var de=0,ce=0;de<L.SheetNames.length;++de)(L.Sheets[L.SheetNames[de]]||{})["!ref"]&&Ze(B,27,R(L.SheetNames[de],ce++));var ge=0;for(de=0;de<L.SheetNames.length;++de){var he=L.Sheets[L.SheetNames[de]];if(!(!he||!he["!ref"])){for(var K=Br(he["!ref"]),fe=Array.isArray(he),ae=[],Ne=Math.min(K.e.r,8191),Se=K.s.r;Se<=Ne;++Se)for(var Ae=Qn(Se),Oe=K.s.c;Oe<=K.e.c;++Oe){Se===K.s.r&&(ae[Oe]=fa(Oe));var M=ae[Oe]+Ae,oe=fe?(he[Se]||[])[Oe]:he[M];if(!(!oe||oe.t=="z"))if(oe.t=="n")Ze(B,23,D(Se,Oe,ge,oe.v));else{var be=Lo(oe);Ze(B,22,_(Se,Oe,ge,be.slice(0,239)))}}++ge}}return Ze(B,1),B.end()}function i(L){var q=Pe(2);return q.write_shift(2,L),q}function o(L){var q=Pe(26);q.write_shift(2,4096),q.write_shift(2,4),q.write_shift(4,0);for(var H=0,B=0,de=0,ce=0;ce<L.SheetNames.length;++ce){var ge=L.SheetNames[ce],he=L.Sheets[ge];if(!(!he||!he["!ref"])){++de;var K=hs(he["!ref"]);H<K.e.r&&(H=K.e.r),B<K.e.c&&(B=K.e.c)}}return H>8191&&(H=8191),q.write_shift(2,H),q.write_shift(1,de),q.write_shift(1,B),q.write_shift(2,0),q.write_shift(2,0),q.write_shift(1,1),q.write_shift(1,2),q.write_shift(4,0),q.write_shift(4,0),q}function l(L,q,H){var B={s:{c:0,r:0},e:{c:0,r:0}};return q==8&&H.qpro?(B.s.c=L.read_shift(1),L.l++,B.s.r=L.read_shift(2),B.e.c=L.read_shift(1),L.l++,B.e.r=L.read_shift(2),B):(B.s.c=L.read_shift(2),B.s.r=L.read_shift(2),q==12&&H.qpro&&(L.l+=2),B.e.c=L.read_shift(2),B.e.r=L.read_shift(2),q==12&&H.qpro&&(L.l+=2),B.s.c==65535&&(B.s.c=B.e.c=B.s.r=B.e.r=0),B)}function c(L){var q=Pe(8);return q.write_shift(2,L.s.c),q.write_shift(2,L.s.r),q.write_shift(2,L.e.c),q.write_shift(2,L.e.r),q}function u(L,q,H){var B=[{c:0,r:0},{t:"n",v:0},0,0];return H.qpro&&H.vers!=20768?(B[0].c=L.read_shift(1),B[3]=L.read_shift(1),B[0].r=L.read_shift(2),L.l+=2):(B[2]=L.read_shift(1),B[0].c=L.read_shift(2),B[0].r=L.read_shift(2)),B}function d(L,q,H){var B=L.l+q,de=u(L,q,H);if(de[1].t="s",H.vers==20768){L.l++;var ce=L.read_shift(1);return de[1].v=L.read_shift(ce,"utf8"),de}return H.qpro&&L.l++,de[1].v=L.read_shift(B-L.l,"cstr"),de}function f(L,q,H){var B=Pe(7+H.length);B.write_shift(1,255),B.write_shift(2,q),B.write_shift(2,L),B.write_shift(1,39);for(var de=0;de<B.length;++de){var ce=H.charCodeAt(de);B.write_shift(1,ce>=128?95:ce)}return B.write_shift(1,0),B}function h(L,q,H){var B=u(L,q,H);return B[1].v=L.read_shift(2,"i"),B}function m(L,q,H){var B=Pe(7);return B.write_shift(1,255),B.write_shift(2,q),B.write_shift(2,L),B.write_shift(2,H,"i"),B}function g(L,q,H){var B=u(L,q,H);return B[1].v=L.read_shift(8,"f"),B}function p(L,q,H){var B=Pe(13);return B.write_shift(1,255),B.write_shift(2,q),B.write_shift(2,L),B.write_shift(8,H,"f"),B}function y(L,q,H){var B=L.l+q,de=u(L,q,H);if(de[1].v=L.read_shift(8,"f"),H.qpro)L.l=B;else{var ce=L.read_shift(2);v(L.slice(L.l,L.l+ce),de),L.l+=ce}return de}function b(L,q,H){var B=q&32768;return q&=-32769,q=(B?L:0)+(q>=8192?q-16384:q),(B?"":"$")+(H?fa(q):Qn(q))}var x={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function v(L,q){es(L,0);for(var H=[],B=0,de="",ce="",ge="",he="";L.l<L.length;){var K=L[L.l++];switch(K){case 0:H.push(L.read_shift(8,"f"));break;case 1:ce=b(q[0].c,L.read_shift(2),!0),de=b(q[0].r,L.read_shift(2),!1),H.push(ce+de);break;case 2:{var fe=b(q[0].c,L.read_shift(2),!0),ae=b(q[0].r,L.read_shift(2),!1);ce=b(q[0].c,L.read_shift(2),!0),de=b(q[0].r,L.read_shift(2),!1),H.push(fe+ae+":"+ce+de)}break;case 3:if(L.l<L.length){console.error("WK1 premature formula end");return}break;case 4:H.push("("+H.pop()+")");break;case 5:H.push(L.read_shift(2));break;case 6:{for(var Ne="";K=L[L.l++];)Ne+=String.fromCharCode(K);H.push('"'+Ne.replace(/"/g,'""')+'"')}break;case 8:H.push("-"+H.pop());break;case 23:H.push("+"+H.pop());break;case 22:H.push("NOT("+H.pop()+")");break;case 20:case 21:he=H.pop(),ge=H.pop(),H.push(["AND","OR"][K-20]+"("+ge+","+he+")");break;default:if(K<32&&w[K])he=H.pop(),ge=H.pop(),H.push(ge+w[K]+he);else if(x[K]){if(B=x[K][1],B==69&&(B=L[L.l++]),B>H.length){console.error("WK1 bad formula parse 0x"+K.toString(16)+":|"+H.join("|")+"|");return}var Se=H.slice(-B);H.length-=B,H.push(x[K][0]+"("+Se.join(",")+")")}else return K<=7?console.error("WK1 invalid opcode "+K.toString(16)):K<=24?console.error("WK1 unsupported op "+K.toString(16)):K<=30?console.error("WK1 invalid opcode "+K.toString(16)):K<=115?console.error("WK1 unsupported function opcode "+K.toString(16)):console.error("WK1 unrecognized opcode "+K.toString(16))}}H.length==1?q[1].f=""+H[0]:console.error("WK1 bad formula parse |"+H.join("|")+"|")}function j(L){var q=[{c:0,r:0},{t:"n",v:0},0];return q[0].r=L.read_shift(2),q[3]=L[L.l++],q[0].c=L[L.l++],q}function S(L,q){var H=j(L);return H[1].t="s",H[1].v=L.read_shift(q-4,"cstr"),H}function _(L,q,H,B){var de=Pe(6+B.length);de.write_shift(2,L),de.write_shift(1,H),de.write_shift(1,q),de.write_shift(1,39);for(var ce=0;ce<B.length;++ce){var ge=B.charCodeAt(ce);de.write_shift(1,ge>=128?95:ge)}return de.write_shift(1,0),de}function A(L,q){var H=j(L);H[1].v=L.read_shift(2);var B=H[1].v>>1;if(H[1].v&1)switch(B&7){case 0:B=(B>>3)*5e3;break;case 1:B=(B>>3)*500;break;case 2:B=(B>>3)/20;break;case 3:B=(B>>3)/200;break;case 4:B=(B>>3)/2e3;break;case 5:B=(B>>3)/2e4;break;case 6:B=(B>>3)/16;break;case 7:B=(B>>3)/64;break}return H[1].v=B,H}function C(L,q){var H=j(L),B=L.read_shift(4),de=L.read_shift(4),ce=L.read_shift(2);if(ce==65535)return B===0&&de===3221225472?(H[1].t="e",H[1].v=15):B===0&&de===3489660928?(H[1].t="e",H[1].v=42):H[1].v=0,H;var ge=ce&32768;return ce=(ce&32767)-16446,H[1].v=(1-ge*2)*(de*Math.pow(2,ce+32)+B*Math.pow(2,ce)),H}function D(L,q,H,B){var de=Pe(14);if(de.write_shift(2,L),de.write_shift(1,H),de.write_shift(1,q),B==0)return de.write_shift(4,0),de.write_shift(4,0),de.write_shift(2,65535),de;var ce=0,ge=0,he=0,K=0;return B<0&&(ce=1,B=-B),ge=Math.log2(B)|0,B/=Math.pow(2,ge-31),K=B>>>0,K&2147483648||(B/=2,++ge,K=B>>>0),B-=K,K|=2147483648,K>>>=0,B*=Math.pow(2,32),he=B>>>0,de.write_shift(4,he),de.write_shift(4,K),ge+=16383+(ce?32768:0),de.write_shift(2,ge),de}function k(L,q){var H=C(L);return L.l+=q-14,H}function O(L,q){var H=j(L),B=L.read_shift(4);return H[1].v=B>>6,H}function V(L,q){var H=j(L),B=L.read_shift(8,"f");return H[1].v=B,H}function G(L,q){var H=V(L);return L.l+=q-10,H}function Y(L,q){return L[L.l+q-1]==0?L.read_shift(q,"cstr"):""}function W(L,q){var H=L[L.l++];H>q-1&&(H=q-1);for(var B="";B.length<H;)B+=String.fromCharCode(L[L.l++]);return B}function P(L,q,H){if(!(!H.qpro||q<21)){var B=L.read_shift(1);L.l+=17,L.l+=1,L.l+=2;var de=L.read_shift(q-21,"cstr");return[B,de]}}function E(L,q){for(var H={},B=L.l+q;L.l<B;){var de=L.read_shift(2);if(de==14e3){for(H[de]=[0,""],H[de][0]=L.read_shift(2);L[L.l];)H[de][1]+=String.fromCharCode(L[L.l]),L.l++;L.l++}}return H}function R(L,q){var H=Pe(5+L.length);H.write_shift(2,14e3),H.write_shift(2,q);for(var B=0;B<L.length;++B){var de=L.charCodeAt(B);H[H.l++]=de>127?95:de}return H[H.l++]=0,H}var I={0:{n:"BOF",f:a8},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Y},222:{n:"SHEETNAMELP",f:W},65535:{n:""}},ee={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:S},23:{n:"NUMBER17",f:C},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:k},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:E},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:V},40:{n:"FORMULA28",f:G},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Y},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:P},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}(),Ese=/^\s|\s$|[\t\n\r]/;function u8(e,t){if(!t.bookSST)return"";var r=[wn];r[r.length]=Je("sst",null,{xmlns:nh[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(Ese)&&(i+=' xml:space="preserve"'),i+=">"+jr(a.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Ase(e){return[e.read_shift(4),e.read_shift(4)]}function Cse(e,t){return t||(t=Pe(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Dse=wae;function kse(e){var t=Va();$e(t,159,Cse(e));for(var r=0;r<e.length;++r)$e(t,19,Dse(e[r]));return $e(t,160),t.end()}function Ose(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function d8(e){var t=0,r,n=Ose(e),a=n.length+1,i,o,l,c,u;for(r=uu(a),r[0]=n.length,i=1;i!=a;++i)r[i]=n[i-1];for(i=a-1;i>=0;--i)o=r[i],l=t&16384?1:0,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var Pse=function(){function e(a,i){switch(i.type){case"base64":return t(Fo(a),i);case"binary":return t(a,i);case"buffer":return t(dr&&Buffer.isBuffer(a)?a.toString("binary"):x0(a),i);case"array":return t(l1(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var o=i||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,m=0,g,p=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var y=d.slice(m,h.lastIndex-g[0].length);if(y[0]==" "&&(y=y.slice(1)),++p,y.length){var b={v:y,t:"s"};Array.isArray(l)?l[f][p]=b:l[_r({r:f,c:p})]=b}break}m=h.lastIndex}p>u.e.c&&(u.e.c=p)}),l["!ref"]=xn(u),l}function r(a,i){return Tu(e(a,i),i)}function n(a){for(var i=["{\\rtf1\\ansi"],o=Br(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){i.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)i.push("\\cellx"+(d+1));for(i.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=_r({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Lo(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function lk(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var Ise=6,_o=Ise;function ey(e){return Math.floor((e+Math.round(128/_o)/256)*_o)}function ty(e){return Math.floor((e-5)/_o*100+.5)/100}function EN(e){return Math.round((e*_o+5)/_o*256)/256}function wT(e){e.width?(e.wpx=ey(e.width),e.wch=ty(e.wpx),e.MDW=_o):e.wpx?(e.wch=ty(e.wpx),e.width=EN(e.wch),e.MDW=_o):typeof e.wch=="number"&&(e.width=EN(e.wch),e.wpx=ey(e.width),e.MDW=_o),e.customWidth&&delete e.customWidth}var Mse=96,f8=Mse;function ry(e){return e*96/f8}function h8(e){return e*f8/96}function Rse(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Je("numFmt",null,{numFmtId:n,formatCode:jr(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Je("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function Fse(e){var t=[];return t[t.length]=Je("cellXfs",null),e.forEach(function(r){t[t.length]=Je("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Je("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function m8(e,t){var r=[wn,Je("styleSheet",null,{xmlns:nh[0],"xmlns:vt":Mn.vt})],n;return e.SSF&&(n=Rse(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Fse(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Lse(e,t){var r=e.read_shift(2),n=ha(e);return[r,n]}function $se(e,t,r){r||(r=Pe(6+4*t.length)),r.write_shift(2,e),Ln(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Bse(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=Eae(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=Tae(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ha(e),n}function Use(e,t){t||(t=Pe(25+4*32)),t.write_shift(2,e.sz*20),Aae(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Jx(e.color,t);var n=0;return n=2,t.write_shift(1,n),Ln(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Wse=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],lb,Vse=Xi;function ck(e,t){t||(t=Pe(4*3+8*7+16*1)),lb||(lb=lT(Wse));var r=lb[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(Jx({auto:1},t),Jx({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Hse(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function p8(e,t,r){r||(r=Pe(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Mh(e,t){return t||(t=Pe(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var zse=Xi;function qse(e,t){return t||(t=Pe(51)),t.write_shift(1,0),Mh(null,t),Mh(null,t),Mh(null,t),Mh(null,t),Mh(null,t),t.length>t.l?t.slice(0,t.l):t}function Gse(e,t){return t||(t=Pe(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Qx(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Kse(e,t,r){var n=Pe(2052);return n.write_shift(4,e),Qx(t,n),Qx(r,n),n.length>n.l?n.slice(0,n.l):n}function Yse(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&($e(e,615,di(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&$e(e,44,$se(a,t[a]))}),$e(e,616))}}function Xse(e){var t=1;$e(e,611,di(t)),$e(e,43,Use({sz:12,color:{theme:1},name:"Calibri",family:2})),$e(e,612)}function Qse(e){var t=2;$e(e,603,di(t)),$e(e,45,ck({patternType:"none"})),$e(e,45,ck({patternType:"gray125"})),$e(e,604)}function Jse(e){var t=1;$e(e,613,di(t)),$e(e,46,qse()),$e(e,614)}function Zse(e){var t=1;$e(e,626,di(t)),$e(e,47,p8({numFmtId:0},65535)),$e(e,627)}function eie(e,t){$e(e,617,di(t.length)),t.forEach(function(r){$e(e,47,p8(r,0))}),$e(e,618)}function tie(e){var t=1;$e(e,619,di(t)),$e(e,48,Gse({xfId:0,name:"Normal"})),$e(e,620)}function rie(e){var t=0;$e(e,505,di(t)),$e(e,506)}function nie(e){var t=0;$e(e,508,Kse(t,"TableStyleMedium9","PivotStyleMedium4")),$e(e,509)}function aie(e,t){var r=Va();return $e(r,278),Yse(r,e.SSF),Xse(r),Qse(r),Jse(r),Zse(r),eie(r,t.cellXfs),tie(r),rie(r),nie(r),$e(r,279),r.end()}function g8(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[wn];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function sie(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ha(e)}}function iie(e){var t=Pe(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Ln(e.name,t),t.slice(0,t.l)}function oie(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function lie(e){var t=Pe(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function cie(e,t){var r=Pe(8+2*t.length);return r.write_shift(4,e),Ln(t,r),r.slice(0,r.l)}function uie(e){return e.l+=4,e.read_shift(4)!=0}function die(e,t){var r=Pe(8);return r.write_shift(4,e),r.write_shift(4,1),r}function fie(){var e=Va();return $e(e,332),$e(e,334,di(1)),$e(e,335,iie({name:"XLDAPR",version:12e4,flags:3496657072})),$e(e,336),$e(e,339,cie(1,"XLDAPR")),$e(e,52),$e(e,35,di(514)),$e(e,4096,di(0)),$e(e,4097,Ns(1)),$e(e,36),$e(e,53),$e(e,340),$e(e,337,die(1)),$e(e,51,lie([[1,0]])),$e(e,338),$e(e,333),e.end()}function x8(){var e=[wn];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function hie(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=_r(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}var wd=1024;function y8(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Je("xml",null,{"xmlns:v":rs.v,"xmlns:o":rs.o,"xmlns:x":rs.x,"xmlns:mv":rs.mv}).replace(/\/>/,">"),Je("o:shapelayout",Je("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Je("v:shapetype",[Je("v:stroke",null,{joinstyle:"miter"}),Je("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];wd<e*1e3;)wd+=1e3;return t.forEach(function(i){var o=Fn(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Je("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Je("v:fill",c,l),d={on:"t",obscured:"t"};++wd,a=a.concat(["<v:shape"+tp({id:"_x0000_s"+wd,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Je("v:shadow",null,d),Je("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Kn("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Kn("x:AutoFill","False"),Kn("x:Row",String(o.r)),Kn("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function v8(e){var t=[wn,Je("comments",null,{xmlns:nh[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var i=jr(a.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(jr(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),i.length<=1)t.push(Kn("t",jr(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(Kn("t",jr(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function mie(e,t,r){var n=[wn,Je("ThreadedComments",null,{xmlns:Mn.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(Je("threadedComment",Kn("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function pie(e){var t=[wn,Je("personList",null,{xmlns:Mn.TCMNT,"xmlns:x":nh[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Je("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function gie(e){var t={};t.iauthor=e.read_shift(4);var r=Du(e);return t.rfx=r.s,t.ref=_r(r.s),e.l+=16,t}function xie(e,t){return t==null&&(t=Pe(36)),t.write_shift(4,e[1].iauthor),sh(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var yie=ha;function vie(e){return Ln(e.slice(0,54))}function wie(e){var t=Va(),r=[];return $e(t,628),$e(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),$e(t,632,vie(a.a)))})}),$e(t,631),$e(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var i={s:Fn(n[0]),e:Fn(n[0])};$e(t,635,xie([i,a])),a.t&&a.t.length>0&&$e(t,637,jae(a)),$e(t,636),delete a.iauthor})}),$e(t,634),$e(t,629),t.end()}function bie(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Er.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var w8=["xlsb","xlsm","xlam","biff8","xla"],jie=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=t.c:--d,c?u+=t.r:--u,a+(l?"":"$")+fa(d)+(c?"":"$")+Qn(u)}return function(a,i){return t=i,a.replace(e,r)}}(),bT=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,jT=function(){return function(t,r){return t.replace(bT,function(n,a,i,o,l,c){var u=pT(o)-(i?0:r.c),d=mT(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":i?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function Nie(e,t){return e.replace(bT,function(r,n,a,i,o,l){return n+(a=="$"?a+i:fa(pT(i)+t.c))+(o=="$"?o+l:Qn(mT(l)+t.r))})}function Sie(e){return e.length!=1}function on(e){e.l+=1}function Yl(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function b8(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return j8(e);r.biff==12&&(n=4)}var a=e.read_shift(n),i=e.read_shift(n),o=Yl(e),l=Yl(e);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function j8(e){var t=Yl(e),r=Yl(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function _ie(e,t,r){if(r.biff<8)return j8(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=Yl(e),o=Yl(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function N8(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Tie(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Yl(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function Tie(e){var t=Yl(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Eie(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Aie(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Cie(e);var a=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:o,rRel:l}}function Cie(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function Die(e,t,r){var n=(e[e.l++]&96)>>5,a=b8(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function kie(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=b8(e,i,r);return[n,a,o]}function Oie(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Pie(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,a]}function Iie(e,t,r){var n=(e[e.l++]&96)>>5,a=_ie(e,t-1,r);return[n,a]}function Mie(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function uk(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Rie(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=n;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function Fie(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Lie(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function $ie(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Bie(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function S8(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Uie(e){return e.read_shift(2),S8(e)}function Wie(e){return e.read_shift(2),S8(e)}function Vie(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=N8(e,0,r);return[n,a]}function Hie(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Aie(e,0,r);return[n,a]}function zie(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=N8(e,0,r);return[n,a,i]}function qie(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[qoe[a],E8[a],n]}function Gie(e,t,r){var n=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:Kie(e);return[a,(i[0]===0?E8:zoe)[i[1]]]}function Kie(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Yie(e,t,r){e.l+=r&&r.biff==2?3:4}function Xie(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function Qie(e){return e.l++,w0[e.read_shift(1)]}function Jie(e){return e.l++,e.read_shift(2)}function Zie(e){return e.l++,e.read_shift(1)!==0}function eoe(e){return e.l++,ih(e)}function toe(e,t,r){return e.l++,i8(e,t-1,r)}function roe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=zae(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=w0[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ih(e);break;case 2:r[1]=Yae(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function noe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=n;++i)a.push((r.biff==12?Du:Jae)(e));return a}function aoe(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=a;++l)o[i][l]=roe(e,r.biff);return o}function soe(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function ioe(e,t,r){if(r.biff==5)return ooe(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[n,a,i]}function ooe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function loe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function coe(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function uoe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function doe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,a]}var foe=Xi,hoe=Xi,moe=Xi;function b0(e,t,r){return e.l+=2,[Eie(e)]}function NT(e){return e.l+=6,[]}var poe=b0,goe=NT,xoe=NT,yoe=b0;function _8(e){return e.l+=2,[a8(e),e.read_shift(2)&1]}var voe=b0,woe=_8,boe=NT,joe=b0,Noe=b0,Soe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function _oe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),o=Soe[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:a,C:i}}function Toe(e){return e.l+=2,[e.read_shift(4)]}function Eoe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Aoe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Coe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Doe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function koe(e){return e.l+=4,[0,0]}var dk={1:{n:"PtgExp",f:Xie},2:{n:"PtgTbl",f:moe},3:{n:"PtgAdd",f:on},4:{n:"PtgSub",f:on},5:{n:"PtgMul",f:on},6:{n:"PtgDiv",f:on},7:{n:"PtgPower",f:on},8:{n:"PtgConcat",f:on},9:{n:"PtgLt",f:on},10:{n:"PtgLe",f:on},11:{n:"PtgEq",f:on},12:{n:"PtgGe",f:on},13:{n:"PtgGt",f:on},14:{n:"PtgNe",f:on},15:{n:"PtgIsect",f:on},16:{n:"PtgUnion",f:on},17:{n:"PtgRange",f:on},18:{n:"PtgUplus",f:on},19:{n:"PtgUminus",f:on},20:{n:"PtgPercent",f:on},21:{n:"PtgParen",f:on},22:{n:"PtgMissArg",f:on},23:{n:"PtgStr",f:toe},26:{n:"PtgSheet",f:Eoe},27:{n:"PtgEndSheet",f:Aoe},28:{n:"PtgErr",f:Qie},29:{n:"PtgBool",f:Zie},30:{n:"PtgInt",f:Jie},31:{n:"PtgNum",f:eoe},32:{n:"PtgArray",f:Mie},33:{n:"PtgFunc",f:qie},34:{n:"PtgFuncVar",f:Gie},35:{n:"PtgName",f:soe},36:{n:"PtgRef",f:Vie},37:{n:"PtgArea",f:Die},38:{n:"PtgMemArea",f:loe},39:{n:"PtgMemErr",f:foe},40:{n:"PtgMemNoMem",f:hoe},41:{n:"PtgMemFunc",f:coe},42:{n:"PtgRefErr",f:uoe},43:{n:"PtgAreaErr",f:Oie},44:{n:"PtgRefN",f:Hie},45:{n:"PtgAreaN",f:Iie},46:{n:"PtgMemAreaN",f:Coe},47:{n:"PtgMemNoMemN",f:Doe},57:{n:"PtgNameX",f:ioe},58:{n:"PtgRef3d",f:zie},59:{n:"PtgArea3d",f:kie},60:{n:"PtgRefErr3d",f:doe},61:{n:"PtgAreaErr3d",f:Pie},255:{}},Ooe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Poe={1:{n:"PtgElfLel",f:_8},2:{n:"PtgElfRw",f:joe},3:{n:"PtgElfCol",f:poe},6:{n:"PtgElfRwV",f:Noe},7:{n:"PtgElfColV",f:yoe},10:{n:"PtgElfRadical",f:voe},11:{n:"PtgElfRadicalS",f:boe},13:{n:"PtgElfColS",f:goe},15:{n:"PtgElfColSV",f:xoe},16:{n:"PtgElfRadicalLel",f:woe},25:{n:"PtgList",f:_oe},29:{n:"PtgSxName",f:Toe},255:{}},Ioe={0:{n:"PtgAttrNoop",f:koe},1:{n:"PtgAttrSemi",f:Bie},2:{n:"PtgAttrIf",f:Lie},4:{n:"PtgAttrChoose",f:Rie},8:{n:"PtgAttrGoto",f:Fie},16:{n:"PtgAttrSum",f:Yie},32:{n:"PtgAttrBaxcel",f:uk},33:{n:"PtgAttrBaxcel",f:uk},64:{n:"PtgAttrSpace",f:Uie},65:{n:"PtgAttrSpaceSemi",f:Wie},128:{n:"PtgAttrIfError",f:$ie},255:{}};function Moe(e,t,r,n){if(n.biff<8)return Xi(e,t);for(var a=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=aoe(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=noe(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=a-e.l,t!==0&&i.push(Xi(e,t)),i}function Roe(e,t,r){for(var n=e.l+t,a,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],a=dk[i]||dk[Ooe[i]],(i===24||i===25)&&(a=(i===24?Poe:Ioe)[e[e.l+1]]),!a||!a.f?Xi(e,t):o.push([a.n,a.f(e,t,r)]);return o}function Foe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var Loe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function $oe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function T8(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function fk(e,t,r){var n=T8(e,t,r);return n=="#REF"?n:$oe(n,r)}function bf(e,t,r,n,a){var i=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,f=0,h=0,m,g="";if(!e[0]||!e[0][0])return"";for(var p=-1,y="",b=0,x=e[0].length;b<x;++b){var w=e[0][b];switch(w[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),p>=0){switch(e[0][p][1][0]){case 0:y=Qr(" ",e[0][p][1][1]);break;case 1:y=Qr("\r",e[0][p][1][1]);break;default:if(y="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}u=u+y,p=-1}l.push(u+Loe[w[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=ym(w[1][1],o,a),l.push(vm(d,i));break;case"PtgRefN":d=r?ym(w[1][1],r,a):w[1][1],l.push(vm(d,i));break;case"PtgRef3d":f=w[1][1],d=ym(w[1][2],o,a),g=fk(n,f,a),l.push(g+"!"+vm(d,i));break;case"PtgFunc":case"PtgFuncVar":var v=w[1][0],j=w[1][1];v||(v=0),v&=127;var S=v==0?[]:l.slice(-v);l.length-=v,j==="User"&&(j=S.shift()),l.push(j+"("+S.join(",")+")");break;case"PtgBool":l.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(w[1]);break;case"PtgNum":l.push(String(w[1]));break;case"PtgStr":l.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(w[1]);break;case"PtgAreaN":m=XD(w[1][1],r?{s:r}:o,a),l.push(ib(m,a));break;case"PtgArea":m=XD(w[1][1],o,a),l.push(ib(m,a));break;case"PtgArea3d":f=w[1][1],m=w[1][2],g=fk(n,f,a),l.push(g+"!"+ib(m,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=w[1][2];var _=(n.names||[])[h-1]||(n[0]||[])[h],A=_?_.Name:"SH33TJSNAME"+String(h);A&&A.slice(0,6)=="_xlfn."&&!a.xlfn&&(A=A.slice(6)),l.push(A);break;case"PtgNameX":var C=w[1][1];h=w[1][2];var D;if(a.biff<=5)C<0&&(C=-C),n[C]&&(D=n[C][h]);else{var k="";if(((n[C]||[])[0]||[])[0]==14849||(((n[C]||[])[0]||[])[0]==1025?n[C][h]&&n[C][h].itab>0&&(k=n.SheetNames[n[C][h].itab-1]+"!"):k=n.SheetNames[h-1]+"!"),n[C]&&n[C][h])k+=n[C][h].Name;else if(n[0]&&n[0][h])k+=n[0][h].Name;else{var O=(T8(n,C,a)||"").split(";;");O[h-1]?k=O[h-1]:k+="SH33TJSERRX"}l.push(k);break}D||(D={Name:"SH33TJSERRY"}),l.push(D.Name);break;case"PtgParen":var V="(",G=")";if(p>=0){switch(y="",e[0][p][1][0]){case 2:V=Qr(" ",e[0][p][1][1])+V;break;case 3:V=Qr("\r",e[0][p][1][1])+V;break;case 4:G=Qr(" ",e[0][p][1][1])+G;break;case 5:G=Qr("\r",e[0][p][1][1])+G;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}p=-1}l.push(V+l.pop()+G);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:w[1][1],r:w[1][0]};var Y={c:r.c,r:r.r};if(n.sharedf[_r(d)]){var W=n.sharedf[_r(d)];l.push(bf(W,o,Y,n,a))}else{var P=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(bf(u[1],o,Y,n,a)),P=!0;break}P||l.push(w[1])}break;case"PtgArray":l.push("{"+Foe(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var E=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&p>=0&&E.indexOf(e[0][b][0])==-1){w=e[0][p];var R=!0;switch(w[1][0]){case 4:R=!1;case 0:y=Qr(" ",w[1][1]);break;case 5:R=!1;case 1:y=Qr("\r",w[1][1]);break;default:if(y="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}l.push((R?y:"")+l.pop()+(R?"":y)),p=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function Boe(e){if(e==null){var t=Pe(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return du(e);return du(0)}function Uoe(e,t,r,n,a){var i=fu(t,r,a),o=Boe(e.v),l=Pe(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Pe(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Gn([i,o,l,u]);return f}function c1(e,t,r){var n=e.read_shift(4),a=Roe(e,n,r),i=e.read_shift(4),o=i>0?Moe(e,i,a,r):null;return[a,o]}var Woe=c1,u1=c1,Voe=c1,Hoe=c1,zoe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},E8={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},qoe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Goe(e){var t="of:="+e.replace(bT,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Koe(e){return e.replace(/\./,"!")}var wm=typeof Map<"u";function ST(e,t,r){var n=0,a=e.length;if(r){if(wm?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=wm?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(wm?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function d1(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(_o=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=ty(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=EN(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function A8(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function ic(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,i=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){N$(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===n)return a;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function Yoe(e,t,r){if(e&&e["!ref"]){var n=Br(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Xoe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+xn(e[r])+'"/>';return t+"</mergeCells>"}function Qoe(e,t,r,n,a){var i=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=ep(jr(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+Je("outlinePr",null,u)}!i&&!l||(a[a.length]=Je("sheetPr",l,o))}var Joe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Zoe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function ele(e){var t={sheet:1};return Joe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Zoe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=d8(e.password).toString(16).toUpperCase()),Je("sheetProtection",null,t)}function tle(e){return A8(e),Je("pageMargins",null,e)}function rle(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Je("col",null,d1(a,n)));return r[r.length]="</cols>",r.join("")}function nle(e,t,r,n){var a=typeof e.ref=="string"?e.ref:xn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=hs(a);o.s.r==o.e.r&&(o.e.r=hs(t["!ref"]).e.r,a=xn(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Je("autoFilter",null,{ref:a})}function ale(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Je("sheetViews",Je("sheetView",null,a),{})}function sle(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=w0[e.v];break;case"d":n&&n.cellDates?a=Ta(e.v,-1).toISOString():(e=za(e),e.t="n",a=""+(e.v=Ha(Ta(e.v)))),typeof e.z>"u"&&(e.z=Zr[14]);break;default:a=e.v;break}var l=Kn("v",jr(a)),c={r:t},u=ic(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Kn("v",""+ST(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=Je("f",jr(e.f),d)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Je("c",l,c)}function ile(e,t,r,n){var a=[],i=[],o=Br(e["!ref"]),l="",c,u="",d=[],f=0,h=0,m=e["!rows"],g=Array.isArray(e),p={r:u},y,b=-1;for(h=o.s.c;h<=o.e.c;++h)d[h]=fa(h);for(f=o.s.r;f<=o.e.r;++f){for(i=[],u=Qn(f),h=o.s.c;h<=o.e.c;++h){c=d[h]+u;var x=g?(e[f]||[])[h]:e[c];x!==void 0&&(l=sle(x,c,e,t))!=null&&i.push(l)}(i.length>0||m&&m[f])&&(p={r:u},m&&m[f]&&(y=m[f],y.hidden&&(p.hidden=1),b=-1,y.hpx?b=ry(y.hpx):y.hpt&&(b=y.hpt),b>-1&&(p.ht=b,p.customHeight=1),y.level&&(p.outlineLevel=y.level)),a[a.length]=Je("row",i.join(""),p))}if(m)for(;f<m.length;++f)m&&m[f]&&(p={r:f+1},y=m[f],y.hidden&&(p.hidden=1),b=-1,y.hpx?b=ry(y.hpx):y.hpt&&(b=y.hpt),b>-1&&(p.ht=b,p.customHeight=1),y.level&&(p.outlineLevel=y.level),a[a.length]=Je("row","",p));return a.join("")}function C8(e,t,r,n){var a=[wn,Je("worksheet",null,{xmlns:nh[0],"xmlns:r":Mn.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",d=Br(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=xn(d)}n||(n={}),c["!comments"]=[];var f=[];Qoe(c,r,e,t,a),a[a.length]=Je("dimension",null,{ref:u}),a[a.length]=ale(c,t,e,r),t.sheetFormat&&(a[a.length]=Je("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=rle(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=ile(c,t),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=ele(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=nle(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=Xoe(c["!merges"]));var h=-1,m,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(m={ref:p[0]},p[1].Target.charAt(0)!="#"&&(g=wr(n,-1,jr(p[1].Target).replace(/#.*$/,""),lr.HLINK),m["r:id"]="rId"+g),(h=p[1].Target.indexOf("#"))>-1&&(m.location=jr(p[1].Target.slice(h+1))),p[1].Tooltip&&(m.tooltip=jr(p[1].Tooltip)),a[a.length]=Je("hyperlink",null,m))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=tle(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Kn("ignoredErrors",Je("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=wr(n,-1,"../drawings/drawing"+(e+1)+".xml",lr.DRAW),a[a.length]=Je("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=wr(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",lr.VML),a[a.length]=Je("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function ole(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}function lle(e,t,r){var n=Pe(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;a.hpx?i=ry(a.hpx)*20:a.hpt&&(i=a.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,m=d<<10;m<d+1<<10;++m){u.c=m;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[_r(u)];g&&(f<0&&(f=m),h=m)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,h))}var p=n.l;return n.l=c,n.write_shift(4,l),n.l=p,n.length>n.l?n.slice(0,n.l):n}function cle(e,t,r,n){var a=lle(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&$e(e,0,a)}var ule=Du,dle=sh;function fle(){}function hle(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Nae(e),r}function mle(e,t,r){r==null&&(r=Pe(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return Jx({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),H$(e,r),r.slice(0,r.l)}function ple(e){var t=Ls(e);return[t]}function gle(e,t,r){return r==null&&(r=Pe(8)),Eu(t,r)}function xle(e){var t=Au(e);return[t]}function yle(e,t,r){return r==null&&(r=Pe(4)),Cu(t,r)}function vle(e){var t=Ls(e),r=e.read_shift(1);return[t,r,"b"]}function wle(e,t,r){return r==null&&(r=Pe(9)),Eu(t,r),r.write_shift(1,e.v?1:0),r}function ble(e){var t=Au(e),r=e.read_shift(1);return[t,r,"b"]}function jle(e,t,r){return r==null&&(r=Pe(5)),Cu(t,r),r.write_shift(1,e.v?1:0),r}function Nle(e){var t=Ls(e),r=e.read_shift(1);return[t,r,"e"]}function Sle(e,t,r){return r==null&&(r=Pe(9)),Eu(t,r),r.write_shift(1,e.v),r}function _le(e){var t=Au(e),r=e.read_shift(1);return[t,r,"e"]}function Tle(e,t,r){return r==null&&(r=Pe(8)),Cu(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Ele(e){var t=Ls(e),r=e.read_shift(4);return[t,r,"s"]}function Ale(e,t,r){return r==null&&(r=Pe(12)),Eu(t,r),r.write_shift(4,t.v),r}function Cle(e){var t=Au(e),r=e.read_shift(4);return[t,r,"s"]}function Dle(e,t,r){return r==null&&(r=Pe(8)),Cu(t,r),r.write_shift(4,t.v),r}function kle(e){var t=Ls(e),r=ih(e);return[t,r,"n"]}function Ole(e,t,r){return r==null&&(r=Pe(16)),Eu(t,r),du(e.v,r),r}function Ple(e){var t=Au(e),r=ih(e);return[t,r,"n"]}function Ile(e,t,r){return r==null&&(r=Pe(12)),Cu(t,r),du(e.v,r),r}function Mle(e){var t=Ls(e),r=z$(e);return[t,r,"n"]}function Rle(e,t,r){return r==null&&(r=Pe(12)),Eu(t,r),q$(e.v,r),r}function Fle(e){var t=Au(e),r=z$(e);return[t,r,"n"]}function Lle(e,t,r){return r==null&&(r=Pe(8)),Cu(t,r),q$(e.v,r),r}function $le(e){var t=Ls(e),r=gT(e);return[t,r,"is"]}function Ble(e){var t=Ls(e),r=ha(e);return[t,r,"str"]}function Ule(e,t,r){return r==null&&(r=Pe(12+4*e.v.length)),Eu(t,r),Ln(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Wle(e){var t=Au(e),r=ha(e);return[t,r,"str"]}function Vle(e,t,r){return r==null&&(r=Pe(8+4*e.v.length)),Cu(t,r),Ln(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Hle(e,t,r){var n=e.l+t,a=Ls(e);a.r=r["!row"];var i=e.read_shift(1),o=[a,i,"b"];if(r.cellFormula){e.l+=2;var l=u1(e,n-e.l,r);o[3]=bf(l,null,a,r.supbooks,r)}else e.l=n;return o}function zle(e,t,r){var n=e.l+t,a=Ls(e);a.r=r["!row"];var i=e.read_shift(1),o=[a,i,"e"];if(r.cellFormula){e.l+=2;var l=u1(e,n-e.l,r);o[3]=bf(l,null,a,r.supbooks,r)}else e.l=n;return o}function qle(e,t,r){var n=e.l+t,a=Ls(e);a.r=r["!row"];var i=ih(e),o=[a,i,"n"];if(r.cellFormula){e.l+=2;var l=u1(e,n-e.l,r);o[3]=bf(l,null,a,r.supbooks,r)}else e.l=n;return o}function Gle(e,t,r){var n=e.l+t,a=Ls(e);a.r=r["!row"];var i=ha(e),o=[a,i,"str"];if(r.cellFormula){e.l+=2;var l=u1(e,n-e.l,r);o[3]=bf(l,null,a,r.supbooks,r)}else e.l=n;return o}var Kle=Du,Yle=sh;function Xle(e,t){return t==null&&(t=Pe(4)),t.write_shift(4,e),t}function Qle(e,t){var r=e.l+t,n=Du(e),a=xT(e),i=ha(e),o=ha(e),l=ha(e);e.l=r;var c={rfx:n,relId:a,loc:i,display:l};return o&&(c.Tooltip=o),c}function Jle(e,t){var r=Pe(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));sh({s:Fn(e[0]),e:Fn(e[0])},r),yT("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return Ln(a||"",r),Ln(e[1].Tooltip||"",r),Ln("",r),r.slice(0,r.l)}function Zle(){}function ece(e,t,r){var n=e.l+t,a=G$(e),i=e.read_shift(1),o=[a];if(o[2]=i,r.cellFormula){var l=Woe(e,n-e.l,r);o[1]=l}else e.l=n;return o}function tce(e,t,r){var n=e.l+t,a=Du(e),i=[a];if(r.cellFormula){var o=Hoe(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}function rce(e,t,r){r==null&&(r=Pe(18));var n=d1(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var D8=["left","right","top","bottom","header","footer"];function nce(e){var t={};return D8.forEach(function(r){t[r]=ih(e)}),t}function ace(e,t){return t==null&&(t=Pe(6*8)),A8(e),D8.forEach(function(r){du(e[r],t)}),t}function sce(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function ice(e,t,r){r==null&&(r=Pe(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function oce(e){var t=Pe(24);return t.write_shift(4,4),t.write_shift(4,1),sh(e,t),t}function lce(e,t){return t==null&&(t=Pe(16*4+2)),t.write_shift(2,e.password?d8(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function cce(){}function uce(){}function dce(e,t,r,n,a,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=za(t),t.z=t.z||Zr[14],t.v=Ha(Ta(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=ic(a.cellXfs,t,a),t.l&&i["!links"].push([_r(c),t.l]),t.c&&i["!comments"].push([_r(c),t.c]),t.t){case"s":case"str":return a.bookSST?(l=ST(a.Strings,t.v,a.revStrings),c.t="s",c.v=l,o?$e(e,18,Dle(t,c)):$e(e,7,Ale(t,c))):(c.t="str",o?$e(e,17,Vle(t,c)):$e(e,6,Ule(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?$e(e,13,Lle(t,c)):$e(e,2,Rle(t,c)):o?$e(e,16,Ile(t,c)):$e(e,5,Ole(t,c)),!0;case"b":return c.t="b",o?$e(e,15,jle(t,c)):$e(e,4,wle(t,c)),!0;case"e":return c.t="e",o?$e(e,14,Tle(t,c)):$e(e,3,Sle(t,c)),!0}return o?$e(e,12,yle(t,c)):$e(e,1,gle(t,c)),!0}function fce(e,t,r,n){var a=Br(t["!ref"]||"A1"),i,o="",l=[];$e(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=Qn(d),cle(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(l[h]=fa(h)),i=l[h]+o;var m=c?(t[d]||[])[h]:t[i];if(!m){f=!1;continue}f=dce(e,m,d,h,n,t,f)}}$e(e,146)}function hce(e,t){!t||!t["!merges"]||($e(e,177,Xle(t["!merges"].length)),t["!merges"].forEach(function(r){$e(e,176,Yle(r))}),$e(e,178))}function mce(e,t){!t||!t["!cols"]||($e(e,390),t["!cols"].forEach(function(r,n){r&&$e(e,60,rce(n,r))}),$e(e,391))}function pce(e,t){!t||!t["!ref"]||($e(e,648),$e(e,649,oce(Br(t["!ref"]))),$e(e,650))}function gce(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=wr(r,-1,n[1].Target.replace(/#.*$/,""),lr.HLINK);$e(e,494,Jle(n,a))}}),delete t["!links"]}function xce(e,t,r,n){if(t["!comments"].length>0){var a=wr(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",lr.VML);$e(e,551,yT("rId"+a)),t["!legacy"]=a}}function yce(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:xn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=hs(i);l.s.r==l.e.r&&(l.e.r=hs(t["!ref"]).e.r,i=xn(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),$e(e,161,sh(Br(i))),$e(e,162)}}function vce(e,t,r){$e(e,133),$e(e,137,ice(t,r)),$e(e,138),$e(e,134)}function wce(e,t){t["!protect"]&&$e(e,535,lce(t["!protect"]))}function bce(e,t,r,n){var a=Va(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Br(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],$e(a,129),(r.vbaraw||o["!outline"])&&$e(a,147,mle(l,o["!outline"])),$e(a,148,dle(c)),vce(a,o,r.Workbook),mce(a,o),fce(a,o,e,t),wce(a,o),yce(a,o,r,e),hce(a,o),gce(a,o,n),o["!margins"]&&$e(a,476,ace(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&pce(a,o),xce(a,o,e,n),$e(a,130),a.end()}function jce(e,t){e.l+=10;var r=ha(e);return{name:r}}var Nce=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function Sce(e){return!e.Workbook||!e.Workbook.WBProps?"false":tae(e.Workbook.WBProps.date1904)?"true":"false"}var _ce="][*?/\\".split("");function k8(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return _ce.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Tce(e,t,r){e.forEach(function(n,a){k8(n);for(var i=0;i<a;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[a]&&t[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function Ece(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Tce(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Yoe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function O8(e){var t=[wn];t[t.length]=Je("workbook",null,{xmlns:nh[0],"xmlns:r":Mn.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Nce.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Je("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:jr(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=Je("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=Je("definedName",jr(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Ace(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=TN(e),r.name=ha(e),r}function Cce(e,t){return t||(t=Pe(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),yT(e.strRelID,t),Ln(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Dce(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?ha(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function kce(e,t){t||(t=Pe(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),H$(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Oce(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=Sae(e),o=Voe(e,0,r),l=xT(e);e.l=n;var c={Name:i,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function Pce(e,t){$e(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};$e(e,156,Cce(a))}$e(e,144)}function Ice(e,t){t||(t=Pe(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Ln("SheetJS",t),Ln(Hx.version,t),Ln(Hx.version,t),Ln("7262",t),t.length>t.l?t.slice(0,t.l):t}function Mce(e,t){t||(t=Pe(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function Rce(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&i==-1&&(i=n);i>a||($e(e,135),$e(e,158,Mce(a)),$e(e,136))}}function Fce(e,t){var r=Va();return $e(r,131),$e(r,128,Ice()),$e(r,153,kce(e.Workbook&&e.Workbook.WBProps||null)),Rce(r,e),Pce(r,e),$e(r,132),r.end()}function Lce(e,t,r){return(t.slice(-4)===".bin"?Fce:O8)(e)}function $ce(e,t,r,n,a){return(t.slice(-4)===".bin"?bce:C8)(e,r,n,a)}function Bce(e,t,r){return(t.slice(-4)===".bin"?aie:m8)(e,r)}function Uce(e,t,r){return(t.slice(-4)===".bin"?kse:u8)(e,r)}function Wce(e,t,r){return(t.slice(-4)===".bin"?wie:v8)(e)}function Vce(e){return(e.slice(-4)===".bin"?fie:x8)()}function Hce(e,t){var r=[];return e.Props&&r.push(Bae(e.Props,t)),e.Custprops&&r.push(Uae(e.Props,e.Custprops)),r.join("")}function zce(){return""}function qce(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var i=[];i.push(Je("NumberFormat",null,{"ss:Format":jr(Zr[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(Je("Style",i.join(""),o))}),Je("Styles",r.join(""))}function P8(e){return Je("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+jT(e.Ref,{r:0,c:0})})}function Gce(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(P8(a)))}return Je("Names",r.join(""))}function Kce(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,i=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(P8(l)))}return i.join("")}function Yce(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Je("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Je("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Je("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Je("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Kn("ProtectContents","True")),e["!protect"].objects&&a.push(Kn("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Kn("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Kn("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Kn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":Je("WorksheetOptions",a.join(""),{xmlns:rs.x})}function Xce(e){return e.map(function(t){var r=eae(t.t||""),n=Je("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Je("Comment",n,{"ss:Author":t.a})}).join("")}function Qce(e,t,r,n,a,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+jr(jT(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=Fn(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=jr(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=jr(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=w0[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Zr[14]);break;case"s":f="String",h=Zne(e.v||"");break}var m=ic(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=o.c+1;var g=e.v!=null?h:"",p=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(p+=Xce(e.c)),Je("Cell",p,l)}function Jce(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=h8(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Zce(e,t,r,n){if(!e["!ref"])return"";var a=Br(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(y,b){wT(y);var x=!!y.width,w=d1(b,y),v={"ss:Index":b+1};x&&(v["ss:Width"]=ey(w.width)),y.hidden&&(v["ss:Hidden"]="1"),l.push(Je("Column",null,v))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[Jce(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>f)&&!(i[o].s.r>u)&&!(i[o].e.c<f)&&!(i[o].e.r<u)){(i[o].s.c!=f||i[o].s.r!=u)&&(h=!0);break}if(!h){var m={r:u,c:f},g=_r(m),p=c?(e[u]||[])[f]:e[g];d.push(Qce(p,g,e,t,r,n,m))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function eue(e,t,r){var n=[],a=r.SheetNames[e],i=r.Sheets[a],o=i?Kce(i,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=i?Zce(i,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(Yce(i,t,e,r)),n.join("")}function tue(e,t){t||(t={}),e.SSF||(e.SSF=za(Zr)),e.SSF&&(i1(),s1(e.SSF),t.revssf=o1(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],ic(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Hce(e,t)),r.push(zce()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Je("Worksheet",eue(n,t,e),{"ss:Name":jr(e.SheetNames[n])}));return r[2]=qce(e,t),r[3]=Gce(e),wn+Je("Workbook",r.join(""),{xmlns:rs.ss,"xmlns:o":rs.o,"xmlns:x":rs.x,"xmlns:ss":rs.ss,"xmlns:dt":rs.dt,"xmlns:html":rs.html})}var cb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function rue(e,t){var r=[],n=[],a=[],i=0,o,l=$D(JD,"n"),c=$D(ZD,"n");if(e.Props)for(o=ea(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:a).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=ea(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:a).push([o[i],e.Custprops[o[i]]]);var u=[];for(i=0;i<a.length;++i)n8.indexOf(a[i][0])>-1||e8.indexOf(a[i][0])>-1||a[i][1]!=null&&u.push(a[i]);n.length&&Er.utils.cfb_add(t,"/SummaryInformation",ak(n,cb.SI,c,ZD)),(r.length||u.length)&&Er.utils.cfb_add(t,"/DocumentSummaryInformation",ak(r,cb.DSI,l,JD,u.length?u:null,cb.UDI))}function nue(e,t){var r=t||{},n=Er.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Er.utils.cfb_add(n,a,I8(e,r)),r.biff==8&&(e.Props||e.Custprops)&&rue(e,n),r.biff==8&&e.vbaraw&&bie(n,Er.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var aue={0:{f:ole},1:{f:ple},2:{f:Mle},3:{f:Nle},4:{f:vle},5:{f:kle},6:{f:Ble},7:{f:Ele},8:{f:Gle},9:{f:qle},10:{f:Hle},11:{f:zle},12:{f:xle},13:{f:Fle},14:{f:_le},15:{f:ble},16:{f:Ple},17:{f:Wle},18:{f:Cle},19:{f:gT},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Oce},40:{},42:{},43:{f:Bse},44:{f:Lse},45:{f:Vse},46:{f:zse},47:{f:Hse},48:{},49:{f:xae},50:{},51:{f:oie},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:yse},62:{f:$le},63:{f:hie},64:{f:cce},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Xi,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:sce},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:hle},148:{f:ule,p:16},151:{f:Zle},152:{},153:{f:Dce},154:{},155:{},156:{f:Ace},157:{},158:{},159:{T:1,f:Ase},160:{T:-1},161:{T:1,f:Du},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Kle},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:sie},336:{T:-1},337:{f:uie,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:TN},357:{},358:{},359:{},360:{T:1},361:{},362:{f:fse},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:ece},427:{f:tce},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:nce},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:fle},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Qle},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:TN},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:yie},633:{T:1},634:{T:-1},635:{T:1,f:gie},636:{T:-1},637:{f:bae},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:jce},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:uce},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ze(e,t,r,n){var a=t;if(!isNaN(a)){var i=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,a),o.write_shift(2,i),i>0&&hT(r)&&e.push(r)}}function sue(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return Ze(e,t,r,a);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=e.next(4);for(d.write_shift(2,i),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function j0(e,t,r){return e||(e=Pe(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function iue(e,t,r,n){var a=Pe(9);return j0(a,e,t),s8(r,n||"b",a),a}function oue(e,t,r){var n=Pe(8+2*r.length);return j0(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function lue(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Ha(Ta(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?Ze(e,2,jse(r,n,a)):Ze(e,3,bse(r,n,a));return;case"b":case"e":Ze(e,5,iue(r,n,t.v,t.t));return;case"s":case"str":Ze(e,4,oue(r,n,(t.v||"").slice(0,255)));return}Ze(e,1,j0(null,r,n))}function cue(e,t,r,n){var a=Array.isArray(t),i=Br(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=xn(i)}for(var u=i.s.r;u<=i.e.r;++u){l=Qn(u);for(var d=i.s.c;d<=i.e.c;++d){u===i.s.r&&(c[d]=fa(d)),o=c[d]+l;var f=a?(t[u]||[])[d]:t[o];f&&lue(e,f,u,d)}}}function uue(e,t){for(var r=t||{},n=Va(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(a=i);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Ze(n,r.biff==4?1033:r.biff==3?521:9,vT(e,16,r)),cue(n,e.Sheets[e.SheetNames[a]],a,r),Ze(n,10),n.end()}function due(e,t,r){Ze(e,49,ase({sz:12,name:"Arial"},r))}function fue(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Ze(e,1054,ose(a,t[a],r))})}function hue(e,t){var r=Pe(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Ze(e,2151,r),r=Pe(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),l8(Br(t["!ref"]||"A1"),r),r.write_shift(4,4),Ze(e,2152,r)}function mue(e,t){for(var r=0;r<16;++r)Ze(e,224,ik({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Ze(e,224,ik(n,0,t))})}function pue(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Ze(e,440,pse(n)),n[1].Tooltip&&Ze(e,2048,gse(n))}delete t["!links"]}function gue(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&Ze(e,125,vse(d1(a,n),a))})}}function xue(e,t,r,n,a){var i=16+ic(a.cellXfs,t,a);if(t.v==null&&!t.bf){Ze(e,513,fu(r,n,i));return}if(t.bf)Ze(e,6,Uoe(t,r,n,a,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?Ha(Ta(t.v)):t.v;Ze(e,515,dse(r,n,o,i));break;case"b":case"e":Ze(e,517,use(r,n,t.v,i,a,t.t));break;case"s":case"str":if(a.bookSST){var l=ST(a.Strings,t.v,a.revStrings);Ze(e,253,sse(r,n,l,i))}else Ze(e,516,ise(r,n,(t.v||"").slice(0,255),i,a));break;default:Ze(e,513,fu(r,n,i))}}function yue(e,t,r){var n=Va(),a=r.SheetNames[e],i=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),u=t.biff==8,d,f="",h=[],m=Br(i["!ref"]||"A1"),g=u?65536:16384;if(m.e.c>255||m.e.r>=g){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,g-1)}Ze(n,2057,vT(r,16,t)),Ze(n,13,Ns(1)),Ze(n,12,Ns(100)),Ze(n,15,Na(!0)),Ze(n,17,Na(!1)),Ze(n,16,du(.001)),Ze(n,95,Na(!0)),Ze(n,42,Na(!1)),Ze(n,43,Na(!1)),Ze(n,130,Ns(1)),Ze(n,128,cse()),Ze(n,131,Na(!1)),Ze(n,132,Na(!1)),u&&gue(n,i["!cols"]),Ze(n,512,lse(m,t)),u&&(i["!links"]=[]);for(var p=m.s.r;p<=m.e.r;++p){f=Qn(p);for(var y=m.s.c;y<=m.e.c;++y){p===m.s.r&&(h[y]=fa(y)),d=h[y]+f;var b=c?(i[p]||[])[y]:i[d];b&&(xue(n,b,p,y,t),u&&b.l&&i["!links"].push([d,b.l]))}}var x=l.CodeName||l.name||a;return u&&Ze(n,574,nse((o.Views||[])[0])),u&&(i["!merges"]||[]).length&&Ze(n,229,mse(i["!merges"])),u&&pue(n,i),Ze(n,442,o8(x)),u&&hue(n,i),Ze(n,10),n.end()}function vue(e,t,r){var n=Va(),a=(e||{}).Workbook||{},i=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(Ze(n,2057,vT(e,5,r)),r.bookType=="xla"&&Ze(n,135),Ze(n,225,l?Ns(1200):null),Ze(n,193,Hae(2)),c&&Ze(n,191),c&&Ze(n,192),Ze(n,226),Ze(n,92,Zae("SheetJS",r)),Ze(n,66,Ns(l?1200:1252)),l&&Ze(n,353,Ns(0)),l&&Ze(n,448),Ze(n,317,wse(e.SheetNames.length)),l&&e.vbaraw&&Ze(n,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";Ze(n,442,o8(u))}Ze(n,156,Ns(17)),Ze(n,25,Na(!1)),Ze(n,18,Na(!1)),Ze(n,19,Ns(0)),l&&Ze(n,431,Na(!1)),l&&Ze(n,444,Ns(0)),Ze(n,61,rse()),Ze(n,64,Na(!1)),Ze(n,141,Ns(0)),Ze(n,34,Na(Sce(e)=="true")),Ze(n,14,Na(!0)),l&&Ze(n,439,Na(!1)),Ze(n,218,Ns(0)),due(n,e,r),fue(n,e.SSF,r),mue(n,r),l&&Ze(n,352,Na(!1));var d=n.end(),f=Va();l&&Ze(f,140,xse()),l&&r.Strings&&sue(f,252,tse(r.Strings)),Ze(f,10);var h=f.end(),m=Va(),g=0,p=0;for(p=0;p<e.SheetNames.length;++p)g+=(l?12:11)+(l?2:1)*e.SheetNames[p].length;var y=d.length+g+h.length;for(p=0;p<e.SheetNames.length;++p){var b=i[p]||{};Ze(m,133,ese({pos:y,hs:b.Hidden||0,dt:0,name:e.SheetNames[p]},r)),y+=t[p].length}var x=m.end();if(g!=x.length)throw new Error("BS8 "+g+" != "+x.length);var w=[];return d.length&&w.push(d),x.length&&w.push(x),h.length&&w.push(h),Gn(w)}function wue(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=za(Zr)),e&&e.SSF&&(i1(),s1(e.SSF),r.revssf=o1(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,_T(r),r.cellXfs=[],ic(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=yue(a,r,e);return n.unshift(vue(e,n,r)),Gn(n)}function I8(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=hs(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return wue(e,t);case 4:case 3:case 2:return uue(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function bue(e,t,r,n){for(var a=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=_r({r,c:o}),f=n.dense?(e[r]||[])[o]:e[d],h=f&&f.v!=null&&(f.h||Jne(f.w||(Lo(f),f.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),m.id=(n.id||"sjs")+"-"+d,i.push(Je("td",h,m))}}var g="<tr>";return g+i.join("")+"</tr>"}var jue='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Nue="</body></html>";function Sue(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function M8(e,t){var r=t||{},n=r.header!=null?r.header:jue,a=r.footer!=null?r.footer:Nue,i=[n],o=hs(e["!ref"]);r.dense=Array.isArray(e),i.push(Sue(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(bue(e,o,l,r));return i.push("</table>"+a),i.join("")}function R8(e,t,r){var n=r||{},a=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?Fn(n.origin):n.origin;a=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var d=hs(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,m=e["!rows"]||(e["!rows"]=[]),g=0,p=0,y=0,b=0,x=0,w=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&p<c;++g){var v=l[g];if(hk(v)){if(n.display)continue;m[p]={hidden:!0}}var j=v.children;for(y=b=0;y<j.length;++y){var S=j[y];if(!(n.display&&hk(S))){var _=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):rae(S.innerHTML),A=S.getAttribute("data-z")||S.getAttribute("z");for(h=0;h<f.length;++h){var C=f[h];C.s.c==b+i&&C.s.r<p+a&&p+a<=C.e.r&&(b=C.e.c+1-i,h=-1)}w=+S.getAttribute("colspan")||1,((x=+S.getAttribute("rowspan")||1)>1||w>1)&&f.push({s:{r:p+a,c:b+i},e:{r:p+a+(x||1)-1,c:b+i+(w||1)-1}});var D={t:"s",v:_},k=S.getAttribute("data-t")||S.getAttribute("t")||"";_!=null&&(_.length==0?D.t=k||"z":n.raw||_.trim().length==0||k=="s"||(_==="TRUE"?D={t:"b",v:!0}:_==="FALSE"?D={t:"b",v:!1}:isNaN(So(_))?isNaN(Zm(_).getDate())||(D={t:"d",v:Ta(_)},n.cellDates||(D={t:"n",v:Ha(D.v)}),D.z=n.dateNF||Zr[14]):D={t:"n",v:So(_)})),D.z===void 0&&A!=null&&(D.z=A);var O="",V=S.getElementsByTagName("A");if(V&&V.length)for(var G=0;G<V.length&&!(V[G].hasAttribute("href")&&(O=V[G].getAttribute("href"),O.charAt(0)!="#"));++G);O&&O.charAt(0)!="#"&&(D.l={Target:O}),n.dense?(e[p+a]||(e[p+a]=[]),e[p+a][b+i]=D):e[_r({c:b+i,r:p+a})]=D,u.e.c<b+i&&(u.e.c=b+i),b+=w}}++p}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,p-1+a),e["!ref"]=xn(u),p>=c&&(e["!fullref"]=xn((u.e.r=l.length-g+p-1+a,u))),e}function F8(e,t){var r=t||{},n=r.dense?[]:{};return R8(n,e,t)}function _ue(e,t){return Tu(F8(e,t),t)}function hk(e){var t="",r=Tue(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Tue(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Eue=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+tp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return wn+t}}(),mk=function(){var e=function(i){return jr(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,o,l){var c=[];c.push('      <table:table table:name="'+jr(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=hs(i["!ref"]||"A1"),h=i["!merges"]||[],m=0,g=Array.isArray(i);if(i["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(i["!cols"][d]?' table:style-name="co'+i["!cols"][d].ods+'"':"")+`></table:table-column>
`);var p="",y=i["!rows"]||[];for(u=0;u<f.s.r;++u)p=y[u]?' table:style-name="ro'+y[u].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;u<=f.e.r;++u){for(p=y[u]?' table:style-name="ro'+y[u].ods+'"':"",c.push("        <table:table-row"+p+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var b=!1,x={},w="";for(m=0;m!=h.length;++m)if(!(h[m].s.c>d)&&!(h[m].s.r>u)&&!(h[m].e.c<d)&&!(h[m].e.r<u)){(h[m].s.c!=d||h[m].s.r!=u)&&(b=!0),x["table:number-columns-spanned"]=h[m].e.c-h[m].s.c+1,x["table:number-rows-spanned"]=h[m].e.r-h[m].s.r+1;break}if(b){c.push(r);continue}var v=_r({r:u,c:d}),j=g?(i[u]||[])[d]:i[v];if(j&&j.f&&(x["table:formula"]=jr(Goe(j.f)),j.F&&j.F.slice(0,v.length)==v)){var S=hs(j.F);x["table:number-matrix-columns-spanned"]=S.e.c-S.s.c+1,x["table:number-matrix-rows-spanned"]=S.e.r-S.s.r+1}if(!j){c.push(t);continue}switch(j.t){case"b":w=j.v?"TRUE":"FALSE",x["office:value-type"]="boolean",x["office:boolean-value"]=j.v?"true":"false";break;case"n":w=j.w||String(j.v||0),x["office:value-type"]="float",x["office:value"]=j.v||0;break;case"s":case"str":w=j.v==null?"":j.v,x["office:value-type"]="string";break;case"d":w=j.w||Ta(j.v).toISOString(),x["office:value-type"]="date",x["office:date-value"]=Ta(j.v).toISOString(),x["table:style-name"]="ce1";break;default:c.push(t);continue}var _=e(w);if(j.l&&j.l.Target){var A=j.l.Target;A=A.charAt(0)=="#"?"#"+Koe(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),_=Je("text:a",_,{"xlink:href":A.replace(/&/g,"&amp;")})}c.push("          "+Je("table:table-cell",Je("text:p",_,{}),x)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;wT(f),f.ods=l;var h=u["!cols"][d].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[wn],u=tp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=tp({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(J$().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(n(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function L8(e,t){if(t.bookType=="fods")return mk(e,t);var r=cT(),n="",a=[],i=[];return n="mimetype",Gt(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Gt(r,n,mk(e,t)),a.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",Gt(r,n,Eue(e,t)),a.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",Gt(r,n,wn+J$()),a.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",Gt(r,n,$ae(i)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Gt(r,n,Fae(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function ny(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Aue(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):ri(ep(e))}function Cue(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Xl(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function Due(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=a&255;e[t+15]|=r>=0?0:128}function rp(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function yr(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Fd(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Sn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=rp(e,r),i=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=rp(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:i};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function Wn(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(yr(n*8+a.type)),a.type==2&&t.push(yr(a.data.length)),t.push(a.data))})}),Xl(t)}function Vs(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=rp(e,n),i=Sn(e.slice(n[0],n[0]+a));n[0]+=a;var o={id:Fd(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=Sn(l.data),u=Fd(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=i[3])!=null&&t[0]&&(o.merge=Fd(i[3][0].data)>>>0>0),r.push(o)}return r}function ed(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:yr(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:yr(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:yr(o.data.length)}],n[2].push({data:Wn(o.meta),type:2})});var i=Wn(n);t.push(yr(i.length)),t.push(i),a.forEach(function(o){return t.push(o)})}),Xl(t)}function kue(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=rp(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Xl(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Xl(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Hs(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(kue(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Xl(t)}function td(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var i=yr(n),o=i.length;t.push(i),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return Xl(t)}function ub(e,t){var r=new Uint8Array(32),n=ny(r),a=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,Due(r,a,e.v),i|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,a)}function db(e,t){var r=new Uint8Array(32),n=ny(r),a=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,a)}function Qo(e){var t=Sn(e);return rp(t[1][0].data)}function Oue(e,t,r){var n,a,i,o;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&Fd(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=ny(e[7][0].data),d=0,f=[],h=ny(e[4][0].data),m=0,g=[],p=0;p<t.length;++p){if(t[p]==null){u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535);continue}u.setUint16(p*2,d,!0),h.setUint16(p*2,m,!0);var y,b;switch(typeof t[p]){case"string":y=ub({t:"s",v:t[p]},r),b=db({t:"s",v:t[p]},r);break;case"number":y=ub({t:"n",v:t[p]},r),b=db({t:"n",v:t[p]},r);break;case"boolean":y=ub({t:"b",v:t[p]},r),b=db({t:"b",v:t[p]},r);break;default:throw new Error("Unsupported value "+t[p])}f.push(y),d+=y.length,g.push(b),m+=b.length,++c}for(e[2][0].data=yr(c);p<e[7][0].data.length/2;++p)u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535,!0);return e[6][0].data=Xl(f),e[3][0].data=Xl(g),c}function Pue(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=hs(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(xn(n)));var i=ay(r,{range:n,header:1}),o=["~Sh33tJ5~"];i.forEach(function(q){return q.forEach(function(H){typeof H=="string"&&o.push(H)})});var l={},c=[],u=Er.read(t.numbers,{type:"base64"});u.FileIndex.map(function(q,H){return[q,u.FullPaths[H]]}).forEach(function(q){var H=q[0],B=q[1];if(H.type==2&&H.name.match(/\.iwa/)){var de=H.content,ce=Hs(de),ge=Vs(ce);ge.forEach(function(he){c.push(he.id),l[he.id]={deps:[],location:B,type:Fd(he.messages[0].meta[1][0].data)}})}}),c.sort(function(q,H){return q-H});var d=c.filter(function(q){return q>1}).map(function(q){return[q,yr(q)]});u.FileIndex.map(function(q,H){return[q,u.FullPaths[H]]}).forEach(function(q){var H=q[0];if(q[1],!!H.name.match(/\.iwa/)){var B=Vs(Hs(H.content));B.forEach(function(de){de.messages.forEach(function(ce){d.forEach(function(ge){de.messages.some(function(he){return Fd(he.meta[1][0].data)!=11006&&Cue(he.data,ge[1])})&&l[ge[0]].deps.push(de.id)})})})}});for(var f=Er.find(u,l[1].location),h=Vs(Hs(f.content)),m,g=0;g<h.length;++g){var p=h[g];p.id==1&&(m=p)}var y=Qo(Sn(m.messages[0].data)[1][0].data);for(f=Er.find(u,l[y].location),h=Vs(Hs(f.content)),g=0;g<h.length;++g)p=h[g],p.id==y&&(m=p);for(y=Qo(Sn(m.messages[0].data)[2][0].data),f=Er.find(u,l[y].location),h=Vs(Hs(f.content)),g=0;g<h.length;++g)p=h[g],p.id==y&&(m=p);for(y=Qo(Sn(m.messages[0].data)[2][0].data),f=Er.find(u,l[y].location),h=Vs(Hs(f.content)),g=0;g<h.length;++g)p=h[g],p.id==y&&(m=p);var b=Sn(m.messages[0].data);{b[6][0].data=yr(n.e.r+1),b[7][0].data=yr(n.e.c+1);var x=Qo(b[46][0].data),w=Er.find(u,l[x].location),v=Vs(Hs(w.content));{for(var j=0;j<v.length&&v[j].id!=x;++j);if(v[j].id!=x)throw"Bad ColumnRowUIDMapArchive";var S=Sn(v[j].messages[0].data);S[1]=[],S[2]=[],S[3]=[];for(var _=0;_<=n.e.c;++_){var A=[];A[1]=A[2]=[{type:0,data:yr(_+420690)}],S[1].push({type:2,data:Wn(A)}),S[2].push({type:0,data:yr(_)}),S[3].push({type:0,data:yr(_)})}S[4]=[],S[5]=[],S[6]=[];for(var C=0;C<=n.e.r;++C)A=[],A[1]=A[2]=[{type:0,data:yr(C+726270)}],S[4].push({type:2,data:Wn(A)}),S[5].push({type:0,data:yr(C)}),S[6].push({type:0,data:yr(C)});v[j].messages[0].data=Wn(S)}w.content=td(ed(v)),w.size=w.content.length,delete b[46];var D=Sn(b[4][0].data);{D[7][0].data=yr(n.e.r+1);var k=Sn(D[1][0].data),O=Qo(k[2][0].data);w=Er.find(u,l[O].location),v=Vs(Hs(w.content));{if(v[0].id!=O)throw"Bad HeaderStorageBucket";var V=Sn(v[0].messages[0].data);for(C=0;C<i.length;++C){var G=Sn(V[2][0].data);G[1][0].data=yr(C),G[4][0].data=yr(i[C].length),V[2][C]={type:V[2][0].type,data:Wn(G)}}v[0].messages[0].data=Wn(V)}w.content=td(ed(v)),w.size=w.content.length;var Y=Qo(D[2][0].data);w=Er.find(u,l[Y].location),v=Vs(Hs(w.content));{if(v[0].id!=Y)throw"Bad HeaderStorageBucket";for(V=Sn(v[0].messages[0].data),_=0;_<=n.e.c;++_)G=Sn(V[2][0].data),G[1][0].data=yr(_),G[4][0].data=yr(n.e.r+1),V[2][_]={type:V[2][0].type,data:Wn(G)};v[0].messages[0].data=Wn(V)}w.content=td(ed(v)),w.size=w.content.length;var W=Qo(D[4][0].data);(function(){for(var q=Er.find(u,l[W].location),H=Vs(Hs(q.content)),B,de=0;de<H.length;++de){var ce=H[de];ce.id==W&&(B=ce)}var ge=Sn(B.messages[0].data);{ge[3]=[];var he=[];o.forEach(function(ae,Ne){he[1]=[{type:0,data:yr(Ne)}],he[2]=[{type:0,data:yr(1)}],he[3]=[{type:2,data:Aue(ae)}],ge[3].push({type:2,data:Wn(he)})})}B.messages[0].data=Wn(ge);var K=ed(H),fe=td(K);q.content=fe,q.size=q.content.length})();var P=Sn(D[3][0].data);{var E=P[1][0];delete P[2];var R=Sn(E.data);{var I=Qo(R[2][0].data);(function(){for(var q=Er.find(u,l[I].location),H=Vs(Hs(q.content)),B,de=0;de<H.length;++de){var ce=H[de];ce.id==I&&(B=ce)}var ge=Sn(B.messages[0].data);{delete ge[6],delete P[7];var he=new Uint8Array(ge[5][0].data);ge[5]=[];for(var K=0,fe=0;fe<=n.e.r;++fe){var ae=Sn(he);K+=Oue(ae,i[fe],o),ae[1][0].data=yr(fe),ge[5].push({data:Wn(ae),type:2})}ge[1]=[{type:0,data:yr(n.e.c+1)}],ge[2]=[{type:0,data:yr(n.e.r+1)}],ge[3]=[{type:0,data:yr(K)}],ge[4]=[{type:0,data:yr(n.e.r+1)}]}B.messages[0].data=Wn(ge);var Ne=ed(H),Se=td(Ne);q.content=Se,q.size=q.content.length})()}E.data=Wn(R)}D[3][0].data=Wn(P)}b[4][0].data=Wn(D)}m.messages[0].data=Wn(b);var ee=ed(h),L=td(ee);return f.content=L,f.size=f.content.length,u}function Iue(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function _T(e){Iue([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Mue(e,t){return t.bookType=="ods"?L8(e,t):t.bookType=="numbers"?Pue(e,t):t.bookType=="xlsb"?Rue(e,t):Fue(e,t)}function Rue(e,t){wd=1024,e&&!e.SSF&&(e.SSF=za(Zr)),e&&e.SSF&&(i1(),s1(e.SSF),t.revssf=o1(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,wm?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=w8.indexOf(t.bookType)>-1,a=Y$();_T(t=t||{});var i=cT(),o="",l=0;if(t.cellXfs=[],ic(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",Gt(i,o,Z$(e.Props,t)),a.coreprops.push(o),wr(t.rels,2,o,lr.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,Gt(i,o,t8(e.Props)),a.extprops.push(o),wr(t.rels,3,o,lr.EXT_PROPS),e.Custprops!==e.Props&&ea(e.Custprops||{}).length>0&&(o="docProps/custom.xml",Gt(i,o,r8(e.Custprops)),a.custprops.push(o),wr(t.rels,4,o,lr.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Gt(i,o,$ce(l-1,o,t,e,d)),a.sheets.push(o),wr(t.wbrels,-1,"worksheets/sheet"+l+"."+r,lr.WS[0])}if(f){var m=f["!comments"],g=!1,p="";m&&m.length>0&&(p="xl/comments"+l+"."+r,Gt(i,p,Wce(m,p)),a.comments.push(p),wr(d,-1,"../comments"+l+"."+r,lr.CMNT),g=!0),f["!legacy"]&&g&&Gt(i,"xl/drawings/vmlDrawing"+l+".vml",y8(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&Gt(i,Q$(o),Md(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,Gt(i,o,Uce(t.Strings,o,t)),a.strs.push(o),wr(t.wbrels,-1,"sharedStrings."+r,lr.SST)),o="xl/workbook."+r,Gt(i,o,Lce(e,o)),a.workbooks.push(o),wr(t.rels,1,o,lr.WB),o="xl/theme/theme1.xml",Gt(i,o,g8(e.Themes,t)),a.themes.push(o),wr(t.wbrels,-1,"theme/theme1.xml",lr.THEME),o="xl/styles."+r,Gt(i,o,Bce(e,o,t)),a.styles.push(o),wr(t.wbrels,-1,"styles."+r,lr.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",Gt(i,o,e.vbaraw),a.vba.push(o),wr(t.wbrels,-1,"vbaProject.bin",lr.VBA)),o="xl/metadata."+r,Gt(i,o,Vce(o)),a.metadata.push(o),wr(t.wbrels,-1,"metadata."+r,lr.XLMETA),Gt(i,"[Content_Types].xml",X$(a,t)),Gt(i,"_rels/.rels",Md(t.rels)),Gt(i,"xl/_rels/workbook."+r+".rels",Md(t.wbrels)),delete t.revssf,delete t.ssf,i}function Fue(e,t){wd=1024,e&&!e.SSF&&(e.SSF=za(Zr)),e&&e.SSF&&(i1(),s1(e.SSF),t.revssf=o1(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,wm?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=w8.indexOf(t.bookType)>-1,a=Y$();_T(t=t||{});var i=cT(),o="",l=0;if(t.cellXfs=[],ic(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",Gt(i,o,Z$(e.Props,t)),a.coreprops.push(o),wr(t.rels,2,o,lr.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,Gt(i,o,t8(e.Props)),a.extprops.push(o),wr(t.rels,3,o,lr.EXT_PROPS),e.Custprops!==e.Props&&ea(e.Custprops||{}).length>0&&(o="docProps/custom.xml",Gt(i,o,r8(e.Custprops)),a.custprops.push(o),wr(t.rels,4,o,lr.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Gt(i,o,C8(l-1,t,e,f)),a.sheets.push(o),wr(t.wbrels,-1,"worksheets/sheet"+l+"."+r,lr.WS[0])}if(h){var g=h["!comments"],p=!1,y="";if(g&&g.length>0){var b=!1;g.forEach(function(x){x[1].forEach(function(w){w.T==!0&&(b=!0)})}),b&&(y="xl/threadedComments/threadedComment"+l+"."+r,Gt(i,y,mie(g,d,t)),a.threadedcomments.push(y),wr(f,-1,"../threadedComments/threadedComment"+l+"."+r,lr.TCMNT)),y="xl/comments"+l+"."+r,Gt(i,y,v8(g)),a.comments.push(y),wr(f,-1,"../comments"+l+"."+r,lr.CMNT),p=!0}h["!legacy"]&&p&&Gt(i,"xl/drawings/vmlDrawing"+l+".vml",y8(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&Gt(i,Q$(o),Md(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,Gt(i,o,u8(t.Strings,t)),a.strs.push(o),wr(t.wbrels,-1,"sharedStrings."+r,lr.SST)),o="xl/workbook."+r,Gt(i,o,O8(e)),a.workbooks.push(o),wr(t.rels,1,o,lr.WB),o="xl/theme/theme1.xml",Gt(i,o,g8(e.Themes,t)),a.themes.push(o),wr(t.wbrels,-1,"theme/theme1.xml",lr.THEME),o="xl/styles."+r,Gt(i,o,m8(e,t)),a.styles.push(o),wr(t.wbrels,-1,"styles."+r,lr.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",Gt(i,o,e.vbaraw),a.vba.push(o),wr(t.wbrels,-1,"vbaProject.bin",lr.VBA)),o="xl/metadata."+r,Gt(i,o,x8()),a.metadata.push(o),wr(t.wbrels,-1,"metadata."+r,lr.XLMETA),d.length>1&&(o="xl/persons/person.xml",Gt(i,o,pie(d)),a.people.push(o),wr(t.wbrels,-1,"persons/person.xml",lr.PEOPLE)),Gt(i,"[Content_Types].xml",X$(a,t)),Gt(i,"_rels/.rels",Md(t.rels)),Gt(i,"xl/_rels/workbook."+r+".rels",Md(t.wbrels)),delete t.revssf,delete t.ssf,i}function Lue(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Fo(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function $8(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return y0(t.file,Er.write(e,{type:dr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Er.write(e,t)}function $ue(e,t){var r=za(t||{}),n=Mue(e,r);return Bue(n,r)}function Bue(e,t){var r={},n=dr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Er.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(a1(a))}return t.password&&typeof encrypt_agile<"u"?$8(encrypt_agile(a,t.password),t):t.type==="file"?y0(t.file,a):t.type=="string"?gm(a):a}function Uue(e,t){var r=t||{},n=nue(e,r);return $8(n,r)}function Ti(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Jm(ep(n));case"binary":return ep(n);case"string":return e;case"file":return y0(t.file,n,"utf8");case"buffer":return dr?Vo(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Ti(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Wue(e,t){switch(t.type){case"base64":return Jm(e);case"binary":return e;case"string":return e;case"file":return y0(t.file,e,"binary");case"buffer":return dr?Vo(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function mg(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Jm(r):t.type=="string"?gm(r):r;case"file":return y0(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function np(e,t){gne(),Ece(e);var r=za(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=np(e,r);return r.type="array",a1(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Ti(tue(e,r),r);case"slk":case"sylk":return Ti(Sse.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Ti(M8(e.Sheets[e.SheetNames[a]],r),r);case"txt":return Wue(B8(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Ti(TT(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Ti(_se.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return mg(Nse.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Ti(Tse.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Ti(Pse.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Ti(c8.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Ti(L8(e,r),r);case"wk1":return mg(ok.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return mg(ok.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),mg(I8(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Uue(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return $ue(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Vue(e,t,r,n,a,i,o,l){var c=Qn(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!o||e[r])for(var m=t.s.c;m<=t.e.c;++m){var g=o?e[r][m]:e[n[m]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;i[m]!=null&&(h[i[m]]=u);continue}var p=g.v;switch(g.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(i[m]!=null){if(p==null)if(g.t=="e"&&p===null)h[i[m]]=null;else if(u!==void 0)h[i[m]]=u;else if(d&&p===null)h[i[m]]=null;else continue;else h[i[m]]=d&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?p:Lo(g,p,l);p!=null&&(f=!1)}}return{row:h,isempty:f}}function ay(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Br(d);break;case"number":c=Br(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=Qn(c.s.r),h=[],m=[],g=0,p=0,y=Array.isArray(e),b=c.s.r,x=0,w={};y&&!e[b]&&(e[b]=[]);var v=u.skipHidden&&e["!cols"]||[],j=u.skipHidden&&e["!rows"]||[];for(x=c.s.c;x<=c.e.c;++x)if(!(v[x]||{}).hidden)switch(h[x]=fa(x),r=y?e[b][x]:e[h[x]+f],n){case 1:i[x]=x-c.s.c;break;case 2:i[x]=h[x];break;case 3:i[x]=u.header[x-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Lo(r,null,u),p=w[o]||0,!p)w[o]=1;else{do l=o+"_"+p++;while(w[l]);w[o]=p,w[l]=1}i[x]=l}for(b=c.s.r+a;b<=c.e.r;++b)if(!(j[b]||{}).hidden){var S=Vue(e,c,b,h,n,i,y,u);(S.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(m[g++]=S.row)}return m.length=g,m}var pk=/"/g;function Hue(e,t,r,n,a,i,o,l){for(var c=!0,u=[],d="",f=Qn(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var m=l.dense?(e[r]||[])[h]:e[n[h]+f];if(m==null)d="";else if(m.v!=null){c=!1,d=""+(l.rawNumbers&&m.t=="n"?m.v:Lo(m,null,l));for(var g=0,p=0;g!==d.length;++g)if((p=d.charCodeAt(g))===a||p===i||p===34||l.forceQuotes){d='"'+d.replace(pk,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(c=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(pk,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function TT(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Br(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],m=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(f[g]=fa(g));for(var p=0,y=a.s.r;y<=a.e.r;++y)(m[y]||{}).hidden||(d=Hue(e,a,y,f,o,c,i,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((p++?l:"")+d)));return delete n.dense,r.join("")}function B8(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=TT(e,t);return r}function zue(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Br(e["!ref"]),i="",o=[],l,c=[],u=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)o[l]=fa(l);for(var d=a.s.r;d<=a.e.r;++d)for(i=Qn(d),l=a.s.c;l<=a.e.c;++l)if(t=o[l]+i,r=u?(e[d]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function U8(e,t,r){var n=r||{},a=+!n.skipHeader,i=e||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Fn(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(i["!ref"]){var f=Br(i["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+t.length-1+a)}else o==-1&&(o=0,d.e.r=t.length-1+a);var h=n.header||[],m=0;t.forEach(function(p,y){ea(p).forEach(function(b){(m=h.indexOf(b))==-1&&(h[m=h.length]=b);var x=p[b],w="z",v="",j=_r({c:l+m,r:o+y+a});u=ap(i,j),x&&typeof x=="object"&&!(x instanceof Date)?i[j]=x:(typeof x=="number"?w="n":typeof x=="boolean"?w="b":typeof x=="string"?w="s":x instanceof Date?(w="d",n.cellDates||(w="n",x=Ha(x)),v=n.dateNF||Zr[14]):x===null&&n.nullError&&(w="e",x=0),u?(u.t=w,u.v=x,delete u.w,delete u.R,v&&(u.z=v)):i[j]=u={t:w,v:x},v&&(u.z=v))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var g=Qn(o);if(a)for(m=0;m<h.length;++m)i[fa(m+l)+g]={t:"s",v:h[m]};return i["!ref"]=xn(d),i}function que(e,t){return U8(null,e,t)}function ap(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Fn(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?ap(e,_r(t)):ap(e,_r({r:t,c:r||0}))}function Gue(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function Kue(){return{SheetNames:[],Sheets:{}}}function Yue(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var o=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=o+a)!=-1;++a);}if(k8(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Xue(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=Gue(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function Que(e,t){return e.z=t,e}function W8(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function Jue(e,t,r){return W8(e,"#"+t,r)}function Zue(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function ede(e,t,r,n){for(var a=typeof t!="string"?t:Br(t),i=typeof t=="string"?t:xn(t),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=ap(e,o,l);c.t="n",c.F=i,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var Es={encode_col:fa,encode_row:Qn,encode_cell:_r,encode_range:xn,decode_col:pT,decode_row:mT,split_cell:gae,decode_cell:Fn,decode_range:hs,format_cell:Lo,sheet_add_aoa:V$,sheet_add_json:U8,sheet_add_dom:R8,aoa_to_sheet:ah,json_to_sheet:que,table_to_sheet:F8,table_to_book:_ue,sheet_to_csv:TT,sheet_to_txt:B8,sheet_to_json:ay,sheet_to_html:M8,sheet_to_formulae:zue,sheet_to_row_object_array:ay,sheet_get_cell:ap,book_new:Kue,book_append_sheet:Yue,book_set_sheet_visibility:Xue,cell_set_number_format:Que,cell_set_hyperlink:W8,cell_set_internal_link:Jue,cell_add_comment:Zue,sheet_set_array_formula:ede,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function tde({onNext:e,onPrevious:t,isLast:r,isLoading:n}){const[a,i]=N.useState(null),[o,l]=N.useState("balances"),[c,u]=N.useState([]),[d,f]=N.useState([]),[h,m]=N.useState(!1),{toast:g}=Vr(),{data:p=[]}=Fe({queryKey:["/api/companies"]}),{data:y=[]}=Fe({queryKey:["/api/leave-types"]}),b=S=>{var A;const _=(A=S.target.files)==null?void 0:A[0];if(_&&(i(_),u([]),f([]),m(!1),!["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(_.type))){g({title:"Invalid File Type",description:"Please upload a CSV or Excel file (.csv, .xls, .xlsx)",variant:"destructive"}),i(null);return}},x=Ut({mutationFn:async S=>{const _=new FormData;return _.append("file",S),_.append("importType",o),(await Ct("POST","/api/import-leave-data/validate",_)).json()},onSuccess:S=>{u(S.preview),f(S.errors||[]),m(S.errors.length===0),S.errors.length===0?g({title:"Validation Successful",description:`File validated successfully. Found ${S.preview.length} records.`}):g({title:"Validation Issues Found",description:`Found ${S.errors.length} validation errors. Please review and fix them.`,variant:"destructive"})},onError:S=>{console.error("File validation error:",S),g({title:"Validation Failed",description:"Failed to validate file. Please check the file format and try again.",variant:"destructive"})}}),w=Ut({mutationFn:async()=>{if(!a)throw new Error("No file selected");const S=new FormData;S.append("file",a),S.append("importType",o);const _=localStorage.getItem("jwt_token");return _?(S.append("jwtToken",_),console.log(`[ImportSetup] ✅ Passing JWT token for ${o} import`)):console.warn(`[ImportSetup] ⚠️ No JWT token found - ${o} import may fail`),(await Ct("POST","/api/import-leave-data/execute",S)).json()},onSuccess:S=>{Ye.invalidateQueries({queryKey:["/api/employee-leave-balances"]}),Ye.invalidateQueries({queryKey:["/api/leave-balance-transactions"]});let _=`Successfully imported ${S.imported} of ${S.total} records`;S.importStats&&S.total-S.imported>0&&(_+=`

Skipped records breakdown:`,S.importStats.skippedEmpty>0&&(_+=`
• Empty/missing fields: ${S.importStats.skippedEmpty}`),S.importStats.skippedHeaders>0&&(_+=`
• Header rows: ${S.importStats.skippedHeaders}`),S.importStats.skippedMissingEmployee>0&&(_+=`
• Employee not found: ${S.importStats.skippedMissingEmployee}`),S.importStats.skippedMissingLeaveType>0&&(_+=`
• Leave type not found: ${S.importStats.skippedMissingLeaveType}`),S.importStats.processingErrors>0&&(_+=`
• Processing errors: ${S.importStats.processingErrors}`)),g({title:"Import Successful",description:_}),i(null),u([]),f([]),m(!1),Ye.invalidateQueries({queryKey:["/api/leave-types"]}),Ye.invalidateQueries({queryKey:["/api/leave-variants"]})},onError:S=>{console.error("Import error:",S),g({title:"Import Failed",description:"Failed to import data. Please try again.",variant:"destructive"})}}),v=async S=>{try{const _=await vi();console.log(`[ImportLeaveDataSetup] External API returned ${_.length} employees`),_.length===0&&(console.log("No employee data available, generating template with empty employee fields"),g({title:"No Employee Data",description:"Could not fetch employee data from external API. Template will have empty employee fields.",variant:"default"}));let A=[];if(S==="balances")A=[["Leave balance details for the current calendar year as on migration"],[],["EmpNumber","EmpName","LeaveType","LeaveOpeningBalance","LeaveEncashed","LeaveLapsed"]];else{A=[["Leave availed details from the beginning of the current calendar year till migration cut off date"],[],["EmpNumber","EmpName","LeaveType","LeaveTakenStartDate","Is Start Date a Half Day","LeaveTakenEndDate","Is End Date a Half Day","TotalLeaveDays","Status"]];const P=y;console.log("[ImportLeaveDataSetup] Transaction template: Only including column headers, no employee data");const E=Es.book_new(),R=Es.aoa_to_sheet(A);R["!cols"]=[{wch:12},{wch:20},{wch:15},{wch:18},{wch:20},{wch:18},{wch:20},{wch:15},{wch:12}],R["!merges"]||(R["!merges"]=[]),R["!merges"].push({s:{r:0,c:0},e:{r:0,c:7}}),Es.book_append_sheet(E,R,"Leave Transaction Import");const ee=np(E,{bookType:"xlsx",type:"array"}),L=new Blob([ee],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),q=window.URL.createObjectURL(L),H=document.createElement("a");H.href=q,H.download="leave_transaction_import_template.xlsx",document.body.appendChild(H),H.click(),document.body.removeChild(H),window.URL.revokeObjectURL(q),g({title:"Template Downloaded",description:"Transaction template with column headers only"});return}const C=y;if(_.length>0)for(const P of C)try{const E=localStorage.getItem("org_id")||"38";console.log(`[ImportLeaveDataSetup] Fetching variants for leave type ${P.name} with org_id: ${E}`);const R=await fetch("/api/leave-variants",{credentials:"include",headers:{"X-Org-Id":E}});if(R.ok){const ee=(await R.json()).filter(H=>H.leaveTypeName===P.name);console.log(`[ImportLeaveDataSetup] Found ${ee.length} variants for leave type ${P.name}:`,ee.map(H=>`ID: ${H.id}`));const L=new Set;for(const H of ee)try{console.log(`[ImportLeaveDataSetup] Fetching assignments for variant ${H.id}`);const B=await fetch(`/api/employee-assignments/${H.id}`,{credentials:"include"});if(B.ok){const de=await B.json();console.log(`[ImportLeaveDataSetup] Found ${de.length} assignments for variant ${H.id}:`,de),de.forEach(ce=>{L.add(ce.userId)})}else console.log(`[ImportLeaveDataSetup] Failed to fetch assignments for variant ${H.id}:`,B.status)}catch(B){console.log(`[ImportLeaveDataSetup] Error fetching assignments for variant ${H.id}:`,B)}console.log(`[ImportLeaveDataSetup] Total assigned employee IDs for ${P.name}:`,Array.from(L)),console.log(`[ImportLeaveDataSetup] Processing ${_.length} employees for leave type ${P.name}`);let q=0;_.forEach(H=>{const B=H.user_id||H.id,de=H.employeeNumber||H.employee_number,ce=H.user_name||H.name||`${H.firstName||""} ${H.lastName||""}`.trim()||"";console.log(`[ImportLeaveDataSetup] Checking employee: ID=${B}, Number=${de}, Name=${ce}, Assigned=${L.has(B)}`),L.has(B)&&de&&(q++,console.log(`[ImportLeaveDataSetup] Adding employee ${ce} (${de}) to ${P.name} template`),S==="balances"?A.push([de,ce,P.name,"","",""]):A.push([de,ce,P.name,"","","","approved"]))}),console.log(`[ImportLeaveDataSetup] Added ${q} employees for leave type ${P.name}`)}}catch(E){console.log(`Error processing leave type ${P.name}:`,E)}else C.forEach(P=>{S==="balances"?A.push(["EMP001","Sample Employee",P.name,"","",""]):A.push(["EMP001","Sample Employee",P.name,"","","","approved"])});const D=Es.book_new(),k=Es.aoa_to_sheet(A);S==="balances"?(k["!cols"]=[{wch:12},{wch:20},{wch:15},{wch:20},{wch:15},{wch:12}],k["!merges"]||(k["!merges"]=[]),k["!merges"].push({s:{r:0,c:0},e:{r:0,c:5}})):(k["!cols"]=[{wch:12},{wch:20},{wch:15},{wch:12},{wch:12},{wch:8},{wch:10}],k["!merges"]||(k["!merges"]=[]),k["!merges"].push({s:{r:0,c:0},e:{r:0,c:6}}));const O=S==="balances"?"Leave Balance Import":"Leave Transaction Import";Es.book_append_sheet(D,k,O);const V=np(D,{bookType:"xlsx",type:"array"}),G=new Blob([V],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Y=window.URL.createObjectURL(G),W=document.createElement("a");W.href=Y,W.download=`leave_${S}_import_template.xlsx`,document.body.appendChild(W),W.click(),document.body.removeChild(W),window.URL.revokeObjectURL(Y),g({title:"Template Downloaded",description:`Successfully downloaded ${S} template with ${A.length-3} employee records.`})}catch(_){console.error("Error generating template:",_),g({title:"Download Failed",description:"Failed to generate template. Please try again.",variant:"destructive"})}},j=()=>{if(!h||d.length>0){g({title:"Validation Required",description:"Please validate the file and fix all errors before importing.",variant:"destructive"});return}w.mutate()};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Import Leave Data"}),s.jsx("p",{className:"text-gray-600",children:"Upload employee leave balance or transaction data to import into the system."})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Import Instructions"})}),s.jsx(Ie,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border-2 border-blue-200 bg-blue-50 p-4 rounded-lg",children:[s.jsx(tt,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Select Template Type"}),s.jsxs("div",{className:"flex space-x-6",children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"importType",value:"balances",checked:o==="balances",onChange:S=>l(S.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Balance Template"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"importType",value:"transactions",checked:o==="transactions",onChange:S=>l(S.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Transaction Template"})]})]})]}),s.jsx("div",{className:"space-y-3 text-sm text-gray-600",children:o==="balances"?s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"Import employee leave balance data from your previous system."}),s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Required Format for Leave Balances:"}),s.jsxs("ul",{className:"text-blue-800 space-y-1",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"EmpNumber:"})," Employee ID (e.g., HIN/00001)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"EmpName:"})," Employee full name"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"LeaveType:"})," Leave type code (EL, CL, SL, etc.)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"LeaveOpeningBalance:"})," Current available balance"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"LeaveEncashed:"})," Amount encashed (if applicable)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"LeaveLapsed:"})," Amount that expired/lapsed"]})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"Import historical leave transactions that employees have already taken."}),s.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[s.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Required Format for Leave Transactions:"}),s.jsxs("ul",{className:"text-green-800 space-y-1",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"EmpNumber:"})," Employee ID (e.g., HIN/00001)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"EmpName:"})," Employee full name"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"LeaveType:"})," Leave type code (EL, CL, SL, etc.)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"LeaveTakenStartDate:"})," Leave start date (dd-MM-YYYY)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Is Start Date a Half Day:"})," TRUE/FALSE for half day start"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"LeaveTakenEndDate:"})," Leave end date (dd-MM-YYYY)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Is End Date a Half Day:"})," TRUE/FALSE for half day end"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"TotalLeaveDays:"})," Number of leave days taken (must be greater than 0)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Status:"})," Approved/1 (deducts balance), Rejected/0 (no deduction), or Pending/2 (no deduction)"]})]}),s.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded text-yellow-800",children:[s.jsx("strong",{children:"Important:"})," Ensure TotalLeaveDays column contains actual day counts (e.g., 1, 2, 0.5) and not zero values."]})]})]})})]})})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs(Et,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Upload Data File"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{variant:"outline",onClick:()=>v("balances"),className:"flex items-center space-x-2",children:[s.jsx(Vi,{className:"w-4 h-4"}),s.jsx("span",{children:"Download Balance Template"})]}),s.jsxs(se,{variant:"outline",onClick:()=>v("transactions"),className:"flex items-center space-x-2",children:[s.jsx(Vi,{className:"w-4 h-4"}),s.jsx("span",{children:"Download Transaction Template"})]})]})]})}),s.jsx(Ie,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"file",className:"text-sm font-medium text-gray-700",children:"Select File"}),s.jsx(ht,{id:"file",type:"file",accept:".csv,.xls,.xlsx",onChange:b,className:"mt-1"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Supported formats: CSV, Excel (.xls, .xlsx)"})]}),a&&s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx(MF,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:a.name}),s.jsxs("p",{className:"text-xs text-blue-600",children:[(a.size/1024).toFixed(1)," KB"]})]}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>x.mutate(a),disabled:x.isPending,children:x.isPending?"Validating...":"Validate"})]})]})})]}),(c.length>0||d.length>0)&&s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs(Et,{className:"flex items-center space-x-2",children:[d.length>0?s.jsx(cf,{className:"w-5 h-5 text-red-500"}):s.jsx(qn,{className:"w-5 h-5 text-green-500"}),s.jsx("span",{children:"Validation Results"})]})}),s.jsxs(Ie,{className:"space-y-4",children:[d.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-red-600 mb-2",children:"Validation Errors"}),s.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:d.map((S,_)=>s.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:S},_))})]}),c.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-2",children:["Data Preview (",c.length," records)"]}),s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full text-sm border",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsx("tr",{children:Object.keys(c[0]||{}).map(S=>s.jsx("th",{className:"border px-2 py-1 text-left",children:S},S))})}),s.jsx("tbody",{children:c.slice(0,5).map((S,_)=>s.jsx("tr",{children:Object.values(S).map((A,C)=>s.jsx("td",{className:"border px-2 py-1",children:String(A)},C))},_))})]}),c.length>5&&s.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Showing first 5 rows of ",c.length," total records."]})]})]}),h&&d.length===0&&s.jsx(se,{onClick:j,disabled:w.isPending,className:"w-full",children:w.isPending?"Importing...":"Import Data"})]})]}),s.jsxs("div",{className:"flex justify-between pt-6",children:[s.jsx(se,{variant:"outline",onClick:t,children:"Previous"}),s.jsx(se,{onClick:e,disabled:n,children:r?"Complete Setup":"Next"})]})]})}function rde({company:e}){var h;const[,t]=qf(),[r,n]=N.useState(()=>{if(!e)return localStorage.removeItem("setupWizardStep"),0;const m=localStorage.getItem("setupWizardStep");return m?parseInt(m,10):0}),[a,i]=N.useState(!1);N.useEffect(()=>{e||(localStorage.removeItem("setupWizardStep"),n(0))},[e]),N.useEffect(()=>{localStorage.setItem("setupWizardStep",r.toString())},[r]);const o=[{name:"Effective Date",component:qte},{name:"Leave Types",component:i$},{name:"Comp off",component:l$},{name:"BTO",component:c$},{name:"Import Leave Data",component:tde},{name:"Roles",component:o$},{name:"Workflow",component:lne}],l=()=>{console.log("Start setup clicked, setting currentStep to 1"),console.log("Current step before:",r),n(1),console.log("Current step after setState call:",r)},c=()=>{console.log("nextStep called, currentStep:",r,"steps.length:",o.length);const m=r+1;console.log("Setting currentStep to:",m),m<=o.length?n(m):i(!0)},u=()=>{r>1&&n(r-1)},d=Ut({mutationFn:async()=>{const m=Ye.getQueryData(["/api/company"]),g=localStorage.getItem("org_id");if(m&&m.id){const p={"Content-Type":"application/json"};g&&(p["X-Org-Id"]=g);const y=await fetch(`/api/company/${m.id}`,{method:"PATCH",headers:p,body:JSON.stringify({setupStatus:"completed"}),credentials:"include"});if(!y.ok)throw new Error("Failed to complete setup");return y.json()}throw new Error("No company found")},onSuccess:m=>{console.log("Setup completion successful:",m),localStorage.removeItem("setupWizardStep"),Ye.invalidateQueries({queryKey:["/api/company"]}),setTimeout(()=>{console.log("Navigating to admin overview"),t("/overview")},100)},onError:m=>{console.error("Setup completion failed:",m)}});if(a)return s.jsx("div",{className:"h-full flex items-center justify-center p-6",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm",children:"✓"})})}),s.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mb-4",children:"Setup Complete!"}),s.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"Your leave management system is now ready to use. You can start managing leave requests and configure additional settings as needed."}),s.jsx(se,{onClick:()=>window.location.href="/",className:"bg-primary hover:bg-primary/90",children:"Go to Dashboard"})]})});const f=(h=o[r-1])==null?void 0:h.component;return console.log("SetupWizard render - currentStep:",r),console.log("CurrentStepComponent:",f),console.log("steps array:",o),s.jsxs("div",{className:"fixed inset-0 z-50 flex h-screen bg-gray-50",children:[s.jsx("div",{className:"w-64 bg-gray-900 text-white",children:s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"flex items-center mb-8",children:s.jsx("img",{src:"/eziileave-logo.png",alt:"EziiLeave",className:"h-6 w-auto"})}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-white mb-4",children:[s.jsx("div",{className:"w-5 h-5 bg-white rounded flex items-center justify-center",children:s.jsx("span",{className:"text-gray-900 font-bold text-xs",children:"□"})}),s.jsx("span",{className:"font-medium text-sm",children:"Setup"})]}),s.jsx("div",{className:"text-xs text-gray-400 ml-7",children:"Leave"})]}),s.jsx("div",{className:"space-y-2",children:o.map((m,g)=>s.jsxs("div",{className:`flex items-center space-x-3 p-2 rounded transition-colors ${r===g+1?"bg-gray-800 text-white":"text-gray-300 hover:text-white"}`,children:[s.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center text-xs font-medium ${r===g+1?"border-white bg-white text-gray-900":r>g+1?"border-green-400 bg-green-400 text-white":"border-gray-500 text-gray-500"}`,children:g+1}),s.jsx("span",{className:"text-sm",children:m.name})]},g))})]})}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Leave Management"})}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsx("div",{className:"p-6",children:r===0?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"This module has not been enabled for this organisation"}),s.jsx(se,{onClick:l,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2",children:"Enable Module →"})]})}):f?s.jsx(f,{onNext:c,onPrevious:u,onComplete:r===o.length?()=>d.mutate():void 0,isLast:r===o.length,isLoading:d.isPending,company:e}):null})})]})]})}function ET(){const{isAuthenticated:e,user:t}=r0(),[r,n]=N.useState({reportees:[],isReportingManager:!1,isLoading:!1,error:null});console.log("[ReportingManager] Hook called - isAuthenticated:",e,"user:",!!t);const a=async i=>{console.log("[ReportingManager] Fetching reportees for user_id:",i),n(o=>({...o,isLoading:!0,error:null}));try{const o=localStorage.getItem("jwtToken")||localStorage.getItem("jwt_token")||localStorage.getItem("token");if(console.log("[ReportingManager] JWT token found:",!!o),console.log("[ReportingManager] JWT token length:",o==null?void 0:o.length),!o){console.log("[ReportingManager] No JWT token found in localStorage, showing all employees"),console.log("[ReportingManager] Available localStorage keys:",Object.keys(localStorage)),n({reportees:[],isReportingManager:!1,isLoading:!1,error:null});return}console.log("[ReportingManager] Making API call to:",`https://apiv1.resolvepay.in/organization/reporting-manager/${i}/reportees`),console.log("[ReportingManager] Using JWT token:",(o==null?void 0:o.substring(0,50))+"...");const l=await fetch(`https://apiv1.resolvepay.in/organization/reporting-manager/${i}/reportees`,{method:"GET",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(console.log("[ReportingManager] API Response status:",l.status),!l.ok){console.log("[ReportingManager] API call failed with status:",l.status);const u=await l.text();console.log("[ReportingManager] Error response:",u),n({reportees:[],isReportingManager:!1,isLoading:!1,error:null});return}const c=await l.json();if(console.log("[ReportingManager] API Response:",c),c.result==="Success"&&Array.isArray(c.data)){const u=c.data,d=u.length>0;n({reportees:u,isReportingManager:d,isLoading:!1,error:null}),console.log(`[ReportingManager] User is ${d?"a reporting manager":"not a reporting manager"} with ${u.length} reportees`)}else n({reportees:[],isReportingManager:!1,isLoading:!1,error:null})}catch(o){console.error("[ReportingManager] Error fetching reportees:",o),n({reportees:[],isReportingManager:!1,isLoading:!1,error:null})}};return N.useEffect(()=>{if(console.log("[ReportingManager] Effect triggered - isAuthenticated:",e,"user:",!!t),e&&t){const i=localStorage.getItem("user_id")||t.id;console.log("[ReportingManager] User authenticated, calling reporting manager API for user_id:",i),console.log("[ReportingManager] localStorage contents:",Object.keys(localStorage)),console.log("[ReportingManager] Available tokens:",{jwtToken:!!localStorage.getItem("jwtToken"),jwt_token:!!localStorage.getItem("jwt_token"),token:!!localStorage.getItem("token")}),a(i)}else console.log("[ReportingManager] Not calling API - isAuthenticated:",e,"user:",!!t)},[e,t]),N.useEffect(()=>{const i=localStorage.getItem("user_id")||"1";console.log("[ReportingManager] Force calling API immediately for testing with user_id:",i),console.log("[ReportingManager] Current localStorage keys:",Object.keys(localStorage)),a(i)},[]),N.useEffect(()=>{console.log("[ReportingManager] Hook mounted - forcing API call");const i=localStorage.getItem("user_id")||"1";setTimeout(()=>{console.log("[ReportingManager] Delayed API call with user_id:",i),a(i)},1e3)},[]),r}function oh(){const[e,t]=N.useState(null),[r,n]=N.useState([]),[a,i]=N.useState(!0),[o,l]=N.useState(null);N.useEffect(()=>{(async()=>{var m;try{i(!0);const g=localStorage.getItem("jwt_token");let p=localStorage.getItem("user_id");if(p==="1"&&(console.log("[WorkPattern] Current user_id is 1, keeping as is"),p="1435"),!g){console.log("⚠️  [WorkPattern] No JWT token found, cannot fetch work pattern"),i(!1);return}if(!p){console.log("[WorkPattern] No user ID found"),l("No user ID found"),i(!1);return}console.log("[WorkPattern] Fetching work patterns for user:",p);const y=await fetch("https://apiv1.resolvepay.in/organization/get-work-patterns",{method:"GET",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});if(console.log("[WorkPattern] Work pattern API Response status:",y.status),y.ok){const b=await y.json();if(console.log("[WorkPattern] Work pattern data:",b),console.log("[WorkPattern] Full API response structure:",JSON.stringify(b,null,2)),b.data&&b.data.length>0){const x=b.data.find(v=>v.employees&&v.employees.includes(parseInt(p)))||b.data[0];console.log("[WorkPattern] Found user work pattern:",x),console.log("[WorkPattern] Work pattern structure details:",{patternName:x.patternName,patternId:x.id,userIdInPattern:(m=x.employees)==null?void 0:m.includes(parseInt(p)),currentUserId:parseInt(p),employeesInPattern:x.employees,nonWorkingDays:x.nonWorkingDays,numberOfWorkingDays:x.numberOfWorkingDays,numberOfNonWorkingDays:x.numberOfNonWorkingDays,fullStructure:JSON.stringify(x,null,2)}),t(x),console.log("[WorkPattern] Fetching external holidays...");const w=await fetch("https://apiv1.resolvepay.in/organization/holidays",{method:"GET",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});if(console.log("[WorkPattern] External holidays API response status:",w.status),w.ok){const v=await w.json();console.log("[WorkPattern] External holidays data:",v);const j=v.data||[];if(userWorkPattern.selectedHolidays&&userWorkPattern.selectedHolidays.length>0){const S=j.filter(_=>userWorkPattern.selectedHolidays.includes(_.id));console.log("[WorkPattern] Filtered holidays matching work pattern:",S),n(S)}else console.log("[WorkPattern] No selected holidays in work pattern"),n([])}else{const v=await w.text();console.log("[WorkPattern] Failed to fetch external holidays:",w.status,v),n([])}}else console.log("[WorkPattern] No work pattern found for user"),l("No work pattern found for user"),n([])}else{const b=await y.text();console.log("[WorkPattern] Work pattern API Error:",y.status,b),l(`Work pattern API error: ${y.status}`),n([])}}catch(g){console.error("[WorkPattern] Error fetching work pattern:",g),l("Failed to fetch work pattern"),n([])}finally{i(!1)}})()},[]);const c=h=>{if(!r||r.length===0)return!1;const m=h.toISOString().split("T")[0];return!!r.find(p=>(p.selectedDate||p.date)===m)},u=h=>{if(!r||r.length===0)return null;const m=h.toISOString().split("T")[0];return r.find(g=>(g.selectedDate||g.date)===m)||null},d=h=>{var b;const m=h.getDay(),p=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][m];if(console.log(`[WorkPattern] isWorkingDay check for ${h.toISOString().split("T")[0]} (${p}):`,{dayOfWeek:m,dayName:p,isHoliday:c(h),workPatternExists:!!e,nonWorkingDaysCount:((b=e==null?void 0:e.nonWorkingDays)==null?void 0:b.length)||0,nonWorkingDaysStructure:e==null?void 0:e.nonWorkingDays}),c(h))return console.log(`[WorkPattern] ${p} is a holiday, returning false`),!1;if(e!=null&&e.nonWorkingDays&&e.nonWorkingDays.length>0){const x=e.nonWorkingDays.some(w=>{console.log("[WorkPattern] Checking pattern:",w);const v=w.days.some(j=>{const S=j.toLowerCase()===p;return console.log(`[WorkPattern] Pattern day "${j}" vs "${p}": ${S}`),S});return console.log(`[WorkPattern] Pattern result for ${p}:`,v),v});return console.log(`[WorkPattern] Final isNonWorking result for ${p}:`,x),!x}const y=h.getDay()===0||h.getDay()===6;return console.log(`[WorkPattern] No work pattern, using weekend fallback for ${p}: isWeekend=${y}`),!y};return{workPattern:e,holidays:r,isLoading:a,error:o,isHoliday:c,getHolidayDetails:u,isWorkingDay:d,calculateWorkingDays:(h,m)=>{let g=0;const p=new Date(h);for(;p<=m;)d(p)&&g++,p.setDate(p.getDate()+1);return g}}}function nde(){const[e,t]=N.useState("Leaves"),[r,n]=N.useState("All"),[a,i]=N.useState(new Date),o=localStorage.getItem("currentView")||"admin",{data:l=[]}=Fe({queryKey:["/api/leave-requests"],enabled:o==="admin"}),{data:c=[]}=Fe({queryKey:["/api/leave-types"]}),{data:u=[]}=Fe({queryKey:["/api/users"]}),{data:d=[],isLoading:f}=Fe({queryKey:["external-employees"],queryFn:vi,staleTime:5*60*1e3});ET(),localStorage.getItem("user_id");const{isHoliday:h,isWorkingDay:m}=oh(),{data:g}=Fe({queryKey:["/api/comp-off-config"]}),p=()=>{i(new Date(a.getFullYear(),a.getMonth()-1,1))},y=()=>{i(new Date(a.getFullYear(),a.getMonth()+1,1))},b=()=>{i(new Date)},x=h,w=Y=>!m(Y),v=Y=>{if(!Y)return"Employee";const W=d.find(R=>{var I;return R.user_id===Y||R.user_id===parseInt(Y)||((I=R.user_id)==null?void 0:I.toString())===Y});if(W&&W.user_name)return W.user_name;if(W&&(W.first_name||W.last_name)){const R=`${W.first_name||""} ${W.last_name||""}`.trim();if(R)return R}const P=u.find(R=>R.id===Y);return P&&P.firstName?`${P.firstName} ${P.lastName||""}`.trim():{225:"Ashwani Khanna",231:"Sumalatha Thadimari",7243:"Sumalatha Thadimari",7244:"Ashwani Khanna",12080:"Rahul Sharma",7246:"Anjali Kumari"}[Y]||`Employee ${Y}`},{data:j}=Fe({queryKey:["/api/pto-config"]}),S=l,_=S.filter(Y=>Y.status==="pending"),A=S.filter(Y=>Y.status==="approved"),C=S.filter(Y=>Y.status==="rejected"),k=(()=>{switch(r){case"Pending":return _;case"Approved":return A;case"Rejected":return C;default:return S}})(),O=c.length,V=j!=null&&j.enabled?1:0,G=g!=null&&g.enabled?1:0;return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx(Ce,{children:s.jsx(Ie,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Leaves"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-800",children:O})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(br,{className:"w-6 h-6 text-blue-500"})})]})})}),s.jsx(Ce,{children:s.jsx(Ie,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"BTO"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-800",children:V})]}),s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(eN,{className:"w-6 h-6 text-green-500"})})]})})}),s.jsx(Ce,{children:s.jsx(Ie,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"CompOff"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-800",children:G})]}),s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:s.jsx(An,{className:"w-6 h-6 text-orange-500"})})]})})})]}),s.jsxs(Ce,{className:"mb-8",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Approval Requests"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(se,{variant:e==="Leaves"?"default":"outline",size:"sm",className:e==="Leaves"?"bg-gray-900 text-white":"",onClick:()=>t("Leaves"),children:["Leaves (",S.length,")"]}),s.jsx(se,{variant:e==="BTO"?"default":"outline",size:"sm",className:e==="BTO"?"bg-gray-900 text-white":"",onClick:()=>t("BTO"),children:"BTO (0)"}),s.jsx(se,{variant:e==="CompOff"?"default":"outline",size:"sm",className:e==="CompOff"?"bg-gray-900 text-white":"",onClick:()=>t("CompOff"),children:"CompOff (0)"})]})]}),s.jsxs("div",{className:"flex space-x-6 mt-4 text-sm",children:[s.jsxs("button",{className:`transition-colors flex items-center space-x-1 pb-1 ${r==="All"?"text-primary font-medium border-b-2 border-primary":"text-gray-600 hover:text-gray-800"}`,onClick:()=>n("All"),children:["All (",S.length,")"]}),s.jsxs("button",{className:`transition-colors flex items-center space-x-1 pb-1 ${r==="Pending"?"text-primary font-medium border-b-2 border-primary":"text-gray-600 hover:text-gray-800"}`,onClick:()=>n("Pending"),children:[s.jsxs("span",{children:["Pending (",_.length,")"]}),s.jsx(An,{className:"w-3 h-3"})]}),s.jsxs("button",{className:`transition-colors flex items-center space-x-1 pb-1 ${r==="Approved"?"text-primary font-medium border-b-2 border-primary":"text-gray-600 hover:text-gray-800"}`,onClick:()=>n("Approved"),children:[s.jsxs("span",{children:["Approved (",A.length,")"]}),s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})]}),s.jsxs("button",{className:`transition-colors flex items-center space-x-1 pb-1 ${r==="Rejected"?"text-primary font-medium border-b-2 border-primary":"text-gray-600 hover:text-gray-800"}`,onClick:()=>n("Rejected"),children:[s.jsxs("span",{children:["Rejected (",C.length,")"]}),s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"})]})]})]}),s.jsx("div",{className:"divide-y divide-gray-100",children:e==="BTO"?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(eN,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No BTO requests"}),s.jsx("p",{className:"text-gray-600",children:"BTO requests will appear here when submitted by employees."})]}):e==="CompOff"?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(An,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No CompOff requests"}),s.jsx("p",{className:"text-gray-600",children:"Compensatory off requests will appear here when submitted by employees."})]}):k.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(br,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No leave requests"}),s.jsx("p",{className:"text-gray-600",children:"Employee leave requests will appear here for approval."})]}):k.slice(0,3).map(Y=>{u.find(P=>P.id===Y.userId);const W=c.find(P=>P.id===Y.leaveTypeId);return s.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-gray-600",children:v(Y.userId).split(" ").map(R=>R[0]).join("").slice(0,2)||"UN"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:v(Y.userId)}),s.jsxs("p",{className:"text-sm text-gray-600",children:[(W==null?void 0:W.name)||"Leave"," • ",new Date(Y.startDate).toLocaleDateString()," - ",new Date(Y.endDate).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Lt,{variant:Y.status==="pending"?"default":Y.status==="approved"?"secondary":"destructive",children:Y.status}),s.jsxs("p",{className:"text-sm text-gray-500",children:[Y.workingDays," days"]})]})]})},Y.id)})}),S.length>3&&s.jsx("div",{className:"p-4 text-center border-t",children:s.jsx(Xh,{href:"/approvals",children:s.jsxs("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:["View all ",S.length," requests"]})})})]}),s.jsxs(Ce,{children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Calendar"}),s.jsx(se,{variant:"outline",size:"sm",className:"text-primary border-primary hover:bg-primary hover:text-white",children:"Set Block-out Period +"})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-800",children:a.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{size:"sm",variant:"outline",className:"bg-gray-600 text-white border-gray-600",onClick:b,children:"today"}),s.jsx(se,{variant:"outline",size:"sm",onClick:p,children:s.jsx(Yf,{className:"w-4 h-4"})}),s.jsx(se,{variant:"outline",size:"sm",onClick:y,children:s.jsx(Wi,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Y=>s.jsx("div",{className:"p-3 text-center text-sm font-medium text-gray-600",children:Y},Y))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:(()=>{const Y=a.getFullYear(),W=a.getMonth(),P=new Date(Y,W,1),E=new Date(P);E.setDate(E.getDate()-P.getDay());const R=[];for(let I=0;I<42;I++){const ee=new Date(E);ee.setDate(E.getDate()+I);const L=ee.getMonth()===W,q=ee.getDate(),H=x(ee),B=w(ee),de=L?A.filter(ge=>{const he=new Date(ge.startDate),K=new Date(ge.endDate);return ee>=he&&ee<=K}):[],ce=de.length>0;R.push(s.jsxs("div",{className:`p-3 h-16 border border-gray-200 text-sm ${L?H?"bg-red-300 border-red-400 text-red-900":B?"bg-gray-400 text-white":ce?"bg-green-100":"bg-white hover:bg-gray-50":"bg-gray-50 text-gray-400"} cursor-pointer`,children:[s.jsx("div",{className:"font-medium",children:q}),H&&L&&s.jsx("div",{className:"text-xs text-red-700 font-medium mt-1",children:"HOLIDAY"}),B&&!H&&L&&s.jsx("div",{className:"text-xs text-white font-medium mt-1",children:"NON-WORK"}),ce&&L&&!H&&!B&&de.slice(0,2).map((ge,he)=>{const K=v(ge.userId),fe=c.find(ae=>ae.id===ge.leaveTypeId);return s.jsxs("div",{className:"text-xs text-green-700 mt-1 truncate",children:[K," - ",(fe==null?void 0:fe.name)||"Leave"]},he)})]},I))}return R})()})]})]})]})})}var ade=Array.isArray,qa=ade,sde=typeof O0=="object"&&O0&&O0.Object===Object&&O0,V8=sde,ide=V8,ode=typeof self=="object"&&self&&self.Object===Object&&self,lde=ide||ode||Function("return this")(),eo=lde,cde=eo,ude=cde.Symbol,N0=ude,gk=N0,H8=Object.prototype,dde=H8.hasOwnProperty,fde=H8.toString,Rh=gk?gk.toStringTag:void 0;function hde(e){var t=dde.call(e,Rh),r=e[Rh];try{e[Rh]=void 0;var n=!0}catch{}var a=fde.call(e);return n&&(t?e[Rh]=r:delete e[Rh]),a}var mde=hde,pde=Object.prototype,gde=pde.toString;function xde(e){return gde.call(e)}var yde=xde,xk=N0,vde=mde,wde=yde,bde="[object Null]",jde="[object Undefined]",yk=xk?xk.toStringTag:void 0;function Nde(e){return e==null?e===void 0?jde:bde:yk&&yk in Object(e)?vde(e):wde(e)}var Ho=Nde;function Sde(e){return e!=null&&typeof e=="object"}var zo=Sde,_de=Ho,Tde=zo,Ede="[object Symbol]";function Ade(e){return typeof e=="symbol"||Tde(e)&&_de(e)==Ede}var lh=Ade,Cde=qa,Dde=lh,kde=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ode=/^\w*$/;function Pde(e,t){if(Cde(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Dde(e)?!0:Ode.test(e)||!kde.test(e)||t!=null&&e in Object(t)}var AT=Pde;function Ide(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var oc=Ide;const ch=Cr(oc);var Mde=Ho,Rde=oc,Fde="[object AsyncFunction]",Lde="[object Function]",$de="[object GeneratorFunction]",Bde="[object Proxy]";function Ude(e){if(!Rde(e))return!1;var t=Mde(e);return t==Lde||t==$de||t==Fde||t==Bde}var CT=Ude;const Yt=Cr(CT);var Wde=eo,Vde=Wde["__core-js_shared__"],Hde=Vde,fb=Hde,vk=function(){var e=/[^.]+$/.exec(fb&&fb.keys&&fb.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function zde(e){return!!vk&&vk in e}var qde=zde,Gde=Function.prototype,Kde=Gde.toString;function Yde(e){if(e!=null){try{return Kde.call(e)}catch{}try{return e+""}catch{}}return""}var z8=Yde,Xde=CT,Qde=qde,Jde=oc,Zde=z8,efe=/[\\^$.*+?()[\]{}|]/g,tfe=/^\[object .+?Constructor\]$/,rfe=Function.prototype,nfe=Object.prototype,afe=rfe.toString,sfe=nfe.hasOwnProperty,ife=RegExp("^"+afe.call(sfe).replace(efe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ofe(e){if(!Jde(e)||Qde(e))return!1;var t=Xde(e)?ife:tfe;return t.test(Zde(e))}var lfe=ofe;function cfe(e,t){return e==null?void 0:e[t]}var ufe=cfe,dfe=lfe,ffe=ufe;function hfe(e,t){var r=ffe(e,t);return dfe(r)?r:void 0}var ku=hfe,mfe=ku,pfe=mfe(Object,"create"),f1=pfe,wk=f1;function gfe(){this.__data__=wk?wk(null):{},this.size=0}var xfe=gfe;function yfe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var vfe=yfe,wfe=f1,bfe="__lodash_hash_undefined__",jfe=Object.prototype,Nfe=jfe.hasOwnProperty;function Sfe(e){var t=this.__data__;if(wfe){var r=t[e];return r===bfe?void 0:r}return Nfe.call(t,e)?t[e]:void 0}var _fe=Sfe,Tfe=f1,Efe=Object.prototype,Afe=Efe.hasOwnProperty;function Cfe(e){var t=this.__data__;return Tfe?t[e]!==void 0:Afe.call(t,e)}var Dfe=Cfe,kfe=f1,Ofe="__lodash_hash_undefined__";function Pfe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=kfe&&t===void 0?Ofe:t,this}var Ife=Pfe,Mfe=xfe,Rfe=vfe,Ffe=_fe,Lfe=Dfe,$fe=Ife;function uh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}uh.prototype.clear=Mfe;uh.prototype.delete=Rfe;uh.prototype.get=Ffe;uh.prototype.has=Lfe;uh.prototype.set=$fe;var Bfe=uh;function Ufe(){this.__data__=[],this.size=0}var Wfe=Ufe;function Vfe(e,t){return e===t||e!==e&&t!==t}var DT=Vfe,Hfe=DT;function zfe(e,t){for(var r=e.length;r--;)if(Hfe(e[r][0],t))return r;return-1}var h1=zfe,qfe=h1,Gfe=Array.prototype,Kfe=Gfe.splice;function Yfe(e){var t=this.__data__,r=qfe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Kfe.call(t,r,1),--this.size,!0}var Xfe=Yfe,Qfe=h1;function Jfe(e){var t=this.__data__,r=Qfe(t,e);return r<0?void 0:t[r][1]}var Zfe=Jfe,ehe=h1;function the(e){return ehe(this.__data__,e)>-1}var rhe=the,nhe=h1;function ahe(e,t){var r=this.__data__,n=nhe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var she=ahe,ihe=Wfe,ohe=Xfe,lhe=Zfe,che=rhe,uhe=she;function dh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}dh.prototype.clear=ihe;dh.prototype.delete=ohe;dh.prototype.get=lhe;dh.prototype.has=che;dh.prototype.set=uhe;var m1=dh,dhe=ku,fhe=eo,hhe=dhe(fhe,"Map"),kT=hhe,bk=Bfe,mhe=m1,phe=kT;function ghe(){this.size=0,this.__data__={hash:new bk,map:new(phe||mhe),string:new bk}}var xhe=ghe;function yhe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var vhe=yhe,whe=vhe;function bhe(e,t){var r=e.__data__;return whe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var p1=bhe,jhe=p1;function Nhe(e){var t=jhe(this,e).delete(e);return this.size-=t?1:0,t}var She=Nhe,_he=p1;function The(e){return _he(this,e).get(e)}var Ehe=The,Ahe=p1;function Che(e){return Ahe(this,e).has(e)}var Dhe=Che,khe=p1;function Ohe(e,t){var r=khe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Phe=Ohe,Ihe=xhe,Mhe=She,Rhe=Ehe,Fhe=Dhe,Lhe=Phe;function fh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}fh.prototype.clear=Ihe;fh.prototype.delete=Mhe;fh.prototype.get=Rhe;fh.prototype.has=Fhe;fh.prototype.set=Lhe;var OT=fh,q8=OT,$he="Expected a function";function PT(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError($he);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(PT.Cache||q8),r}PT.Cache=q8;var G8=PT;const Bhe=Cr(G8);var Uhe=G8,Whe=500;function Vhe(e){var t=Uhe(e,function(n){return r.size===Whe&&r.clear(),n}),r=t.cache;return t}var Hhe=Vhe,zhe=Hhe,qhe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ghe=/\\(\\)?/g,Khe=zhe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(qhe,function(r,n,a,i){t.push(a?i.replace(Ghe,"$1"):n||r)}),t}),Yhe=Khe;function Xhe(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var IT=Xhe,jk=N0,Qhe=IT,Jhe=qa,Zhe=lh,Nk=jk?jk.prototype:void 0,Sk=Nk?Nk.toString:void 0;function K8(e){if(typeof e=="string")return e;if(Jhe(e))return Qhe(e,K8)+"";if(Zhe(e))return Sk?Sk.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var eme=K8,tme=eme;function rme(e){return e==null?"":tme(e)}var Y8=rme,nme=qa,ame=AT,sme=Yhe,ime=Y8;function ome(e,t){return nme(e)?e:ame(e,t)?[e]:sme(ime(e))}var X8=ome,lme=lh;function cme(e){if(typeof e=="string"||lme(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var g1=cme,ume=X8,dme=g1;function fme(e,t){t=ume(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[dme(t[r++])];return r&&r==n?e:void 0}var MT=fme,hme=MT;function mme(e,t,r){var n=e==null?void 0:hme(e,t);return n===void 0?r:n}var Q8=mme;const Ps=Cr(Q8);function pme(e){return e==null}var gme=pme;const hr=Cr(gme);var xme=Ho,yme=qa,vme=zo,wme="[object String]";function bme(e){return typeof e=="string"||!yme(e)&&vme(e)&&xme(e)==wme}var jme=bme;const hu=Cr(jme);var J8={exports:{}},Tr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT=Symbol.for("react.element"),FT=Symbol.for("react.portal"),x1=Symbol.for("react.fragment"),y1=Symbol.for("react.strict_mode"),v1=Symbol.for("react.profiler"),w1=Symbol.for("react.provider"),b1=Symbol.for("react.context"),Nme=Symbol.for("react.server_context"),j1=Symbol.for("react.forward_ref"),N1=Symbol.for("react.suspense"),S1=Symbol.for("react.suspense_list"),_1=Symbol.for("react.memo"),T1=Symbol.for("react.lazy"),Sme=Symbol.for("react.offscreen"),Z8;Z8=Symbol.for("react.module.reference");function $s(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case RT:switch(e=e.type,e){case x1:case v1:case y1:case N1:case S1:return e;default:switch(e=e&&e.$$typeof,e){case Nme:case b1:case j1:case T1:case _1:case w1:return e;default:return t}}case FT:return t}}}Tr.ContextConsumer=b1;Tr.ContextProvider=w1;Tr.Element=RT;Tr.ForwardRef=j1;Tr.Fragment=x1;Tr.Lazy=T1;Tr.Memo=_1;Tr.Portal=FT;Tr.Profiler=v1;Tr.StrictMode=y1;Tr.Suspense=N1;Tr.SuspenseList=S1;Tr.isAsyncMode=function(){return!1};Tr.isConcurrentMode=function(){return!1};Tr.isContextConsumer=function(e){return $s(e)===b1};Tr.isContextProvider=function(e){return $s(e)===w1};Tr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===RT};Tr.isForwardRef=function(e){return $s(e)===j1};Tr.isFragment=function(e){return $s(e)===x1};Tr.isLazy=function(e){return $s(e)===T1};Tr.isMemo=function(e){return $s(e)===_1};Tr.isPortal=function(e){return $s(e)===FT};Tr.isProfiler=function(e){return $s(e)===v1};Tr.isStrictMode=function(e){return $s(e)===y1};Tr.isSuspense=function(e){return $s(e)===N1};Tr.isSuspenseList=function(e){return $s(e)===S1};Tr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===x1||e===v1||e===y1||e===N1||e===S1||e===Sme||typeof e=="object"&&e!==null&&(e.$$typeof===T1||e.$$typeof===_1||e.$$typeof===w1||e.$$typeof===b1||e.$$typeof===j1||e.$$typeof===Z8||e.getModuleId!==void 0)};Tr.typeOf=$s;J8.exports=Tr;var _me=J8.exports,Tme=Ho,Eme=zo,Ame="[object Number]";function Cme(e){return typeof e=="number"||Eme(e)&&Tme(e)==Ame}var eB=Cme;const Dme=Cr(eB);var kme=eB;function Ome(e){return kme(e)&&e!=+e}var Pme=Ome;const S0=Cr(Pme);var oi=function(t){return t===0?0:t>0?1:-1},kc=function(t){return hu(t)&&t.indexOf("%")===t.length-1},nt=function(t){return Dme(t)&&!S0(t)},Ime=function(t){return hr(t)},Dn=function(t){return nt(t)||hu(t)},Mme=0,E1=function(t){var r=++Mme;return"".concat(t||"").concat(r)},mu=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!nt(t)&&!hu(t))return n;var i;if(kc(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return S0(i)&&(i=n),a&&i>r&&(i=r),i},il=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Rme=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},rd=function(t,r){return nt(t)&&nt(r)?function(n){return t+n*(r-t)}:function(){return r}};function AN(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Ps(n,t))===r})}var Fme=function(t,r){return nt(t)&&nt(r)?t-r:hu(t)&&hu(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Ld(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function CN(e){"@babel/helpers - typeof";return CN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CN(e)}var Lme=["viewBox","children"],$me=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],_k=["points","pathLength"],hb={svg:Lme,polygon:_k,polyline:_k},LT=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],sy=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(N.isValidElement(t)&&(n=t.props),!ch(n))return null;var a={};return Object.keys(n).forEach(function(i){LT.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},Bme=function(t,r,n){return function(a){return t(r,n,a),null}},iy=function(t,r,n){if(!ch(t)||CN(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];LT.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=Bme(o,r,n))}),a},Ume=["children"],Wme=["children"];function Tk(e,t){if(e==null)return{};var r=Vme(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vme(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Ek={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},To=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},Ak=null,mb=null,$T=function e(t){if(t===Ak&&Array.isArray(mb))return mb;var r=[];return N.Children.forEach(t,function(n){hr(n)||(_me.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),mb=r,Ak=t,r};function fi(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return To(a)}):n=[To(t)],$T(e).forEach(function(a){var i=Ps(a,"type.displayName")||Ps(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Ja(e,t){var r=fi(e,t);return r&&r[0]}var Ck=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!nt(n)||n<=0||!nt(a)||a<=0)},Hme=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],zme=function(t){return t&&t.type&&hu(t.type)&&Hme.indexOf(t.type)>=0},qme=function(t,r,n,a){var i,o=(i=hb==null?void 0:hb[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Yt(t)&&(a&&o.includes(r)||$me.includes(r))||n&&LT.includes(r)},fr=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(N.isValidElement(t)&&(a=t.props),!ch(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;qme((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=a[o])}),i},DN=function e(t,r){if(t===r)return!0;var n=N.Children.count(t);if(n!==N.Children.count(r))return!1;if(n===0)return!0;if(n===1)return Dk(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!Dk(i,o))return!1}return!0},Dk=function(t,r){if(hr(t)&&hr(r))return!0;if(!hr(t)&&!hr(r)){var n=t.props||{},a=n.children,i=Tk(n,Ume),o=r.props||{},l=o.children,c=Tk(o,Wme);return a&&l?Ld(i,c)&&DN(a,l):!a&&!l?Ld(i,c):!1}return!1},kk=function(t,r){var n=[],a={};return $T(t).forEach(function(i,o){if(zme(i))n.push(i);else if(i){var l=To(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,o);n.push(f),a[l]=!0}}}),n},Gme=function(t){var r=t&&t.type;return r&&Ek[r]?Ek[r]:null},Kme=function(t,r){return $T(r).indexOf(t)},Yme=["children","width","height","viewBox","className","style","title","desc"];function kN(){return kN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kN.apply(this,arguments)}function Xme(e,t){if(e==null)return{};var r=Qme(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qme(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ON(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=Xme(e,Yme),d=a||{width:r,height:n,x:0,y:0},f=sr("recharts-surface",i);return pe.createElement("svg",kN({},fr(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),pe.createElement("title",null,l),pe.createElement("desc",null,c),t)}var Jme=["children","className"];function PN(){return PN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PN.apply(this,arguments)}function Zme(e,t){if(e==null)return{};var r=epe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function epe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Rn=pe.forwardRef(function(e,t){var r=e.children,n=e.className,a=Zme(e,Jme),i=sr("recharts-layer",n);return pe.createElement("g",PN({className:i},fr(a,!0),{ref:t}),r)}),Eo=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function tpe(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var rpe=tpe,npe=rpe;function ape(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:npe(e,t,r)}var spe=ape,ipe="\\ud800-\\udfff",ope="\\u0300-\\u036f",lpe="\\ufe20-\\ufe2f",cpe="\\u20d0-\\u20ff",upe=ope+lpe+cpe,dpe="\\ufe0e\\ufe0f",fpe="\\u200d",hpe=RegExp("["+fpe+ipe+upe+dpe+"]");function mpe(e){return hpe.test(e)}var tB=mpe;function ppe(e){return e.split("")}var gpe=ppe,rB="\\ud800-\\udfff",xpe="\\u0300-\\u036f",ype="\\ufe20-\\ufe2f",vpe="\\u20d0-\\u20ff",wpe=xpe+ype+vpe,bpe="\\ufe0e\\ufe0f",jpe="["+rB+"]",IN="["+wpe+"]",MN="\\ud83c[\\udffb-\\udfff]",Npe="(?:"+IN+"|"+MN+")",nB="[^"+rB+"]",aB="(?:\\ud83c[\\udde6-\\uddff]){2}",sB="[\\ud800-\\udbff][\\udc00-\\udfff]",Spe="\\u200d",iB=Npe+"?",oB="["+bpe+"]?",_pe="(?:"+Spe+"(?:"+[nB,aB,sB].join("|")+")"+oB+iB+")*",Tpe=oB+iB+_pe,Epe="(?:"+[nB+IN+"?",IN,aB,sB,jpe].join("|")+")",Ape=RegExp(MN+"(?="+MN+")|"+Epe+Tpe,"g");function Cpe(e){return e.match(Ape)||[]}var Dpe=Cpe,kpe=gpe,Ope=tB,Ppe=Dpe;function Ipe(e){return Ope(e)?Ppe(e):kpe(e)}var Mpe=Ipe,Rpe=spe,Fpe=tB,Lpe=Mpe,$pe=Y8;function Bpe(e){return function(t){t=$pe(t);var r=Fpe(t)?Lpe(t):void 0,n=r?r[0]:t.charAt(0),a=r?Rpe(r,1).join(""):t.slice(1);return n[e]()+a}}var Upe=Bpe,Wpe=Upe,Vpe=Wpe("toUpperCase"),Hpe=Vpe;const A1=Cr(Hpe);function Or(e){return function(){return e}}const lB=Math.cos,oy=Math.sin,bi=Math.sqrt,ly=Math.PI,C1=2*ly,RN=Math.PI,FN=2*RN,jc=1e-6,zpe=FN-jc;function cB(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function qpe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return cB;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Gpe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?cB:qpe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>jc)if(!(Math.abs(f*c-u*d)>jc)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,g=a-l,p=c*c+u*u,y=m*m+g*g,b=Math.sqrt(p),x=Math.sqrt(h),w=i*Math.tan((RN-Math.acos((p+h-y)/(2*b*x)))/2),v=w/x,j=w/b;Math.abs(v-1)>jc&&this._append`L${t+v*d},${r+v*f}`,this._append`A${i},${i},0,0,${+(f*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>jc||Math.abs(this._y1-d)>jc)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%FN+FN),h>zpe?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>jc&&this._append`A${n},${n},0,${+(h>=RN)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function BT(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Gpe(t)}function UT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function uB(e){this._context=e}uB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function D1(e){return new uB(e)}function dB(e){return e[0]}function fB(e){return e[1]}function hB(e,t){var r=Or(!0),n=null,a=D1,i=null,o=BT(l);e=typeof e=="function"?e:e===void 0?dB:Or(e),t=typeof t=="function"?t:t===void 0?fB:Or(t);function l(c){var u,d=(c=UT(c)).length,f,h=!1,m;for(n==null&&(i=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Or(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Or(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Or(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function pg(e,t,r){var n=null,a=Or(!0),i=null,o=D1,l=null,c=BT(u);e=typeof e=="function"?e:e===void 0?dB:Or(+e),t=typeof t=="function"?t:Or(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?fB:Or(+r);function u(f){var h,m,g,p=(f=UT(f)).length,y,b=!1,x,w=new Array(p),v=new Array(p);for(i==null&&(l=o(x=c())),h=0;h<=p;++h){if(!(h<p&&a(y=f[h],h,f))===b)if(b=!b)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(w[g],v[g]);l.lineEnd(),l.areaEnd()}b&&(w[h]=+e(y,h,f),v[h]=+t(y,h,f),l.point(n?+n(y,h,f):w[h],r?+r(y,h,f):v[h]))}if(x)return l=null,x+""||null}function d(){return hB().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Or(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Or(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Or(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Or(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Or(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Or(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Or(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class mB{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Kpe(e){return new mB(e,!0)}function Ype(e){return new mB(e,!1)}const WT={draw(e,t){const r=bi(t/ly);e.moveTo(r,0),e.arc(0,0,r,0,C1)}},Xpe={draw(e,t){const r=bi(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},pB=bi(1/3),Qpe=pB*2,Jpe={draw(e,t){const r=bi(t/Qpe),n=r*pB;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Zpe={draw(e,t){const r=bi(t),n=-r/2;e.rect(n,n,r,r)}},e0e=.8908130915292852,gB=oy(ly/10)/oy(7*ly/10),t0e=oy(C1/10)*gB,r0e=-lB(C1/10)*gB,n0e={draw(e,t){const r=bi(t*e0e),n=t0e*r,a=r0e*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=C1*i/5,l=lB(o),c=oy(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},pb=bi(3),a0e={draw(e,t){const r=-bi(t/(pb*3));e.moveTo(0,r*2),e.lineTo(-pb*r,-r),e.lineTo(pb*r,-r),e.closePath()}},ys=-.5,vs=bi(3)/2,LN=1/bi(12),s0e=(LN/2+1)*3,i0e={draw(e,t){const r=bi(t/s0e),n=r/2,a=r*LN,i=n,o=r*LN+r,l=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(ys*n-vs*a,vs*n+ys*a),e.lineTo(ys*i-vs*o,vs*i+ys*o),e.lineTo(ys*l-vs*c,vs*l+ys*c),e.lineTo(ys*n+vs*a,ys*a-vs*n),e.lineTo(ys*i+vs*o,ys*o-vs*i),e.lineTo(ys*l+vs*c,ys*c-vs*l),e.closePath()}};function o0e(e,t){let r=null,n=BT(a);e=typeof e=="function"?e:Or(e||WT),t=typeof t=="function"?t:Or(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Or(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Or(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function cy(){}function uy(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function xB(e){this._context=e}xB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:uy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function l0e(e){return new xB(e)}function yB(e){this._context=e}yB.prototype={areaStart:cy,areaEnd:cy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function c0e(e){return new yB(e)}function vB(e){this._context=e}vB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function u0e(e){return new vB(e)}function wB(e){this._context=e}wB.prototype={areaStart:cy,areaEnd:cy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function d0e(e){return new wB(e)}function Ok(e){return e<0?-1:1}function Pk(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(Ok(i)+Ok(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function Ik(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function gb(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function dy(e){this._context=e}dy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gb(this,this._t0,Ik(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,gb(this,Ik(this,r=Pk(this,e,t)),r);break;default:gb(this,this._t0,r=Pk(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function bB(e){this._context=new jB(e)}(bB.prototype=Object.create(dy.prototype)).point=function(e,t){dy.prototype.point.call(this,t,e)};function jB(e){this._context=e}jB.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function f0e(e){return new dy(e)}function h0e(e){return new bB(e)}function NB(e){this._context=e}NB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Mk(e),a=Mk(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Mk(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function m0e(e){return new NB(e)}function k1(e,t){this._context=e,this._t=t}k1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function p0e(e){return new k1(e,.5)}function g0e(e){return new k1(e,0)}function x0e(e){return new k1(e,1)}function jf(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function $N(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function y0e(e,t){return e[t]}function v0e(e){const t=[];return t.key=e,t}function w0e(){var e=Or([]),t=$N,r=jf,n=y0e;function a(i){var o=Array.from(e.apply(this,arguments),v0e),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=UT(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Or(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Or(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?$N:typeof i=="function"?i:Or(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??jf,a):r},a}function b0e(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}jf(e,t)}}function j0e(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}jf(e,t)}}function N0e(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var p=e[t[g]],y=p[n][1]||0,b=p[n-1][1]||0;m+=y-b}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,jf(e,t)}}function sp(e){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp(e)}var S0e=["type","size","sizeType"];function BN(){return BN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BN.apply(this,arguments)}function Rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rk(Object(r),!0).forEach(function(n){_0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _0e(e,t,r){return t=T0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T0e(e){var t=E0e(e,"string");return sp(t)=="symbol"?t:t+""}function E0e(e,t){if(sp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A0e(e,t){if(e==null)return{};var r=C0e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function C0e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var SB={symbolCircle:WT,symbolCross:Xpe,symbolDiamond:Jpe,symbolSquare:Zpe,symbolStar:n0e,symbolTriangle:a0e,symbolWye:i0e},D0e=Math.PI/180,k0e=function(t){var r="symbol".concat(A1(t));return SB[r]||WT},O0e=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*D0e;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},P0e=function(t,r){SB["symbol".concat(A1(t))]=r},VT=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=A0e(t,S0e),u=Fk(Fk({},c),{},{type:n,size:i,sizeType:l}),d=function(){var y=k0e(n),b=o0e().type(y).size(O0e(i,l,n));return b()},f=u.className,h=u.cx,m=u.cy,g=fr(u,!0);return h===+h&&m===+m&&i===+i?pe.createElement("path",BN({},g,{className:sr("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};VT.registerSymbol=P0e;function Nf(e){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nf(e)}function UN(){return UN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UN.apply(this,arguments)}function Lk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function I0e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lk(Object(r),!0).forEach(function(n){ip(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R0e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TB(n.key),n)}}function F0e(e,t,r){return t&&R0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function L0e(e,t,r){return t=fy(t),$0e(e,_B()?Reflect.construct(t,r||[],fy(e).constructor):t.apply(e,r))}function $0e(e,t){if(t&&(Nf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B0e(e)}function B0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _B(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_B=function(){return!!e})()}function fy(e){return fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fy(e)}function U0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WN(e,t)}function WN(e,t){return WN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},WN(e,t)}function ip(e,t,r){return t=TB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TB(e){var t=W0e(e,"string");return Nf(t)=="symbol"?t:t+""}function W0e(e,t){if(Nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ws=32,HT=function(e){function t(){return M0e(this,t),L0e(this,t,arguments)}return U0e(t,e),F0e(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=ws/2,o=ws/6,l=ws/3,c=n.inactive?a:n.color;if(n.type==="plainline")return pe.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:ws,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return pe.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(ws,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return pe.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ws/8,"h").concat(ws,"v").concat(ws*3/4,"h").concat(-ws,"z"),className:"recharts-legend-icon"});if(pe.isValidElement(n.legendIcon)){var u=I0e({},n);return delete u.legendIcon,pe.cloneElement(n.legendIcon,u)}return pe.createElement(VT,{fill:c,cx:i,cy:i,size:ws,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:ws,height:ws},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,g){var p=m.formatter||c,y=sr(ip(ip({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var b=Yt(m.value)?null:m.value;Eo(!Yt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=m.inactive?u:m.color;return pe.createElement("li",UN({className:y,style:f,key:"legend-item-".concat(g)},iy(n.props,m,g)),pe.createElement(ON,{width:o,height:o,viewBox:d,style:h},n.renderIcon(m)),pe.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},p?p(b,m,g):b))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return pe.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(N.PureComponent);ip(HT,"displayName","Legend");ip(HT,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var V0e=m1;function H0e(){this.__data__=new V0e,this.size=0}var z0e=H0e;function q0e(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var G0e=q0e;function K0e(e){return this.__data__.get(e)}var Y0e=K0e;function X0e(e){return this.__data__.has(e)}var Q0e=X0e,J0e=m1,Z0e=kT,ege=OT,tge=200;function rge(e,t){var r=this.__data__;if(r instanceof J0e){var n=r.__data__;if(!Z0e||n.length<tge-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ege(n)}return r.set(e,t),this.size=r.size,this}var nge=rge,age=m1,sge=z0e,ige=G0e,oge=Y0e,lge=Q0e,cge=nge;function hh(e){var t=this.__data__=new age(e);this.size=t.size}hh.prototype.clear=sge;hh.prototype.delete=ige;hh.prototype.get=oge;hh.prototype.has=lge;hh.prototype.set=cge;var EB=hh,uge="__lodash_hash_undefined__";function dge(e){return this.__data__.set(e,uge),this}var fge=dge;function hge(e){return this.__data__.has(e)}var mge=hge,pge=OT,gge=fge,xge=mge;function hy(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new pge;++t<r;)this.add(e[t])}hy.prototype.add=hy.prototype.push=gge;hy.prototype.has=xge;var AB=hy;function yge(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var CB=yge;function vge(e,t){return e.has(t)}var DB=vge,wge=AB,bge=CB,jge=DB,Nge=1,Sge=2;function _ge(e,t,r,n,a,i){var o=r&Nge,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,m=r&Sge?new wge:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var g=e[f],p=t[f];if(n)var y=o?n(p,g,f,t,e,i):n(g,p,f,e,t,i);if(y!==void 0){if(y)continue;h=!1;break}if(m){if(!bge(t,function(b,x){if(!jge(m,x)&&(g===b||a(g,b,r,n,i)))return m.push(x)})){h=!1;break}}else if(!(g===p||a(g,p,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var kB=_ge,Tge=eo,Ege=Tge.Uint8Array,Age=Ege;function Cge(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var Dge=Cge;function kge(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var zT=kge,$k=N0,Bk=Age,Oge=DT,Pge=kB,Ige=Dge,Mge=zT,Rge=1,Fge=2,Lge="[object Boolean]",$ge="[object Date]",Bge="[object Error]",Uge="[object Map]",Wge="[object Number]",Vge="[object RegExp]",Hge="[object Set]",zge="[object String]",qge="[object Symbol]",Gge="[object ArrayBuffer]",Kge="[object DataView]",Uk=$k?$k.prototype:void 0,xb=Uk?Uk.valueOf:void 0;function Yge(e,t,r,n,a,i,o){switch(r){case Kge:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Gge:return!(e.byteLength!=t.byteLength||!i(new Bk(e),new Bk(t)));case Lge:case $ge:case Wge:return Oge(+e,+t);case Bge:return e.name==t.name&&e.message==t.message;case Vge:case zge:return e==t+"";case Uge:var l=Ige;case Hge:var c=n&Rge;if(l||(l=Mge),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=Fge,o.set(e,t);var d=Pge(l(e),l(t),n,a,i,o);return o.delete(e),d;case qge:if(xb)return xb.call(e)==xb.call(t)}return!1}var Xge=Yge;function Qge(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var OB=Qge,Jge=OB,Zge=qa;function exe(e,t,r){var n=t(e);return Zge(e)?n:Jge(n,r(e))}var txe=exe;function rxe(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var nxe=rxe;function axe(){return[]}var sxe=axe,ixe=nxe,oxe=sxe,lxe=Object.prototype,cxe=lxe.propertyIsEnumerable,Wk=Object.getOwnPropertySymbols,uxe=Wk?function(e){return e==null?[]:(e=Object(e),ixe(Wk(e),function(t){return cxe.call(e,t)}))}:oxe,dxe=uxe;function fxe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var hxe=fxe,mxe=Ho,pxe=zo,gxe="[object Arguments]";function xxe(e){return pxe(e)&&mxe(e)==gxe}var yxe=xxe,Vk=yxe,vxe=zo,PB=Object.prototype,wxe=PB.hasOwnProperty,bxe=PB.propertyIsEnumerable,jxe=Vk(function(){return arguments}())?Vk:function(e){return vxe(e)&&wxe.call(e,"callee")&&!bxe.call(e,"callee")},qT=jxe,my={exports:{}};function Nxe(){return!1}var Sxe=Nxe;my.exports;(function(e,t){var r=eo,n=Sxe,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(my,my.exports);var IB=my.exports,_xe=9007199254740991,Txe=/^(?:0|[1-9]\d*)$/;function Exe(e,t){var r=typeof e;return t=t??_xe,!!t&&(r=="number"||r!="symbol"&&Txe.test(e))&&e>-1&&e%1==0&&e<t}var GT=Exe,Axe=9007199254740991;function Cxe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Axe}var KT=Cxe,Dxe=Ho,kxe=KT,Oxe=zo,Pxe="[object Arguments]",Ixe="[object Array]",Mxe="[object Boolean]",Rxe="[object Date]",Fxe="[object Error]",Lxe="[object Function]",$xe="[object Map]",Bxe="[object Number]",Uxe="[object Object]",Wxe="[object RegExp]",Vxe="[object Set]",Hxe="[object String]",zxe="[object WeakMap]",qxe="[object ArrayBuffer]",Gxe="[object DataView]",Kxe="[object Float32Array]",Yxe="[object Float64Array]",Xxe="[object Int8Array]",Qxe="[object Int16Array]",Jxe="[object Int32Array]",Zxe="[object Uint8Array]",eye="[object Uint8ClampedArray]",tye="[object Uint16Array]",rye="[object Uint32Array]",Fr={};Fr[Kxe]=Fr[Yxe]=Fr[Xxe]=Fr[Qxe]=Fr[Jxe]=Fr[Zxe]=Fr[eye]=Fr[tye]=Fr[rye]=!0;Fr[Pxe]=Fr[Ixe]=Fr[qxe]=Fr[Mxe]=Fr[Gxe]=Fr[Rxe]=Fr[Fxe]=Fr[Lxe]=Fr[$xe]=Fr[Bxe]=Fr[Uxe]=Fr[Wxe]=Fr[Vxe]=Fr[Hxe]=Fr[zxe]=!1;function nye(e){return Oxe(e)&&kxe(e.length)&&!!Fr[Dxe(e)]}var aye=nye;function sye(e){return function(t){return e(t)}}var MB=sye,py={exports:{}};py.exports;(function(e,t){var r=V8,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(py,py.exports);var iye=py.exports,oye=aye,lye=MB,Hk=iye,zk=Hk&&Hk.isTypedArray,cye=zk?lye(zk):oye,RB=cye,uye=hxe,dye=qT,fye=qa,hye=IB,mye=GT,pye=RB,gye=Object.prototype,xye=gye.hasOwnProperty;function yye(e,t){var r=fye(e),n=!r&&dye(e),a=!r&&!n&&hye(e),i=!r&&!n&&!a&&pye(e),o=r||n||a||i,l=o?uye(e.length,String):[],c=l.length;for(var u in e)(t||xye.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||mye(u,c)))&&l.push(u);return l}var vye=yye,wye=Object.prototype;function bye(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||wye;return e===r}var jye=bye;function Nye(e,t){return function(r){return e(t(r))}}var FB=Nye,Sye=FB,_ye=Sye(Object.keys,Object),Tye=_ye,Eye=jye,Aye=Tye,Cye=Object.prototype,Dye=Cye.hasOwnProperty;function kye(e){if(!Eye(e))return Aye(e);var t=[];for(var r in Object(e))Dye.call(e,r)&&r!="constructor"&&t.push(r);return t}var Oye=kye,Pye=CT,Iye=KT;function Mye(e){return e!=null&&Iye(e.length)&&!Pye(e)}var _0=Mye,Rye=vye,Fye=Oye,Lye=_0;function $ye(e){return Lye(e)?Rye(e):Fye(e)}var O1=$ye,Bye=txe,Uye=dxe,Wye=O1;function Vye(e){return Bye(e,Wye,Uye)}var Hye=Vye,qk=Hye,zye=1,qye=Object.prototype,Gye=qye.hasOwnProperty;function Kye(e,t,r,n,a,i){var o=r&zye,l=qk(e),c=l.length,u=qk(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:Gye.call(t,h)))return!1}var m=i.get(e),g=i.get(t);if(m&&g)return m==t&&g==e;var p=!0;i.set(e,t),i.set(t,e);for(var y=o;++f<c;){h=l[f];var b=e[h],x=t[h];if(n)var w=o?n(x,b,h,t,e,i):n(b,x,h,e,t,i);if(!(w===void 0?b===x||a(b,x,r,n,i):w)){p=!1;break}y||(y=h=="constructor")}if(p&&!y){var v=e.constructor,j=t.constructor;v!=j&&"constructor"in e&&"constructor"in t&&!(typeof v=="function"&&v instanceof v&&typeof j=="function"&&j instanceof j)&&(p=!1)}return i.delete(e),i.delete(t),p}var Yye=Kye,Xye=ku,Qye=eo,Jye=Xye(Qye,"DataView"),Zye=Jye,eve=ku,tve=eo,rve=eve(tve,"Promise"),nve=rve,ave=ku,sve=eo,ive=ave(sve,"Set"),LB=ive,ove=ku,lve=eo,cve=ove(lve,"WeakMap"),uve=cve,VN=Zye,HN=kT,zN=nve,qN=LB,GN=uve,$B=Ho,mh=z8,Gk="[object Map]",dve="[object Object]",Kk="[object Promise]",Yk="[object Set]",Xk="[object WeakMap]",Qk="[object DataView]",fve=mh(VN),hve=mh(HN),mve=mh(zN),pve=mh(qN),gve=mh(GN),Nc=$B;(VN&&Nc(new VN(new ArrayBuffer(1)))!=Qk||HN&&Nc(new HN)!=Gk||zN&&Nc(zN.resolve())!=Kk||qN&&Nc(new qN)!=Yk||GN&&Nc(new GN)!=Xk)&&(Nc=function(e){var t=$B(e),r=t==dve?e.constructor:void 0,n=r?mh(r):"";if(n)switch(n){case fve:return Qk;case hve:return Gk;case mve:return Kk;case pve:return Yk;case gve:return Xk}return t});var xve=Nc,yb=EB,yve=kB,vve=Xge,wve=Yye,Jk=xve,Zk=qa,eO=IB,bve=RB,jve=1,tO="[object Arguments]",rO="[object Array]",gg="[object Object]",Nve=Object.prototype,nO=Nve.hasOwnProperty;function Sve(e,t,r,n,a,i){var o=Zk(e),l=Zk(t),c=o?rO:Jk(e),u=l?rO:Jk(t);c=c==tO?gg:c,u=u==tO?gg:u;var d=c==gg,f=u==gg,h=c==u;if(h&&eO(e)){if(!eO(t))return!1;o=!0,d=!1}if(h&&!d)return i||(i=new yb),o||bve(e)?yve(e,t,r,n,a,i):vve(e,t,c,r,n,a,i);if(!(r&jve)){var m=d&&nO.call(e,"__wrapped__"),g=f&&nO.call(t,"__wrapped__");if(m||g){var p=m?e.value():e,y=g?t.value():t;return i||(i=new yb),a(p,y,r,n,i)}}return h?(i||(i=new yb),wve(e,t,r,n,a,i)):!1}var _ve=Sve,Tve=_ve,aO=zo;function BB(e,t,r,n,a){return e===t?!0:e==null||t==null||!aO(e)&&!aO(t)?e!==e&&t!==t:Tve(e,t,r,n,BB,a)}var YT=BB,Eve=EB,Ave=YT,Cve=1,Dve=2;function kve(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new Eve;if(n)var h=n(u,d,c,e,t,f);if(!(h===void 0?Ave(d,u,Cve|Dve,n,f):h))return!1}}return!0}var Ove=kve,Pve=oc;function Ive(e){return e===e&&!Pve(e)}var UB=Ive,Mve=UB,Rve=O1;function Fve(e){for(var t=Rve(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,Mve(a)]}return t}var Lve=Fve;function $ve(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var WB=$ve,Bve=Ove,Uve=Lve,Wve=WB;function Vve(e){var t=Uve(e);return t.length==1&&t[0][2]?Wve(t[0][0],t[0][1]):function(r){return r===e||Bve(r,e,t)}}var Hve=Vve;function zve(e,t){return e!=null&&t in Object(e)}var qve=zve,Gve=X8,Kve=qT,Yve=qa,Xve=GT,Qve=KT,Jve=g1;function Zve(e,t,r){t=Gve(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=Jve(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&Qve(a)&&Xve(o,a)&&(Yve(e)||Kve(e)))}var e1e=Zve,t1e=qve,r1e=e1e;function n1e(e,t){return e!=null&&r1e(e,t,t1e)}var a1e=n1e,s1e=YT,i1e=Q8,o1e=a1e,l1e=AT,c1e=UB,u1e=WB,d1e=g1,f1e=1,h1e=2;function m1e(e,t){return l1e(e)&&c1e(t)?u1e(d1e(e),t):function(r){var n=i1e(r,e);return n===void 0&&n===t?o1e(r,e):s1e(t,n,f1e|h1e)}}var p1e=m1e;function g1e(e){return e}var ph=g1e;function x1e(e){return function(t){return t==null?void 0:t[e]}}var y1e=x1e,v1e=MT;function w1e(e){return function(t){return v1e(t,e)}}var b1e=w1e,j1e=y1e,N1e=b1e,S1e=AT,_1e=g1;function T1e(e){return S1e(e)?j1e(_1e(e)):N1e(e)}var E1e=T1e,A1e=Hve,C1e=p1e,D1e=ph,k1e=qa,O1e=E1e;function P1e(e){return typeof e=="function"?e:e==null?D1e:typeof e=="object"?k1e(e)?C1e(e[0],e[1]):A1e(e):O1e(e)}var lc=P1e;function I1e(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var VB=I1e;function M1e(e){return e!==e}var R1e=M1e;function F1e(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var L1e=F1e,$1e=VB,B1e=R1e,U1e=L1e;function W1e(e,t,r){return t===t?U1e(e,t,r):$1e(e,B1e,r)}var V1e=W1e,H1e=V1e;function z1e(e,t){var r=e==null?0:e.length;return!!r&&H1e(e,t,0)>-1}var q1e=z1e;function G1e(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var K1e=G1e;function Y1e(){}var X1e=Y1e,vb=LB,Q1e=X1e,J1e=zT,Z1e=1/0,ewe=vb&&1/J1e(new vb([,-0]))[1]==Z1e?function(e){return new vb(e)}:Q1e,twe=ewe,rwe=AB,nwe=q1e,awe=K1e,swe=DB,iwe=twe,owe=zT,lwe=200;function cwe(e,t,r){var n=-1,a=nwe,i=e.length,o=!0,l=[],c=l;if(r)o=!1,a=awe;else if(i>=lwe){var u=t?null:iwe(e);if(u)return owe(u);o=!1,a=swe,c=new rwe}else c=t?[]:l;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var uwe=cwe,dwe=lc,fwe=uwe;function hwe(e,t){return e&&e.length?fwe(e,dwe(t)):[]}var mwe=hwe;const sO=Cr(mwe);function HB(e,t,r){return t===!0?sO(e,r):Yt(t)?sO(e,t):e}function Sf(e){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sf(e)}var pwe=["ref"];function iO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function so(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iO(Object(r),!0).forEach(function(n){P1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qB(n.key),n)}}function xwe(e,t,r){return t&&oO(e.prototype,t),r&&oO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ywe(e,t,r){return t=gy(t),vwe(e,zB()?Reflect.construct(t,r||[],gy(e).constructor):t.apply(e,r))}function vwe(e,t){if(t&&(Sf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wwe(e)}function wwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zB=function(){return!!e})()}function gy(e){return gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gy(e)}function bwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KN(e,t)}function KN(e,t){return KN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},KN(e,t)}function P1(e,t,r){return t=qB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qB(e){var t=jwe(e,"string");return Sf(t)=="symbol"?t:t+""}function jwe(e,t){if(Sf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Nwe(e,t){if(e==null)return{};var r=Swe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Swe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _we(e){return e.value}function Twe(e,t){if(pe.isValidElement(e))return pe.cloneElement(e,t);if(typeof e=="function")return pe.createElement(e,t);t.ref;var r=Nwe(t,pwe);return pe.createElement(HT,r)}var lO=1,$d=function(e){function t(){var r;gwe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=ywe(this,t,[].concat(a)),P1(r,"lastBoundingBox",{width:-1,height:-1}),r}return bwe(t,e),xwe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>lO||Math.abs(a.height-this.lastBoundingBox.height)>lO)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?so({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((d||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return so(so({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=so(so({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return pe.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){n.wrapperNode=m}},Twe(i,so(so({},this.props),{},{payload:HB(d,u,_we)})))}}],[{key:"getWithHeight",value:function(n,a){var i=so(so({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&nt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(N.PureComponent);P1($d,"displayName","Legend");P1($d,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var cO=N0,Ewe=qT,Awe=qa,uO=cO?cO.isConcatSpreadable:void 0;function Cwe(e){return Awe(e)||Ewe(e)||!!(uO&&e&&e[uO])}var Dwe=Cwe,kwe=OB,Owe=Dwe;function GB(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=Owe),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?GB(l,t-1,r,n,a):kwe(a,l):n||(a[a.length]=l)}return a}var KB=GB;function Pwe(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var Iwe=Pwe,Mwe=Iwe,Rwe=Mwe(),Fwe=Rwe,Lwe=Fwe,$we=O1;function Bwe(e,t){return e&&Lwe(e,t,$we)}var YB=Bwe,Uwe=_0;function Wwe(e,t){return function(r,n){if(r==null)return r;if(!Uwe(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var Vwe=Wwe,Hwe=YB,zwe=Vwe,qwe=zwe(Hwe),XT=qwe,Gwe=XT,Kwe=_0;function Ywe(e,t){var r=-1,n=Kwe(e)?Array(e.length):[];return Gwe(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var XB=Ywe;function Xwe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var Qwe=Xwe,dO=lh;function Jwe(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=dO(e),o=t!==void 0,l=t===null,c=t===t,u=dO(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var Zwe=Jwe,ebe=Zwe;function tbe(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++n<o;){var c=ebe(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var rbe=tbe,wb=IT,nbe=MT,abe=lc,sbe=XB,ibe=Qwe,obe=MB,lbe=rbe,cbe=ph,ube=qa;function dbe(e,t,r){t.length?t=wb(t,function(i){return ube(i)?function(o){return nbe(o,i.length===1?i[0]:i)}:i}):t=[cbe];var n=-1;t=wb(t,obe(abe));var a=sbe(e,function(i,o,l){var c=wb(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return ibe(a,function(i,o){return lbe(i,o,r)})}var fbe=dbe;function hbe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var mbe=hbe,pbe=mbe,fO=Math.max;function gbe(e,t,r){return t=fO(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=fO(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),pbe(e,this,l)}}var xbe=gbe;function ybe(e){return function(){return e}}var vbe=ybe,wbe=ku,bbe=function(){try{var e=wbe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),QB=bbe,jbe=vbe,hO=QB,Nbe=ph,Sbe=hO?function(e,t){return hO(e,"toString",{configurable:!0,enumerable:!1,value:jbe(t),writable:!0})}:Nbe,_be=Sbe,Tbe=800,Ebe=16,Abe=Date.now;function Cbe(e){var t=0,r=0;return function(){var n=Abe(),a=Ebe-(n-r);if(r=n,a>0){if(++t>=Tbe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Dbe=Cbe,kbe=_be,Obe=Dbe,Pbe=Obe(kbe),Ibe=Pbe,Mbe=ph,Rbe=xbe,Fbe=Ibe;function Lbe(e,t){return Fbe(Rbe(e,t,Mbe),e+"")}var $be=Lbe,Bbe=DT,Ube=_0,Wbe=GT,Vbe=oc;function Hbe(e,t,r){if(!Vbe(r))return!1;var n=typeof t;return(n=="number"?Ube(r)&&Wbe(t,r.length):n=="string"&&t in r)?Bbe(r[t],e):!1}var I1=Hbe,zbe=KB,qbe=fbe,Gbe=$be,mO=I1,Kbe=Gbe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&mO(e,t[0],t[1])?t=[]:r>2&&mO(t[0],t[1],t[2])&&(t=[t[0]]),qbe(e,zbe(t,1),[])}),Ybe=Kbe;const QT=Cr(Ybe);function op(e){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},op(e)}function YN(){return YN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YN.apply(this,arguments)}function Xbe(e,t){return eje(e)||Zbe(e,t)||Jbe(e,t)||Qbe()}function Qbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jbe(e,t){if(e){if(typeof e=="string")return pO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pO(e,t)}}function pO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zbe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function eje(e){if(Array.isArray(e))return e}function gO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gO(Object(r),!0).forEach(function(n){tje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tje(e,t,r){return t=rje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rje(e){var t=nje(e,"string");return op(t)=="symbol"?t:t+""}function nje(e,t){if(op(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aje(e){return Array.isArray(e)&&Dn(e[0])&&Dn(e[1])?e.join(" ~ "):e}var sje=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,p=t.label,y=t.labelFormatter,b=t.accessibilityLayer,x=b===void 0?!1:b,w=function(){if(d&&d.length){var O={padding:0,margin:0},V=(h?QT(d,h):d).map(function(G,Y){if(G.type==="none")return null;var W=bb({display:"block",paddingTop:4,paddingBottom:4,color:G.color||"#000"},l),P=G.formatter||f||aje,E=G.value,R=G.name,I=E,ee=R;if(P&&I!=null&&ee!=null){var L=P(E,R,G,Y,d);if(Array.isArray(L)){var q=Xbe(L,2);I=q[0],ee=q[1]}else I=L}return pe.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:W},Dn(ee)?pe.createElement("span",{className:"recharts-tooltip-item-name"},ee):null,Dn(ee)?pe.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,pe.createElement("span",{className:"recharts-tooltip-item-value"},I),pe.createElement("span",{className:"recharts-tooltip-item-unit"},G.unit||""))});return pe.createElement("ul",{className:"recharts-tooltip-item-list",style:O},V)}return null},v=bb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=bb({margin:0},u),S=!hr(p),_=S?p:"",A=sr("recharts-default-tooltip",m),C=sr("recharts-tooltip-label",g);S&&y&&d!==void 0&&d!==null&&(_=y(p,d));var D=x?{role:"status","aria-live":"assertive"}:{};return pe.createElement("div",YN({className:A,style:v},D),pe.createElement("p",{className:C,style:j},pe.isValidElement(_)?_:"".concat(_)),w())};function lp(e){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lp(e)}function xg(e,t,r){return t=ije(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ije(e){var t=oje(e,"string");return lp(t)=="symbol"?t:t+""}function oje(e,t){if(lp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fh="recharts-tooltip-wrapper",lje={visibility:"hidden"};function cje(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return sr(Fh,xg(xg(xg(xg({},"".concat(Fh,"-right"),nt(r)&&t&&nt(t.x)&&r>=t.x),"".concat(Fh,"-left"),nt(r)&&t&&nt(t.x)&&r<t.x),"".concat(Fh,"-bottom"),nt(n)&&t&&nt(t.y)&&n>=t.y),"".concat(Fh,"-top"),nt(n)&&t&&nt(t.y)&&n<t.y))}function xO(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&nt(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return o[n]?d:f;if(o[n]){var h=d,m=c[n];return h<m?Math.max(f,c[n]):Math.max(d,c[n])}var g=f+l,p=c[n]+u;return g>p?Math.max(d,c[n]):Math.max(f,c[n])}function uje(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function dje(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=xO({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=xO({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=uje({translateX:d,translateY:f,useTranslate3d:l})):u=lje,{cssProperties:u,cssClasses:cje({translateX:d,translateY:f,coordinate:r})}}function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(e)}function yO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(r),!0).forEach(function(n){QN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hje(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZB(n.key),n)}}function mje(e,t,r){return t&&hje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pje(e,t,r){return t=xy(t),gje(e,JB()?Reflect.construct(t,r||[],xy(e).constructor):t.apply(e,r))}function gje(e,t){if(t&&(_f(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xje(e)}function xje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JB=function(){return!!e})()}function xy(e){return xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xy(e)}function yje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XN(e,t)}function XN(e,t){return XN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},XN(e,t)}function QN(e,t,r){return t=ZB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZB(e){var t=vje(e,"string");return _f(t)=="symbol"?t:t+""}function vje(e,t){if(_f(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wO=1,wje=function(e){function t(){var r;fje(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=pje(this,t,[].concat(a)),QN(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),QN(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return yje(t,e),mje(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>wO||Math.abs(n.height-this.state.lastBoundingBox.height)>wO)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,m=a.offset,g=a.position,p=a.reverseDirection,y=a.useTranslate3d,b=a.viewBox,x=a.wrapperStyle,w=dje({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:g,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:b}),v=w.cssClasses,j=w.cssProperties,S=vO(vO({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},x);return pe.createElement("div",{tabIndex:-1,className:v,style:S,ref:function(A){n.wrapperNode=A}},u)}}])}(N.PureComponent),bje=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},T0={isSsr:bje()};function Tf(e){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tf(e)}function bO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bO(Object(r),!0).forEach(function(n){JT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nje(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t9(n.key),n)}}function Sje(e,t,r){return t&&Nje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _je(e,t,r){return t=yy(t),Tje(e,e9()?Reflect.construct(t,r||[],yy(e).constructor):t.apply(e,r))}function Tje(e,t){if(t&&(Tf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eje(e)}function Eje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e9=function(){return!!e})()}function yy(e){return yy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yy(e)}function Aje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JN(e,t)}function JN(e,t){return JN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},JN(e,t)}function JT(e,t,r){return t=t9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t9(e){var t=Cje(e,"string");return Tf(t)=="symbol"?t:t+""}function Cje(e,t){if(Tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Dje(e){return e.dataKey}function kje(e,t){return pe.isValidElement(e)?pe.cloneElement(e,t):typeof e=="function"?pe.createElement(e,t):pe.createElement(sje,t)}var lo=function(e){function t(){return jje(this,t),_je(this,t,arguments)}return Aje(t,e),Sje(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,m=a.offset,g=a.payload,p=a.payloadUniqBy,y=a.position,b=a.reverseDirection,x=a.useTranslate3d,w=a.viewBox,v=a.wrapperStyle,j=g??[];f&&j.length&&(j=HB(g.filter(function(_){return _.value!=null&&(_.hide!==!0||n.props.includeHidden)}),p,Dje));var S=j.length>0;return pe.createElement(wje,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:d,hasPayload:S,offset:m,position:y,reverseDirection:b,useTranslate3d:x,viewBox:w,wrapperStyle:v},kje(u,jO(jO({},this.props),{},{payload:j})))}}])}(N.PureComponent);JT(lo,"displayName","Tooltip");JT(lo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!T0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Oje=eo,Pje=function(){return Oje.Date.now()},Ije=Pje,Mje=/\s/;function Rje(e){for(var t=e.length;t--&&Mje.test(e.charAt(t)););return t}var Fje=Rje,Lje=Fje,$je=/^\s+/;function Bje(e){return e&&e.slice(0,Lje(e)+1).replace($je,"")}var Uje=Bje,Wje=Uje,NO=oc,Vje=lh,SO=NaN,Hje=/^[-+]0x[0-9a-f]+$/i,zje=/^0b[01]+$/i,qje=/^0o[0-7]+$/i,Gje=parseInt;function Kje(e){if(typeof e=="number")return e;if(Vje(e))return SO;if(NO(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=NO(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Wje(e);var r=zje.test(e);return r||qje.test(e)?Gje(e.slice(2),r?2:8):Hje.test(e)?SO:+e}var r9=Kje,Yje=oc,jb=Ije,_O=r9,Xje="Expected a function",Qje=Math.max,Jje=Math.min;function Zje(e,t,r){var n,a,i,o,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(Xje);t=_O(t)||0,Yje(r)&&(d=!!r.leading,f="maxWait"in r,i=f?Qje(_O(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function m(S){var _=n,A=a;return n=a=void 0,u=S,o=e.apply(A,_),o}function g(S){return u=S,l=setTimeout(b,t),d?m(S):o}function p(S){var _=S-c,A=S-u,C=t-_;return f?Jje(C,i-A):C}function y(S){var _=S-c,A=S-u;return c===void 0||_>=t||_<0||f&&A>=i}function b(){var S=jb();if(y(S))return x(S);l=setTimeout(b,p(S))}function x(S){return l=void 0,h&&n?m(S):(n=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function v(){return l===void 0?o:x(jb())}function j(){var S=jb(),_=y(S);if(n=arguments,a=this,c=S,_){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(b,t),m(c)}return l===void 0&&(l=setTimeout(b,t)),o}return j.cancel=w,j.flush=v,j}var eNe=Zje,tNe=eNe,rNe=oc,nNe="Expected a function";function aNe(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(nNe);return rNe(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),tNe(e,t,{leading:n,maxWait:t,trailing:a})}var sNe=aNe;const n9=Cr(sNe);function cp(e){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(e)}function TO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TO(Object(r),!0).forEach(function(n){iNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iNe(e,t,r){return t=oNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oNe(e){var t=lNe(e,"string");return cp(t)=="symbol"?t:t+""}function lNe(e,t){if(cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cNe(e,t){return hNe(e)||fNe(e,t)||dNe(e,t)||uNe()}function uNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dNe(e,t){if(e){if(typeof e=="string")return EO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EO(e,t)}}function EO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fNe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function hNe(e){if(Array.isArray(e))return e}var mNe=N.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,m=e.children,g=e.debounce,p=g===void 0?0:g,y=e.id,b=e.className,x=e.onResize,w=e.style,v=w===void 0?{}:w,j=N.useRef(null),S=N.useRef();S.current=x,N.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var _=N.useState({containerWidth:a.width,containerHeight:a.height}),A=cNe(_,2),C=A[0],D=A[1],k=N.useCallback(function(V,G){D(function(Y){var W=Math.round(V),P=Math.round(G);return Y.containerWidth===W&&Y.containerHeight===P?Y:{containerWidth:W,containerHeight:P}})},[]);N.useEffect(function(){var V=function(R){var I,ee=R[0].contentRect,L=ee.width,q=ee.height;k(L,q),(I=S.current)===null||I===void 0||I.call(S,L,q)};p>0&&(V=n9(V,p,{trailing:!0,leading:!1}));var G=new ResizeObserver(V),Y=j.current.getBoundingClientRect(),W=Y.width,P=Y.height;return k(W,P),G.observe(j.current),function(){G.disconnect()}},[k,p]);var O=N.useMemo(function(){var V=C.containerWidth,G=C.containerHeight;if(V<0||G<0)return null;Eo(kc(o)||kc(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Eo(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Y=kc(o)?V:o,W=kc(c)?G:c;r&&r>0&&(Y?W=Y/r:W&&(Y=W*r),h&&W>h&&(W=h)),Eo(Y>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Y,W,o,c,d,f,r);var P=!Array.isArray(m)&&To(m.type).endsWith("Chart");return pe.Children.map(m,function(E){return pe.isValidElement(E)?N.cloneElement(E,yg({width:Y,height:W},P?{style:yg({height:"100%",width:"100%",maxHeight:W,maxWidth:Y},E.props.style)}:{})):E})},[r,m,c,h,f,d,C,o]);return pe.createElement("div",{id:y?"".concat(y):void 0,className:sr("recharts-responsive-container",b),style:yg(yg({},v),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:j},O)}),ZT=function(t){return null};ZT.displayName="Cell";function up(e){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},up(e)}function AO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ZN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(r),!0).forEach(function(n){pNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pNe(e,t,r){return t=gNe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gNe(e){var t=xNe(e,"string");return up(t)=="symbol"?t:t+""}function xNe(e,t){if(up(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(up(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nd={widthCache:{},cacheCount:0},yNe=2e3,vNe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},CO="recharts_measurement_span";function wNe(e){var t=ZN({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var bm=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||T0.isSsr)return{width:0,height:0};var n=wNe(r),a=JSON.stringify({text:t,copyStyle:n});if(nd.widthCache[a])return nd.widthCache[a];try{var i=document.getElementById(CO);i||(i=document.createElement("span"),i.setAttribute("id",CO),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=ZN(ZN({},vNe),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return nd.widthCache[a]=c,++nd.cacheCount>yNe&&(nd.cacheCount=0,nd.widthCache={}),c}catch{return{width:0,height:0}}},bNe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function dp(e){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}function vy(e,t){return _Ne(e)||SNe(e,t)||NNe(e,t)||jNe()}function jNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NNe(e,t){if(e){if(typeof e=="string")return DO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DO(e,t)}}function DO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function SNe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function _Ne(e){if(Array.isArray(e))return e}function TNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ANe(n.key),n)}}function ENe(e,t,r){return t&&kO(e.prototype,t),r&&kO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ANe(e){var t=CNe(e,"string");return dp(t)=="symbol"?t:t+""}function CNe(e,t){if(dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var OO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,PO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DNe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,kNe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,a9={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ONe=Object.keys(a9),bd="NaN";function PNe(e,t){return e*a9[t]}var vg=function(){function e(t,r){TNe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!DNe.test(r)&&(this.num=NaN,this.unit=""),ONe.includes(r)&&(this.num=PNe(t,r),this.unit="px")}return ENe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=kNe.exec(r))!==null&&n!==void 0?n:[],i=vy(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function s9(e){if(e.includes(bd))return bd;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=OO.exec(t))!==null&&r!==void 0?r:[],a=vy(n,4),i=a[1],o=a[2],l=a[3],c=vg.parse(i??""),u=vg.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return bd;t=t.replace(OO,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=PO.exec(t))!==null&&f!==void 0?f:[],m=vy(h,4),g=m[1],p=m[2],y=m[3],b=vg.parse(g??""),x=vg.parse(y??""),w=p==="+"?b.add(x):b.subtract(x);if(w.isNaN())return bd;t=t.replace(PO,w.toString())}return t}var IO=/\(([^()]*)\)/;function INe(e){for(var t=e;t.includes("(");){var r=IO.exec(t),n=vy(r,2),a=n[1];t=t.replace(IO,s9(a))}return t}function MNe(e){var t=e.replace(/\s+/g,"");return t=INe(t),t=s9(t),t}function RNe(e){try{return MNe(e)}catch{return bd}}function Nb(e){var t=RNe(e.slice(5,-1));return t===bd?"":t}var FNe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],LNe=["dx","dy","angle","className","breakAll"];function eS(){return eS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eS.apply(this,arguments)}function MO(e,t){if(e==null)return{};var r=$Ne(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $Ne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function RO(e,t){return VNe(e)||WNe(e,t)||UNe(e,t)||BNe()}function BNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UNe(e,t){if(e){if(typeof e=="string")return FO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FO(e,t)}}function FO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function WNe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function VNe(e){if(Array.isArray(e))return e}var i9=/[ \f\n\r\t\v\u2028\u2029]+/,o9=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];hr(r)||(n?i=r.toString().split(""):i=r.toString().split(i9));var o=i.map(function(c){return{word:c,width:bm(c,a).width}}),l=n?0:bm(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},HNe=function(t,r,n,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=nt(o),f=l,h=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce(function(W,P){var E=P.word,R=P.width,I=W[W.length-1];if(I&&(a==null||i||I.width+R+n<Number(a)))I.words.push(E),I.width+=R+n;else{var ee={words:[E],width:R};W.push(ee)}return W},[])},m=h(r),g=function(Y){return Y.reduce(function(W,P){return W.width>P.width?W:P})};if(!d)return m;for(var p="…",y=function(Y){var W=f.slice(0,Y),P=o9({breakAll:u,style:c,children:W+p}).wordsWithComputedWidth,E=h(P),R=E.length>o||g(E).width>Number(a);return[R,E]},b=0,x=f.length-1,w=0,v;b<=x&&w<=f.length-1;){var j=Math.floor((b+x)/2),S=j-1,_=y(S),A=RO(_,2),C=A[0],D=A[1],k=y(j),O=RO(k,1),V=O[0];if(!C&&!V&&(b=j+1),C&&V&&(x=j-1),!C&&V){v=D;break}w++}return v||m},LO=function(t){var r=hr(t)?[]:t.toString().split(i9);return[{words:r}]},zNe=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!T0.isSsr){var c,u,d=o9({breakAll:o,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return LO(a);return HNe({breakAll:o,children:a,maxLines:l,style:i},c,u,r,n)}return LO(a)},$O="#808080",wy=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,m=h===void 0?"start":h,g=t.verticalAnchor,p=g===void 0?"end":g,y=t.fill,b=y===void 0?$O:y,x=MO(t,FNe),w=N.useMemo(function(){return zNe({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:f,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,f,x.style,x.width]),v=x.dx,j=x.dy,S=x.angle,_=x.className,A=x.breakAll,C=MO(x,LNe);if(!Dn(n)||!Dn(i))return null;var D=n+(nt(v)?v:0),k=i+(nt(j)?j:0),O;switch(p){case"start":O=Nb("calc(".concat(u,")"));break;case"middle":O=Nb("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:O=Nb("calc(".concat(w.length-1," * -").concat(l,")"));break}var V=[];if(f){var G=w[0].width,Y=x.width;V.push("scale(".concat((nt(Y)?Y/G:1)/G,")"))}return S&&V.push("rotate(".concat(S,", ").concat(D,", ").concat(k,")")),V.length&&(C.transform=V.join(" ")),pe.createElement("text",eS({},fr(C,!0),{x:D,y:k,className:sr("recharts-text",_),textAnchor:m,fill:b.includes("url")?$O:b}),w.map(function(W,P){var E=W.words.join(A?"":" ");return pe.createElement("tspan",{x:D,dy:P===0?O:l,key:"".concat(E,"-").concat(P)},E)}))};function Ll(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qNe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function eE(e){let t,r,n;e.length!==2?(t=Ll,r=(l,c)=>Ll(e(l),c),n=(l,c)=>e(l)-c):(t=e===Ll||e===qNe?e:GNe,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function GNe(){return 0}function l9(e){return e===null?NaN:+e}function*KNe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const YNe=eE(Ll),E0=YNe.right;eE(l9).center;class BO extends Map{constructor(t,r=JNe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(UO(this,t))}has(t){return super.has(UO(this,t))}set(t,r){return super.set(XNe(this,t),r)}delete(t){return super.delete(QNe(this,t))}}function UO({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function XNe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function QNe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function JNe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ZNe(e=Ll){if(e===Ll)return c9;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function c9(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const eSe=Math.sqrt(50),tSe=Math.sqrt(10),rSe=Math.sqrt(2);function by(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=eSe?10:i>=tSe?5:i>=rSe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?by(e,t,r*2):[l,c,u]}function tS(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?by(t,e,r):by(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function rS(e,t,r){return t=+t,e=+e,r=+r,by(e,t,r)[2]}function nS(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?rS(t,e,r):rS(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function WO(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function VO(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function u9(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?c9:ZNe(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));u9(e,t,m,g,a)}const i=e[t];let o=r,l=n;for(Lh(e,r,t),a(e[n],i)>0&&Lh(e,r,n);o<l;){for(Lh(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?Lh(e,r,l):(++l,Lh(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Lh(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function nSe(e,t,r){if(e=Float64Array.from(KNe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return VO(e);if(t>=1)return WO(e);var n,a=(n-1)*t,i=Math.floor(a),o=WO(u9(e,i).subarray(0,i+1)),l=VO(e.subarray(i+1));return o+(l-o)*(a-i)}}function aSe(e,t,r=l9){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function sSe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Bs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function qo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const aS=Symbol("implicit");function tE(){var e=new BO,t=[],r=[],n=aS;function a(i){let o=e.get(i);if(o===void 0){if(n!==aS)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new BO;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return tE(t,r).unknown(n)},Bs.apply(a,arguments),a}function fp(){var e=tE().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,g=m?a:n,p=m?n:a;i=(p-g)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),g+=(p-g-i*(h-c))*d,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var y=sSe(h).map(function(b){return g+i*b});return r(m?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return fp(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Bs.apply(f(),arguments)}function d9(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return d9(t())},e}function jm(){return d9(fp.apply(null,arguments).paddingInner(1))}function rE(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function f9(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function A0(){}var hp=.7,jy=1/hp,Bd="\\s*([+-]?\\d+)\\s*",mp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iSe=/^#([0-9a-f]{3,8})$/,oSe=new RegExp(`^rgb\\(${Bd},${Bd},${Bd}\\)$`),lSe=new RegExp(`^rgb\\(${qi},${qi},${qi}\\)$`),cSe=new RegExp(`^rgba\\(${Bd},${Bd},${Bd},${mp}\\)$`),uSe=new RegExp(`^rgba\\(${qi},${qi},${qi},${mp}\\)$`),dSe=new RegExp(`^hsl\\(${mp},${qi},${qi}\\)$`),fSe=new RegExp(`^hsla\\(${mp},${qi},${qi},${mp}\\)$`),HO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rE(A0,pp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zO,formatHex:zO,formatHex8:hSe,formatHsl:mSe,formatRgb:qO,toString:qO});function zO(){return this.rgb().formatHex()}function hSe(){return this.rgb().formatHex8()}function mSe(){return h9(this).formatHsl()}function qO(){return this.rgb().formatRgb()}function pp(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=iSe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?GO(t):r===3?new La(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?wg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?wg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=oSe.exec(e))?new La(t[1],t[2],t[3],1):(t=lSe.exec(e))?new La(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cSe.exec(e))?wg(t[1],t[2],t[3],t[4]):(t=uSe.exec(e))?wg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dSe.exec(e))?XO(t[1],t[2]/100,t[3]/100,1):(t=fSe.exec(e))?XO(t[1],t[2]/100,t[3]/100,t[4]):HO.hasOwnProperty(e)?GO(HO[e]):e==="transparent"?new La(NaN,NaN,NaN,0):null}function GO(e){return new La(e>>16&255,e>>8&255,e&255,1)}function wg(e,t,r,n){return n<=0&&(e=t=r=NaN),new La(e,t,r,n)}function pSe(e){return e instanceof A0||(e=pp(e)),e?(e=e.rgb(),new La(e.r,e.g,e.b,e.opacity)):new La}function sS(e,t,r,n){return arguments.length===1?pSe(e):new La(e,t,r,n??1)}function La(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}rE(La,sS,f9(A0,{brighter(e){return e=e==null?jy:Math.pow(jy,e),new La(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?hp:Math.pow(hp,e),new La(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new La(Gc(this.r),Gc(this.g),Gc(this.b),Ny(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KO,formatHex:KO,formatHex8:gSe,formatRgb:YO,toString:YO}));function KO(){return`#${Oc(this.r)}${Oc(this.g)}${Oc(this.b)}`}function gSe(){return`#${Oc(this.r)}${Oc(this.g)}${Oc(this.b)}${Oc((isNaN(this.opacity)?1:this.opacity)*255)}`}function YO(){const e=Ny(this.opacity);return`${e===1?"rgb(":"rgba("}${Gc(this.r)}, ${Gc(this.g)}, ${Gc(this.b)}${e===1?")":`, ${e})`}`}function Ny(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Oc(e){return e=Gc(e),(e<16?"0":"")+e.toString(16)}function XO(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ni(e,t,r,n)}function h9(e){if(e instanceof ni)return new ni(e.h,e.s,e.l,e.opacity);if(e instanceof A0||(e=pp(e)),!e)return new ni;if(e instanceof ni)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new ni(o,l,c,e.opacity)}function xSe(e,t,r,n){return arguments.length===1?h9(e):new ni(e,t,r,n??1)}function ni(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}rE(ni,xSe,f9(A0,{brighter(e){return e=e==null?jy:Math.pow(jy,e),new ni(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?hp:Math.pow(hp,e),new ni(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new La(Sb(e>=240?e-240:e+120,a,n),Sb(e,a,n),Sb(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new ni(QO(this.h),bg(this.s),bg(this.l),Ny(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ny(this.opacity);return`${e===1?"hsl(":"hsla("}${QO(this.h)}, ${bg(this.s)*100}%, ${bg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function QO(e){return e=(e||0)%360,e<0?e+360:e}function bg(e){return Math.max(0,Math.min(1,e||0))}function Sb(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const nE=e=>()=>e;function ySe(e,t){return function(r){return e+r*t}}function vSe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function wSe(e){return(e=+e)==1?m9:function(t,r){return r-t?vSe(t,r,e):nE(isNaN(t)?r:t)}}function m9(e,t){var r=t-e;return r?ySe(e,r):nE(isNaN(e)?t:e)}const JO=function e(t){var r=wSe(t);function n(a,i){var o=r((a=sS(a)).r,(i=sS(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=m9(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function bSe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function jSe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function NSe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=gh(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function SSe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Sy(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function _Se(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=gh(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var iS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_b=new RegExp(iS.source,"g");function TSe(e){return function(){return e}}function ESe(e){return function(t){return e(t)+""}}function ASe(e,t){var r=iS.lastIndex=_b.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=iS.exec(e))&&(a=_b.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Sy(n,a)})),r=_b.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?ESe(c[0].x):TSe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function gh(e,t){var r=typeof t,n;return t==null||r==="boolean"?nE(t):(r==="number"?Sy:r==="string"?(n=pp(t))?(t=n,JO):ASe:t instanceof pp?JO:t instanceof Date?SSe:jSe(t)?bSe:Array.isArray(t)?NSe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_Se:Sy)(e,t)}function aE(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function CSe(e,t){t===void 0&&(t=e,e=gh);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function DSe(e){return function(){return e}}function _y(e){return+e}var ZO=[0,1];function Sa(e){return e}function oS(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:DSe(isNaN(t)?NaN:.5)}function kSe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function OSe(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=oS(a,n),i=r(o,i)):(n=oS(n,a),i=r(i,o)),function(l){return i(n(l))}}function PSe(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=oS(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=E0(e,l,1,n)-1;return i[c](a[c](l))}}function C0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function M1(){var e=ZO,t=ZO,r=gh,n,a,i,o=Sa,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==Sa&&(o=kSe(e[0],e[h-1])),l=h>2?PSe:OSe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(n),Sy)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,_y),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=aE,d()},f.clamp=function(h){return arguments.length?(o=h?!0:Sa,d()):o!==Sa},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function sE(){return M1()(Sa,Sa)}function ISe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ty(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ef(e){return e=Ty(Math.abs(e)),e?e[1]:NaN}function MSe(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function RSe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var FSe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gp(e){if(!(t=FSe.exec(e)))throw new Error("invalid format: "+e);var t;return new iE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}gp.prototype=iE.prototype;function iE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}iE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function LSe(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var p9;function $Se(e,t){var r=Ty(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(p9=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Ty(e,Math.max(0,t+i-1))[0]}function eP(e,t){var r=Ty(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const tP={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ISe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>eP(e*100,t),r:eP,s:$Se,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function rP(e){return e}var nP=Array.prototype.map,aP=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function BSe(e){var t=e.grouping===void 0||e.thousands===void 0?rP:MSe(nP.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?rP:RSe(nP.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=gp(f);var h=f.fill,m=f.align,g=f.sign,p=f.symbol,y=f.zero,b=f.width,x=f.comma,w=f.precision,v=f.trim,j=f.type;j==="n"?(x=!0,j="g"):tP[j]||(w===void 0&&(w=12),v=!0,j="g"),(y||h==="0"&&m==="=")&&(y=!0,h="0",m="=");var S=p==="$"?r:p==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",_=p==="$"?n:/[%p]/.test(j)?o:"",A=tP[j],C=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function D(k){var O=S,V=_,G,Y,W;if(j==="c")V=A(k)+V,k="";else{k=+k;var P=k<0||1/k<0;if(k=isNaN(k)?c:A(Math.abs(k),w),v&&(k=LSe(k)),P&&+k==0&&g!=="+"&&(P=!1),O=(P?g==="("?g:l:g==="-"||g==="("?"":g)+O,V=(j==="s"?aP[8+p9/3]:"")+V+(P&&g==="("?")":""),C){for(G=-1,Y=k.length;++G<Y;)if(W=k.charCodeAt(G),48>W||W>57){V=(W===46?a+k.slice(G+1):k.slice(G))+V,k=k.slice(0,G);break}}}x&&!y&&(k=t(k,1/0));var E=O.length+k.length+V.length,R=E<b?new Array(b-E+1).join(h):"";switch(x&&y&&(k=t(R+k,R.length?b-V.length:1/0),R=""),m){case"<":k=O+k+V+R;break;case"=":k=O+R+k+V;break;case"^":k=R.slice(0,E=R.length>>1)+O+k+V+R.slice(E);break;default:k=R+O+k+V;break}return i(k)}return D.toString=function(){return f+""},D}function d(f,h){var m=u((f=gp(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Ef(h)/3)))*3,p=Math.pow(10,-g),y=aP[8+g/3];return function(b){return m(p*b)+y}}return{format:u,formatPrefix:d}}var jg,oE,g9;USe({thousands:",",grouping:[3],currency:["$",""]});function USe(e){return jg=BSe(e),oE=jg.format,g9=jg.formatPrefix,jg}function WSe(e){return Math.max(0,-Ef(Math.abs(e)))}function VSe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ef(t)/3)))*3-Ef(Math.abs(e)))}function HSe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ef(t)-Ef(e))+1}function x9(e,t,r,n){var a=nS(e,t,r),i;switch(n=gp(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=VSe(a,o))&&(n.precision=i),g9(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=HSe(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=WSe(a))&&(n.precision=i-(n.type==="%")*2);break}}return oE(n)}function cc(e){var t=e.domain;return e.ticks=function(r){var n=t();return tS(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return x9(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=rS(o,l,r),u===c)return n[a]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Ey(){var e=sE();return e.copy=function(){return C0(e,Ey())},Bs.apply(e,arguments),cc(e)}function y9(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,_y),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return y9(e).unknown(t)},e=arguments.length?Array.from(e,_y):[0,1],cc(r)}function v9(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function sP(e){return Math.log(e)}function iP(e){return Math.exp(e)}function zSe(e){return-Math.log(-e)}function qSe(e){return-Math.exp(-e)}function GSe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function KSe(e){return e===10?GSe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function YSe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function oP(e){return(t,r)=>-e(-t,r)}function lE(e){const t=e(sP,iP),r=t.domain;let n=10,a,i;function o(){return a=YSe(n),i=KSe(n),r()[0]<0?(a=oP(a),i=oP(i),e(zSe,qSe)):e(sP,iP),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),g,p;const y=l==null?10:+l;let b=[];if(!(n%1)&&m-h<y){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<n;++g)if(p=h<0?g/i(-h):g*i(h),!(p<u)){if(p>d)break;b.push(p)}}else for(;h<=m;++h)for(g=n-1;g>=1;--g)if(p=h>0?g/i(-h):g*i(h),!(p<u)){if(p>d)break;b.push(p)}b.length*2<y&&(b=tS(u,d,y))}else b=tS(h,m,Math.min(m-h,y)).map(i);return f?b.reverse():b},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=gp(c)).precision==null&&(c.trim=!0),c=oE(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(v9(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function w9(){const e=lE(M1()).domain([1,10]);return e.copy=()=>C0(e,w9()).base(e.base()),Bs.apply(e,arguments),e}function lP(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function cP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function cE(e){var t=1,r=e(lP(t),cP(t));return r.constant=function(n){return arguments.length?e(lP(t=+n),cP(t)):t},cc(r)}function b9(){var e=cE(M1());return e.copy=function(){return C0(e,b9()).constant(e.constant())},Bs.apply(e,arguments)}function uP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function XSe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function QSe(e){return e<0?-e*e:e*e}function uE(e){var t=e(Sa,Sa),r=1;function n(){return r===1?e(Sa,Sa):r===.5?e(XSe,QSe):e(uP(r),uP(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},cc(t)}function dE(){var e=uE(M1());return e.copy=function(){return C0(e,dE()).exponent(e.exponent())},Bs.apply(e,arguments),e}function JSe(){return dE.apply(null,arguments).exponent(.5)}function dP(e){return Math.sign(e)*e*e}function ZSe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function j9(){var e=sE(),t=[0,1],r=!1,n;function a(i){var o=ZSe(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(dP(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,_y)).map(dP)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return j9(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Bs.apply(a,arguments),cc(a)}function N9(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=aSe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[E0(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Ll),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return N9().domain(e).range(t).unknown(n)},Bs.apply(i,arguments)}function S9(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[E0(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return S9().domain([e,t]).range(a).unknown(i)},Bs.apply(cc(o),arguments)}function _9(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[E0(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return _9().domain(e).range(t).unknown(r)},Bs.apply(a,arguments)}const Tb=new Date,Eb=new Date;function kn(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>kn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(Tb.setTime(+i),Eb.setTime(+o),e(Tb),e(Eb),Math.floor(r(Tb,Eb))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Ay=kn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ay.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?kn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Ay);Ay.range;const vo=1e3,Ds=vo*60,wo=Ds*60,$o=wo*24,fE=$o*7,fP=$o*30,Ab=$o*365,Pc=kn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*vo)},(e,t)=>(t-e)/vo,e=>e.getUTCSeconds());Pc.range;const hE=kn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vo)},(e,t)=>{e.setTime(+e+t*Ds)},(e,t)=>(t-e)/Ds,e=>e.getMinutes());hE.range;const mE=kn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ds)},(e,t)=>(t-e)/Ds,e=>e.getUTCMinutes());mE.range;const pE=kn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vo-e.getMinutes()*Ds)},(e,t)=>{e.setTime(+e+t*wo)},(e,t)=>(t-e)/wo,e=>e.getHours());pE.range;const gE=kn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*wo)},(e,t)=>(t-e)/wo,e=>e.getUTCHours());gE.range;const D0=kn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ds)/$o,e=>e.getDate()-1);D0.range;const R1=kn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/$o,e=>e.getUTCDate()-1);R1.range;const T9=kn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/$o,e=>Math.floor(e/$o));T9.range;function Ou(e){return kn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ds)/fE)}const F1=Ou(0),Cy=Ou(1),e2e=Ou(2),t2e=Ou(3),Af=Ou(4),r2e=Ou(5),n2e=Ou(6);F1.range;Cy.range;e2e.range;t2e.range;Af.range;r2e.range;n2e.range;function Pu(e){return kn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/fE)}const L1=Pu(0),Dy=Pu(1),a2e=Pu(2),s2e=Pu(3),Cf=Pu(4),i2e=Pu(5),o2e=Pu(6);L1.range;Dy.range;a2e.range;s2e.range;Cf.range;i2e.range;o2e.range;const xE=kn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());xE.range;const yE=kn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());yE.range;const Bo=kn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Bo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:kn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Bo.range;const Uo=kn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Uo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:kn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Uo.range;function E9(e,t,r,n,a,i){const o=[[Pc,1,vo],[Pc,5,5*vo],[Pc,15,15*vo],[Pc,30,30*vo],[i,1,Ds],[i,5,5*Ds],[i,15,15*Ds],[i,30,30*Ds],[a,1,wo],[a,3,3*wo],[a,6,6*wo],[a,12,12*wo],[n,1,$o],[n,2,2*$o],[r,1,fE],[t,1,fP],[t,3,3*fP],[e,1,Ab]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),g=m?m.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,m=eE(([,,y])=>y).right(o,h);if(m===o.length)return e.every(nS(u/Ab,d/Ab,f));if(m===0)return Ay.every(Math.max(nS(u,d,f),1));const[g,p]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(p)}return[l,c]}const[l2e,c2e]=E9(Uo,yE,L1,T9,gE,mE),[u2e,d2e]=E9(Bo,xE,F1,D0,pE,hE);function Cb(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Db(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $h(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function f2e(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Bh(a),d=Uh(a),f=Bh(i),h=Uh(i),m=Bh(o),g=Uh(o),p=Bh(l),y=Uh(l),b=Bh(c),x=Uh(c),w={a:P,A:E,b:R,B:I,c:null,d:yP,e:yP,f:M2e,g:z2e,G:G2e,H:O2e,I:P2e,j:I2e,L:A9,m:R2e,M:F2e,p:ee,q:L,Q:bP,s:jP,S:L2e,u:$2e,U:B2e,V:U2e,w:W2e,W:V2e,x:null,X:null,y:H2e,Y:q2e,Z:K2e,"%":wP},v={a:q,A:H,b:B,B:de,c:null,d:vP,e:vP,f:J2e,g:l_e,G:u_e,H:Y2e,I:X2e,j:Q2e,L:D9,m:Z2e,M:e_e,p:ce,q:ge,Q:bP,s:jP,S:t_e,u:r_e,U:n_e,V:a_e,w:s_e,W:i_e,x:null,X:null,y:o_e,Y:c_e,Z:d_e,"%":wP},j={a:D,A:k,b:O,B:V,c:G,d:gP,e:gP,f:A2e,g:pP,G:mP,H:xP,I:xP,j:S2e,L:E2e,m:N2e,M:_2e,p:C,q:j2e,Q:D2e,s:k2e,S:T2e,u:x2e,U:y2e,V:v2e,w:g2e,W:w2e,x:Y,X:W,y:pP,Y:mP,Z:b2e,"%":C2e};w.x=S(r,w),w.X=S(n,w),w.c=S(t,w),v.x=S(r,v),v.X=S(n,v),v.c=S(t,v);function S(he,K){return function(fe){var ae=[],Ne=-1,Se=0,Ae=he.length,Oe,M,oe;for(fe instanceof Date||(fe=new Date(+fe));++Ne<Ae;)he.charCodeAt(Ne)===37&&(ae.push(he.slice(Se,Ne)),(M=hP[Oe=he.charAt(++Ne)])!=null?Oe=he.charAt(++Ne):M=Oe==="e"?" ":"0",(oe=K[Oe])&&(Oe=oe(fe,M)),ae.push(Oe),Se=Ne+1);return ae.push(he.slice(Se,Ne)),ae.join("")}}function _(he,K){return function(fe){var ae=$h(1900,void 0,1),Ne=A(ae,he,fe+="",0),Se,Ae;if(Ne!=fe.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(K&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(Se=Db($h(ae.y,0,1)),Ae=Se.getUTCDay(),Se=Ae>4||Ae===0?Dy.ceil(Se):Dy(Se),Se=R1.offset(Se,(ae.V-1)*7),ae.y=Se.getUTCFullYear(),ae.m=Se.getUTCMonth(),ae.d=Se.getUTCDate()+(ae.w+6)%7):(Se=Cb($h(ae.y,0,1)),Ae=Se.getDay(),Se=Ae>4||Ae===0?Cy.ceil(Se):Cy(Se),Se=D0.offset(Se,(ae.V-1)*7),ae.y=Se.getFullYear(),ae.m=Se.getMonth(),ae.d=Se.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),Ae="Z"in ae?Db($h(ae.y,0,1)).getUTCDay():Cb($h(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(Ae+5)%7:ae.w+ae.U*7-(Ae+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,Db(ae)):Cb(ae)}}function A(he,K,fe,ae){for(var Ne=0,Se=K.length,Ae=fe.length,Oe,M;Ne<Se;){if(ae>=Ae)return-1;if(Oe=K.charCodeAt(Ne++),Oe===37){if(Oe=K.charAt(Ne++),M=j[Oe in hP?K.charAt(Ne++):Oe],!M||(ae=M(he,fe,ae))<0)return-1}else if(Oe!=fe.charCodeAt(ae++))return-1}return ae}function C(he,K,fe){var ae=u.exec(K.slice(fe));return ae?(he.p=d.get(ae[0].toLowerCase()),fe+ae[0].length):-1}function D(he,K,fe){var ae=m.exec(K.slice(fe));return ae?(he.w=g.get(ae[0].toLowerCase()),fe+ae[0].length):-1}function k(he,K,fe){var ae=f.exec(K.slice(fe));return ae?(he.w=h.get(ae[0].toLowerCase()),fe+ae[0].length):-1}function O(he,K,fe){var ae=b.exec(K.slice(fe));return ae?(he.m=x.get(ae[0].toLowerCase()),fe+ae[0].length):-1}function V(he,K,fe){var ae=p.exec(K.slice(fe));return ae?(he.m=y.get(ae[0].toLowerCase()),fe+ae[0].length):-1}function G(he,K,fe){return A(he,t,K,fe)}function Y(he,K,fe){return A(he,r,K,fe)}function W(he,K,fe){return A(he,n,K,fe)}function P(he){return o[he.getDay()]}function E(he){return i[he.getDay()]}function R(he){return c[he.getMonth()]}function I(he){return l[he.getMonth()]}function ee(he){return a[+(he.getHours()>=12)]}function L(he){return 1+~~(he.getMonth()/3)}function q(he){return o[he.getUTCDay()]}function H(he){return i[he.getUTCDay()]}function B(he){return c[he.getUTCMonth()]}function de(he){return l[he.getUTCMonth()]}function ce(he){return a[+(he.getUTCHours()>=12)]}function ge(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var K=S(he+="",w);return K.toString=function(){return he},K},parse:function(he){var K=_(he+="",!1);return K.toString=function(){return he},K},utcFormat:function(he){var K=S(he+="",v);return K.toString=function(){return he},K},utcParse:function(he){var K=_(he+="",!0);return K.toString=function(){return he},K}}}var hP={"-":"",_:" ",0:"0"},Un=/^\s*\d+/,h2e=/^%/,m2e=/[\\^$*+?|[\]().{}]/g;function ur(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function p2e(e){return e.replace(m2e,"\\$&")}function Bh(e){return new RegExp("^(?:"+e.map(p2e).join("|")+")","i")}function Uh(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function g2e(e,t,r){var n=Un.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function x2e(e,t,r){var n=Un.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function y2e(e,t,r){var n=Un.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function v2e(e,t,r){var n=Un.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function w2e(e,t,r){var n=Un.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function mP(e,t,r){var n=Un.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function pP(e,t,r){var n=Un.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function b2e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function j2e(e,t,r){var n=Un.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function N2e(e,t,r){var n=Un.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function gP(e,t,r){var n=Un.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function S2e(e,t,r){var n=Un.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function xP(e,t,r){var n=Un.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function _2e(e,t,r){var n=Un.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function T2e(e,t,r){var n=Un.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function E2e(e,t,r){var n=Un.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function A2e(e,t,r){var n=Un.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function C2e(e,t,r){var n=h2e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function D2e(e,t,r){var n=Un.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function k2e(e,t,r){var n=Un.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function yP(e,t){return ur(e.getDate(),t,2)}function O2e(e,t){return ur(e.getHours(),t,2)}function P2e(e,t){return ur(e.getHours()%12||12,t,2)}function I2e(e,t){return ur(1+D0.count(Bo(e),e),t,3)}function A9(e,t){return ur(e.getMilliseconds(),t,3)}function M2e(e,t){return A9(e,t)+"000"}function R2e(e,t){return ur(e.getMonth()+1,t,2)}function F2e(e,t){return ur(e.getMinutes(),t,2)}function L2e(e,t){return ur(e.getSeconds(),t,2)}function $2e(e){var t=e.getDay();return t===0?7:t}function B2e(e,t){return ur(F1.count(Bo(e)-1,e),t,2)}function C9(e){var t=e.getDay();return t>=4||t===0?Af(e):Af.ceil(e)}function U2e(e,t){return e=C9(e),ur(Af.count(Bo(e),e)+(Bo(e).getDay()===4),t,2)}function W2e(e){return e.getDay()}function V2e(e,t){return ur(Cy.count(Bo(e)-1,e),t,2)}function H2e(e,t){return ur(e.getFullYear()%100,t,2)}function z2e(e,t){return e=C9(e),ur(e.getFullYear()%100,t,2)}function q2e(e,t){return ur(e.getFullYear()%1e4,t,4)}function G2e(e,t){var r=e.getDay();return e=r>=4||r===0?Af(e):Af.ceil(e),ur(e.getFullYear()%1e4,t,4)}function K2e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ur(t/60|0,"0",2)+ur(t%60,"0",2)}function vP(e,t){return ur(e.getUTCDate(),t,2)}function Y2e(e,t){return ur(e.getUTCHours(),t,2)}function X2e(e,t){return ur(e.getUTCHours()%12||12,t,2)}function Q2e(e,t){return ur(1+R1.count(Uo(e),e),t,3)}function D9(e,t){return ur(e.getUTCMilliseconds(),t,3)}function J2e(e,t){return D9(e,t)+"000"}function Z2e(e,t){return ur(e.getUTCMonth()+1,t,2)}function e_e(e,t){return ur(e.getUTCMinutes(),t,2)}function t_e(e,t){return ur(e.getUTCSeconds(),t,2)}function r_e(e){var t=e.getUTCDay();return t===0?7:t}function n_e(e,t){return ur(L1.count(Uo(e)-1,e),t,2)}function k9(e){var t=e.getUTCDay();return t>=4||t===0?Cf(e):Cf.ceil(e)}function a_e(e,t){return e=k9(e),ur(Cf.count(Uo(e),e)+(Uo(e).getUTCDay()===4),t,2)}function s_e(e){return e.getUTCDay()}function i_e(e,t){return ur(Dy.count(Uo(e)-1,e),t,2)}function o_e(e,t){return ur(e.getUTCFullYear()%100,t,2)}function l_e(e,t){return e=k9(e),ur(e.getUTCFullYear()%100,t,2)}function c_e(e,t){return ur(e.getUTCFullYear()%1e4,t,4)}function u_e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Cf(e):Cf.ceil(e),ur(e.getUTCFullYear()%1e4,t,4)}function d_e(){return"+0000"}function wP(){return"%"}function bP(e){return+e}function jP(e){return Math.floor(+e/1e3)}var ad,O9,P9;f_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function f_e(e){return ad=f2e(e),O9=ad.format,ad.parse,P9=ad.utcFormat,ad.utcParse,ad}function h_e(e){return new Date(e)}function m_e(e){return e instanceof Date?+e:+new Date(+e)}function vE(e,t,r,n,a,i,o,l,c,u){var d=sE(),f=d.invert,h=d.domain,m=u(".%L"),g=u(":%S"),p=u("%I:%M"),y=u("%I %p"),b=u("%a %d"),x=u("%b %d"),w=u("%B"),v=u("%Y");function j(S){return(c(S)<S?m:l(S)<S?g:o(S)<S?p:i(S)<S?y:n(S)<S?a(S)<S?b:x:r(S)<S?w:v)(S)}return d.invert=function(S){return new Date(f(S))},d.domain=function(S){return arguments.length?h(Array.from(S,m_e)):h().map(h_e)},d.ticks=function(S){var _=h();return e(_[0],_[_.length-1],S??10)},d.tickFormat=function(S,_){return _==null?j:u(_)},d.nice=function(S){var _=h();return(!S||typeof S.range!="function")&&(S=t(_[0],_[_.length-1],S??10)),S?h(v9(_,S)):d},d.copy=function(){return C0(d,vE(e,t,r,n,a,i,o,l,c,u))},d}function p_e(){return Bs.apply(vE(u2e,d2e,Bo,xE,F1,D0,pE,hE,Pc,O9).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function g_e(){return Bs.apply(vE(l2e,c2e,Uo,yE,L1,R1,gE,mE,Pc,P9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function $1(){var e=0,t=1,r,n,a,i,o=Sa,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,g;return arguments.length?([m,g]=h,o=f(m,g),u):[o(0),o(1)]}}return u.range=d(gh),u.rangeRound=d(aE),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function uc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function I9(){var e=cc($1()(Sa));return e.copy=function(){return uc(e,I9())},qo.apply(e,arguments)}function M9(){var e=lE($1()).domain([1,10]);return e.copy=function(){return uc(e,M9()).base(e.base())},qo.apply(e,arguments)}function R9(){var e=cE($1());return e.copy=function(){return uc(e,R9()).constant(e.constant())},qo.apply(e,arguments)}function wE(){var e=uE($1());return e.copy=function(){return uc(e,wE()).exponent(e.exponent())},qo.apply(e,arguments)}function x_e(){return wE.apply(null,arguments).exponent(.5)}function F9(){var e=[],t=Sa;function r(n){if(n!=null&&!isNaN(n=+n))return t((E0(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Ll),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>nSe(e,i/n))},r.copy=function(){return F9(t).domain(e)},qo.apply(r,arguments)}function B1(){var e=0,t=.5,r=1,n=1,a,i,o,l,c,u=Sa,d,f=!1,h;function m(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-i)*(n*p<n*i?l:c),u(f?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t,r]=p,a=d(e=+e),i=d(t=+t),o=d(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(p){return arguments.length?(f=!!p,m):f},m.interpolator=function(p){return arguments.length?(u=p,m):u};function g(p){return function(y){var b,x,w;return arguments.length?([b,x,w]=y,u=CSe(p,[b,x,w]),m):[u(0),u(.5),u(1)]}}return m.range=g(gh),m.rangeRound=g(aE),m.unknown=function(p){return arguments.length?(h=p,m):h},function(p){return d=p,a=p(e),i=p(t),o=p(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m}}function L9(){var e=cc(B1()(Sa));return e.copy=function(){return uc(e,L9())},qo.apply(e,arguments)}function $9(){var e=lE(B1()).domain([.1,1,10]);return e.copy=function(){return uc(e,$9()).base(e.base())},qo.apply(e,arguments)}function B9(){var e=cE(B1());return e.copy=function(){return uc(e,B9()).constant(e.constant())},qo.apply(e,arguments)}function bE(){var e=uE(B1());return e.copy=function(){return uc(e,bE()).exponent(e.exponent())},qo.apply(e,arguments)}function y_e(){return bE.apply(null,arguments).exponent(.5)}const NP=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:fp,scaleDiverging:L9,scaleDivergingLog:$9,scaleDivergingPow:bE,scaleDivergingSqrt:y_e,scaleDivergingSymlog:B9,scaleIdentity:y9,scaleImplicit:aS,scaleLinear:Ey,scaleLog:w9,scaleOrdinal:tE,scalePoint:jm,scalePow:dE,scaleQuantile:N9,scaleQuantize:S9,scaleRadial:j9,scaleSequential:I9,scaleSequentialLog:M9,scaleSequentialPow:wE,scaleSequentialQuantile:F9,scaleSequentialSqrt:x_e,scaleSequentialSymlog:R9,scaleSqrt:JSe,scaleSymlog:b9,scaleThreshold:_9,scaleTime:p_e,scaleUtc:g_e,tickFormat:x9},Symbol.toStringTag,{value:"Module"}));var v_e=lh;function w_e(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!v_e(o):r(o,l)))var l=o,c=i}return c}var U9=w_e;function b_e(e,t){return e>t}var j_e=b_e,N_e=U9,S_e=j_e,__e=ph;function T_e(e){return e&&e.length?N_e(e,__e,S_e):void 0}var E_e=T_e;const U1=Cr(E_e);function A_e(e,t){return e<t}var C_e=A_e,D_e=U9,k_e=C_e,O_e=ph;function P_e(e){return e&&e.length?D_e(e,O_e,k_e):void 0}var I_e=P_e;const W1=Cr(I_e);var M_e=IT,R_e=lc,F_e=XB,L_e=qa;function $_e(e,t){var r=L_e(e)?M_e:F_e;return r(e,R_e(t))}var B_e=$_e,U_e=KB,W_e=B_e;function V_e(e,t){return U_e(W_e(e,t),1)}var H_e=V_e;const z_e=Cr(H_e);var q_e=YT;function G_e(e,t){return q_e(e,t)}var K_e=G_e;const jE=Cr(K_e);var xh=1e9,Y_e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},SE,Wr=!0,Rs="[DecimalError] ",Kc=Rs+"Invalid argument: ",NE=Rs+"Exponent out of range: ",yh=Math.floor,Sc=Math.pow,X_e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ss,Pn=1e7,Lr=7,W9=9007199254740991,ky=yh(W9/Lr),pt={};pt.absoluteValue=pt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};pt.comparedTo=pt.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};pt.decimalPlaces=pt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Lr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};pt.dividedBy=pt.div=function(e){return Ao(this,new this.constructor(e))};pt.dividedToIntegerBy=pt.idiv=function(e){var t=this,r=t.constructor;return Dr(Ao(t,new r(e),0,1),r.precision)};pt.equals=pt.eq=function(e){return!this.cmp(e)};pt.exponent=function(){return yn(this)};pt.greaterThan=pt.gt=function(e){return this.cmp(e)>0};pt.greaterThanOrEqualTo=pt.gte=function(e){return this.cmp(e)>=0};pt.isInteger=pt.isint=function(){return this.e>this.d.length-2};pt.isNegative=pt.isneg=function(){return this.s<0};pt.isPositive=pt.ispos=function(){return this.s>0};pt.isZero=function(){return this.s===0};pt.lessThan=pt.lt=function(e){return this.cmp(e)<0};pt.lessThanOrEqualTo=pt.lte=function(e){return this.cmp(e)<1};pt.logarithm=pt.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ss))throw Error(Rs+"NaN");if(r.s<1)throw Error(Rs+(r.s?"NaN":"-Infinity"));return r.eq(ss)?new n(0):(Wr=!1,t=Ao(xp(r,i),xp(e,i),i),Wr=!0,Dr(t,a))};pt.minus=pt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?z9(t,e):V9(t,(e.s=-e.s,e))};pt.modulo=pt.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Rs+"NaN");return r.s?(Wr=!1,t=Ao(r,e,0,1).times(e),Wr=!0,r.minus(t)):Dr(new n(r),a)};pt.naturalExponential=pt.exp=function(){return H9(this)};pt.naturalLogarithm=pt.ln=function(){return xp(this)};pt.negated=pt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};pt.plus=pt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?V9(t,e):z9(t,(e.s=-e.s,e))};pt.precision=pt.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Kc+e);if(t=yn(a)+1,n=a.d.length-1,r=n*Lr+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};pt.squareRoot=pt.sqrt=function(){var e,t,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Rs+"NaN")}for(e=yn(l),Wr=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=$i(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=yh((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(Ao(l,i,o+2)).times(.5),$i(i.d).slice(0,o)===(t=$i(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Dr(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Wr=!0,Dr(n,r)};pt.times=pt.mul=function(e){var t,r,n,a,i,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+m[n]*h[a-n-1]+t,i[a--]=l%Pn|0,t=l/Pn|0;i[a]=(i[a]+t)%Pn|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Wr?Dr(e,f.precision):e};pt.toDecimalPlaces=pt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Qi(e,0,xh),t===void 0?t=n.rounding:Qi(t,0,8),Dr(r,e+yn(r)+1,t))};pt.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=pu(n,!0):(Qi(e,0,xh),t===void 0?t=a.rounding:Qi(t,0,8),n=Dr(new a(n),e+1,t),r=pu(n,!0,e+1)),r};pt.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?pu(a):(Qi(e,0,xh),t===void 0?t=i.rounding:Qi(t,0,8),n=Dr(new i(a),e+yn(a)+1,t),r=pu(n.abs(),!1,e+yn(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};pt.toInteger=pt.toint=function(){var e=this,t=e.constructor;return Dr(new t(e),yn(e)+1,t.rounding)};pt.toNumber=function(){return+this};pt.toPower=pt.pow=function(e){var t,r,n,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(ss);if(l=new c(l),!l.s){if(e.s<1)throw Error(Rs+"Infinity");return l}if(l.eq(ss))return l;if(n=c.precision,e.eq(ss))return Dr(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=W9){for(a=new c(ss),t=Math.ceil(n/Lr+4),Wr=!1;r%2&&(a=a.times(l),_P(a.d,t)),r=yh(r/2),r!==0;)l=l.times(l),_P(l.d,t);return Wr=!0,e.s<0?new c(ss).div(a):Dr(a,n)}}else if(i<0)throw Error(Rs+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Wr=!1,a=e.times(xp(l,n+u)),Wr=!0,a=H9(a),a.s=i,a};pt.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=yn(a),n=pu(a,r<=i.toExpNeg||r>=i.toExpPos)):(Qi(e,1,xh),t===void 0?t=i.rounding:Qi(t,0,8),a=Dr(new i(a),e,t),r=yn(a),n=pu(a,e<=r||r<=i.toExpNeg,e)),n};pt.toSignificantDigits=pt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Qi(e,1,xh),t===void 0?t=n.rounding:Qi(t,0,8)),Dr(new n(r),e,t)};pt.toString=pt.valueOf=pt.val=pt.toJSON=pt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=yn(e),r=e.constructor;return pu(e,t<=r.toExpNeg||t>=r.toExpPos)};function V9(e,t){var r,n,a,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Wr?Dr(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/Lr),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Pn|0,c[i]%=Pn;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Wr?Dr(t,f):t}function Qi(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Kc+e)}function $i(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Lr-n.length,r&&(i+=nl(r)),i+=n;o=e[t],n=o+"",r=Lr-n.length,r&&(i+=nl(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ao=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%Pn|0,o=i/Pn|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Pn+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,u,d,f,h,m,g,p,y,b,x,w,v,j,S,_,A,C=n.constructor,D=n.s==a.s?1:-1,k=n.d,O=a.d;if(!n.s)return new C(n);if(!a.s)throw Error(Rs+"Division by zero");for(c=n.e-a.e,_=O.length,j=k.length,m=new C(D),g=m.d=[],u=0;O[u]==(k[u]||0);)++u;if(O[u]>(k[u]||0)&&--c,i==null?x=i=C.precision:o?x=i+(yn(n)-yn(a))+1:x=i,x<0)return new C(0);if(x=x/Lr+2|0,u=0,_==1)for(d=0,O=O[0],x++;(u<j||d)&&x--;u++)w=d*Pn+(k[u]||0),g[u]=w/O|0,d=w%O|0;else{for(d=Pn/(O[0]+1)|0,d>1&&(O=e(O,d),k=e(k,d),_=O.length,j=k.length),v=_,p=k.slice(0,_),y=p.length;y<_;)p[y++]=0;A=O.slice(),A.unshift(0),S=O[0],O[1]>=Pn/2&&++S;do d=0,l=t(O,p,_,y),l<0?(b=p[0],_!=y&&(b=b*Pn+(p[1]||0)),d=b/S|0,d>1?(d>=Pn&&(d=Pn-1),f=e(O,d),h=f.length,y=p.length,l=t(f,p,h,y),l==1&&(d--,r(f,_<h?A:O,h))):(d==0&&(l=d=1),f=O.slice()),h=f.length,h<y&&f.unshift(0),r(p,f,y),l==-1&&(y=p.length,l=t(O,p,_,y),l<1&&(d++,r(p,_<y?A:O,y))),y=p.length):l===0&&(d++,p=[0]),g[u++]=d,l&&p[0]?p[y++]=k[v]||0:(p=[k[v]],y=1);while((v++<j||p[0]!==void 0)&&x--)}return g[0]||g.shift(),m.e=c,Dr(m,o?i+yn(m)+1:i)}}();function H9(e,t){var r,n,a,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(yn(e)>16)throw Error(NE+yn(e));if(!e.s)return new d(ss);for(Wr=!1,l=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Sc(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(ss),d.precision=l;;){if(a=Dr(a.times(e),l),r=r.times(++c),o=i.plus(Ao(a,r,l)),$i(o.d).slice(0,l)===$i(i.d).slice(0,l)){for(;u--;)i=Dr(i.times(i),l);return d.precision=f,t==null?(Wr=!0,Dr(i,f)):i}i=o}}function yn(e){for(var t=e.e*Lr,r=e.d[0];r>=10;r/=10)t++;return t}function kb(e,t,r){if(t>e.LN10.sd())throw Wr=!0,r&&(e.precision=r),Error(Rs+"LN10 precision limit exceeded");return Dr(new e(e.LN10),t)}function nl(e){for(var t="";e--;)t+="0";return t}function xp(e,t){var r,n,a,i,o,l,c,u,d,f=1,h=10,m=e,g=m.d,p=m.constructor,y=p.precision;if(m.s<1)throw Error(Rs+(m.s?"NaN":"-Infinity"));if(m.eq(ss))return new p(0);if(t==null?(Wr=!1,u=y):u=t,m.eq(10))return t==null&&(Wr=!0),kb(p,u);if(u+=h,p.precision=u,r=$i(g),n=r.charAt(0),i=yn(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=$i(m.d),n=r.charAt(0),f++;i=yn(m),n>1?(m=new p("0."+r),i++):m=new p(n+"."+r.slice(1))}else return c=kb(p,u+2,y).times(i+""),m=xp(new p(n+"."+r.slice(1)),u-h).plus(c),p.precision=y,t==null?(Wr=!0,Dr(m,y)):m;for(l=o=m=Ao(m.minus(ss),m.plus(ss),u),d=Dr(m.times(m),u),a=3;;){if(o=Dr(o.times(d),u),c=l.plus(Ao(o,new p(a),u)),$i(c.d).slice(0,u)===$i(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(kb(p,u+2,y).times(i+""))),l=Ao(l,new p(f),u),p.precision=y,t==null?(Wr=!0,Dr(l,y)):l;l=c,a+=2}}function SP(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=yh(r/Lr),e.d=[],n=(r+1)%Lr,r<0&&(n+=Lr),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Lr;n<a;)e.d.push(+t.slice(n,n+=Lr));t=t.slice(n),n=Lr-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Wr&&(e.e>ky||e.e<-ky))throw Error(NE+r)}else e.s=0,e.e=0,e.d=[0];return e}function Dr(e,t,r){var n,a,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Lr,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Lr),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=Lr,a=n-Lr+o}if(r!==void 0&&(i=Sc(10,o-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Sc(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=yn(e),f.length=1,t=t-i-1,f[0]=Sc(10,(Lr-t%Lr)%Lr),e.e=yh(-t/Lr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Sc(10,Lr-n),f[d]=a>0?(u/Sc(10,o-a)%Sc(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==Pn&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=Pn)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Wr&&(e.e>ky||e.e<-ky))throw Error(NE+yn(e));return e}function z9(e,t){var r,n,a,i,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Wr?Dr(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/Lr),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=Pn-1;--c[i],c[a]+=Pn}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Wr?Dr(t,m):t):new h(0)}function pu(e,t,r){var n,a=yn(e),i=$i(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+nl(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+nl(-a-1)+i,r&&(n=r-o)>0&&(i+=nl(n))):a>=o?(i+=nl(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+nl(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=nl(n))),e.s<0?"-"+i:i}function _P(e,t){if(e.length>t)return e.length=t,!0}function q9(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Kc+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return SP(o,i.toString())}else if(typeof i!="string")throw Error(Kc+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,X_e.test(i))SP(o,i);else throw Error(Kc+i)}if(a.prototype=pt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=q9,a.config=a.set=Q_e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function Q_e(e){if(!e||typeof e!="object")throw Error(Rs+"Object expected");var t,r,n,a=["precision",1,xh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(yh(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Kc+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Kc+r+": "+n);return this}var SE=q9(Y_e);ss=new SE(1);const Ar=SE;function J_e(e){return rTe(e)||tTe(e)||eTe(e)||Z_e()}function Z_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eTe(e,t){if(e){if(typeof e=="string")return lS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lS(e,t)}}function tTe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function rTe(e){if(Array.isArray(e))return lS(e)}function lS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var nTe=function(t){return t},G9={},K9=function(t){return t===G9},TP=function(t){return function r(){return arguments.length===0||arguments.length===1&&K9(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},aTe=function e(t,r){return t===1?r:TP(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==G9}).length;return o>=t?r.apply(void 0,a):e(t-o,TP(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return K9(f)?c.shift():f});return r.apply(void 0,J_e(d).concat(c))}))})},V1=function(t){return aTe(t.length,t)},cS=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},sTe=V1(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),iTe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return nTe;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},uS=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},Y9=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function oTe(e){var t;return e===0?t=1:t=Math.floor(new Ar(e).abs().log(10).toNumber())+1,t}function lTe(e,t,r){for(var n=new Ar(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var cTe=V1(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),uTe=V1(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),dTe=V1(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const H1={rangeStep:lTe,getDigitCount:oTe,interpolateNumber:cTe,uninterpolateNumber:uTe,uninterpolateTruncation:dTe};function dS(e){return mTe(e)||hTe(e)||X9(e)||fTe()}function fTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hTe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function mTe(e){if(Array.isArray(e))return fS(e)}function yp(e,t){return xTe(e)||gTe(e,t)||X9(e,t)||pTe()}function pTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X9(e,t){if(e){if(typeof e=="string")return fS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fS(e,t)}}function fS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gTe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function xTe(e){if(Array.isArray(e))return e}function Q9(e){var t=yp(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function J9(e,t,r){if(e.lte(0))return new Ar(0);var n=H1.getDigitCount(e.toNumber()),a=new Ar(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new Ar(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new Ar(Math.ceil(c))}function yTe(e,t,r){var n=1,a=new Ar(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Ar(10).pow(H1.getDigitCount(e)-1),a=new Ar(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Ar(Math.floor(e)))}else e===0?a=new Ar(Math.floor((t-1)/2)):r||(a=new Ar(Math.floor(e)));var o=Math.floor((t-1)/2),l=iTe(sTe(function(c){return a.add(new Ar(c-o).mul(n)).toNumber()}),cS);return l(0,t)}function Z9(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ar(0),tickMin:new Ar(0),tickMax:new Ar(0)};var i=J9(new Ar(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new Ar(0):(o=new Ar(e).add(t).div(2),o=o.sub(new Ar(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Ar(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?Z9(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new Ar(l).mul(i)),tickMax:o.add(new Ar(c).mul(i))})}function vTe(e){var t=yp(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=Q9([r,n]),c=yp(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(dS(cS(0,a-1).map(function(){return 1/0}))):[].concat(dS(cS(0,a-1).map(function(){return-1/0})),[d]);return r>n?uS(f):f}if(u===d)return yTe(u,a,i);var h=Z9(u,d,o,i),m=h.step,g=h.tickMin,p=h.tickMax,y=H1.rangeStep(g,p.add(new Ar(.1).mul(m)),m);return r>n?uS(y):y}function wTe(e,t){var r=yp(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Q9([n,a]),l=yp(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=J9(new Ar(u).sub(c).div(d-1),i,0),h=[].concat(dS(H1.rangeStep(new Ar(c),new Ar(u).sub(new Ar(.99).mul(f)),f)),[u]);return n>a?uS(h):h}var bTe=Y9(vTe),jTe=Y9(wTe),NTe="Invariant failed";function gu(e,t){throw new Error(NTe)}var STe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}function Oy(){return Oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oy.apply(this,arguments)}function _Te(e,t){return CTe(e)||ATe(e,t)||ETe(e,t)||TTe()}function TTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ETe(e,t){if(e){if(typeof e=="string")return EP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EP(e,t)}}function EP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ATe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function CTe(e){if(Array.isArray(e))return e}function DTe(e,t){if(e==null)return{};var r=kTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function OTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PTe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r7(n.key),n)}}function ITe(e,t,r){return t&&PTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function MTe(e,t,r){return t=Py(t),RTe(e,e7()?Reflect.construct(t,r||[],Py(e).constructor):t.apply(e,r))}function RTe(e,t){if(t&&(Df(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FTe(e)}function FTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e7=function(){return!!e})()}function Py(e){return Py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Py(e)}function LTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hS(e,t)}function hS(e,t){return hS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hS(e,t)}function t7(e,t,r){return t=r7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r7(e){var t=$Te(e,"string");return Df(t)=="symbol"?t:t+""}function $Te(e,t){if(Df(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var z1=function(e){function t(){return OTe(this,t),MTe(this,t,arguments)}return LTe(t,e),ITe(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=DTe(n,STe),m=fr(h,!1);this.props.direction==="x"&&d.type!=="number"&&gu();var g=c.map(function(p){var y=u(p,l),b=y.x,x=y.y,w=y.value,v=y.errorVal;if(!v)return null;var j=[],S,_;if(Array.isArray(v)){var A=_Te(v,2);S=A[0],_=A[1]}else S=_=v;if(i==="vertical"){var C=d.scale,D=x+a,k=D+o,O=D-o,V=C(w-S),G=C(w+_);j.push({x1:G,y1:k,x2:G,y2:O}),j.push({x1:V,y1:D,x2:G,y2:D}),j.push({x1:V,y1:k,x2:V,y2:O})}else if(i==="horizontal"){var Y=f.scale,W=b+a,P=W-o,E=W+o,R=Y(w-S),I=Y(w+_);j.push({x1:P,y1:I,x2:E,y2:I}),j.push({x1:W,y1:R,x2:W,y2:I}),j.push({x1:P,y1:R,x2:E,y2:R})}return pe.createElement(Rn,Oy({className:"recharts-errorBar",key:"bar-".concat(j.map(function(ee){return"".concat(ee.x1,"-").concat(ee.x2,"-").concat(ee.y1,"-").concat(ee.y2)}))},m),j.map(function(ee){return pe.createElement("line",Oy({},ee,{key:"line-".concat(ee.x1,"-").concat(ee.x2,"-").concat(ee.y1,"-").concat(ee.y2)}))}))});return pe.createElement(Rn,{className:"recharts-errorBars"},g)}}])}(pe.Component);t7(z1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});t7(z1,"displayName","ErrorBar");function vp(e){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(e)}function AP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AP(Object(r),!0).forEach(function(n){BTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BTe(e,t,r){return t=UTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UTe(e){var t=WTe(e,"string");return vp(t)=="symbol"?t:t+""}function WTe(e,t){if(vp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n7=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Ja(r,$d);if(!o)return null;var l=$d.defaultProps,c=l!==void 0?yc(yc({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,m=f.props,g=m.sectors||m.data||[];return d.concat(g.map(function(p){return{type:o.props.iconType||h.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?yc(yc({},h),f.props):{},g=m.dataKey,p=m.name,y=m.legendType,b=m.hide;return{inactive:b,dataKey:g,type:c.iconType||y||"square",color:_E(f),value:p||g,payload:m}}),yc(yc(yc({},c),$d.getWithHeight(o,a)),{},{payload:u,item:o})};function wp(e){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(e)}function CP(e){return qTe(e)||zTe(e)||HTe(e)||VTe()}function VTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HTe(e,t){if(e){if(typeof e=="string")return mS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mS(e,t)}}function zTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qTe(e){if(Array.isArray(e))return mS(e)}function mS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function DP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(r),!0).forEach(function(n){Ud(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ud(e,t,r){return t=GTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GTe(e){var t=KTe(e,"string");return wp(t)=="symbol"?t:t+""}function KTe(e,t){if(wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ji(e,t,r){return hr(e)||hr(t)?r:Dn(t)?Ps(e,t,r):Yt(t)?t(e):r}function Nm(e,t,r,n){var a=z_e(e,function(l){return Ji(l,t)});if(r==="number"){var i=a.filter(function(l){return nt(l)||parseFloat(l)});return i.length?[W1(i),U1(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!hr(l)}):a;return o.map(function(l){return Dn(l)||l instanceof Date?l:""})}var YTe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(oi(f-d)!==oi(h-f)){var g=[];if(oi(h-f)===oi(c[1]-c[0])){m=h;var p=f+c[1]-c[0];g[0]=Math.min(p,(p+d)/2),g[1]=Math.max(p,(p+d)/2)}else{m=d;var y=h+c[1]-c[0];g[0]=Math.min(f,(y+f)/2),g[1]=Math.max(f,(y+f)/2)}var b=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>b[0]&&t<=b[1]||t>=g[0]&&t<=g[1]){o=a[u].index;break}}else{var x=Math.min(d,h),w=Math.max(d,h);if(t>(x+f)/2&&t<=(w+f)/2){o=a[u].index;break}}}else for(var v=0;v<l;v++)if(v===0&&t<=(n[v].coordinate+n[v+1].coordinate)/2||v>0&&v<l-1&&t>(n[v].coordinate+n[v-1].coordinate)/2&&t<=(n[v].coordinate+n[v+1].coordinate)/2||v===l-1&&t>(n[v].coordinate+n[v-1].coordinate)/2){o=n[v].index;break}return o},_E=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Jr(Jr({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},XTe=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var g=d[f[h]],p=g.items,y=g.cateAxisId,b=p.filter(function(_){return To(_.type).indexOf("Bar")>=0});if(b&&b.length){var x=b[0].type.defaultProps,w=x!==void 0?Jr(Jr({},x),b[0].props):b[0].props,v=w.barSize,j=w[y];o[j]||(o[j]=[]);var S=hr(v)?r:v;o[j].push({item:b[0],stackList:b.slice(1),barSize:hr(S)?void 0:mu(S,n,0)})}}return o},QTe=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=mu(r,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,g=o.reduce(function(v,j){return v+j.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&m>0&&(h=!0,m*=.9,g=c*m);var p=(a-g)/2>>0,y={offset:p-u,size:0};d=o.reduce(function(v,j){var S={item:j.item,position:{offset:y.offset+y.size+u,size:h?m:j.barSize}},_=[].concat(CP(v),[S]);return y=_[_.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(A){_.push({item:A,position:y})}),_},f)}else{var b=mu(n,a,0,!0);a-2*b-(c-1)*u<=0&&(u=0);var x=(a-2*b-(c-1)*u)/c;x>1&&(x>>=0);var w=l===+l?Math.min(x,l):x;d=o.reduce(function(v,j,S){var _=[].concat(CP(v),[{item:j.item,position:{offset:b+(x+u)*S+(x-w)/2,size:w}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(A){_.push({item:A,position:_[_.length-1].position})}),_},f)}return d},JTe=function(t,r,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=n7({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,m=u.align,g=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&g==="middle")&&m!=="center"&&nt(t[m]))return Jr(Jr({},t),{},Ud({},m,t[m]+(f||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&g!=="middle"&&nt(t[g]))return Jr(Jr({},t),{},Ud({},g,t[g]+(h||0)))}return t},ZTe=function(t,r,n){return hr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},a7=function(t,r,n,a,i){var o=r.props.children,l=fi(o,z1).filter(function(u){return ZTe(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=Ji(d,n);if(hr(f))return u;var h=Array.isArray(f)?[W1(f),U1(f)]:[f,f],m=c.reduce(function(g,p){var y=Ji(d,p,0),b=h[0]-Math.abs(Array.isArray(y)?y[0]:y),x=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(b,g[0]),Math.max(x,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},eEe=function(t,r,n,a,i){var o=r.map(function(l){return a7(t,l,n,i,a)}).filter(function(l){return!hr(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},s7=function(t,r,n,a,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&a7(t,c,u,a)||Nm(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},i7=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},o7=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},bo=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?oi(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!S0(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:i?i[f]:f,index:h,offset:u}})},Ob=new WeakMap,Ng=function(t,r){if(typeof r!="function")return t;Ob.has(t)||Ob.set(t,new WeakMap);var n=Ob.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},tEe=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:fp(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Ey(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:jm(),realScaleType:"point"}:i==="category"?{scale:fp(),realScaleType:"band"}:{scale:Ey(),realScaleType:"linear"};if(hu(a)){var c="scale".concat(A1(a));return{scale:(NP[c]||jm)(),realScaleType:NP[c]?c:"point"}}return Yt(a)?{scale:a}:{scale:jm(),realScaleType:"point"}},kP=1e-4,rEe=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-kP,o=Math.max(a[0],a[1])+kP,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},nEe=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},aEe=function(t,r){if(!r||r.length!==2||!nt(r[0])||!nt(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!nt(t[0])||t[0]<n)&&(i[0]=n),(!nt(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},sEe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,l=0;l<r;++l){var c=S0(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},iEe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var l=S0(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},oEe={sign:sEe,expand:b0e,none:jf,silhouette:j0e,wiggle:N0e,positive:iEe},lEe=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=oEe[n],o=w0e().keys(a).value(function(l,c){return+Ji(l,c,0)}).order($N).offset(i);return o(t)},cEe=function(t,r,n,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Jr(Jr({},h.type.defaultProps),h.props):h.props,p=g.stackId,y=g.hide;if(y)return f;var b=g[n],x=f[b]||{hasStack:!1,stackGroups:{}};if(Dn(p)){var w=x.stackGroups[p]||{numericAxisId:n,cateAxisId:a,items:[]};w.items.push(h),x.hasStack=!0,x.stackGroups[p]=w}else x.stackGroups[E1("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return Jr(Jr({},f),{},Ud({},b,x))},c),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,y){var b=m.stackGroups[y];return Jr(Jr({},p),{},Ud({},y,{numericAxisId:n,cateAxisId:a,items:b.items,stackedData:lEe(t,b.items,i)}))},g)}return Jr(Jr({},f),{},Ud({},h,m))},d)},uEe=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=bTe(u,i,l);return t.domain([W1(d),U1(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),h=jTe(f,i,l);return{niceTicks:h}}return null},OP=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=Ji(o,r.dataKey,r.domain[l]);return hr(c)?null:r.scale(c)-i/2+a},dEe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},fEe=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Jr(Jr({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Dn(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},hEe=function(t){return t.reduce(function(r,n){return[W1(n.concat([r[0]]).filter(nt)),U1(n.concat([r[1]]).filter(nt))]},[1/0,-1/0])},l7=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var f=hEe(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},PP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,IP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pS=function(t,r,n){if(Yt(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(nt(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(PP.test(t[0])){var i=+PP.exec(t[0])[1];a[0]=r[0]-i}else Yt(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(nt(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(IP.test(t[1])){var o=+IP.exec(t[1])[1];a[1]=r[1]+o}else Yt(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},Iy=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=QT(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},MP=function(t,r,n){return!t||!t.length||jE(t,Ps(n,"type.defaultProps.domain"))?r:t},c7=function(t,r){var n=t.type.defaultProps?Jr(Jr({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Jr(Jr({},fr(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:_E(t),value:Ji(r,a),type:c,payload:r,chartType:u,hide:d})};function bp(e){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bp(e)}function RP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function FP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RP(Object(r),!0).forEach(function(n){mEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mEe(e,t,r){return t=pEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pEe(e){var t=gEe(e,"string");return bp(t)=="symbol"?t:t+""}function gEe(e,t){if(bp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var My=Math.PI/180,xEe=function(t){return t*180/Math.PI},Yn=function(t,r,n,a){return{x:t+Math.cos(-My*a)*n,y:r+Math.sin(-My*a)*n}},yEe=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},vEe=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,l=yEe({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:xEe(u),angleInRadian:u}},wEe=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},bEe=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},LP=function(t,r){var n=t.x,a=t.y,i=vEe({x:n,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=wEe(r),f=d.startAngle,h=d.endAngle,m=l,g;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}return g?FP(FP({},r),{},{radius:o,angle:bEe(m,r)}):null};function jp(e){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}var jEe=["offset"];function NEe(e){return EEe(e)||TEe(e)||_Ee(e)||SEe()}function SEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Ee(e,t){if(e){if(typeof e=="string")return gS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gS(e,t)}}function TEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function EEe(e){if(Array.isArray(e))return gS(e)}function gS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function AEe(e,t){if(e==null)return{};var r=CEe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function CEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(r),!0).forEach(function(n){DEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$P(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DEe(e,t,r){return t=kEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kEe(e){var t=OEe(e,"string");return jp(t)=="symbol"?t:t+""}function OEe(e,t){if(jp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Np(){return Np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Np.apply(this,arguments)}var PEe=function(t){var r=t.value,n=t.formatter,a=hr(t.children)?r:t.children;return Yt(n)?n(a):a},IEe=function(t,r){var n=oi(r-t),a=Math.min(Math.abs(r-t),360);return n*a},MEe=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,g=c.endAngle,p=c.clockWise,y=(f+h)/2,b=IEe(m,g),x=b>=0?1:-1,w,v;a==="insideStart"?(w=m+x*o,v=p):a==="insideEnd"?(w=g-x*o,v=!p):a==="end"&&(w=g+x*o,v=p),v=b<=0?v:!v;var j=Yn(u,d,y,w),S=Yn(u,d,y,w+(v?1:-1)*359),_="M".concat(j.x,",").concat(j.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(v?0:1,`,
    `).concat(S.x,",").concat(S.y),A=hr(t.id)?E1("recharts-radial-line-"):t.id;return pe.createElement("text",Np({},n,{dominantBaseline:"central",className:sr("recharts-radial-bar-label",l)}),pe.createElement("defs",null,pe.createElement("path",{id:A,d:_})),pe.createElement("textPath",{xlinkHref:"#".concat(A)},r))},REe=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(a==="outside"){var m=Yn(o,l,u+n,h),g=m.x,p=m.y;return{x:g,y:p,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,b=Yn(o,l,y,h),x=b.x,w=b.y;return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},FEe=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*a,m=f>0?"end":"start",g=f>0?"start":"end",p=u>=0?1:-1,y=p*a,b=p>0?"end":"start",x=p>0?"start":"end";if(i==="top"){var w={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:m};return jn(jn({},w),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var v={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:g};return jn(jn({},v),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var j={x:l-y,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return jn(jn({},j),n?{width:Math.max(j.x-n.x,0),height:d}:{})}if(i==="right"){var S={x:l+u+y,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return jn(jn({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:d}:{})}var _=n?{width:u,height:d}:{};return i==="insideLeft"?jn({x:l+y,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},_):i==="insideRight"?jn({x:l+u-y,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},_):i==="insideTop"?jn({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},_):i==="insideBottom"?jn({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:m},_):i==="insideTopLeft"?jn({x:l+y,y:c+h,textAnchor:x,verticalAnchor:g},_):i==="insideTopRight"?jn({x:l+u-y,y:c+h,textAnchor:b,verticalAnchor:g},_):i==="insideBottomLeft"?jn({x:l+y,y:c+d-h,textAnchor:x,verticalAnchor:m},_):i==="insideBottomRight"?jn({x:l+u-y,y:c+d-h,textAnchor:b,verticalAnchor:m},_):ch(i)&&(nt(i.x)||kc(i.x))&&(nt(i.y)||kc(i.y))?jn({x:l+mu(i.x,u),y:c+mu(i.y,d),textAnchor:"end",verticalAnchor:"end"},_):jn({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},_)},LEe=function(t){return"cx"in t&&nt(t.cx)};function la(e){var t=e.offset,r=t===void 0?5:t,n=AEe(e,jEe),a=jn({offset:r},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!i||hr(l)&&hr(c)&&!N.isValidElement(u)&&!Yt(u))return null;if(N.isValidElement(u))return N.cloneElement(u,a);var m;if(Yt(u)){if(m=N.createElement(u,a),N.isValidElement(m))return m}else m=PEe(a);var g=LEe(i),p=fr(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return MEe(a,m,p);var y=g?REe(a):FEe(a);return pe.createElement(wy,Np({className:sr("recharts-label",f)},p,y,{breakAll:h}),m)}la.displayName="Label";var u7=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,m=t.top,g=t.left,p=t.width,y=t.height,b=t.clockWise,x=t.labelViewBox;if(x)return x;if(nt(p)&&nt(y)){if(nt(f)&&nt(h))return{x:f,y:h,width:p,height:y};if(nt(m)&&nt(g))return{x:m,y:g,width:p,height:y}}return nt(f)&&nt(h)?{x:f,y:h,width:0,height:0}:nt(r)&&nt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:b}:t.viewBox?t.viewBox:{}},$Ee=function(t,r){return t?t===!0?pe.createElement(la,{key:"label-implicit",viewBox:r}):Dn(t)?pe.createElement(la,{key:"label-implicit",viewBox:r,value:t}):N.isValidElement(t)?t.type===la?N.cloneElement(t,{key:"label-implicit",viewBox:r}):pe.createElement(la,{key:"label-implicit",content:t,viewBox:r}):Yt(t)?pe.createElement(la,{key:"label-implicit",content:t,viewBox:r}):ch(t)?pe.createElement(la,Np({viewBox:r},t,{key:"label-implicit"})):null:null},BEe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=u7(t),o=fi(a,la).map(function(c,u){return N.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=$Ee(t.label,r||i);return[l].concat(NEe(o))};la.parseViewBox=u7;la.renderCallByParent=BEe;function UEe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var WEe=UEe;const VEe=Cr(WEe);function Sp(e){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sp(e)}var HEe=["valueAccessor"],zEe=["data","dataKey","clockWise","id","textBreakAll"];function qEe(e){return XEe(e)||YEe(e)||KEe(e)||GEe()}function GEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KEe(e,t){if(e){if(typeof e=="string")return xS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xS(e,t)}}function YEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function XEe(e){if(Array.isArray(e))return xS(e)}function xS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ry(){return Ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ry.apply(this,arguments)}function BP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(r),!0).forEach(function(n){QEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QEe(e,t,r){return t=JEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JEe(e){var t=ZEe(e,"string");return Sp(t)=="symbol"?t:t+""}function ZEe(e,t){if(Sp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WP(e,t){if(e==null)return{};var r=eAe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function eAe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var tAe=function(t){return Array.isArray(t.value)?VEe(t.value):t.value};function Yc(e){var t=e.valueAccessor,r=t===void 0?tAe:t,n=WP(e,HEe),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=WP(n,zEe);return!a||!a.length?null:pe.createElement(Rn,{className:"recharts-label-list"},a.map(function(d,f){var h=hr(i)?r(d,f):Ji(d&&d.payload,i),m=hr(l)?{}:{id:"".concat(l,"-").concat(f)};return pe.createElement(la,Ry({},fr(d,!0),u,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:la.parseViewBox(hr(o)?d:UP(UP({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Yc.displayName="LabelList";function rAe(e,t){return e?e===!0?pe.createElement(Yc,{key:"labelList-implicit",data:t}):pe.isValidElement(e)||Yt(e)?pe.createElement(Yc,{key:"labelList-implicit",data:t,content:e}):ch(e)?pe.createElement(Yc,Ry({data:t},e,{key:"labelList-implicit"})):null:null}function nAe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=fi(n,Yc).map(function(o,l){return N.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=rAe(e.label,t);return[i].concat(qEe(a))}Yc.renderCallByParent=nAe;function _p(e){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_p(e)}function yS(){return yS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yS.apply(this,arguments)}function VP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function HP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VP(Object(r),!0).forEach(function(n){aAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aAe(e,t,r){return t=sAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sAe(e){var t=iAe(e,"string");return _p(t)=="symbol"?t:t+""}function iAe(e,t){if(_p(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oAe=function(t,r){var n=oi(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},Sg=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/My,h=u?i:i+o*f,m=Yn(r,n,d,h),g=Yn(r,n,a,h),p=u?i-o*f:i,y=Yn(r,n,d*Math.cos(f*My),p);return{center:m,circleTangency:g,lineTangency:y,theta:f}},d7=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=oAe(o,l),u=o+c,d=Yn(r,n,i,o),f=Yn(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var m=Yn(r,n,a,o),g=Yn(r,n,a,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},lAe=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=oi(d-u),h=Sg({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,g=h.lineTangency,p=h.theta,y=Sg({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),b=y.circleTangency,x=y.lineTangency,w=y.theta,v=c?Math.abs(u-d):Math.abs(u-d)-p-w;if(v<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):d7({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var j="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(v>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
  `);if(a>0){var S=Sg({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),_=S.circleTangency,A=S.lineTangency,C=S.theta,D=Sg({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),k=D.circleTangency,O=D.lineTangency,V=D.theta,G=c?Math.abs(u-d):Math.abs(u-d)-C-V;if(G<0&&o===0)return"".concat(j,"L").concat(r,",").concat(n,"Z");j+="L".concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(G>180),",").concat(+(f>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,"Z")}else j+="L".concat(r,",").concat(n,"Z");return j},cAe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},f7=function(t){var r=HP(HP({},cAe),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(o<i||d===f)return null;var m=sr("recharts-sector",h),g=o-i,p=mu(l,g,0,!0),y;return p>0&&Math.abs(d-f)<360?y=lAe({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(p,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):y=d7({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),pe.createElement("path",yS({},fr(r,!0),{className:m,d:y,role:"img"}))};function Tp(e){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(e)}function vS(){return vS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vS.apply(this,arguments)}function zP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zP(Object(r),!0).forEach(function(n){uAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uAe(e,t,r){return t=dAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dAe(e){var t=fAe(e,"string");return Tp(t)=="symbol"?t:t+""}function fAe(e,t){if(Tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GP={curveBasisClosed:c0e,curveBasisOpen:u0e,curveBasis:l0e,curveBumpX:Kpe,curveBumpY:Ype,curveLinearClosed:d0e,curveLinear:D1,curveMonotoneX:f0e,curveMonotoneY:h0e,curveNatural:m0e,curveStep:p0e,curveStepAfter:x0e,curveStepBefore:g0e},_g=function(t){return t.x===+t.x&&t.y===+t.y},Wh=function(t){return t.x},Vh=function(t){return t.y},hAe=function(t,r){if(Yt(t))return t;var n="curve".concat(A1(t));return(n==="curveMonotone"||n==="curveBump")&&r?GP["".concat(n).concat(r==="vertical"?"Y":"X")]:GP[n]||D1},mAe=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=hAe(n,l),f=u?i.filter(function(p){return _g(p)}):i,h;if(Array.isArray(o)){var m=u?o.filter(function(p){return _g(p)}):o,g=f.map(function(p,y){return qP(qP({},p),{},{base:m[y]})});return l==="vertical"?h=pg().y(Vh).x1(Wh).x0(function(p){return p.base.x}):h=pg().x(Wh).y1(Vh).y0(function(p){return p.base.y}),h.defined(_g).curve(d),h(g)}return l==="vertical"&&nt(o)?h=pg().y(Vh).x1(Wh).x0(o):nt(o)?h=pg().x(Wh).y1(Vh).y0(o):h=hB().x(Wh).y(Vh),h.defined(_g).curve(d),h(f)},KP=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?mAe(t):a;return N.createElement("path",vS({},fr(t,!1),sy(t),{className:sr("recharts-curve",r),d:o,ref:i}))},h7={exports:{}},pAe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gAe=pAe,xAe=gAe;function m7(){}function p7(){}p7.resetWarningCache=m7;var yAe=function(){function e(n,a,i,o,l,c){if(c!==xAe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:p7,resetWarningCache:m7};return r.PropTypes=r,r};h7.exports=yAe();var vAe=h7.exports;const pr=Cr(vAe);var wAe=Object.getOwnPropertyNames,bAe=Object.getOwnPropertySymbols,jAe=Object.prototype.hasOwnProperty;function YP(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function Tg(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var i=a.cache,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);var c=e(r,n,a);return i.delete(r),i.delete(n),c}}function XP(e){return wAe(e).concat(bAe(e))}var NAe=Object.hasOwn||function(e,t){return jAe.call(e,t)};function Iu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var SAe="__v",_Ae="__o",TAe="_owner",QP=Object.getOwnPropertyDescriptor,JP=Object.keys;function EAe(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function AAe(e,t){return Iu(e.getTime(),t.getTime())}function CAe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function DAe(e,t){return e===t}function ZP(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(a[f]){f++;continue}var h=o.value,m=l.value;if(r.equals(h[0],m[0],c,f,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}var kAe=Iu;function OAe(e,t,r){var n=JP(e),a=n.length;if(JP(t).length!==a)return!1;for(;a-- >0;)if(!g7(e,t,r,n[a]))return!1;return!0}function Hh(e,t,r){var n=XP(e),a=n.length;if(XP(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=n[a],!g7(e,t,r,i)||(o=QP(e,i),l=QP(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function PAe(e,t){return Iu(e.valueOf(),t.valueOf())}function IAe(e,t){return e.source===t.source&&e.flags===t.flags}function e4(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function MAe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function RAe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function g7(e,t,r,n){return(n===TAe||n===_Ae||n===SAe)&&(e.$$typeof||t.$$typeof)?!0:NAe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var FAe="[object Arguments]",LAe="[object Boolean]",$Ae="[object Date]",BAe="[object Error]",UAe="[object Map]",WAe="[object Number]",VAe="[object Object]",HAe="[object RegExp]",zAe="[object Set]",qAe="[object String]",GAe="[object URL]",KAe=Array.isArray,t4=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,r4=Object.assign,YAe=Object.prototype.toString.call.bind(Object.prototype.toString);function XAe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(g,p,y){if(g===p)return!0;if(g==null||p==null)return!1;var b=typeof g;if(b!==typeof p)return!1;if(b!=="object")return b==="number"?o(g,p,y):b==="function"?a(g,p,y):!1;var x=g.constructor;if(x!==p.constructor)return!1;if(x===Object)return l(g,p,y);if(KAe(g))return t(g,p,y);if(t4!=null&&t4(g))return f(g,p,y);if(x===Date)return r(g,p,y);if(x===RegExp)return u(g,p,y);if(x===Map)return i(g,p,y);if(x===Set)return d(g,p,y);var w=YAe(g);return w===$Ae?r(g,p,y):w===HAe?u(g,p,y):w===UAe?i(g,p,y):w===zAe?d(g,p,y):w===VAe?typeof g.then!="function"&&typeof p.then!="function"&&l(g,p,y):w===GAe?h(g,p,y):w===BAe?n(g,p,y):w===FAe?l(g,p,y):w===LAe||w===WAe||w===qAe?c(g,p,y):!1}}function QAe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?Hh:EAe,areDatesEqual:AAe,areErrorsEqual:CAe,areFunctionsEqual:DAe,areMapsEqual:n?YP(ZP,Hh):ZP,areNumbersEqual:kAe,areObjectsEqual:n?Hh:OAe,arePrimitiveWrappersEqual:PAe,areRegExpsEqual:IAe,areSetsEqual:n?YP(e4,Hh):e4,areTypedArraysEqual:n?Hh:MAe,areUrlsEqual:RAe};if(r&&(a=r4({},a,r(a))),t){var i=Tg(a.areArraysEqual),o=Tg(a.areMapsEqual),l=Tg(a.areObjectsEqual),c=Tg(a.areSetsEqual);a=r4({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function JAe(e){return function(t,r,n,a,i,o,l){return e(t,r,l)}}function ZAe(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return r(c,u,{cache:h,equals:a,meta:m,strict:i})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return r(c,u,o)}}var eCe=dc();dc({strict:!0});dc({circular:!0});dc({circular:!0,strict:!0});dc({createInternalComparator:function(){return Iu}});dc({strict:!0,createInternalComparator:function(){return Iu}});dc({circular:!0,createInternalComparator:function(){return Iu}});dc({circular:!0,createInternalComparator:function(){return Iu},strict:!0});function dc(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=QAe(e),c=XAe(l),u=n?n(c):JAe(c);return ZAe({circular:r,comparator:c,createState:a,equals:u,strict:o})}function tCe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function n4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):tCe(a)};requestAnimationFrame(n)}function wS(e){"@babel/helpers - typeof";return wS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wS(e)}function rCe(e){return iCe(e)||sCe(e)||aCe(e)||nCe()}function nCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aCe(e,t){if(e){if(typeof e=="string")return a4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a4(e,t)}}function a4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iCe(e){if(Array.isArray(e))return e}function oCe(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=rCe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){n4(a.bind(null,u),c);return}a(c),n4(a.bind(null,u));return}wS(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Ep(e){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}function s4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function i4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s4(Object(r),!0).forEach(function(n){x7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x7(e,t,r){return t=lCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lCe(e){var t=cCe(e,"string");return Ep(t)==="symbol"?t:String(t)}function cCe(e,t){if(Ep(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ep(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uCe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},dCe=function(t){return t},fCe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Sm=function(t,r){return Object.keys(r).reduce(function(n,a){return i4(i4({},n),{},x7({},a,t(a,r[a])))},{})},o4=function(t,r,n){return t.map(function(a){return"".concat(fCe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function hCe(e,t){return gCe(e)||pCe(e,t)||y7(e,t)||mCe()}function mCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pCe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function gCe(e){if(Array.isArray(e))return e}function xCe(e){return wCe(e)||vCe(e)||y7(e)||yCe()}function yCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y7(e,t){if(e){if(typeof e=="string")return bS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bS(e,t)}}function vCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wCe(e){if(Array.isArray(e))return bS(e)}function bS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fy=1e-4,v7=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},w7=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},l4=function(t,r){return function(n){var a=v7(t,r);return w7(a,n)}},bCe=function(t,r){return function(n){var a=v7(t,r),i=[].concat(xCe(a.map(function(o,l){return o*l}).slice(1)),[0]);return w7(i,n)}},c4=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=hCe(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var f=l4(a,o),h=l4(i,l),m=bCe(a,o),g=function(b){return b>1?1:b<0?0:b},p=function(b){for(var x=b>1?1:b,w=x,v=0;v<8;++v){var j=f(w)-x,S=m(w);if(Math.abs(j-x)<Fy||S<Fy)return h(w);w=g(w-j/S)}return h(w)};return p.isStepper=!1,p},jCe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,f,h){var m=-(d-f)*n,g=h*i,p=h+(m-g)*l/1e3,y=h*l/1e3+d;return Math.abs(y-f)<Fy&&Math.abs(p)<Fy?[f,0]:[y,p]};return c.isStepper=!0,c.dt=l,c},NCe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return c4(a);case"spring":return jCe();default:if(a.split("(")[0]==="cubic-bezier")return c4(a)}return typeof a=="function"?a:null};function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}function u4(e){return TCe(e)||_Ce(e)||b7(e)||SCe()}function SCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Ce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function TCe(e){if(Array.isArray(e))return NS(e)}function d4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d4(Object(r),!0).forEach(function(n){jS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jS(e,t,r){return t=ECe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ECe(e){var t=ACe(e,"string");return Ap(t)==="symbol"?t:String(t)}function ACe(e,t){if(Ap(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ap(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CCe(e,t){return OCe(e)||kCe(e,t)||b7(e,t)||DCe()}function DCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b7(e,t){if(e){if(typeof e=="string")return NS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NS(e,t)}}function NS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kCe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function OCe(e){if(Array.isArray(e))return e}var Ly=function(t,r,n){return t+(r-t)*n},SS=function(t){var r=t.from,n=t.to;return r!==n},PCe=function e(t,r,n){var a=Sm(function(i,o){if(SS(o)){var l=t(o.from,o.to,o.velocity),c=CCe(l,2),u=c[0],d=c[1];return Vn(Vn({},o),{},{from:u,velocity:d})}return o},r);return n<1?Sm(function(i,o){return SS(o)?Vn(Vn({},o),{},{velocity:Ly(o.velocity,a[i].velocity,n),from:Ly(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const ICe=function(e,t,r,n,a){var i=uCe(e,t),o=i.reduce(function(y,b){return Vn(Vn({},y),{},jS({},b,[e[b],t[b]]))},{}),l=i.reduce(function(y,b){return Vn(Vn({},y),{},jS({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return Sm(function(b,x){return x.from},l)},m=function(){return!Object.values(l).filter(SS).length},g=function(b){u||(u=b);var x=b-u,w=x/r.dt;l=PCe(r,l,w),a(Vn(Vn(Vn({},e),t),h())),u=b,m()||(c=requestAnimationFrame(f))},p=function(b){d||(d=b);var x=(b-d)/n,w=Sm(function(j,S){return Ly.apply(void 0,u4(S).concat([r(x)]))},o);if(a(Vn(Vn(Vn({},e),t),w)),x<1)c=requestAnimationFrame(f);else{var v=Sm(function(j,S){return Ly.apply(void 0,u4(S).concat([r(1)]))},o);a(Vn(Vn(Vn({},e),t),v))}};return f=r.isStepper?g:p,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function kf(e){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kf(e)}var MCe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function RCe(e,t){if(e==null)return{};var r=FCe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function FCe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Pb(e){return UCe(e)||BCe(e)||$Ce(e)||LCe()}function LCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Ce(e,t){if(e){if(typeof e=="string")return _S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _S(e,t)}}function BCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function UCe(e){if(Array.isArray(e))return _S(e)}function _S(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f4(Object(r),!0).forEach(function(n){rm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rm(e,t,r){return t=j7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VCe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j7(n.key),n)}}function HCe(e,t,r){return t&&VCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function j7(e){var t=zCe(e,"string");return kf(t)==="symbol"?t:String(t)}function zCe(e,t){if(kf(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TS(e,t)}function TS(e,t){return TS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},TS(e,t)}function GCe(e){var t=KCe();return function(){var n=$y(e),a;if(t){var i=$y(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ES(this,a)}}function ES(e,t){if(t&&(kf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AS(e)}function AS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $y(e){return $y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$y(e)}var Ql=function(e){qCe(r,e);var t=GCe(r);function r(n,a){var i;WCe(this,r),i=t.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(AS(i)),i.changeStyle=i.changeStyle.bind(AS(i)),!l||m<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),ES(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},ES(i);i.state={style:c?rm({},c,u):u}}else i.state={style:{}};return i}return HCe(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(l){if(!o){var m={style:c?rm({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(m);return}if(!(eCe(a.to,d)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=g||u?f:a.to;if(this.state&&h){var y={style:c?rm({},c,p):p};(c&&h[c]!==p||!c&&h!==p)&&this.setState(y)}this.runAnimation(zs(zs({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,m=ICe(o,l,NCe(u),c,this.changeStyle),g=function(){i.stopJSAnimation=m()};this.manager.start([h,d,g,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(p,y,b){if(b===0)return p;var x=y.duration,w=y.easing,v=w===void 0?"ease":w,j=y.style,S=y.properties,_=y.onAnimationEnd,A=b>0?o[b-1]:y,C=S||Object.keys(j);if(typeof v=="function"||v==="spring")return[].concat(Pb(p),[i.runJSAnimation.bind(i,{from:A.style,to:j,duration:x,easing:v}),x]);var D=o4(C,x,v),k=zs(zs(zs({},A.style),j),{},{transition:D});return[].concat(Pb(p),[k,x,_]).filter(dCe)};return this.manager.start([c].concat(Pb(o.reduce(m,[d,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=oCe());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var p=l?rm({},l,c):c,y=o4(Object.keys(p),o,u);g.start([d,i,zs(zs({},p),{},{transition:y}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=RCe(a,MCe),u=N.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var f=function(m){var g=m.props,p=g.style,y=p===void 0?{}:p,b=g.className,x=N.cloneElement(m,zs(zs({},c),{},{style:zs(zs({},y),d),className:b}));return x};return u===1?f(N.Children.only(i)):pe.createElement("div",null,N.Children.map(i,function(h){return f(h)}))}}]),r}(N.PureComponent);Ql.displayName="Animate";Ql.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ql.propTypes={from:pr.oneOfType([pr.object,pr.string]),to:pr.oneOfType([pr.object,pr.string]),attributeName:pr.string,duration:pr.number,begin:pr.number,easing:pr.oneOfType([pr.string,pr.func]),steps:pr.arrayOf(pr.shape({duration:pr.number.isRequired,style:pr.object.isRequired,easing:pr.oneOfType([pr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),pr.func]),properties:pr.arrayOf("string"),onAnimationEnd:pr.func})),children:pr.oneOfType([pr.node,pr.func]),isActive:pr.bool,canBegin:pr.bool,onAnimationEnd:pr.func,shouldReAnimate:pr.bool,onAnimationStart:pr.func,onAnimationReStart:pr.func};function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},By.apply(this,arguments)}function YCe(e,t){return ZCe(e)||JCe(e,t)||QCe(e,t)||XCe()}function XCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QCe(e,t){if(e){if(typeof e=="string")return h4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h4(e,t)}}function h4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function JCe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function ZCe(e){if(Array.isArray(e))return e}function m4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function p4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m4(Object(r),!0).forEach(function(n){eDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eDe(e,t,r){return t=tDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tDe(e){var t=rDe(e,"string");return Cp(t)=="symbol"?t:t+""}function rDe(e,t){if(Cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g4=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=i[h]>o?o:i[h];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var g=Math.min(o,i);d="M ".concat(t,",").concat(r+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(r,`
            L `).concat(t+n-c*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*g,`
            L `).concat(t+n,",").concat(r+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+n-c*g,",").concat(r+a,`
            L `).concat(t+c*g,",").concat(r+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*g," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},nDe=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return n>=u&&n<=d&&a>=f&&a<=h}return!1},aDe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},TE=function(t){var r=p4(p4({},aDe),t),n=N.useRef(),a=N.useState(-1),i=YCe(a,2),o=i[0],l=i[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var v=n.current.getTotalLength();v&&l(v)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,m=r.className,g=r.animationEasing,p=r.animationDuration,y=r.animationBegin,b=r.isAnimationActive,x=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var w=sr("recharts-rectangle",m);return x?pe.createElement(Ql,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:p,animationEasing:g,isActive:x},function(v){var j=v.width,S=v.height,_=v.x,A=v.y;return pe.createElement(Ql,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:p,isActive:b,easing:g},pe.createElement("path",By({},fr(r,!0),{className:w,d:g4(_,A,j,S,h),ref:n})))}):pe.createElement("path",By({},fr(r,!0),{className:w,d:g4(c,u,d,f,h)}))};function CS(){return CS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CS.apply(this,arguments)}var N7=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=sr("recharts-dot",i);return r===+r&&n===+n&&a===+a?N.createElement("circle",CS({},fr(t,!1),sy(t),{className:o,cx:r,cy:n,r:a})):null};function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}var sDe=["x","y","top","left","width","height","className"];function DS(){return DS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DS.apply(this,arguments)}function x4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iDe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x4(Object(r),!0).forEach(function(n){oDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oDe(e,t,r){return t=lDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lDe(e){var t=cDe(e,"string");return Dp(t)=="symbol"?t:t+""}function cDe(e,t){if(Dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uDe(e,t){if(e==null)return{};var r=dDe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dDe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var fDe=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},hDe=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,m=h===void 0?0:h,g=t.className,p=uDe(t,sDe),y=iDe({x:n,y:i,top:l,left:u,width:f,height:m},p);return!nt(n)||!nt(i)||!nt(f)||!nt(m)||!nt(l)||!nt(u)?null:pe.createElement("path",DS({},fr(y,!0),{className:sr("recharts-cross",g),d:fDe(n,i,f,m,l,u)}))},mDe=FB,pDe=mDe(Object.getPrototypeOf,Object),gDe=pDe,xDe=Ho,yDe=gDe,vDe=zo,wDe="[object Object]",bDe=Function.prototype,jDe=Object.prototype,S7=bDe.toString,NDe=jDe.hasOwnProperty,SDe=S7.call(Object);function _De(e){if(!vDe(e)||xDe(e)!=wDe)return!1;var t=yDe(e);if(t===null)return!0;var r=NDe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&S7.call(r)==SDe}var TDe=_De;const EDe=Cr(TDe);var ADe=Ho,CDe=zo,DDe="[object Boolean]";function kDe(e){return e===!0||e===!1||CDe(e)&&ADe(e)==DDe}var ODe=kDe;const PDe=Cr(ODe);function kp(e){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(e)}function Uy(){return Uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uy.apply(this,arguments)}function IDe(e,t){return LDe(e)||FDe(e,t)||RDe(e,t)||MDe()}function MDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RDe(e,t){if(e){if(typeof e=="string")return y4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y4(e,t)}}function y4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function FDe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function LDe(e){if(Array.isArray(e))return e}function v4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function w4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v4(Object(r),!0).forEach(function(n){$De(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $De(e,t,r){return t=BDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BDe(e){var t=UDe(e,"string");return kp(t)=="symbol"?t:t+""}function UDe(e,t){if(kp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var b4=function(t,r,n,a,i){var o=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},WDe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},VDe=function(t){var r=w4(w4({},WDe),t),n=N.useRef(),a=N.useState(-1),i=IDe(a,2),o=i[0],l=i[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,m=r.className,g=r.animationEasing,p=r.animationDuration,y=r.animationBegin,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var x=sr("recharts-trapezoid",m);return b?pe.createElement(Ql,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:p,animationEasing:g,isActive:b},function(w){var v=w.upperWidth,j=w.lowerWidth,S=w.height,_=w.x,A=w.y;return pe.createElement(Ql,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:p,easing:g},pe.createElement("path",Uy({},fr(r,!0),{className:x,d:b4(_,A,v,j,S),ref:n})))}):pe.createElement("g",null,pe.createElement("path",Uy({},fr(r,!0),{className:x,d:b4(c,u,d,f,h)})))},HDe=["option","shapeType","propTransformer","activeClassName","isActive"];function Op(e){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}function zDe(e,t){if(e==null)return{};var r=qDe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qDe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function j4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j4(Object(r),!0).forEach(function(n){GDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GDe(e,t,r){return t=KDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KDe(e){var t=YDe(e,"string");return Op(t)=="symbol"?t:t+""}function YDe(e,t){if(Op(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XDe(e,t){return Wy(Wy({},t),e)}function QDe(e,t){return e==="symbols"}function N4(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return pe.createElement(TE,r);case"trapezoid":return pe.createElement(VDe,r);case"sector":return pe.createElement(f7,r);case"symbols":if(QDe(t))return pe.createElement(VT,r);break;default:return null}}function JDe(e){return N.isValidElement(e)?e.props:e}function ZDe(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?XDe:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=zDe(e,HDe),u;if(N.isValidElement(t))u=N.cloneElement(t,Wy(Wy({},c),JDe(t)));else if(Yt(t))u=t(c);else if(EDe(t)&&!PDe(t)){var d=a(t,c);u=pe.createElement(N4,{shapeType:r,elementProps:d})}else{var f=c;u=pe.createElement(N4,{shapeType:r,elementProps:f})}return l?pe.createElement(Rn,{className:o},u):u}function q1(e,t){return t!=null&&"trapezoids"in e.props}function G1(e,t){return t!=null&&"sectors"in e.props}function Pp(e,t){return t!=null&&"points"in e.props}function eke(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function tke(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function rke(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function nke(e,t){var r;return q1(e,t)?r=eke:G1(e,t)?r=tke:Pp(e,t)&&(r=rke),r}function ake(e,t){var r;return q1(e,t)?r="trapezoids":G1(e,t)?r="sectors":Pp(e,t)&&(r="points"),r}function ske(e,t){if(q1(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(G1(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Pp(e,t)?t.payload:{}}function ike(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=ake(r,t),i=ske(r,t),o=n.filter(function(c,u){var d=jE(i,c),f=r.props[a].filter(function(g){var p=nke(r,t);return p(g,t)}),h=r.props[a].indexOf(f[f.length-1]),m=u===h;return d&&m}),l=n.indexOf(o[o.length-1]);return l}var oke=Math.ceil,lke=Math.max;function cke(e,t,r,n){for(var a=-1,i=lke(oke((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var uke=cke,dke=r9,S4=1/0,fke=17976931348623157e292;function hke(e){if(!e)return e===0?e:0;if(e=dke(e),e===S4||e===-S4){var t=e<0?-1:1;return t*fke}return e===e?e:0}var _7=hke,mke=uke,pke=I1,Ib=_7;function gke(e){return function(t,r,n){return n&&typeof n!="number"&&pke(t,r,n)&&(r=n=void 0),t=Ib(t),r===void 0?(r=t,t=0):r=Ib(r),n=n===void 0?t<r?1:-1:Ib(n),mke(t,r,n,e)}}var xke=gke,yke=xke,vke=yke(),wke=vke;const Vy=Cr(wke);function Ip(e){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}function _4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function T4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_4(Object(r),!0).forEach(function(n){T7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T7(e,t,r){return t=bke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bke(e){var t=jke(e,"string");return Ip(t)=="symbol"?t:t+""}function jke(e,t){if(Ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nke=["Webkit","Moz","O","ms"],Ske=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=Nke.reduce(function(i,o){return T4(T4({},i),{},T7({},o+n,r))},{});return a[t]=r,a};function Of(e){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Of(e)}function Hy(){return Hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hy.apply(this,arguments)}function E4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E4(Object(r),!0).forEach(function(n){Ya(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A7(n.key),n)}}function Tke(e,t,r){return t&&A4(e.prototype,t),r&&A4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eke(e,t,r){return t=zy(t),Ake(e,E7()?Reflect.construct(t,r||[],zy(e).constructor):t.apply(e,r))}function Ake(e,t){if(t&&(Of(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cke(e)}function Cke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E7=function(){return!!e})()}function zy(e){return zy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zy(e)}function Dke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kS(e,t)}function kS(e,t){return kS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},kS(e,t)}function Ya(e,t,r){return t=A7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A7(e){var t=kke(e,"string");return Of(t)=="symbol"?t:t+""}function kke(e,t){if(Of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Oke=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=jm().domain(Vy(0,c)).range([i,i+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},C4=function(t){return t.changedTouches&&!!t.changedTouches.length},Pf=function(e){function t(r){var n;return _ke(this,t),n=Eke(this,t,[r]),Ya(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Ya(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Ya(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Ya(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ya(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ya(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ya(n,"handleSlideDragStart",function(a){var i=C4(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Dke(t,e),Tke(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),h=Math.max(a,i),m=t.getIndexInRange(o,f),g=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=Ji(i[n],l,n);return Yt(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,g=c.onChange,p=n.pageX-i;p>0?p=Math.min(p,u+d-f-l,u+d-f-o):p<0&&(p=Math.max(p,u-o,u-l));var y=this.getIndex({startX:o+p,endX:l+p});(y.startIndex!==h||y.endIndex!==m)&&g&&g(y),this.setState({startX:o+p,endX:l+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=C4(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,g=d.onChange,p=d.gap,y=d.data,b={startX:this.state.startX,endX:this.state.endX},x=n.pageX-i;x>0?x=Math.min(x,f+h-m-u):x<0&&(x=Math.max(x,f-u)),b[o]=u+x;var w=this.getIndex(b),v=w.startIndex,j=w.endIndex,S=function(){var A=y.length-1;return o==="startX"&&(l>c?v%p===0:j%p===0)||l<c&&j===A||o==="endX"&&(l>c?j%p===0:v%p===0)||l>c&&j===A};this.setState(Ya(Ya({},o,u+x),"brushMoveStartX",n.pageX),function(){g&&S()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(Ya({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return pe.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=N.Children.only(u);return f?pe.cloneElement(f,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,g=c.data,p=c.startIndex,y=c.endIndex,b=Math.max(n,this.props.x),x=Mb(Mb({},fr(this.props,!1)),{},{x:b,y:u,width:d,height:f}),w=m||"Min value: ".concat((i=g[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=g[y])===null||o===void 0?void 0:o.name);return pe.createElement(Rn,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,x))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return pe.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,m=5,g={pointerEvents:"none",fill:u};return pe.createElement(Rn,{className:"recharts-brush-texts"},pe.createElement(wy,Hy({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:o+l/2},g),this.getTextOfTick(a)),pe.createElement(wy,Hy({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:o+l/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,m=h.startX,g=h.endX,p=h.isTextActive,y=h.isSlideMoving,b=h.isTravellerMoving,x=h.isTravellerFocused;if(!a||!a.length||!nt(l)||!nt(c)||!nt(u)||!nt(d)||u<=0||d<=0)return null;var w=sr("recharts-brush",i),v=pe.Children.count(o)===1,j=Ske("userSelect","none");return pe.createElement(Rn,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),v&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(p||y||b||x||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return pe.createElement(pe.Fragment,null,pe.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),pe.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),pe.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return pe.isValidElement(n)?i=pe.cloneElement(n,a):Yt(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return Mb({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?Oke({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(N.PureComponent);Ya(Pf,"displayName","Brush");Ya(Pf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Pke=XT;function Ike(e,t){var r;return Pke(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var Mke=Ike,Rke=CB,Fke=lc,Lke=Mke,$ke=qa,Bke=I1;function Uke(e,t,r){var n=$ke(e)?Rke:Lke;return r&&Bke(e,t,r)&&(t=void 0),n(e,Fke(t))}var Wke=Uke;const Vke=Cr(Wke);var Gi=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},D4=QB;function Hke(e,t,r){t=="__proto__"&&D4?D4(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var zke=Hke,qke=zke,Gke=YB,Kke=lc;function Yke(e,t){var r={};return t=Kke(t),Gke(e,function(n,a,i){qke(r,a,t(n,a,i))}),r}var Xke=Yke;const Qke=Cr(Xke);function Jke(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var Zke=Jke,eOe=XT;function tOe(e,t){var r=!0;return eOe(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var rOe=tOe,nOe=Zke,aOe=rOe,sOe=lc,iOe=qa,oOe=I1;function lOe(e,t,r){var n=iOe(e)?nOe:aOe;return r&&oOe(e,t,r)&&(t=void 0),n(e,sOe(t))}var cOe=lOe;const C7=Cr(cOe);var uOe=["x","y"];function Mp(e){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(e)}function OS(){return OS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OS.apply(this,arguments)}function k4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k4(Object(r),!0).forEach(function(n){dOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dOe(e,t,r){return t=fOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fOe(e){var t=hOe(e,"string");return Mp(t)=="symbol"?t:t+""}function hOe(e,t){if(Mp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mOe(e,t){if(e==null)return{};var r=pOe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pOe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function gOe(e,t){var r=e.x,n=e.y,a=mOe(e,uOe),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return zh(zh(zh(zh(zh({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function O4(e){return pe.createElement(ZDe,OS({shapeType:"rectangle",propTransformer:gOe,activeClassName:"recharts-active-bar"},e))}var xOe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=nt(n)||Ime(n);return i?t(n,a):(i||gu(),r)}},yOe=["value","background"],D7;function If(e){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(e)}function vOe(e,t){if(e==null)return{};var r=wOe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wOe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qy(){return qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qy.apply(this,arguments)}function P4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P4(Object(r),!0).forEach(function(n){Sl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O7(n.key),n)}}function jOe(e,t,r){return t&&I4(e.prototype,t),r&&I4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NOe(e,t,r){return t=Gy(t),SOe(e,k7()?Reflect.construct(t,r||[],Gy(e).constructor):t.apply(e,r))}function SOe(e,t){if(t&&(If(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Oe(e)}function _Oe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k7=function(){return!!e})()}function Gy(e){return Gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gy(e)}function TOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PS(e,t)}function PS(e,t){return PS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},PS(e,t)}function Sl(e,t,r){return t=O7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O7(e){var t=EOe(e,"string");return If(t)=="symbol"?t:t+""}function EOe(e,t){if(If(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(If(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Mu=function(e){function t(){var r;bOe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=NOe(this,t,[].concat(a)),Sl(r,"state",{isAnimationFinished:!1}),Sl(r,"id",E1("recharts-bar-")),Sl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Sl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return TOe(t,e),jOe(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=fr(this.props,!1);return n&&n.map(function(f,h){var m=h===c,g=m?u:o,p=cn(cn(cn({},d),f),{},{isActive:m,option:g,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return pe.createElement(Rn,qy({className:"recharts-bar-rectangle"},iy(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),pe.createElement(O4,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return pe.createElement(Ql,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,p=i.map(function(y,b){var x=h&&h[b];if(x){var w=rd(x.x,y.x),v=rd(x.y,y.y),j=rd(x.width,y.width),S=rd(x.height,y.height);return cn(cn({},y),{},{x:w(g),y:v(g),width:j(g),height:S(g)})}if(o==="horizontal"){var _=rd(0,y.height),A=_(g);return cn(cn({},y),{},{y:y.y+y.height-A,height:A})}var C=rd(0,y.width),D=C(g);return cn(cn({},y),{},{width:D})});return pe.createElement(Rn,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!jE(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=fr(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=vOe(u,yOe);if(!f)return null;var m=cn(cn(cn(cn(cn({},h),{},{fill:"#eee"},f),c),iy(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return pe.createElement(O4,qy({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=fi(d,z1);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(y,b){var x=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:x,errorVal:Ji(y,b)}},g={clipPath:n?"url(#clipPath-".concat(a,")"):null};return pe.createElement(Rn,g,f.map(function(p){return pe.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,m=n.isAnimationActive,g=n.background,p=n.id;if(a||!i||!i.length)return null;var y=this.state.isAnimationFinished,b=sr("recharts-bar",o),x=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,v=x||w,j=hr(p)?this.id:p;return pe.createElement(Rn,{className:b},x||w?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(j)},pe.createElement("rect",{x:x?u:u-f/2,y:w?d:d-h/2,width:x?f:f*2,height:w?h:h*2}))):null,pe.createElement(Rn,{className:"recharts-bar-rectangles",clipPath:v?"url(#clipPath-".concat(j,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(v,j),(!m||y)&&Yc.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(N.PureComponent);D7=Mu;Sl(Mu,"displayName","Bar");Sl(Mu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!T0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Sl(Mu,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=nEe(n,r);if(!m)return null;var g=t.layout,p=r.type.defaultProps,y=p!==void 0?cn(cn({},p),r.props):r.props,b=y.dataKey,x=y.children,w=y.minPointSize,v=g==="horizontal"?o:i,j=u?v.scale.domain():null,S=dEe({numericAxis:v}),_=fi(x,ZT),A=f.map(function(C,D){var k,O,V,G,Y,W;u?k=aEe(u[d+D],j):(k=Ji(C,b),Array.isArray(k)||(k=[S,k]));var P=xOe(w,D7.defaultProps.minPointSize)(k[1],D);if(g==="horizontal"){var E,R=[o.scale(k[0]),o.scale(k[1])],I=R[0],ee=R[1];O=OP({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:C,index:D}),V=(E=ee??I)!==null&&E!==void 0?E:void 0,G=m.size;var L=I-ee;if(Y=Number.isNaN(L)?0:L,W={x:O,y:o.y,width:G,height:o.height},Math.abs(P)>0&&Math.abs(Y)<Math.abs(P)){var q=oi(Y||P)*(Math.abs(P)-Math.abs(Y));V-=q,Y+=q}}else{var H=[i.scale(k[0]),i.scale(k[1])],B=H[0],de=H[1];if(O=B,V=OP({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:C,index:D}),G=de-B,Y=m.size,W={x:i.x,y:V,width:i.width,height:Y},Math.abs(P)>0&&Math.abs(G)<Math.abs(P)){var ce=oi(G||P)*(Math.abs(P)-Math.abs(G));G+=ce}}return cn(cn(cn({},C),{},{x:O,y:V,width:G,height:Y,value:u?k:k[1],payload:C,background:W},_&&_[D]&&_[D].props),{},{tooltipPayload:[c7(r,C)],tooltipPosition:{x:O+G/2,y:V+Y/2}})});return cn({data:A,layout:g},h)});function Rp(e){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(e)}function AOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P7(n.key),n)}}function COe(e,t,r){return t&&M4(e.prototype,t),r&&M4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function R4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Js(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R4(Object(r),!0).forEach(function(n){K1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K1(e,t,r){return t=P7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P7(e){var t=DOe(e,"string");return Rp(t)=="symbol"?t:t+""}function DOe(e,t){if(Rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kOe=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!Ja(u,Mu);return d.reduce(function(m,g){var p=r[g],y=p.orientation,b=p.domain,x=p.padding,w=x===void 0?{}:x,v=p.mirror,j=p.reversed,S="".concat(y).concat(v?"Mirror":""),_,A,C,D,k;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var O=b[1]-b[0],V=1/0,G=p.categoricalDomain.sort(Fme);if(G.forEach(function(H,B){B>0&&(V=Math.min((H||0)-(G[B-1]||0),V))}),Number.isFinite(V)){var Y=V/O,W=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(_=Y*W/2),p.padding==="no-gap"){var P=mu(t.barCategoryGap,Y*W),E=Y*W/2;_=E-P-(E-P)/W*P}}}a==="xAxis"?A=[n.left+(w.left||0)+(_||0),n.left+n.width-(w.right||0)-(_||0)]:a==="yAxis"?A=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(_||0),n.top+n.height-(w.bottom||0)-(_||0)]:A=p.range,j&&(A=[A[1],A[0]]);var R=tEe(p,i,h),I=R.scale,ee=R.realScaleType;I.domain(b).range(A),rEe(I);var L=uEe(I,Js(Js({},p),{},{realScaleType:ee}));a==="xAxis"?(k=y==="top"&&!v||y==="bottom"&&v,C=n.left,D=f[S]-k*p.height):a==="yAxis"&&(k=y==="left"&&!v||y==="right"&&v,C=f[S]-k*p.width,D=n.top);var q=Js(Js(Js({},p),L),{},{realScaleType:ee,x:C,y:D,scale:I,width:a==="xAxis"?n.width:p.width,height:a==="yAxis"?n.height:p.height});return q.bandSize=Iy(q,L),!p.hide&&a==="xAxis"?f[S]+=(k?-1:1)*q.height:p.hide||(f[S]+=(k?-1:1)*q.width),Js(Js({},m),{},K1({},g,q))},{})},I7=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},OOe=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return I7({x:r,y:n},{x:a,y:i})},M7=function(){function e(t){AOe(this,e),this.scale=t}return COe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();K1(M7,"EPS",1e-4);var EE=function(t){var r=Object.keys(t).reduce(function(n,a){return Js(Js({},n),{},K1({},a,M7.create(t[a])))},{});return Js(Js({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return Qke(a,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return C7(a,function(i,o){return r[o].isInRange(i)})}})};function POe(e){return(e%180+180)%180}var IOe=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=POe(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},MOe=lc,ROe=_0,FOe=O1;function LOe(e){return function(t,r,n){var a=Object(t);if(!ROe(t)){var i=MOe(r);t=FOe(t),r=function(l){return i(a[l],l,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var $Oe=LOe,BOe=_7;function UOe(e){var t=BOe(e),r=t%1;return t===t?r?t-r:t:0}var WOe=UOe,VOe=VB,HOe=lc,zOe=WOe,qOe=Math.max;function GOe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:zOe(r);return a<0&&(a=qOe(n+a,0)),VOe(e,HOe(t),a)}var KOe=GOe,YOe=$Oe,XOe=KOe,QOe=YOe(XOe),JOe=QOe;const ZOe=Cr(JOe);var ePe=Bhe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),AE=N.createContext(void 0),CE=N.createContext(void 0),R7=N.createContext(void 0),F7=N.createContext({}),L7=N.createContext(void 0),$7=N.createContext(0),B7=N.createContext(0),F4=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=ePe(i);return pe.createElement(AE.Provider,{value:n},pe.createElement(CE.Provider,{value:a},pe.createElement(F7.Provider,{value:i},pe.createElement(R7.Provider,{value:d},pe.createElement(L7.Provider,{value:o},pe.createElement($7.Provider,{value:u},pe.createElement(B7.Provider,{value:c},l)))))))},tPe=function(){return N.useContext(L7)},U7=function(t){var r=N.useContext(AE);r==null&&gu();var n=r[t];return n==null&&gu(),n},rPe=function(){var t=N.useContext(AE);return il(t)},nPe=function(){var t=N.useContext(CE),r=ZOe(t,function(n){return C7(n.domain,Number.isFinite)});return r||il(t)},W7=function(t){var r=N.useContext(CE);r==null&&gu();var n=r[t];return n==null&&gu(),n},aPe=function(){var t=N.useContext(R7);return t},sPe=function(){return N.useContext(F7)},DE=function(){return N.useContext(B7)},kE=function(){return N.useContext($7)};function Mf(e){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mf(e)}function iPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oPe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,H7(n.key),n)}}function lPe(e,t,r){return t&&oPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cPe(e,t,r){return t=Ky(t),uPe(e,V7()?Reflect.construct(t,r||[],Ky(e).constructor):t.apply(e,r))}function uPe(e,t){if(t&&(Mf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dPe(e)}function dPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V7=function(){return!!e})()}function Ky(e){return Ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ky(e)}function fPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IS(e,t)}function IS(e,t){return IS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},IS(e,t)}function L4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L4(Object(r),!0).forEach(function(n){OE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OE(e,t,r){return t=H7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H7(e){var t=hPe(e,"string");return Mf(t)=="symbol"?t:t+""}function hPe(e,t){if(Mf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function mPe(e,t){return yPe(e)||xPe(e,t)||gPe(e,t)||pPe()}function pPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gPe(e,t){if(e){if(typeof e=="string")return B4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B4(e,t)}}function B4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xPe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function yPe(e){if(Array.isArray(e))return e}function MS(){return MS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MS.apply(this,arguments)}var vPe=function(t,r){var n;return pe.isValidElement(t)?n=pe.cloneElement(t,r):Yt(t)?n=t(r):n=pe.createElement("line",MS({},r,{className:"recharts-reference-line-line"})),n},wPe=function(t,r,n,a,i,o,l,c,u){var d=i.x,f=i.y,h=i.width,m=i.height;if(n){var g=u.y,p=t.y.apply(g,{position:o});if(Gi(u,"discard")&&!t.y.isInRange(p))return null;var y=[{x:d+h,y:p},{x:d,y:p}];return c==="left"?y.reverse():y}if(r){var b=u.x,x=t.x.apply(b,{position:o});if(Gi(u,"discard")&&!t.x.isInRange(x))return null;var w=[{x,y:f+m},{x,y:f}];return l==="top"?w.reverse():w}if(a){var v=u.segment,j=v.map(function(S){return t.apply(S,{position:o})});return Gi(u,"discard")&&Vke(j,function(S){return!t.isInRange(S)})?null:j}return null};function bPe(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=tPe(),d=U7(a),f=W7(i),h=aPe();if(!u||!h)return null;Eo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=EE({x:d.scale,y:f.scale}),g=Dn(t),p=Dn(r),y=n&&n.length===2,b=wPe(m,g,p,y,h,e.position,d.orientation,f.orientation,e);if(!b)return null;var x=mPe(b,2),w=x[0],v=w.x,j=w.y,S=x[1],_=S.x,A=S.y,C=Gi(e,"hidden")?"url(#".concat(u,")"):void 0,D=$4($4({clipPath:C},fr(e,!0)),{},{x1:v,y1:j,x2:_,y2:A});return pe.createElement(Rn,{className:sr("recharts-reference-line",l)},vPe(o,D),la.renderCallByParent(e,OOe({x1:v,y1:j,x2:_,y2:A})))}var PE=function(e){function t(){return iPe(this,t),cPe(this,t,arguments)}return fPe(t,e),lPe(t,[{key:"render",value:function(){return pe.createElement(bPe,this.props)}}])}(pe.Component);OE(PE,"displayName","ReferenceLine");OE(PE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function RS(){return RS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RS.apply(this,arguments)}function Rf(e){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rf(e)}function U4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function W4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U4(Object(r),!0).forEach(function(n){Y1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NPe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q7(n.key),n)}}function SPe(e,t,r){return t&&NPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _Pe(e,t,r){return t=Yy(t),TPe(e,z7()?Reflect.construct(t,r||[],Yy(e).constructor):t.apply(e,r))}function TPe(e,t){if(t&&(Rf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EPe(e)}function EPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z7=function(){return!!e})()}function Yy(e){return Yy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yy(e)}function APe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FS(e,t)}function FS(e,t){return FS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},FS(e,t)}function Y1(e,t,r){return t=q7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q7(e){var t=CPe(e,"string");return Rf(t)=="symbol"?t:t+""}function CPe(e,t){if(Rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var DPe=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=EE({x:a.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Gi(t,"discard")&&!o.isInRange(l)?null:l},X1=function(e){function t(){return jPe(this,t),_Pe(this,t,arguments)}return APe(t,e),SPe(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=Dn(a),d=Dn(i);if(Eo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=DPe(this.props);if(!f)return null;var h=f.x,m=f.y,g=this.props,p=g.shape,y=g.className,b=Gi(this.props,"hidden")?"url(#".concat(c,")"):void 0,x=W4(W4({clipPath:b},fr(this.props,!0)),{},{cx:h,cy:m});return pe.createElement(Rn,{className:sr("recharts-reference-dot",y)},t.renderDot(p,x),la.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(pe.Component);Y1(X1,"displayName","ReferenceDot");Y1(X1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Y1(X1,"renderDot",function(e,t){var r;return pe.isValidElement(e)?r=pe.cloneElement(e,t):Yt(e)?r=e(t):r=pe.createElement(N7,RS({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function LS(){return LS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LS.apply(this,arguments)}function Ff(e){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ff(e)}function V4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function H4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V4(Object(r),!0).forEach(function(n){Q1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OPe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K7(n.key),n)}}function PPe(e,t,r){return t&&OPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function IPe(e,t,r){return t=Xy(t),MPe(e,G7()?Reflect.construct(t,r||[],Xy(e).constructor):t.apply(e,r))}function MPe(e,t){if(t&&(Ff(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RPe(e)}function RPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G7=function(){return!!e})()}function Xy(e){return Xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xy(e)}function FPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$S(e,t)}function $S(e,t){return $S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$S(e,t)}function Q1(e,t,r){return t=K7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K7(e){var t=LPe(e,"string");return Ff(t)=="symbol"?t:t+""}function LPe(e,t){if(Ff(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $Pe=function(t,r,n,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=EE({x:d.scale,y:f.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Gi(i,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:I7(m,g)},J1=function(e){function t(){return kPe(this,t),IPe(this,t,arguments)}return FPe(t,e),PPe(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Eo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Dn(a),h=Dn(i),m=Dn(o),g=Dn(l),p=this.props.shape;if(!f&&!h&&!m&&!g&&!p)return null;var y=$Pe(f,h,m,g,this.props);if(!y&&!p)return null;var b=Gi(this.props,"hidden")?"url(#".concat(d,")"):void 0;return pe.createElement(Rn,{className:sr("recharts-reference-area",c)},t.renderRect(p,H4(H4({clipPath:b},fr(this.props,!0)),y)),la.renderCallByParent(this.props,y))}}])}(pe.Component);Q1(J1,"displayName","ReferenceArea");Q1(J1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Q1(J1,"renderRect",function(e,t){var r;return pe.isValidElement(e)?r=pe.cloneElement(e,t):Yt(e)?r=e(t):r=pe.createElement(TE,LS({},t,{className:"recharts-reference-area-rect"})),r});function Y7(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function BPe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return IOe(n,r)}function UPe(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function Qy(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function WPe(e,t){return Y7(e,t+1)}function VPe(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:Y7(n,u)};var p=c,y,b=function(){return y===void 0&&(y=r(g,p)),y},x=g.coordinate,w=c===0||Qy(e,x,b,d,l);w||(c=0,d=o,u+=1),w&&(d=x+e*(b()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function Fp(e){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(e)}function z4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z4(Object(r),!0).forEach(function(n){HPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HPe(e,t,r){return t=zPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zPe(e){var t=qPe(e,"string");return Fp(t)=="symbol"?t:t+""}function qPe(e,t){if(Fp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GPe(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(h){var m=i[h],g,p=function(){return g===void 0&&(g=r(m,h)),g};if(h===o-1){var y=e*(m.coordinate+e*p()/2-c);i[h]=m=sa(sa({},m),{},{tickCoord:y>0?m.coordinate-y*e:m.coordinate})}else i[h]=m=sa(sa({},m),{},{tickCoord:m.coordinate});var b=Qy(e,m.tickCoord,p,l,c);b&&(c=m.tickCoord-e*(p()/2+a),i[h]=sa(sa({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function KPe(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=sa(sa({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=Qy(e,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=sa(sa({},d),{},{isShow:!0}))}for(var g=i?l-1:l,p=function(x){var w=o[x],v,j=function(){return v===void 0&&(v=r(w,x)),v};if(x===0){var S=e*(w.coordinate-e*j()/2-c);o[x]=w=sa(sa({},w),{},{tickCoord:S<0?w.coordinate-S*e:w.coordinate})}else o[x]=w=sa(sa({},w),{},{tickCoord:w.coordinate});var _=Qy(e,w.tickCoord,j,c,u);_&&(c=w.tickCoord+e*(j()/2+a),o[x]=sa(sa({},w),{},{isShow:!0}))},y=0;y<g;y++)p(y);return o}function IE(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(nt(c)||T0.isSsr)return WPe(a,typeof c=="number"&&nt(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",g=d&&m==="width"?bm(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=function(w,v){var j=Yt(u)?u(w.value,v):w.value;return m==="width"?BPe(bm(j,{fontSize:t,letterSpacing:r}),g,f):bm(j,{fontSize:t,letterSpacing:r})[m]},y=a.length>=2?oi(a[1].coordinate-a[0].coordinate):1,b=UPe(i,y,m);return c==="equidistantPreserveStart"?VPe(y,b,p,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=KPe(y,b,p,a,o,c==="preserveStartEnd"):h=GPe(y,b,p,a,o),h.filter(function(x){return x.isShow}))}var YPe=["viewBox"],XPe=["viewBox"],QPe=["ticks"];function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}function jd(){return jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jd.apply(this,arguments)}function q4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q4(Object(r),!0).forEach(function(n){ME(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rb(e,t){if(e==null)return{};var r=JPe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function JPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ZPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q7(n.key),n)}}function e4e(e,t,r){return t&&G4(e.prototype,t),r&&G4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function t4e(e,t,r){return t=Jy(t),r4e(e,X7()?Reflect.construct(t,r||[],Jy(e).constructor):t.apply(e,r))}function r4e(e,t){if(t&&(Lf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n4e(e)}function n4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X7=function(){return!!e})()}function Jy(e){return Jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jy(e)}function a4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BS(e,t)}function BS(e,t){return BS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},BS(e,t)}function ME(e,t,r){return t=Q7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q7(e){var t=s4e(e,"string");return Lf(t)=="symbol"?t:t+""}function s4e(e,t){if(Lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vh=function(e){function t(r){var n;return ZPe(this,t),n=t4e(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return a4e(t,e),e4e(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=Rb(n,YPe),l=this.props,c=l.viewBox,u=Rb(l,XPe);return!Ld(i,c)||!Ld(o,u)||!Ld(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,m,g,p,y,b,x,w=f?-1:1,v=n.tickSize||d,j=nt(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=g=n.coordinate,y=o+ +!f*c,p=y-w*v,x=p-w*h,b=j;break;case"left":p=y=n.coordinate,g=i+ +!f*l,m=g-w*v,b=m-w*h,x=j;break;case"right":p=y=n.coordinate,g=i+ +f*l,m=g+w*v,b=m+w*h,x=j;break;default:m=g=n.coordinate,y=o+ +f*c,p=y+w*v,x=p+w*h,b=j;break}return{line:{x1:m,y1:p,x2:g,y2:y},tick:{x:b,y:x}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=bn(bn(bn({},fr(this.props,!1)),fr(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=bn(bn({},f),{},{x1:a,y1:i+h*l,x2:a+o,y2:i+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=bn(bn({},f),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+l})}return pe.createElement("line",jd({},f,{className:sr("recharts-cartesian-axis-line",Ps(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,m=IE(bn(bn({},this.props),{},{ticks:n}),a,i),g=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),y=fr(this.props,!1),b=fr(d,!1),x=bn(bn({},y),{},{fill:"none"},fr(c,!1)),w=m.map(function(v,j){var S=o.getTickLineCoord(v),_=S.line,A=S.tick,C=bn(bn(bn(bn({textAnchor:g,verticalAnchor:p},y),{},{stroke:"none",fill:u},b),A),{},{index:j,payload:v,visibleTicksCount:m.length,tickFormatter:f});return pe.createElement(Rn,jd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(v.value,"-").concat(v.coordinate,"-").concat(v.tickCoord)},iy(o.props,v,j)),c&&pe.createElement("line",jd({},x,_,{className:sr("recharts-cartesian-axis-tick-line",Ps(c,"className"))})),d&&t.renderTickItem(d,C,"".concat(Yt(f)?f(v.value,j):v.value).concat(h||"")))});return pe.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,m=Rb(f,QPe),g=h;return Yt(c)&&(g=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:pe.createElement(Rn,{className:sr("recharts-cartesian-axis",u),ref:function(y){n.layerReference=y}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),la.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,l=sr(a.className,"recharts-cartesian-axis-tick-value");return pe.isValidElement(n)?o=pe.cloneElement(n,bn(bn({},a),{},{className:l})):Yt(n)?o=n(bn(bn({},a),{},{className:l})):o=pe.createElement(wy,jd({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(N.Component);ME(vh,"displayName","CartesianAxis");ME(vh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var i4e=["x1","y1","x2","y2","key"],o4e=["offset"];function xu(e){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(e)}function K4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ca(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K4(Object(r),!0).forEach(function(n){l4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l4e(e,t,r){return t=c4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c4e(e){var t=u4e(e,"string");return xu(t)=="symbol"?t:t+""}function u4e(e,t){if(xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ic(){return Ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ic.apply(this,arguments)}function Y4(e,t){if(e==null)return{};var r=d4e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function d4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var f4e=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return pe.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function J7(e,t){var r;if(pe.isValidElement(e))r=pe.cloneElement(e,t);else if(Yt(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=Y4(t,i4e),u=fr(c,!1);u.offset;var d=Y4(u,o4e);r=pe.createElement("line",Ic({},d,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function h4e(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=ca(ca({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return J7(a,u)});return pe.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function m4e(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=ca(ca({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return J7(a,u)});return pe.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function p4e(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?a+o-h:d[m+1]-h;if(p<=0)return null;var y=m%t.length;return pe.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:p,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return pe.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function g4e(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var g=!d[m+1],p=g?i+l-h:d[m+1]-h;if(p<=0)return null;var y=m%n.length;return pe.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:p,height:c,stroke:"none",fill:n[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return pe.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var x4e=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return o7(IE(ca(ca(ca({},vh.defaultProps),n),{},{ticks:bo(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},y4e=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return o7(IE(ca(ca(ca({},vh.defaultProps),n),{},{ticks:bo(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},sd={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Z7(e){var t,r,n,a,i,o,l=DE(),c=kE(),u=sPe(),d=ca(ca({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:sd.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:sd.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:sd.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:sd.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:sd.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:sd.verticalFill,x:nt(e.x)?e.x:u.left,y:nt(e.y)?e.y:u.top,width:nt(e.width)?e.width:u.width,height:nt(e.height)?e.height:u.height}),f=d.x,h=d.y,m=d.width,g=d.height,p=d.syncWithTicks,y=d.horizontalValues,b=d.verticalValues,x=rPe(),w=nPe();if(!nt(m)||m<=0||!nt(g)||g<=0||!nt(f)||f!==+f||!nt(h)||h!==+h)return null;var v=d.verticalCoordinatesGenerator||x4e,j=d.horizontalCoordinatesGenerator||y4e,S=d.horizontalPoints,_=d.verticalPoints;if((!S||!S.length)&&Yt(j)){var A=y&&y.length,C=j({yAxis:w?ca(ca({},w),{},{ticks:A?y:w.ticks}):void 0,width:l,height:c,offset:u},A?!0:p);Eo(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(xu(C),"]")),Array.isArray(C)&&(S=C)}if((!_||!_.length)&&Yt(v)){var D=b&&b.length,k=v({xAxis:x?ca(ca({},x),{},{ticks:D?b:x.ticks}):void 0,width:l,height:c,offset:u},D?!0:p);Eo(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(xu(k),"]")),Array.isArray(k)&&(_=k)}return pe.createElement("g",{className:"recharts-cartesian-grid"},pe.createElement(f4e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),pe.createElement(h4e,Ic({},d,{offset:u,horizontalPoints:S,xAxis:x,yAxis:w})),pe.createElement(m4e,Ic({},d,{offset:u,verticalPoints:_,xAxis:x,yAxis:w})),pe.createElement(p4e,Ic({},d,{horizontalPoints:S})),pe.createElement(g4e,Ic({},d,{verticalPoints:_})))}Z7.displayName="CartesianGrid";function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}function v4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w4e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rU(n.key),n)}}function b4e(e,t,r){return t&&w4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function j4e(e,t,r){return t=Zy(t),N4e(e,eU()?Reflect.construct(t,r||[],Zy(e).constructor):t.apply(e,r))}function N4e(e,t){if(t&&($f(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S4e(e)}function S4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eU=function(){return!!e})()}function Zy(e){return Zy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zy(e)}function _4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&US(e,t)}function US(e,t){return US=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},US(e,t)}function tU(e,t,r){return t=rU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rU(e){var t=T4e(e,"string");return $f(t)=="symbol"?t:t+""}function T4e(e,t){if($f(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function WS(){return WS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WS.apply(this,arguments)}function E4e(e){var t=e.xAxisId,r=DE(),n=kE(),a=U7(t);return a==null?null:N.createElement(vh,WS({},a,{className:sr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return bo(o,!0)}}))}var Z1=function(e){function t(){return v4e(this,t),j4e(this,t,arguments)}return _4e(t,e),b4e(t,[{key:"render",value:function(){return N.createElement(E4e,this.props)}}])}(N.Component);tU(Z1,"displayName","XAxis");tU(Z1,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}function A4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C4e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sU(n.key),n)}}function D4e(e,t,r){return t&&C4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function k4e(e,t,r){return t=ev(t),O4e(e,nU()?Reflect.construct(t,r||[],ev(e).constructor):t.apply(e,r))}function O4e(e,t){if(t&&(Bf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P4e(e)}function P4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nU=function(){return!!e})()}function ev(e){return ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ev(e)}function I4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VS(e,t)}function VS(e,t){return VS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},VS(e,t)}function aU(e,t,r){return t=sU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sU(e){var t=M4e(e,"string");return Bf(t)=="symbol"?t:t+""}function M4e(e,t){if(Bf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function HS(){return HS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HS.apply(this,arguments)}var R4e=function(t){var r=t.yAxisId,n=DE(),a=kE(),i=W7(r);return i==null?null:N.createElement(vh,HS({},i,{className:sr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return bo(l,!0)}}))},ew=function(e){function t(){return A4e(this,t),k4e(this,t,arguments)}return I4e(t,e),D4e(t,[{key:"render",value:function(){return N.createElement(R4e,this.props)}}])}(N.Component);aU(ew,"displayName","YAxis");aU(ew,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function X4(e){return B4e(e)||$4e(e)||L4e(e)||F4e()}function F4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L4e(e,t){if(e){if(typeof e=="string")return zS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zS(e,t)}}function $4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function B4e(e){if(Array.isArray(e))return zS(e)}function zS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qS=function(t,r,n,a,i){var o=fi(t,PE),l=fi(t,X1),c=[].concat(X4(o),X4(l)),u=fi(t,J1),d="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(p,y){if(y.props[d]===n&&Gi(y.props,"extendDomain")&&nt(y.props[f])){var b=y.props[f];return[Math.min(p[0],b),Math.max(p[1],b)]}return p},h)),u.length){var m="".concat(f,"1"),g="".concat(f,"2");h=u.reduce(function(p,y){if(y.props[d]===n&&Gi(y.props,"extendDomain")&&nt(y.props[m])&&nt(y.props[g])){var b=y.props[m],x=y.props[g];return[Math.min(p[0],b,x),Math.max(p[1],b,x)]}return p},h)}return i&&i.length&&(h=i.reduce(function(p,y){return nt(y)?[Math.min(p[0],y),Math.max(p[1],y)]:p},h)),h},iU={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,g){var p=r?r+u:u;if(!this._events[p])return!1;var y=this._events[p],b=arguments.length,x,w;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,h),!0;case 5:return y.fn.call(y.context,d,f,h,m),!0;case 6:return y.fn.call(y.context,d,f,h,m,g),!0}for(w=1,x=new Array(b-1);w<b;w++)x[w-1]=arguments[w];y.fn.apply(y.context,x)}else{var v=y.length,j;for(w=0;w<v;w++)switch(y[w].once&&this.removeListener(u,y[w].fn,void 0,!0),b){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,d);break;case 3:y[w].fn.call(y[w].context,d,f);break;case 4:y[w].fn.call(y[w].context,d,f,h);break;default:if(!x)for(j=1,x=new Array(b-1);j<b;j++)x[j-1]=arguments[j];y[w].fn.apply(y[w].context,x)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var p=0,y=[],b=g.length;p<b;p++)(g[p].fn!==d||h&&!g[p].once||f&&g[p].context!==f)&&y.push(g[p]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(iU);var U4e=iU.exports;const W4e=Cr(U4e);var Fb=new W4e,Lb="recharts.syncMouseEvents";function Lp(e){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lp(e)}function V4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H4e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oU(n.key),n)}}function z4e(e,t,r){return t&&H4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $b(e,t,r){return t=oU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oU(e){var t=q4e(e,"string");return Lp(t)=="symbol"?t:t+""}function q4e(e,t){if(Lp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var G4e=function(){function e(){V4e(this,e),$b(this,"activeIndex",0),$b(this,"coordinateList",[]),$b(this,"layout","horizontal")}return z4e(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,h=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function K4e(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&nt(n)&&nt(a))return!0}return!1}function Y4e(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function lU(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=Yn(t,r,n,a),l=Yn(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function X4e(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=Yn(l,c,u,f),m=Yn(l,c,d,f);n=h.x,a=h.y,i=m.x,o=m.y}else return lU(t);return[{x:n,y:a},{x:i,y:o}]}function $p(e){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$p(e)}function Q4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Eg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q4(Object(r),!0).forEach(function(n){Q4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Q4e(e,t,r){return t=J4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J4e(e){var t=Z4e(e,"string");return $p(t)=="symbol"?t:t+""}function Z4e(e,t){if($p(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eIe(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var g,p=KP;if(h==="ScatterChart")g=o,p=hDe;else if(h==="BarChart")g=Y4e(f,o,c,d),p=TE;else if(f==="radial"){var y=lU(o),b=y.cx,x=y.cy,w=y.radius,v=y.startAngle,j=y.endAngle;g={cx:b,cy:x,startAngle:v,endAngle:j,innerRadius:w,outerRadius:w},p=f7}else g={points:X4e(f,o,c)},p=KP;var S=Eg(Eg(Eg(Eg({stroke:"#ccc",pointerEvents:"none"},c),g),fr(m,!1)),{},{payload:l,payloadIndex:u,className:sr("recharts-tooltip-cursor",m.className)});return N.isValidElement(m)?N.cloneElement(m,S):N.createElement(p,S)}var tIe=["item"],rIe=["children","className","width","height","style","compact","title","desc"];function Uf(e){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(e)}function Nd(){return Nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nd.apply(this,arguments)}function J4(e,t){return sIe(e)||aIe(e,t)||uU(e,t)||nIe()}function nIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aIe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function sIe(e){if(Array.isArray(e))return e}function Z4(e,t){if(e==null)return{};var r=iIe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iIe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function oIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lIe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dU(n.key),n)}}function cIe(e,t,r){return t&&lIe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uIe(e,t,r){return t=tv(t),dIe(e,cU()?Reflect.construct(t,r||[],tv(e).constructor):t.apply(e,r))}function dIe(e,t){if(t&&(Uf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fIe(e)}function fIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cU=function(){return!!e})()}function tv(e){return tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tv(e)}function hIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GS(e,t)}function GS(e,t){return GS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},GS(e,t)}function Wf(e){return gIe(e)||pIe(e)||uU(e)||mIe()}function mIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uU(e,t){if(e){if(typeof e=="string")return KS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KS(e,t)}}function pIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gIe(e){if(Array.isArray(e))return KS(e)}function KS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eI(Object(r),!0).forEach(function(n){Ft(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ft(e,t,r){return t=dU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dU(e){var t=xIe(e,"string");return Uf(t)=="symbol"?t:t+""}function xIe(e,t){if(Uf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yIe={xAxis:["bottom","top"],yAxis:["left","right"]},vIe={width:"100%",height:"100%"},fU={x:0,y:0};function Ag(e){return e}var wIe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},bIe=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return Me(Me(Me({},a),Yn(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return Me(Me(Me({},a),Yn(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return fU},tw=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Wf(l),Wf(u)):l},[]);return o.length>0?o:t&&t.length&&nt(a)&&nt(i)?t.slice(a,i+1):[]};function hU(e){return e==="number"?[0,"auto"]:void 0}var YS=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,l=tw(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;h=AN(m,o.dataKey,a)}else h=f&&f[n]||l[n];return h?[].concat(Wf(c),[c7(u,h)]):c},[])},tI=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=wIe(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=YTe(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=YS(t,r,d,f),m=bIe(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},jIe=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,m=i7(d,i);return n.reduce(function(g,p){var y,b=p.type.defaultProps!==void 0?Me(Me({},p.type.defaultProps),p.props):p.props,x=b.type,w=b.dataKey,v=b.allowDataOverflow,j=b.allowDuplicatedCategory,S=b.scale,_=b.ticks,A=b.includeHidden,C=b[o];if(g[C])return g;var D=tw(t.data,{graphicalItems:a.filter(function(L){var q,H=o in L.props?L.props[o]:(q=L.type.defaultProps)===null||q===void 0?void 0:q[o];return H===C}),dataStartIndex:c,dataEndIndex:u}),k=D.length,O,V,G;K4e(b.domain,v,x)&&(O=pS(b.domain,null,v),m&&(x==="number"||S!=="auto")&&(G=Nm(D,w,"category")));var Y=hU(x);if(!O||O.length===0){var W,P=(W=b.domain)!==null&&W!==void 0?W:Y;if(w){if(O=Nm(D,w,x),x==="category"&&m){var E=Rme(O);j&&E?(V=O,O=Vy(0,k)):j||(O=MP(P,O,p).reduce(function(L,q){return L.indexOf(q)>=0?L:[].concat(Wf(L),[q])},[]))}else if(x==="category")j?O=O.filter(function(L){return L!==""&&!hr(L)}):O=MP(P,O,p).reduce(function(L,q){return L.indexOf(q)>=0||q===""||hr(q)?L:[].concat(Wf(L),[q])},[]);else if(x==="number"){var R=eEe(D,a.filter(function(L){var q,H,B=o in L.props?L.props[o]:(q=L.type.defaultProps)===null||q===void 0?void 0:q[o],de="hide"in L.props?L.props.hide:(H=L.type.defaultProps)===null||H===void 0?void 0:H.hide;return B===C&&(A||!de)}),w,i,d);R&&(O=R)}m&&(x==="number"||S!=="auto")&&(G=Nm(D,w,"category"))}else m?O=Vy(0,k):l&&l[C]&&l[C].hasStack&&x==="number"?O=h==="expand"?[0,1]:l7(l[C].stackGroups,c,u):O=s7(D,a.filter(function(L){var q=o in L.props?L.props[o]:L.type.defaultProps[o],H="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return q===C&&(A||!H)}),x,d,!0);if(x==="number")O=qS(f,O,C,i,_),P&&(O=pS(P,O,v));else if(x==="category"&&P){var I=P,ee=O.every(function(L){return I.indexOf(L)>=0});ee&&(O=I)}}return Me(Me({},g),{},Ft({},C,Me(Me({},b),{},{axisType:i,domain:O,categoricalDomain:G,duplicateDomain:V,originalDomain:(y=b.domain)!==null&&y!==void 0?y:Y,isCategorical:m,layout:d})))},{})},NIe=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=tw(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=h.length,g=i7(d,i),p=-1;return n.reduce(function(y,b){var x=b.type.defaultProps!==void 0?Me(Me({},b.type.defaultProps),b.props):b.props,w=x[o],v=hU("number");if(!y[w]){p++;var j;return g?j=Vy(0,m):l&&l[w]&&l[w].hasStack?(j=l7(l[w].stackGroups,c,u),j=qS(f,j,w,i)):(j=pS(v,s7(h,n.filter(function(S){var _,A,C=o in S.props?S.props[o]:(_=S.type.defaultProps)===null||_===void 0?void 0:_[o],D="hide"in S.props?S.props.hide:(A=S.type.defaultProps)===null||A===void 0?void 0:A.hide;return C===w&&!D}),"number",d),a.defaultProps.allowDataOverflow),j=qS(f,j,w,i)),Me(Me({},y),{},Ft({},w,Me(Me({axisType:i},a.defaultProps),{},{hide:!0,orientation:Ps(yIe,"".concat(i,".").concat(p%2),null),domain:j,originalDomain:v,isCategorical:g,layout:d})))}return y},{})},SIe=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=fi(d,i),m={};return h&&h.length?m=jIe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=NIe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},_Ie=function(t){var r=il(t),n=bo(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:QT(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Iy(r,n)}},rI=function(t){var r=t.children,n=t.defaultShowTooltip,a=Ja(r,Pf),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},TIe=function(t){return!t||!t.length?!1:t.some(function(r){var n=To(r&&r.type);return n&&n.indexOf("Bar")>=0})},nI=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},EIe=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,h=n.margin||{},m=Ja(f,Pf),g=Ja(f,$d),p=Object.keys(c).reduce(function(j,S){var _=c[S],A=_.orientation;return!_.mirror&&!_.hide?Me(Me({},j),{},Ft({},A,j[A]+_.width)):j},{left:h.left||0,right:h.right||0}),y=Object.keys(o).reduce(function(j,S){var _=o[S],A=_.orientation;return!_.mirror&&!_.hide?Me(Me({},j),{},Ft({},A,Ps(j,"".concat(A))+_.height)):j},{top:h.top||0,bottom:h.bottom||0}),b=Me(Me({},y),p),x=b.bottom;m&&(b.bottom+=m.props.height||Pf.defaultProps.height),g&&r&&(b=JTe(b,a,n,r));var w=u-b.left-b.right,v=d-b.top-b.bottom;return Me(Me({brushBottom:x},b),{},{width:Math.max(w,0),height:Math.max(v,0)})},AIe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},CIe=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(b,x){var w=x.graphicalItems,v=x.stackGroups,j=x.offset,S=x.updateId,_=x.dataStartIndex,A=x.dataEndIndex,C=b.barSize,D=b.layout,k=b.barGap,O=b.barCategoryGap,V=b.maxBarSize,G=nI(D),Y=G.numericAxisName,W=G.cateAxisName,P=TIe(w),E=[];return w.forEach(function(R,I){var ee=tw(b.data,{graphicalItems:[R],dataStartIndex:_,dataEndIndex:A}),L=R.type.defaultProps!==void 0?Me(Me({},R.type.defaultProps),R.props):R.props,q=L.dataKey,H=L.maxBarSize,B=L["".concat(Y,"Id")],de=L["".concat(W,"Id")],ce={},ge=c.reduce(function(te,xe){var le=x["".concat(xe.axisType,"Map")],ye=L["".concat(xe.axisType,"Id")];le&&le[ye]||xe.axisType==="zAxis"||gu();var ve=le[ye];return Me(Me({},te),{},Ft(Ft({},xe.axisType,ve),"".concat(xe.axisType,"Ticks"),bo(ve)))},ce),he=ge[W],K=ge["".concat(W,"Ticks")],fe=v&&v[B]&&v[B].hasStack&&fEe(R,v[B].stackGroups),ae=To(R.type).indexOf("Bar")>=0,Ne=Iy(he,K),Se=[],Ae=P&&XTe({barSize:C,stackGroups:v,totalSize:AIe(ge,W)});if(ae){var Oe,M,oe=hr(H)?V:H,be=(Oe=(M=Iy(he,K,!0))!==null&&M!==void 0?M:oe)!==null&&Oe!==void 0?Oe:0;Se=QTe({barGap:k,barCategoryGap:O,bandSize:be!==Ne?be:Ne,sizeList:Ae[de],maxBarSize:oe}),be!==Ne&&(Se=Se.map(function(te){return Me(Me({},te),{},{position:Me(Me({},te.position),{},{offset:te.position.offset-be/2})})}))}var U=R&&R.type&&R.type.getComposedData;U&&E.push({props:Me(Me({},U(Me(Me({},ge),{},{displayedData:ee,props:b,dataKey:q,item:R,bandSize:Ne,barPosition:Se,offset:j,stackedData:fe,layout:D,dataStartIndex:_,dataEndIndex:A}))),{},Ft(Ft(Ft({key:R.key||"item-".concat(I)},Y,ge[Y]),W,ge[W]),"animationId",S)),childIndex:Kme(R,b.children),item:R})}),E},m=function(b,x){var w=b.props,v=b.dataStartIndex,j=b.dataEndIndex,S=b.updateId;if(!Ck({props:w}))return null;var _=w.children,A=w.layout,C=w.stackOffset,D=w.data,k=w.reverseStackOrder,O=nI(A),V=O.numericAxisName,G=O.cateAxisName,Y=fi(_,n),W=cEe(D,Y,"".concat(V,"Id"),"".concat(G,"Id"),C,k),P=c.reduce(function(L,q){var H="".concat(q.axisType,"Map");return Me(Me({},L),{},Ft({},H,SIe(w,Me(Me({},q),{},{graphicalItems:Y,stackGroups:q.axisType===V&&W,dataStartIndex:v,dataEndIndex:j}))))},{}),E=EIe(Me(Me({},P),{},{props:w,graphicalItems:Y}),x==null?void 0:x.legendBBox);Object.keys(P).forEach(function(L){P[L]=d(w,P[L],E,L.replace("Map",""),r)});var R=P["".concat(G,"Map")],I=_Ie(R),ee=h(w,Me(Me({},P),{},{dataStartIndex:v,dataEndIndex:j,updateId:S,graphicalItems:Y,stackGroups:W,offset:E}));return Me(Me({formattedGraphicalItems:ee,graphicalItems:Y,offset:E,stackGroups:W},I),P)},g=function(y){function b(x){var w,v,j;return oIe(this,b),j=uIe(this,b,[x]),Ft(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ft(j,"accessibilityManager",new G4e),Ft(j,"handleLegendBBoxUpdate",function(S){if(S){var _=j.state,A=_.dataStartIndex,C=_.dataEndIndex,D=_.updateId;j.setState(Me({legendBBox:S},m({props:j.props,dataStartIndex:A,dataEndIndex:C,updateId:D},Me(Me({},j.state),{},{legendBBox:S}))))}}),Ft(j,"handleReceiveSyncEvent",function(S,_,A){if(j.props.syncId===S){if(A===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(_)}}),Ft(j,"handleBrushChange",function(S){var _=S.startIndex,A=S.endIndex;if(_!==j.state.dataStartIndex||A!==j.state.dataEndIndex){var C=j.state.updateId;j.setState(function(){return Me({dataStartIndex:_,dataEndIndex:A},m({props:j.props,dataStartIndex:_,dataEndIndex:A,updateId:C},j.state))}),j.triggerSyncEvent({dataStartIndex:_,dataEndIndex:A})}}),Ft(j,"handleMouseEnter",function(S){var _=j.getMouseInfo(S);if(_){var A=Me(Me({},_),{},{isTooltipActive:!0});j.setState(A),j.triggerSyncEvent(A);var C=j.props.onMouseEnter;Yt(C)&&C(A,S)}}),Ft(j,"triggeredAfterMouseMove",function(S){var _=j.getMouseInfo(S),A=_?Me(Me({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(A),j.triggerSyncEvent(A);var C=j.props.onMouseMove;Yt(C)&&C(A,S)}),Ft(j,"handleItemMouseEnter",function(S){j.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Ft(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),Ft(j,"handleMouseMove",function(S){S.persist(),j.throttleTriggeredAfterMouseMove(S)}),Ft(j,"handleMouseLeave",function(S){j.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};j.setState(_),j.triggerSyncEvent(_);var A=j.props.onMouseLeave;Yt(A)&&A(_,S)}),Ft(j,"handleOuterEvent",function(S){var _=Gme(S),A=Ps(j.props,"".concat(_));if(_&&Yt(A)){var C,D;/.*touch.*/i.test(_)?D=j.getMouseInfo(S.changedTouches[0]):D=j.getMouseInfo(S),A((C=D)!==null&&C!==void 0?C:{},S)}}),Ft(j,"handleClick",function(S){var _=j.getMouseInfo(S);if(_){var A=Me(Me({},_),{},{isTooltipActive:!0});j.setState(A),j.triggerSyncEvent(A);var C=j.props.onClick;Yt(C)&&C(A,S)}}),Ft(j,"handleMouseDown",function(S){var _=j.props.onMouseDown;if(Yt(_)){var A=j.getMouseInfo(S);_(A,S)}}),Ft(j,"handleMouseUp",function(S){var _=j.props.onMouseUp;if(Yt(_)){var A=j.getMouseInfo(S);_(A,S)}}),Ft(j,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Ft(j,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseDown(S.changedTouches[0])}),Ft(j,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseUp(S.changedTouches[0])}),Ft(j,"handleDoubleClick",function(S){var _=j.props.onDoubleClick;if(Yt(_)){var A=j.getMouseInfo(S);_(A,S)}}),Ft(j,"handleContextMenu",function(S){var _=j.props.onContextMenu;if(Yt(_)){var A=j.getMouseInfo(S);_(A,S)}}),Ft(j,"triggerSyncEvent",function(S){j.props.syncId!==void 0&&Fb.emit(Lb,j.props.syncId,S,j.eventEmitterSymbol)}),Ft(j,"applySyncEvent",function(S){var _=j.props,A=_.layout,C=_.syncMethod,D=j.state.updateId,k=S.dataStartIndex,O=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)j.setState(Me({dataStartIndex:k,dataEndIndex:O},m({props:j.props,dataStartIndex:k,dataEndIndex:O,updateId:D},j.state)));else if(S.activeTooltipIndex!==void 0){var V=S.chartX,G=S.chartY,Y=S.activeTooltipIndex,W=j.state,P=W.offset,E=W.tooltipTicks;if(!P)return;if(typeof C=="function")Y=C(E,S);else if(C==="value"){Y=-1;for(var R=0;R<E.length;R++)if(E[R].value===S.activeLabel){Y=R;break}}var I=Me(Me({},P),{},{x:P.left,y:P.top}),ee=Math.min(V,I.x+I.width),L=Math.min(G,I.y+I.height),q=E[Y]&&E[Y].value,H=YS(j.state,j.props.data,Y),B=E[Y]?{x:A==="horizontal"?E[Y].coordinate:ee,y:A==="horizontal"?L:E[Y].coordinate}:fU;j.setState(Me(Me({},S),{},{activeLabel:q,activeCoordinate:B,activePayload:H,activeTooltipIndex:Y}))}else j.setState(S)}),Ft(j,"renderCursor",function(S){var _,A=j.state,C=A.isTooltipActive,D=A.activeCoordinate,k=A.activePayload,O=A.offset,V=A.activeTooltipIndex,G=A.tooltipAxisBandSize,Y=j.getTooltipEventType(),W=(_=S.props.active)!==null&&_!==void 0?_:C,P=j.props.layout,E=S.key||"_recharts-cursor";return pe.createElement(eIe,{key:E,activeCoordinate:D,activePayload:k,activeTooltipIndex:V,chartName:r,element:S,isActive:W,layout:P,offset:O,tooltipAxisBandSize:G,tooltipEventType:Y})}),Ft(j,"renderPolarAxis",function(S,_,A){var C=Ps(S,"type.axisType"),D=Ps(j.state,"".concat(C,"Map")),k=S.type.defaultProps,O=k!==void 0?Me(Me({},k),S.props):S.props,V=D&&D[O["".concat(C,"Id")]];return N.cloneElement(S,Me(Me({},V),{},{className:sr(C,V.className),key:S.key||"".concat(_,"-").concat(A),ticks:bo(V,!0)}))}),Ft(j,"renderPolarGrid",function(S){var _=S.props,A=_.radialLines,C=_.polarAngles,D=_.polarRadius,k=j.state,O=k.radiusAxisMap,V=k.angleAxisMap,G=il(O),Y=il(V),W=Y.cx,P=Y.cy,E=Y.innerRadius,R=Y.outerRadius;return N.cloneElement(S,{polarAngles:Array.isArray(C)?C:bo(Y,!0).map(function(I){return I.coordinate}),polarRadius:Array.isArray(D)?D:bo(G,!0).map(function(I){return I.coordinate}),cx:W,cy:P,innerRadius:E,outerRadius:R,key:S.key||"polar-grid",radialLines:A})}),Ft(j,"renderLegend",function(){var S=j.state.formattedGraphicalItems,_=j.props,A=_.children,C=_.width,D=_.height,k=j.props.margin||{},O=C-(k.left||0)-(k.right||0),V=n7({children:A,formattedGraphicalItems:S,legendWidth:O,legendContent:u});if(!V)return null;var G=V.item,Y=Z4(V,tIe);return N.cloneElement(G,Me(Me({},Y),{},{chartWidth:C,chartHeight:D,margin:k,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),Ft(j,"renderTooltip",function(){var S,_=j.props,A=_.children,C=_.accessibilityLayer,D=Ja(A,lo);if(!D)return null;var k=j.state,O=k.isTooltipActive,V=k.activeCoordinate,G=k.activePayload,Y=k.activeLabel,W=k.offset,P=(S=D.props.active)!==null&&S!==void 0?S:O;return N.cloneElement(D,{viewBox:Me(Me({},W),{},{x:W.left,y:W.top}),active:P,label:Y,payload:P?G:[],coordinate:V,accessibilityLayer:C})}),Ft(j,"renderBrush",function(S){var _=j.props,A=_.margin,C=_.data,D=j.state,k=D.offset,O=D.dataStartIndex,V=D.dataEndIndex,G=D.updateId;return N.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Ng(j.handleBrushChange,S.props.onChange),data:C,x:nt(S.props.x)?S.props.x:k.left,y:nt(S.props.y)?S.props.y:k.top+k.height+k.brushBottom-(A.bottom||0),width:nt(S.props.width)?S.props.width:k.width,startIndex:O,endIndex:V,updateId:"brush-".concat(G)})}),Ft(j,"renderReferenceElement",function(S,_,A){if(!S)return null;var C=j,D=C.clipPathId,k=j.state,O=k.xAxisMap,V=k.yAxisMap,G=k.offset,Y=S.type.defaultProps||{},W=S.props,P=W.xAxisId,E=P===void 0?Y.xAxisId:P,R=W.yAxisId,I=R===void 0?Y.yAxisId:R;return N.cloneElement(S,{key:S.key||"".concat(_,"-").concat(A),xAxis:O[E],yAxis:V[I],viewBox:{x:G.left,y:G.top,width:G.width,height:G.height},clipPathId:D})}),Ft(j,"renderActivePoints",function(S){var _=S.item,A=S.activePoint,C=S.basePoint,D=S.childIndex,k=S.isRange,O=[],V=_.props.key,G=_.item.type.defaultProps!==void 0?Me(Me({},_.item.type.defaultProps),_.item.props):_.item.props,Y=G.activeDot,W=G.dataKey,P=Me(Me({index:D,dataKey:W,cx:A.x,cy:A.y,r:4,fill:_E(_.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},fr(Y,!1)),sy(Y));return O.push(b.renderActiveDot(Y,P,"".concat(V,"-activePoint-").concat(D))),C?O.push(b.renderActiveDot(Y,Me(Me({},P),{},{cx:C.x,cy:C.y}),"".concat(V,"-basePoint-").concat(D))):k&&O.push(null),O}),Ft(j,"renderGraphicChild",function(S,_,A){var C=j.filterFormatItem(S,_,A);if(!C)return null;var D=j.getTooltipEventType(),k=j.state,O=k.isTooltipActive,V=k.tooltipAxis,G=k.activeTooltipIndex,Y=k.activeLabel,W=j.props.children,P=Ja(W,lo),E=C.props,R=E.points,I=E.isRange,ee=E.baseLine,L=C.item.type.defaultProps!==void 0?Me(Me({},C.item.type.defaultProps),C.item.props):C.item.props,q=L.activeDot,H=L.hide,B=L.activeBar,de=L.activeShape,ce=!!(!H&&O&&P&&(q||B||de)),ge={};D!=="axis"&&P&&P.props.trigger==="click"?ge={onClick:Ng(j.handleItemMouseEnter,S.props.onClick)}:D!=="axis"&&(ge={onMouseLeave:Ng(j.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Ng(j.handleItemMouseEnter,S.props.onMouseEnter)});var he=N.cloneElement(S,Me(Me({},C.props),ge));function K(xe){return typeof V.dataKey=="function"?V.dataKey(xe.payload):null}if(ce)if(G>=0){var fe,ae;if(V.dataKey&&!V.allowDuplicatedCategory){var Ne=typeof V.dataKey=="function"?K:"payload.".concat(V.dataKey.toString());fe=AN(R,Ne,Y),ae=I&&ee&&AN(ee,Ne,Y)}else fe=R==null?void 0:R[G],ae=I&&ee&&ee[G];if(de||B){var Se=S.props.activeIndex!==void 0?S.props.activeIndex:G;return[N.cloneElement(S,Me(Me(Me({},C.props),ge),{},{activeIndex:Se})),null,null]}if(!hr(fe))return[he].concat(Wf(j.renderActivePoints({item:C,activePoint:fe,basePoint:ae,childIndex:G,isRange:I})))}else{var Ae,Oe=(Ae=j.getItemByXY(j.state.activeCoordinate))!==null&&Ae!==void 0?Ae:{graphicalItem:he},M=Oe.graphicalItem,oe=M.item,be=oe===void 0?S:oe,U=M.childIndex,te=Me(Me(Me({},C.props),ge),{},{activeIndex:U});return[N.cloneElement(be,te),null,null]}return I?[he,null,null]:[he,null]}),Ft(j,"renderCustomized",function(S,_,A){return N.cloneElement(S,Me(Me({key:"recharts-customized-".concat(A)},j.props),j.state))}),Ft(j,"renderMap",{CartesianGrid:{handler:Ag,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:Ag},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:Ag},YAxis:{handler:Ag},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((w=x.id)!==null&&w!==void 0?w:E1("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=n9(j.triggeredAfterMouseMove,(v=x.throttleDelay)!==null&&v!==void 0?v:1e3/60),j.state={},j}return hIe(b,y),cIe(b,[{key:"componentDidMount",value:function(){var w,v;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(v=this.props.margin.top)!==null&&v!==void 0?v:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,v=w.children,j=w.data,S=w.height,_=w.layout,A=Ja(v,lo);if(A){var C=A.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,k=YS(this.state,j,C,D),O=this.state.tooltipTicks[C].coordinate,V=(this.state.offset.top+S)/2,G=_==="horizontal",Y=G?{x:O,y:V}:{y:O,x:V},W=this.state.formattedGraphicalItems.find(function(E){var R=E.item;return R.type.name==="Scatter"});W&&(Y=Me(Me({},Y),W.props.points[C].tooltipPosition),k=W.props.points[C].tooltipPayload);var P={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:D,activePayload:k,activeCoordinate:Y};this.setState(P),this.renderCursor(A),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,v){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==v.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var j,S;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(w){DN([Ja(w.children,lo)],[Ja(this.props.children,lo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Ja(this.props.children,lo);if(w&&typeof w.props.shared=="boolean"){var v=w.props.shared?"axis":"item";return l.indexOf(v)>=0?v:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var v=this.container,j=v.getBoundingClientRect(),S=bNe(j),_={chartX:Math.round(w.pageX-S.left),chartY:Math.round(w.pageY-S.top)},A=j.width/v.offsetWidth||1,C=this.inRange(_.chartX,_.chartY,A);if(!C)return null;var D=this.state,k=D.xAxisMap,O=D.yAxisMap,V=this.getTooltipEventType(),G=tI(this.state,this.props.data,this.props.layout,C);if(V!=="axis"&&k&&O){var Y=il(k).scale,W=il(O).scale,P=Y&&Y.invert?Y.invert(_.chartX):null,E=W&&W.invert?W.invert(_.chartY):null;return Me(Me({},_),{},{xValue:P,yValue:E},G)}return G?Me(Me({},_),G):null}},{key:"inRange",value:function(w,v){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,_=w/j,A=v/j;if(S==="horizontal"||S==="vertical"){var C=this.state.offset,D=_>=C.left&&_<=C.left+C.width&&A>=C.top&&A<=C.top+C.height;return D?{x:_,y:A}:null}var k=this.state,O=k.angleAxisMap,V=k.radiusAxisMap;if(O&&V){var G=il(O);return LP({x:_,y:A},G)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,v=this.getTooltipEventType(),j=Ja(w,lo),S={};j&&v==="axis"&&(j.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=sy(this.props,this.handleOuterEvent);return Me(Me({},_),S)}},{key:"addListener",value:function(){Fb.on(Lb,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Fb.removeListener(Lb,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,v,j){for(var S=this.state.formattedGraphicalItems,_=0,A=S.length;_<A;_++){var C=S[_];if(C.item===w||C.props.key===w.key||v===To(C.item.type)&&j===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,v=this.state.offset,j=v.left,S=v.top,_=v.height,A=v.width;return pe.createElement("defs",null,pe.createElement("clipPath",{id:w},pe.createElement("rect",{x:j,y:S,height:_,width:A})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(v,j){var S=J4(j,2),_=S[0],A=S[1];return Me(Me({},v),{},Ft({},_,A.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(v,j){var S=J4(j,2),_=S[0],A=S[1];return Me(Me({},v),{},Ft({},_,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var v;return(v=this.state.xAxisMap)===null||v===void 0||(v=v[w])===null||v===void 0?void 0:v.scale}},{key:"getYScaleByAxisId",value:function(w){var v;return(v=this.state.yAxisMap)===null||v===void 0||(v=v[w])===null||v===void 0?void 0:v.scale}},{key:"getItemByXY",value:function(w){var v=this.state,j=v.formattedGraphicalItems,S=v.activeItem;if(j&&j.length)for(var _=0,A=j.length;_<A;_++){var C=j[_],D=C.props,k=C.item,O=k.type.defaultProps!==void 0?Me(Me({},k.type.defaultProps),k.props):k.props,V=To(k.type);if(V==="Bar"){var G=(D.data||[]).find(function(E){return nDe(w,E)});if(G)return{graphicalItem:C,payload:G}}else if(V==="RadialBar"){var Y=(D.data||[]).find(function(E){return LP(w,E)});if(Y)return{graphicalItem:C,payload:Y}}else if(q1(C,S)||G1(C,S)||Pp(C,S)){var W=ike({graphicalItem:C,activeTooltipItem:S,itemData:O.data}),P=O.activeIndex===void 0?W:O.activeIndex;return{graphicalItem:Me(Me({},C),{},{childIndex:P}),payload:Pp(C,S)?O.data[W]:C.props.data[W]}}}return null}},{key:"render",value:function(){var w=this;if(!Ck(this))return null;var v=this.props,j=v.children,S=v.className,_=v.width,A=v.height,C=v.style,D=v.compact,k=v.title,O=v.desc,V=Z4(v,rIe),G=fr(V,!1);if(D)return pe.createElement(F4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},pe.createElement(ON,Nd({},G,{width:_,height:A,title:k,desc:O}),this.renderClipPath(),kk(j,this.renderMap)));if(this.props.accessibilityLayer){var Y,W;G.tabIndex=(Y=this.props.tabIndex)!==null&&Y!==void 0?Y:0,G.role=(W=this.props.role)!==null&&W!==void 0?W:"application",G.onKeyDown=function(E){w.accessibilityManager.keyboardEvent(E)},G.onFocus=function(){w.accessibilityManager.focus()}}var P=this.parseEventsOfWrapper();return pe.createElement(F4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},pe.createElement("div",Nd({className:sr("recharts-wrapper",S),style:Me({position:"relative",cursor:"default",width:_,height:A},C)},P,{ref:function(R){w.container=R}}),pe.createElement(ON,Nd({},G,{width:_,height:A,title:k,desc:O,style:vIe}),this.renderClipPath(),kk(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);Ft(g,"displayName",r),Ft(g,"defaultProps",Me({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Ft(g,"getDerivedStateFromProps",function(y,b){var x=y.dataKey,w=y.data,v=y.children,j=y.width,S=y.height,_=y.layout,A=y.stackOffset,C=y.margin,D=b.dataStartIndex,k=b.dataEndIndex;if(b.updateId===void 0){var O=rI(y);return Me(Me(Me({},O),{},{updateId:0},m(Me(Me({props:y},O),{},{updateId:0}),b)),{},{prevDataKey:x,prevData:w,prevWidth:j,prevHeight:S,prevLayout:_,prevStackOffset:A,prevMargin:C,prevChildren:v})}if(x!==b.prevDataKey||w!==b.prevData||j!==b.prevWidth||S!==b.prevHeight||_!==b.prevLayout||A!==b.prevStackOffset||!Ld(C,b.prevMargin)){var V=rI(y),G={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},Y=Me(Me({},tI(b,w,_)),{},{updateId:b.updateId+1}),W=Me(Me(Me({},V),G),Y);return Me(Me(Me({},W),m(Me({props:y},W),b)),{},{prevDataKey:x,prevData:w,prevWidth:j,prevHeight:S,prevLayout:_,prevStackOffset:A,prevMargin:C,prevChildren:v})}if(!DN(v,b.prevChildren)){var P,E,R,I,ee=Ja(v,Pf),L=ee&&(P=(E=ee.props)===null||E===void 0?void 0:E.startIndex)!==null&&P!==void 0?P:D,q=ee&&(R=(I=ee.props)===null||I===void 0?void 0:I.endIndex)!==null&&R!==void 0?R:k,H=L!==D||q!==k,B=!hr(w),de=B&&!H?b.updateId:b.updateId+1;return Me(Me({updateId:de},m(Me(Me({props:y},b),{},{updateId:de,dataStartIndex:L,dataEndIndex:q}),b)),{},{prevChildren:v,dataStartIndex:L,dataEndIndex:q})}return null}),Ft(g,"renderActiveDot",function(y,b,x){var w;return N.isValidElement(y)?w=N.cloneElement(y,b):Yt(y)?w=y(b):w=pe.createElement(N7,b),pe.createElement(Rn,{className:"recharts-active-dot",key:x},w)});var p=N.forwardRef(function(b,x){return pe.createElement(g,Nd({},b,{ref:x}))});return p.displayName=g.displayName,p},DIe=CIe({chartName:"BarChart",GraphicalChild:Mu,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Z1},{axisType:"yAxis",AxisComp:ew}],formatAxisMap:kOe});function mU(){const[e,t]=N.useState("2024"),[r,n]=N.useState("Yearly"),[a,i]=N.useState(new Date().getMonth()),[o,l]=N.useState(new Date().getFullYear()),c=localStorage.getItem("user_id")||"241";console.log("📊 [NewEmployeeOverview] Loading component for user:",c),console.log("📊 [NewEmployeeOverview] Current org_id:",localStorage.getItem("org_id"));const{data:u=[]}=Fe({queryKey:[`/api/leave-requests?userId=${c}`]}),{data:d=[]}=Fe({queryKey:[`/api/employee-leave-balances/${c}`]}),{data:f=[]}=Fe({queryKey:[`/api/pto-requests?userId=${c}`]}),{data:h=[]}=Fe({queryKey:[`/api/comp-off-requests?userId=${c}`]}),{data:m=[]}=Fe({queryKey:[`/api/leave-balance-transactions/${c}`]}),{data:g=[]}=Fe({queryKey:["/api/leave-variants"]}),{data:p=[]}=Fe({queryKey:["/api/employee-assignments"]}),y=u,b=d,x=f,w=h,v=m,j=Array.isArray(p)?p.filter(P=>P.userId===c):[],S=j.map(P=>P.leaveVariantId),_=Array.isArray(g)?g.filter(P=>S.includes(P.id)):[];console.log("🔧 [Dashboard] Available leave variants:",{userAssignments:j.length,assignedVariantIds:S,availableLeaveVariants:_.length,variantNames:_.map(P=>P.leaveTypeName)}),y.length;const A=y.filter(P=>P.status==="approved");A.length;const C=y.filter(P=>P.status==="pending").length;y.filter(P=>P.status==="rejected").length,console.log("[NewEmployeeOverview] Approved leaves for calendar:",A.map(P=>({id:P.id,startDate:P.startDate,endDate:P.endDate})));const k=(()=>{const P=Array.isArray(b)?b:[],E=Array.isArray(y)?y:[];console.log("🎯 [Dashboard] Using SOPHISTICATED calculation (same as Leave Applications):",{currentUserId:c,balancesCount:P.length,requestsCount:E.length,availableVariants:(_==null?void 0:_.length)||0});let R=0;_.forEach(q=>{const H=P.find(fe=>fe.leaveVariantId===q.id),B=Array.isArray(v)?v.filter(fe=>{var Ae;const ae=fe.transactionType==="grant"&&((Ae=fe.description)==null?void 0:Ae.toLowerCase().includes("opening balance imported from excel")),Ne=fe.userId===c;if(!ae||!Ne)return!1;if(fe.leaveVariantId===q.id)return!0;const Se=_.find(Oe=>Oe.id===fe.leaveVariantId);return(Se==null?void 0:Se.leaveTypeName)===q.leaveTypeName||(Se==null?void 0:Se.leaveTypeId)===q.leaveTypeId||q.leaveTypeName==="Earned Leave"&&(fe.leaveVariantId===67&&q.id===61||fe.leaveVariantId===61&&q.id===67)}).sort((fe,ae)=>new Date(ae.createdAt).getTime()-new Date(fe.createdAt).getTime()):[],de=B.reduce((fe,ae)=>fe+parseFloat(ae.amount||"0"),0),ce=H?parseFloat(H.totalEntitlement||"0"):0,ge=q.grantLeaves==="after_earning";let he=0;if(ge){const ae=new Date().getMonth()+1-1;he=(ce||q.paidDaysInYear||0)/12*ae}else{const fe=ce||q.paidDaysInYear||0;if(q.grantFrequency==="per_year")he=fe;else{const ae=new Date().getMonth()+1;he=fe/12*ae}}const K=he+de;R+=K,console.log(`🔍 [Dashboard CALCULATION] Dynamic calculation for ${q.leaveTypeName}:`,{variantId:q.id,openingBalance:de,eligibility:he,totalEligibility:K,isAfterEarning:ge,annualEntitlement:ce||q.paidDaysInYear,totalEntitlementInDays:ce,paidDaysInYear:q.paidDaysInYear,grantLeaves:q.grantLeaves,grantFrequency:q.grantFrequency,openingBalanceTransactionsCount:B.length})});const I=P.reduce((q,H)=>q+parseFloat(H.currentBalance||"0"),0),ee=E.filter(q=>q.status==="approved").reduce((q,H)=>q+parseFloat(H.workingDays||"0"),0),L=R-ee;return console.log("🎯 [Dashboard] Sophisticated calculation results:",{totalEligibilitySum:R.toFixed(1),totalCurrentBalance:I.toFixed(1),totalApproved:ee.toFixed(1),calculatedBalance:L.toFixed(1),calculation:`${R.toFixed(1)} - ${ee.toFixed(1)} = ${L.toFixed(1)}`,note:"Balance = Total Eligibility - Total Availed (should be 72.5 - 20.0 = 52.5)"}),{totalEligibility:parseFloat(R.toFixed(1)),totalAvailed:parseFloat(ee.toFixed(1)),totalBalance:parseFloat(L.toFixed(1))}})(),O=k.totalEligibility,V=k.totalAvailed,G=k.totalBalance;console.log("[NewEmployeeOverview] Final simple metrics applied:",{totalEntitlement:O,totalAvailed:V,totalBalance:G});const W=(()=>{const P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],E=new Date().getFullYear(),R=P.map(I=>({month:I,leaves:0}));return A.forEach(I=>{const ee=new Date(I.startDate);if(ee.getFullYear()===E){const L=ee.getMonth();R[L].leaves+=parseFloat(I.workingDays||"1")}}),console.log("📊 [NewEmployeeOverview] Generated trends data:",R),R})();return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Employee Overview"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Your leave analytics and applications dashboard"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(yt,{value:e,onValueChange:t,children:[s.jsx(gt,{className:"w-20",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"2024",children:"2024"}),s.jsx(je,{value:"2025",children:"2025"})]})]}),s.jsxs(yt,{value:r,onValueChange:n,children:[s.jsx(gt,{className:"w-24",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"Yearly",children:"Yearly"}),s.jsx(je,{value:"Monthly",children:"Monthly"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(br,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Leaves"})]})}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:O.toFixed(1)})})]})}),s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(qn,{className:"h-5 w-5 text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Availed"})]})}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:V.toFixed(1)})})]})}),s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(An,{className:"h-5 w-5 text-orange-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending Approvals"})]})}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:C})})]})}),s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($q,{className:"h-5 w-5 text-purple-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Balance"})]})}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:G.toFixed(1)})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{className:"text-lg font-semibold",children:"Recent Applications"})}),s.jsx(Ie,{children:s.jsxs(tT,{defaultValue:"leaves",className:"w-full",children:[s.jsxs(r1,{className:"grid w-full grid-cols-3",children:[s.jsxs(Rl,{value:"leaves",children:["Leaves (",y.length,")"]}),s.jsxs(Rl,{value:"bto",children:["BTO (",x.length,")"]}),s.jsxs(Rl,{value:"comp-off",children:["Comp-off (",w.length,")"]})]}),s.jsx(Fl,{value:"leaves",className:"mt-4",children:y.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No leave applications found"}):s.jsx("div",{className:"space-y-3",children:y.slice(0,5).map(P=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Leave Request"}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(P.startDate).toLocaleDateString()," -"," ",new Date(P.endDate).toLocaleDateString()]})]}),s.jsx(Lt,{variant:P.status==="approved"?"default":P.status==="pending"?"secondary":"destructive",children:P.status})]},P.id))})}),s.jsx(Fl,{value:"bto",className:"mt-4",children:x.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No BTO applications found"}):s.jsx("div",{className:"space-y-3",children:x.slice(0,5).map(P=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"BTO Request"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(P.requestDate).toLocaleDateString()})]}),s.jsx(Lt,{variant:P.status==="approved"?"default":P.status==="pending"?"secondary":"destructive",children:P.status})]},P.id))})}),s.jsx(Fl,{value:"comp-off",className:"mt-4",children:w.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No comp-off applications found"}):s.jsx("div",{className:"space-y-3",children:w.slice(0,5).map(P=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Comp-off Request"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(P.workedDate).toLocaleDateString()})]}),s.jsx(Lt,{variant:P.status==="approved"?"default":P.status==="pending"?"secondary":"destructive",children:P.status})]},P.id))})})]})})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Et,{className:"text-lg font-semibold",children:"Leave Calendar"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{a===0?(i(11),l(o-1)):i(a-1)},children:s.jsx(Yf,{className:"h-4 w-4"})}),s.jsx("span",{className:"font-medium",children:new Date(o,a).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{a===11?(i(0),l(o+1)):i(a+1)},children:s.jsx(Wi,{className:"h-4 w-4"})})]})]})}),s.jsxs(Ie,{children:[s.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(P=>s.jsx("div",{className:"p-2 text-sm font-medium text-gray-500 dark:text-gray-400",children:P},P)),(()=>{const P=new Date(o,a,1).getDay(),E=new Date(o,a+1,0).getDate(),R=[];for(let I=0;I<P;I++)R.push(s.jsx("div",{className:"p-2 text-sm"},`empty-${I}`));for(let I=1;I<=E;I++){const ee=new Date(o,a,I),L=A.some(ce=>{const ge=new Date(ce.startDate),he=new Date(ce.endDate);return ee>=ge&&ee<=he}),q=y.filter(ce=>ce.status==="pending").some(ce=>{const ge=new Date(ce.startDate),he=new Date(ce.endDate);return ee>=ge&&ee<=he}),H=y.filter(ce=>ce.status==="rejected").some(ce=>{const ge=new Date(ce.startDate),he=new Date(ce.endDate);return ee>=ge&&ee<=he});let B="hover:bg-gray-100 dark:hover:bg-gray-800",de="";L?(B="bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300",de="bg-green-500"):q?(B="bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300",de="bg-yellow-500"):H&&(B="bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300",de="bg-red-500"),R.push(s.jsxs("div",{className:`p-2 text-sm relative cursor-pointer ${B}`,children:[I,(L||q||H)&&s.jsx("div",{className:`absolute bottom-0 left-1 right-1 h-1 ${de} rounded-full`})]},I))}return R})()]}),s.jsxs("div",{className:"flex items-center justify-center mt-4 space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Approved"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rejected"})]})]})]})]})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{className:"text-lg font-semibold",children:"Leave Usage Trends"})}),s.jsxs(Ie,{children:[s.jsx("div",{className:"h-64",children:s.jsx(mNe,{width:"100%",height:"100%",children:s.jsxs(DIe,{data:W,children:[s.jsx(Z7,{strokeDasharray:"3 3"}),s.jsx(Z1,{dataKey:"month"}),s.jsx(ew,{}),s.jsx(Mu,{dataKey:"leaves",fill:"#3b82f6",radius:[4,4,0,0],children:W.map((P,E)=>s.jsx(ZT,{fill:"#3b82f6"},`cell-${E}`))})]})})}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Monthly Leave Breakdown"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:W.filter(P=>P.leaves>0).map(P=>s.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:P.month}),s.jsxs("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[P.leaves," ",P.leaves===1?"day":"days"]})]},P.month))}),W.filter(P=>P.leaves>0).length===0&&s.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No leave data for this year"})]})]})]})]})}function kIe(){return s.jsx(mU,{})}function Bb({className:e,...t}){return s.jsx("div",{className:Ge("animate-pulse rounded-md bg-muted",e),...t})}function OIe(){r0();const[e,t]=N.useState(null),[r,n]=N.useState(!1);N.useEffect(()=>{const g=localStorage.getItem("role"),p=localStorage.getItem("role_name");console.log("[HOME] Role debugging:",{"localStorage.role":g,"localStorage.role_name":p});const y=p||g;localStorage.getItem("org_id"),console.log("[HOME] Final role selected:",y),y?t(y):n(!0)},[]);const a=g=>{localStorage.setItem("role",g),t(g),n(!1)},{data:i,isLoading:o,error:l}=Fe({queryKey:["/api/company"],staleTime:10*60*1e3,refetchOnWindowFocus:!1,refetchInterval:!1,retry:1}),c=localStorage.getItem("org_id");console.log(`[DEBUG] Current org_id from localStorage: ${c}`);const u=i?i.orgId:null;if(console.log(`[DEBUG] Company orgId from API: ${u}`),r)return s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:s.jsxs(Ce,{className:"w-full max-w-md mx-4",children:[s.jsxs(Tt,{className:"text-center",children:[s.jsx(Et,{className:"text-2xl font-bold text-gray-900",children:"Choose Your Role"}),s.jsx("p",{className:"text-gray-600",children:"Select your role to continue"})]}),s.jsxs(Ie,{className:"space-y-4",children:[s.jsx(se,{onClick:()=>a("admin"),className:"w-full h-12 bg-blue-600 hover:bg-blue-700 text-white",children:"Admin"}),s.jsx(se,{onClick:()=>a("employee"),className:"w-full h-12 bg-green-600 hover:bg-green-700 text-white",children:"Employee"})]})]})});if(o)return s.jsx(Sr,{children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(Bb,{className:"h-8 w-64"}),s.jsx(Bb,{className:"h-32 w-full"}),s.jsx(Bb,{className:"h-32 w-full"})]})})});const d=i&&(i==null?void 0:i.setupStatus)==="completed",f=c&&u&&c!==u.toString(),h=!i,m=!d||f||h;if(console.log("[DEBUG] Setup wizard check:",{currentOrgId:c,companyOrgId:u,isSetupCompleted:d,isOrgIdMismatch:f,isNewOrganization:h,needsSetup:m,userRole:e,currentPath:window.location.pathname}),(e==="admin"||e==="manager")&&m){if(console.log("[HOME] Setup wizard condition met - rendering SetupWizard"),console.log("[HOME] userRole:",e,"needsSetup:",m),(f||h)&&!sessionStorage.getItem("setup_redirect_done")){sessionStorage.setItem("setup_redirect_done","true"),localStorage.removeItem("setupWizardStep"),localStorage.removeItem("user_permissions");const g=[];for(let p=0;p<localStorage.length;p++){const y=localStorage.key(p);y&&y.startsWith("role_permissions_")&&g.push(y)}return g.forEach(p=>localStorage.removeItem(p)),Ye.clear(),window.location.reload(),null}return s.jsx(rde,{company:i})}return console.log("[HOME] Setup wizard condition NOT met - rendering dashboard"),console.log("[HOME] Condition check: userRole=",e,"needsSetup=",m),s.jsx(Sr,{children:e==="admin"?s.jsx(nde,{}):s.jsx(kIe,{})})}function PIe(){const[e,t]=N.useState(null),[r,n]=N.useState("balances"),[a,i]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState(!1),{toast:d}=Vr(),{data:f=[]}=Fe({queryKey:["/api/companies"]}),{data:h=[]}=Fe({queryKey:["/api/leave-types"]}),m=w=>{var j;const v=(j=w.target.files)==null?void 0:j[0];if(v&&(t(v),i([]),l([]),u(!1),!["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(v.type))){d({title:"Invalid File Type",description:"Please upload a CSV or Excel file (.csv, .xls, .xlsx)",variant:"destructive"}),t(null);return}},g=Ut({mutationFn:async w=>{const v=new FormData;return v.append("file",w),v.append("importType",r),(await Ct("POST","/api/import-leave-data/validate",v)).json()},onSuccess:w=>{i(w.preview),l(w.errors||[]),u(w.errors.length===0),w.errors.length===0?d({title:"Validation Successful",description:`File validated successfully. Found ${w.preview.length} records.`}):d({title:"Validation Issues Found",description:`Found ${w.errors.length} validation errors. Please review.`,variant:"destructive"})},onError:w=>{d({title:"Validation Failed",description:w.message||"Failed to validate file",variant:"destructive"})}}),p=Ut({mutationFn:async()=>{if(!e)throw new Error("No file selected");const w=new FormData;w.append("file",e),w.append("importType",r);const v=localStorage.getItem("jwt_token");return v?(w.append("jwtToken",v),console.log(`[ImportLeaveData] ✅ Passing JWT token for ${r} import`)):console.warn(`[ImportLeaveData] ⚠️ No JWT token found - ${r} import may fail`),(await Ct("POST","/api/import-leave-data/execute",w)).json()},onSuccess:w=>{Ye.invalidateQueries({queryKey:["/api/employee-leave-balances"]}),Ye.invalidateQueries({queryKey:["/api/leave-balance-transactions"]});let v=`Successfully imported ${w.imported} of ${w.total} records`;w.importStats&&w.total-w.imported>0&&(v+=`

Skipped records breakdown:`,w.importStats.skippedEmpty>0&&(v+=`
• Empty/missing fields: ${w.importStats.skippedEmpty}`),w.importStats.skippedHeaders>0&&(v+=`
• Header rows: ${w.importStats.skippedHeaders}`),w.importStats.skippedMissingEmployee>0&&(v+=`
• Employee not found: ${w.importStats.skippedMissingEmployee}`),w.importStats.skippedMissingLeaveType>0&&(v+=`
• Leave type not found: ${w.importStats.skippedMissingLeaveType}`),w.importStats.processingErrors>0&&(v+=`
• Processing errors: ${w.importStats.processingErrors}`)),d({title:"Import Successful",description:v}),t(null),i([]),l([]),u(!1)},onError:w=>{d({title:"Import Failed",description:w.message||"Failed to import data",variant:"destructive"})}}),y=()=>{console.log("Download Balance Template clicked"),x("balances")},b=()=>{console.log("Download Transaction Template clicked"),x("transactions")};console.log("ImportLeaveData state:",{importType:r});const x=async(w=r)=>{try{let v=[];try{console.log("[ImportLeaveData] Fetching employee data from external API..."),v=(await vi()).map(eh),console.log("[ImportLeaveData] Successfully fetched:",v.length,"employees")}catch(E){console.log("[ImportLeaveData] External API error:",E)}v.length===0&&(console.log("No employee data available, generating template with empty employee fields"),d({title:"No Employee Data",description:"Could not fetch employee data from external API. Template will have empty employee fields.",variant:"default"}));let j=[];if(w==="balances")j=[["Leave balance details for the current calendar year as on migration"],[],["EmpNumber","EmpName","LeaveType","LeaveOpeningBalance","LeaveEncashed","LeaveLapsed"]];else{j=[["Leave availed details from the beginning of the current calendar year till migration cut off date"],[],["EmpNumber","EmpName","LeaveType","LeaveTakenStartDate","Is Start Date a Half Day","LeaveTakenEndDate","Is End Date a Half Day","TotalLeaveDays","Status"]];const E=h;console.log("[ImportLeaveData] Transaction template: Only including column headers, no employee data");const R=Es.book_new(),I=Es.aoa_to_sheet(j);I["!cols"]=[{wch:12},{wch:20},{wch:15},{wch:18},{wch:20},{wch:18},{wch:20},{wch:15},{wch:12}],I["!merges"]||(I["!merges"]=[]),I["!merges"].push({s:{r:0,c:0},e:{r:0,c:7}}),Es.book_append_sheet(R,I,"Leave Transaction Import");const L=np(R,{bookType:"xlsx",type:"array"}),q=new Blob([L],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),H=window.URL.createObjectURL(q),B=document.createElement("a");B.href=H,B.download="leave_transaction_import_template.xlsx",document.body.appendChild(B),B.click(),document.body.removeChild(B),window.URL.revokeObjectURL(H),d({title:"Template Downloaded",description:"Transaction template with column headers only"});return}const S=h;if(v.length>0)for(const E of S)try{const R=await fetch("/api/leave-variants",{credentials:"include",headers:{"X-Org-Id":localStorage.getItem("org_id")||"60"}});if(R.ok){const ee=(await R.json()).filter(q=>q.leaveTypeName===E.name),L=new Set;for(const q of ee)try{const H=await fetch(`/api/employee-assignments/${q.id}`,{credentials:"include"});H.ok&&(await H.json()).forEach(de=>{L.add(de.userId)})}catch{console.log(`Could not fetch assignments for variant ${q.id}`)}v.forEach(q=>{const H=q.user_id||q.id,B=q.employeeNumber||q.employee_number;L.has(H)&&B&&(w==="balances"?j.push([B,q.user_name||q.name||`${q.firstName||""} ${q.lastName||""}`.trim()||"",E.name,"","",""]):j.push([B,q.user_name||q.name||`${q.firstName||""} ${q.lastName||""}`.trim()||"",E.name,"","","","approved"]))})}}catch(R){console.log(`Error processing leave type ${E.name}:`,R)}else S.forEach(E=>{w==="balances"?j.push(["EMP001","Sample Employee",E.name,"","",""]):j.push(["EMP001","Sample Employee",E.name,"","","","approved"])});const _=Es.book_new(),A=Es.aoa_to_sheet(j);w==="balances"?A["!cols"]=[{wch:12},{wch:20},{wch:15},{wch:18},{wch:14},{wch:12}]:A["!cols"]=[{wch:12},{wch:20},{wch:15},{wch:12},{wch:12},{wch:8},{wch:10}],A["!merges"]||(A["!merges"]=[]);let C=6;w==="balances"&&(C=6),A["!merges"].push({s:{r:0,c:0},e:{r:0,c:C}});const D=w==="balances"?"Leave Balance Import":"Leave Transaction Import";Es.book_append_sheet(_,A,D);const k=np(_,{bookType:"xlsx",type:"array"}),O=new Blob([k],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),V=window.URL.createObjectURL(O),G=document.createElement("a");G.href=V;const Y=w==="balances"?"leave_balance_import_template.xlsx":"leave_transaction_import_template.xlsx";G.download=Y,document.body.appendChild(G),G.click(),document.body.removeChild(G),window.URL.revokeObjectURL(V);const W=j.length-3,P=v.length>0?`Generated template with ${W} rows based on actual employee assignments`:`Generated empty template with ${S.length} leave types - fill in employee data manually`;d({title:"Template Downloaded",description:P})}catch(v){console.error("Template generation error:",v),d({title:"Download Failed",description:v instanceof Error?v.message:"Failed to generate template",variant:"destructive"})}};return s.jsx(Sr,{children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Import Leave Data"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Import employee leave balances and transaction history"})]}),s.jsxs(Ce,{className:"mb-6",children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Import Instructions"})}),s.jsx(Ie,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border-2 border-blue-200 bg-blue-50 p-4 rounded-lg",children:[s.jsx(tt,{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Select Template Type"}),s.jsxs("div",{className:"flex space-x-6",children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"importType",value:"balances",checked:r==="balances",onChange:w=>n(w.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Balance Template"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"importType",value:"transactions",checked:r==="transactions",onChange:w=>n(w.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Transaction Template"})]})]})]}),s.jsx("div",{className:"space-y-3 text-sm text-gray-600",children:r==="balances"?s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"Import employee leave balance data from your previous system."}),s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Required Format for Leave Balances:"}),s.jsxs("ul",{className:"text-blue-800 space-y-1",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"EmpNumber:"})," Employee ID (e.g., HIN/00001)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"EmpName:"})," Employee full name"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"LeaveType:"})," Leave type code (EL, CL, SL, etc.)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"LeaveOpeningBalance:"})," Current available balance"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"LeaveEncashed:"})," Amount encashed (if applicable)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"LeaveLapsed:"})," Amount that expired/lapsed"]})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"Import historical leave transactions that employees have already taken."}),s.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[s.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Required Format for Leave Transactions:"}),s.jsxs("ul",{className:"text-green-800 space-y-1",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"EmpNumber:"})," Employee ID (e.g., HIN/00001)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"EmpName:"})," Employee full name"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"LeaveType:"})," Leave type code (EL, CL, SL, etc.)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"LeaveTakenStartDate:"})," Leave start date (dd-MM-YYYY)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Is Start Date a Half Day:"})," TRUE/FALSE for half day start"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"LeaveTakenEndDate:"})," Leave end date (dd-MM-YYYY)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Is End Date a Half Day:"})," TRUE/FALSE for half day end"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"TotalLeaveDays:"})," Number of leave days taken (must be greater than 0)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Status:"})," Approved/1 (deducts balance), Rejected/0 (no deduction), or Pending/2 (no deduction)"]})]}),s.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded text-yellow-800",children:[s.jsx("strong",{children:"Important:"})," Ensure TotalLeaveDays column contains actual day counts (e.g., 1, 2, 0.5) and not zero values."]})]})]})})]})})]}),s.jsxs(Ce,{className:"mb-6",children:[s.jsx(Tt,{children:s.jsxs(Et,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Upload Data File"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{variant:"outline",onClick:y,className:"flex items-center space-x-2",children:[s.jsx(Vi,{className:"w-4 h-4"}),s.jsx("span",{children:"Download Balance Template"})]}),s.jsxs(se,{variant:"outline",onClick:b,className:"flex items-center space-x-2",children:[s.jsx(Vi,{className:"w-4 h-4"}),s.jsx("span",{children:"Download Transaction Template"})]})]})]})}),s.jsx(Ie,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"file",className:"text-sm font-medium text-gray-700",children:"Select File"}),s.jsx(ht,{id:"file",type:"file",accept:".csv,.xls,.xlsx",onChange:m,className:"mt-1"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Supported formats: CSV, Excel (.xls, .xlsx)"})]}),e&&s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx(MF,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:e.name}),s.jsxs("p",{className:"text-xs text-blue-600",children:[(e.size/1024).toFixed(1)," KB"]})]}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>g.mutate(e),disabled:g.isPending,children:g.isPending?"Validating...":"Validate"})]})]})})]}),o.length>0&&s.jsxs(Ce,{className:"mb-6 border-red-200",children:[s.jsx(Tt,{children:s.jsxs(Et,{className:"text-red-900 flex items-center space-x-2",children:[s.jsx(cf,{className:"w-5 h-5"}),s.jsx("span",{children:"Validation Errors"})]})}),s.jsx(Ie,{children:s.jsx("div",{className:"space-y-2",children:o.map((w,v)=>s.jsxs("div",{className:"flex items-start space-x-2 text-sm text-red-800",children:[s.jsx(da,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:w})]},v))})})]}),a&&a.length>0&&s.jsxs(Ce,{className:"mb-6",children:[s.jsx(Tt,{children:s.jsxs(Et,{className:"flex items-center space-x-2",children:[c?s.jsx(qn,{className:"w-5 h-5 text-green-600"}):s.jsx(cf,{className:"w-5 h-5 text-yellow-600"}),s.jsx("span",{children:"Data Preview"}),s.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",a.length," records)"]})]})}),s.jsx(Ie,{children:s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b",children:Object.keys(a[0]||{}).map(w=>s.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-700",children:w.replace(/_/g," ").replace(/\b\w/g,v=>v.toUpperCase())},w))})}),s.jsx("tbody",{children:a.slice(0,5).map((w,v)=>s.jsx("tr",{className:"border-b",children:Object.values(w).map((j,S)=>s.jsx("td",{className:"py-2 px-3 text-gray-600",children:String(j)},S))},v))})]}),a.length>5&&s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Showing first 5 rows of ",a.length," total records"]})]})})]}),c&&s.jsx(Ce,{children:s.jsx(Ie,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Ready to Import"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[a.length," records validated and ready for import"]})]}),s.jsx(se,{onClick:()=>p.mutate(),disabled:p.isPending,className:"bg-green-600 hover:bg-green-700 text-white",children:p.isPending?"Importing...":"Import Data"})]})})})]})})})}const IIe="modulepreload",MIe=function(e){return"/"+e},aI={},pU=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=MIe(c),c in aI)return;aI[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":IIe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function Ru(){const[e,t]=N.useState([]),[r,n]=N.useState(!1),[a,i]=N.useState(null);return N.useEffect(()=>{const l=setTimeout(async()=>{try{if(n(!0),i(null),!localStorage.getItem("jwt_token")){console.log("[ExternalEmployee] No JWT token available, skipping API call"),n(!1);return}const{fetchEmployeeData:u,transformEmployeeData:d}=await pU(async()=>{const{fetchEmployeeData:m,transformEmployeeData:g}=await Promise.resolve().then(()=>TY);return{fetchEmployeeData:m,transformEmployeeData:g}},void 0);console.log("[ExternalEmployee] Using existing working API...");const h=(await u()).map(m=>({user_id:m.user_id,user_name:m.user_name||`${m.first_name||""} ${m.last_name||""}`.trim()||m.employee_number||`Employee ${m.user_id}`,first_name:m.first_name,last_name:m.last_name,employee_number:m.employee_number,designation:m.designation_name,department:m.band_name,email:m.email,mobile:m.Mobile_number_1,gender:m.gender_name,date_of_joining:m.date_of_joining,type_id_0:m.type_id_0,type_id_1:m.type_id_1}));console.log("[ExternalEmployee] Successfully loaded",h.length,"employees"),t(h)}catch(c){console.log("[ExternalEmployee] External employee data fetch error:",c),i(c instanceof Error?c.message:"Failed to fetch employee data")}finally{n(!1)}},100);return()=>clearTimeout(l)},[]),{employees:e,loading:r,error:a}}const RIe=Zn({assigneeName:rr().min(1,"Assignee name is required"),assigneeUserId:rr().min(1,"Assignee user ID is required"),assigneeEmail:rr().email("Valid email is required"),assigneePhone:rr().optional(),taskDescription:rr().min(10,"Task description must be at least 10 characters"),expectedSupportDateFrom:ql(),expectedSupportDateTo:ql(),additionalNotes:rr().optional()}),FIe=Zn({tasks:as(RIe).min(1,"At least one task is required")});function LIe({leaveRequestId:e,maxTasks:t,onSuccess:r,onCancel:n,className:a,onTasksChange:i}){const{toast:o}=Vr(),l=tc(),{employees:c,loading:u}=Ru(),[d,f]=N.useState([{assigneeName:"",assigneeUserId:"",assigneeEmail:"",assigneePhone:"",taskDescription:"",expectedSupportDateFrom:new Date,expectedSupportDateTo:new Date,additionalNotes:""}]),{register:h,handleSubmit:m,formState:{errors:g},watch:p,setValue:y}=os({resolver:Cs(FIe),defaultValues:{tasks:d}}),b=Ut({mutationFn:async S=>{const _=S.map(A=>({...A,expectedSupportDateFrom:A.expectedSupportDateFrom.toISOString().split("T")[0],expectedSupportDateTo:A.expectedSupportDateTo.toISOString().split("T")[0],notificationMethod:"email",assigneeUserId:A.assigneeUserId}));return console.log("🚀 Submitting tasks with assigneeUserId:",_.map(A=>({name:A.assigneeName,userId:A.assigneeUserId}))),console.log("🚀 Full task payload:",_),await Ct("POST",`/api/leave-requests/${e}/tasks`,{tasks:_})},onSuccess:()=>{l.invalidateQueries({queryKey:[`/api/leave-requests/${e}/tasks`]}),o({title:"Tasks Created",description:"All task assignments have been created successfully."}),r==null||r()},onError:S=>{o({title:"Error",description:"Failed to create task assignments. Please try again.",variant:"destructive"})}}),x=()=>{const S=[...d,{assigneeName:"",assigneeUserId:"",assigneeEmail:"",assigneePhone:"",taskDescription:"",expectedSupportDateFrom:new Date,expectedSupportDateTo:new Date,additionalNotes:""}];f(S),y("tasks",S),i==null||i(S)},w=S=>{if(d.length>1){const _=d.filter((A,C)=>C!==S);f(_),y("tasks",_),i==null||i(_)}},v=(S,_,A)=>{const C=[...d];C[S]={...C[S],[_]:A},f(C),y("tasks",C),i==null||i(C)},j=S=>{b.mutate(S.tasks)};return s.jsxs("div",{className:Ge("space-y-6",a),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Bn,{className:"h-6 w-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Collaborative Leave Setup"}),s.jsx("p",{className:"text-gray-600",children:"Assign tasks to colleagues to ensure smooth operations during your leave"})]})]}),s.jsxs("form",{onSubmit:m(j),className:"space-y-6",children:[d.map((S,_)=>{var A,C,D,k,O,V,G,Y,W,P,E,R,I,ee,L;return s.jsxs(Ce,{className:"relative",children:[s.jsxs(Tt,{className:"pb-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Et,{className:"text-lg",children:["Task Assignment ",_+1]}),d.length>1&&s.jsx(se,{type:"button",variant:"outline",size:"sm",onClick:()=>w(_),className:"text-red-600 hover:text-red-700",children:s.jsx(ua,{className:"h-4 w-4"})})]}),s.jsx(hf,{children:"Specify who will handle this task and how they should be notified"})]}),s.jsxs(Ie,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(tt,{htmlFor:`assigneeName-${_}`,children:"Assignee Name *"}),u?s.jsx(ht,{disabled:!0,value:"Loading employees...",placeholder:"Loading employees..."}):s.jsxs(yt,{value:S.assigneeUserId||"",onValueChange:q=>{console.log("🔵 Select onValueChange triggered with userId:",q),console.log("🔵 Current task state:",S);const H=c.find(B=>String(B.user_id)===String(q));if(console.log("🔵 Found employee:",H),H){const B={assigneeUserId:String(q),assigneeName:H.user_name||`Employee ${q}`,assigneeEmail:H.email||""};console.log("🔵 Updating task with:",B);const de=[...d];de[_]={...de[_],assigneeUserId:B.assigneeUserId,assigneeName:B.assigneeName,assigneeEmail:B.assigneeEmail},f(de),y("tasks",de),i==null||i(de),console.log("🔵 State updated successfully")}},children:[s.jsx(gt,{className:(C=(A=g.tasks)==null?void 0:A[_])!=null&&C.assigneeName?"border-red-500":"",children:s.jsx(vt,{placeholder:"Select a colleague"})}),s.jsx(xt,{children:c.map(q=>{const H=q.user_name||`Employee ${q.user_id}`,B=q.employee_number?` (${q.employee_number})`:"";return s.jsxs(je,{value:String(q.user_id),children:[H,B]},q.user_id)})})]},`select-${_}-${S.assigneeUserId}`),((k=(D=g.tasks)==null?void 0:D[_])==null?void 0:k.assigneeName)&&s.jsx("p",{className:"text-sm text-red-500",children:(O=g.tasks[_].assigneeName)==null?void 0:O.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(tt,{htmlFor:`assigneeEmail-${_}`,children:"Email Address *"}),s.jsx(ht,{id:`assigneeEmail-${_}`,type:"email",value:S.assigneeEmail,onChange:q=>v(_,"assigneeEmail",q.target.value),placeholder:"colleague@company.com",className:(G=(V=g.tasks)==null?void 0:V[_])!=null&&G.assigneeEmail?"border-red-500":""}),((W=(Y=g.tasks)==null?void 0:Y[_])==null?void 0:W.assigneeEmail)&&s.jsx("p",{className:"text-sm text-red-500",children:(P=g.tasks[_].assigneeEmail)==null?void 0:P.message})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(tt,{htmlFor:`assigneePhone-${_}`,children:"Phone Number (Optional)"}),s.jsx(ht,{id:`assigneePhone-${_}`,value:S.assigneePhone,onChange:q=>v(_,"assigneePhone",q.target.value),placeholder:"+1 (555) 123-4567"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(tt,{htmlFor:`taskDescription-${_}`,children:"Task Description *"}),s.jsx(Cn,{id:`taskDescription-${_}`,value:S.taskDescription,onChange:q=>v(_,"taskDescription",q.target.value),placeholder:"Describe what needs to be done, include any specific instructions, deadlines, or important details...",rows:4,className:(R=(E=g.tasks)==null?void 0:E[_])!=null&&R.taskDescription?"border-red-500":""}),((ee=(I=g.tasks)==null?void 0:I[_])==null?void 0:ee.taskDescription)&&s.jsx("p",{className:"text-sm text-red-500",children:(L=g.tasks[_].taskDescription)==null?void 0:L.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(tt,{children:"Expected Support Date Range *"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(tt,{className:"text-xs text-gray-500",children:"From Date"}),s.jsxs(wl,{children:[s.jsx(bl,{asChild:!0,children:s.jsxs(se,{variant:"outline",className:Ge("w-full justify-start text-left font-normal",!S.expectedSupportDateFrom&&"text-muted-foreground"),children:[s.jsx(br,{className:"mr-2 h-4 w-4"}),S.expectedSupportDateFrom?dt(S.expectedSupportDateFrom,"PPP"):"Start date"]})}),s.jsx(yo,{className:"w-auto p-0",children:s.jsx(xo,{mode:"single",selected:S.expectedSupportDateFrom,onSelect:q=>q&&v(_,"expectedSupportDateFrom",q),initialFocus:!0})})]})]}),s.jsxs("div",{children:[s.jsx(tt,{className:"text-xs text-gray-500",children:"To Date"}),s.jsxs(wl,{children:[s.jsx(bl,{asChild:!0,children:s.jsxs(se,{variant:"outline",className:Ge("w-full justify-start text-left font-normal",!S.expectedSupportDateTo&&"text-muted-foreground"),children:[s.jsx(br,{className:"mr-2 h-4 w-4"}),S.expectedSupportDateTo?dt(S.expectedSupportDateTo,"PPP"):"End date"]})}),s.jsx(yo,{className:"w-auto p-0",children:s.jsx(xo,{mode:"single",selected:S.expectedSupportDateTo,onSelect:q=>q&&v(_,"expectedSupportDateTo",q),initialFocus:!0})})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(tt,{htmlFor:`additionalNotes-${_}`,children:"Additional Notes (Optional)"}),s.jsx(Cn,{id:`additionalNotes-${_}`,value:S.additionalNotes,onChange:q=>v(_,"additionalNotes",q.target.value),placeholder:"Any additional information, special instructions, or context for this task...",rows:3})]})]})]},_)}),s.jsxs(se,{type:"button",variant:"outline",onClick:x,className:"w-full border-dashed",children:[s.jsx(gn,{className:"h-4 w-4 mr-2"}),"Add Another Task Assignment"]}),s.jsx("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:n&&s.jsx(se,{type:"button",variant:"outline",onClick:n,children:"Cancel"})})]})]})}function sI(){var pc,z,re,X,J,ne;const[e,t]=N.useState(!1),[r,n]=N.useState("2025"),[a,i]=N.useState("Yearly"),[o,l]=N.useState(null),[c,u]=N.useState(!1),[d,f]=N.useState(!1),[h,m]=N.useState(null),[g,p]=N.useState(""),[y,b]=N.useState(!1),[x,w]=N.useState(""),[v,j]=N.useState(!1),[S,_]=N.useState([]),{toast:A}=Vr(),C=n0(),{employees:D}=Ru(),{workPattern:k,holidays:O,isLoading:V,isWorkingDay:G,isHoliday:Y,getHolidayDetails:W,calculateWorkingDays:P}=oh(),E=localStorage.getItem("user_id")||"14674",R=localStorage.getItem("org_id")||"18",I=Ut({mutationFn:async()=>{console.log("[AfterEarning - LeaveApp] Triggering balance recalculation for After Earning leave types");const T=await fetch("/api/recalculate-leave-balances",{method:"POST",headers:{"Content-Type":"application/json","X-Org-Id":R}});if(!T.ok)throw new Error("Recalculation failed");return T.json()},onSuccess:()=>{console.log("[AfterEarning - LeaveApp] Balance recalculation completed successfully"),Ye.invalidateQueries({queryKey:[`/api/employee-leave-balances/${E}`]}),Ye.invalidateQueries({queryKey:["/api/employee-leave-balances"]})},onError:T=>{console.error("[AfterEarning - LeaveApp] Balance recalculation failed:",T)}});N.useEffect(()=>{if(console.log("=== EXTERNAL EMPLOYEE DATA DEBUG ==="),console.log("External employees loaded:",(D==null?void 0:D.length)||0),console.log("Current user ID:",E),(D==null?void 0:D.length)>0){const T=D.find(F=>{var Z,Q,ie;return((Z=F.user_id)==null?void 0:Z.toString())===E||((Q=F.id)==null?void 0:Q.toString())===E||((ie=F.employee_number)==null?void 0:ie.toString())===E});console.log("Found current employee:",T),console.log("Employee joining date:",T==null?void 0:T.date_of_joining)}console.log("===================================")},[D,E]),N.useEffect(()=>{var T,F,Z,Q,ie;console.log("=== LEAVE PERMISSION DEBUG ==="),console.log("Current role from localStorage:",localStorage.getItem("role")),console.log("Current org_id from localStorage:",localStorage.getItem("org_id")),console.log("Full permissions hook result:",C),console.log("permissions.permissions:",C==null?void 0:C.permissions),console.log("allowOnBehalf from permissions.permissions:",(T=C==null?void 0:C.permissions)==null?void 0:T.allowOnBehalf),console.log("allowOnBehalf.leave:",(Z=(F=C==null?void 0:C.permissions)==null?void 0:F.allowOnBehalf)==null?void 0:Z.leave),console.log("Should show checkbox?",(ie=(Q=C==null?void 0:C.permissions)==null?void 0:Q.allowOnBehalf)==null?void 0:ie.leave),console.log("================================")},[C]),N.useEffect(()=>{if(new URLSearchParams(window.location.search).get("onBehalf")==="true"){const Z=localStorage.getItem("applyOnBehalfEmployee");if(Z)try{const Q=JSON.parse(Z);b(!0),w(Q.id),t(!0),localStorage.removeItem("applyOnBehalfEmployee"),window.history.replaceState({},document.title,window.location.pathname)}catch(Q){console.error("Error parsing stored employee data:",Q)}}},[]),N.useEffect(()=>{e||(b(!1),w(""),te({startDate:"",endDate:"",reason:"",description:"",halfDay:!1,quarterDay:!1,documents:[]}),le({startHalfDay:!1,endHalfDay:!1}),fe(null),Ne([]))},[e]),N.useEffect(()=>{window.dispatchEvent(new CustomEvent("permissions-updated"))},[]);const{data:ee=[]}=Fe({queryKey:[`/api/leave-requests?userId=${E}`]}),{data:L=[]}=Fe({queryKey:["/api/leave-types"],staleTime:0,refetchOnMount:!0}),{data:q=[]}=Fe({queryKey:["/api/employee-assignments"]}),{data:H=[]}=Fe({queryKey:["/api/leave-variants"]});N.useEffect(()=>{if(H&&H.length>0&&!I.isPending){const T=H.filter(F=>F.grantLeaves==="after_earning");if(T.length>0){const F=`after_earning_recalc_${R}_${new Date().toDateString()}`;sessionStorage.getItem(F)?console.log("[AfterEarning - LeaveApp] Already recalculated today, skipping"):(console.log("[AfterEarning - LeaveApp] Found After Earning leave types, triggering balance recalculation:",T.map(Q=>({id:Q.id,name:Q.leaveVariantName}))),sessionStorage.setItem(F,"true"),I.mutate())}}},[H,R,I.isPending]);const{data:B=[],refetch:de}=Fe({queryKey:[`/api/employee-leave-balances/${E}`],enabled:!0,staleTime:0,refetchOnMount:!0}),{data:ce=[]}=Fe({queryKey:[`/api/leave-balance-transactions/${E}`],enabled:!0}),{data:ge=[]}=Fe({queryKey:["/api/blackout-periods"],staleTime:5*60*1e3}),{data:he}=Fe({queryKey:["/api/collaborative-leave-settings"],staleTime:5*60*1e3}),[K,fe]=N.useState(null),[ae,Ne]=N.useState([]),[Se,Ae]=N.useState(!1),[Oe,M]=N.useState(""),[oe,be]=N.useState(!0),[U,te]=N.useState({startDate:"",endDate:"",reason:"",description:"",halfDay:!1,quarterDay:!1,documents:[]}),[xe,le]=N.useState({startHalfDay:!1,endHalfDay:!1}),ye=(T,F,Z)=>{if(!ge||ge.length===0)return null;console.log("🚫 [Blackout Period Validation] Checking for conflicts:",{userId:T,userIdString:T.toString(),startDate:F.toISOString().split("T")[0],endDate:Z.toISOString().split("T")[0],blackoutPeriods:ge.length});for(const Q of ge){const ie=Q.assignedEmployees&&(Q.assignedEmployees.includes(T.toString())||Q.assignedEmployees.includes(parseInt(T)));if(!ie)continue;const ue=new Date(Q.startDate),Te=new Date(Q.endDate),_e=F<=Te&&ue<=Z;if(console.log("🚫 [Blackout Period Validation] Checking period:",{periodId:Q.id,periodTitle:Q.title,periodDates:`${ue.toISOString().split("T")[0]} to ${Te.toISOString().split("T")[0]}`,isUserAssigned:ie,hasOverlap:_e,allowLeaves:Q.allowLeaves,assignedEmployees:Q.assignedEmployees}),_e)if(Q.allowLeaves)console.log("🚫 [Blackout Period Info] Leave overlaps with blackout period but applications are allowed:",{periodTitle:Q.title,allowLeaves:Q.allowLeaves});else{const Ee=ue.toLocaleDateString(),we=Te.toLocaleDateString();return Ee===we?`You are not allowed to apply for leave during the blackout period "${Q.title}" on ${Ee}.`:`You are not allowed to apply for leave during the blackout period "${Q.title}" from ${Ee} to ${we}.`}}return null},ve=()=>{if(!U.startDate||!U.endDate)return 0;const T=new Date(U.startDate),F=new Date(U.endDate);let Z=P(T,F);return T.getTime()===F.getTime()?(xe.startHalfDay||xe.endHalfDay)&&(Z=.5):(xe.startHalfDay&&(Z-=.5),xe.endHalfDay&&(Z-=.5)),Z},ke=T=>T.toISOString().split("T")[0],it=ke(k?new Date(k.startDate):new Date("2025-01-01")),ot=ke(k?new Date(k.endDate):new Date("2025-12-31")),Nt=Array.isArray(q)?q:[],Le=Array.isArray(H)?H:[],rt=Nt.filter(T=>T.userId===E&&T.assignmentType==="leave_variant"),Mt=rt.map(T=>T.leaveVariantId),at=Le.filter(T=>Mt.includes(T.id));console.log("🔍 LEAVE TYPE DEBUG:",{userId:E,totalAssignments:Nt.length,userAssignments:rt.length,assignedVariantIds:Mt,availableVariants:at.length,variantNames:at.map(T=>T.leaveVariantName)}),D==null||D.find(T=>{var F,Z,Q;return((F=T.user_id)==null?void 0:F.toString())===E||((Z=T.id)==null?void 0:Z.toString())===E||((Q=T.employee_number)==null?void 0:Q.toString())===E}),N.useEffect(()=>{if(console.log("🔍 [Applicable After Debug] Effect triggered:",{selectedLeaveType:(K==null?void 0:K.leaveVariantName)||(K==null?void 0:K.leaveTypeName),applicableAfterType:K==null?void 0:K.applicableAfterType,applicableAfter:K==null?void 0:K.applicableAfter,currentUserId:E,externalEmployeesCount:(D==null?void 0:D.length)||0}),!K){M(""),be(!0);return}if(K.applicableAfterType&&K.applicableAfterType!=="date_of_joining"){console.log("🔍 [Applicable After Debug] Checking eligibility for:",K.applicableAfterType);const T=D==null?void 0:D.find(F=>{var Q,ie,ue,Te,_e;const Z=((Q=F.user_id)==null?void 0:Q.toString())===E||((ie=F.id)==null?void 0:ie.toString())===E||((ue=F.employee_number)==null?void 0:ue.toString())===E;return Z&&console.log("🔍 [Employee Match] Found matching employee:",{emp_user_id:F.user_id,emp_id:F.id,emp_employee_number:F.employee_number,currentUserId:E,matched_on:((Te=F.user_id)==null?void 0:Te.toString())===E?"user_id":((_e=F.id)==null?void 0:_e.toString())===E?"id":"employee_number"}),Z});if(console.log("🔍 [Applicable After Debug] Found employee:",{currentEmployee:T?{user_id:T.user_id,id:T.id,employee_number:T.employee_number,date_of_joining:T.date_of_joining,name:T.user_name||T.name}:"NOT FOUND"}),T&&T.date_of_joining){const F=new Date(T.date_of_joining),Z=new Date;if(console.log("🔍 [Applicable After Debug] Date comparison:",{joiningDate:F.toLocaleDateString(),today:Z.toLocaleDateString(),applicableAfter:K.applicableAfter}),K.applicableAfterType==="days"&&K.applicableAfter>0){const Q=new Date(F);if(Q.setDate(Q.getDate()+K.applicableAfter),console.log("🔍 [Applicable After Debug] Eligibility check:",{eligibleDate:Q.toLocaleDateString(),todayLessThanEligible:Z<Q}),Z<Q){const ie=Math.ceil((Q.getTime()-Z.getTime())/864e5),ue=`You can apply for ${K.leaveVariantName||K.leaveTypeName} only after ${K.applicableAfter} days from your joining date (${F.toLocaleDateString()}). Eligible from ${Q.toLocaleDateString()} (${ie} days remaining)`;console.log("🚫 [Applicable After Debug] Setting error:",ue),M(ue),be(!1);return}}}else console.log("🔍 [Applicable After Debug] No employee or joining date found")}else console.log("🔍 [Applicable After Debug] No applicable after type or is date_of_joining");console.log("✅ [Applicable After Debug] Leave type is eligible"),M(""),be(!0)},[K,D,E]),console.log("🧮 [Summary Cards Debug] Data loading state:",{leaveTransactionsLoaded:ce.length>0,leaveBalancesLoaded:B.length>0,availableVariantsCount:(at==null?void 0:at.length)||0,sampleTransaction:ce[0]||"No transactions",sampleBalance:B[0]||"No balances"}),N.useEffect(()=>{console.log("🔄 [Data Change] LeaveApplications calculation dependencies changed:",{timestamp:new Date().toLocaleTimeString(),transactionCount:ce.length,balanceCount:B.length,variantCount:(at==null?void 0:at.length)||0,userId:E})},[ce,B,at,E]);const $t=Array.isArray(O)?O:[],Ke=Array.isArray(B)?B:[],Dt=(T,F,Z,Q)=>{var nn,an;const ie=[],ue=P(F,Z);console.log("Validation Debug:",{startDate:F.toISOString().split("T")[0],endDate:Z.toISOString().split("T")[0],actualWorkingDays:ue,variantMaxDays:T.maxDaysInStretch,variantName:T.leaveVariantName});const Te=Ke.find(He=>He.leaveVariantId===T.id),_e=Te?parseFloat(Te.currentBalance):0,Ee=Array.isArray(L)?L.find(He=>He.id===T.leaveTypeId):null,we=(Ee==null?void 0:Ee.negativeLeaveBalance)??0;if(we===0)ue>_e&&ie.push(`Insufficient balance. Available: ${_e} days, Requested: ${ue} days. Negative balance is not allowed for this leave type.`);else{const He=_e-ue,kt=-Math.abs(we);He<kt&&ie.push(`Insufficient balance. Available: ${_e} days, Requested: ${ue} days. Maximum negative balance allowed: ${Math.abs(we)} days.`)}((nn=T.leaveVariantName)!=null&&nn.includes("Casual")||(an=T.leaveVariantName)!=null&&an.includes("Sick"))&&console.log("🚫 [Negative Balance Validation]:",{variantName:T.leaveVariantName,leaveTypeId:T.leaveTypeId,leaveType:Ee==null?void 0:Ee.name,leaveTypeRaw:Ee,allowNegativeBalance:we,availableDays:_e,requestedDays:ue,wouldResultInBalance:_e-ue,negativeLimit:we>0?-Math.abs(we):"N/A",isNegativeAllowed:we>0,validationCheck:we===0?"STRICT_MODE":"NEGATIVE_ALLOWED",willPassValidation:we===0?ue<=_e:_e-ue>=-Math.abs(we),allLeaveTypes:Array.isArray(L)?L.map(He=>({id:He.id,name:He.name,negativeBalance:He.negativeLeaveBalance})):"Not array"}),T.minDaysRequired>0&&ue<T.minDaysRequired&&ie.push(`Minimum ${T.minDaysRequired} days required for this leave type`),T.maxDaysInStretch>0&&ue>T.maxDaysInStretch&&(console.log("Max days validation failed:",{actualWorkingDays:ue,maxDaysInStretch:T.maxDaysInStretch,comparison:`${ue} > ${T.maxDaysInStretch}`}),ie.push(`Maximum ${T.maxDaysInStretch} days allowed in a single application`));const De=new Date(F);for(;De<=Z;){const He=De.toISOString().split("T")[0];if($t.some(Zt=>Zt.selectedDate?new Date(Zt.selectedDate).toISOString().split("T")[0]===He:!1)){const Zt=$t.find(It=>It.selectedDate?new Date(It.selectedDate).toISOString().split("T")[0]===He:!1);ie.push(`Cannot apply leave on holiday: ${(Zt==null?void 0:Zt.holidayName)||"Holiday"} (${He})`)}De.setDate(De.getDate()+1)}if(T.mustBePlannedInAdvance>0){const He=new Date;Math.ceil((F.getTime()-He.getTime())/(1e3*60*60*24))<T.mustBePlannedInAdvance&&ie.push(`Leave must be planned ${T.mustBePlannedInAdvance} days in advance`)}if(T.applicableAfterType&&T.applicableAfterType!=="date_of_joining"){const He=D==null?void 0:D.find(kt=>{var Zt,It,sn;return((Zt=kt.user_id)==null?void 0:Zt.toString())===E||((It=kt.id)==null?void 0:It.toString())===E||((sn=kt.employee_number)==null?void 0:sn.toString())===E});if(He&&He.date_of_joining){const kt=new Date(He.date_of_joining),Zt=new Date;if(T.applicableAfterType==="specified_days"&&T.applicableAfterDays>0){const It=new Date(kt);if(It.setDate(It.getDate()+T.applicableAfterDays),Zt<It){const sn=Math.ceil((It.getTime()-Zt.getTime())/864e5);ie.push(`You can apply for ${T.leaveVariantName||T.leaveTypeName} only after ${T.applicableAfterDays} days from your joining date (${kt.toLocaleDateString()}). Eligible from ${It.toLocaleDateString()} (${sn} days remaining)`)}}else T.applicableAfterType==="probation_period_ends"&&console.log("Probation period validation would be implemented here with employee probation data")}else console.warn(`Cannot validate "Applicable after" for user ${E} - no joining date available`)}if(!T.allowLeavesBeforeWeekend){const He=new Date(Z);He.setDate(He.getDate()+1),(He.getDay()===6||He.getDay()===0)&&ie.push("Leave cannot be taken before weekends")}T.supportingDocuments&&U.documents.length===0&&ie.push("Supporting documents are required for this leave type");const Be=mc.filter(He=>new Date(He.startDate).getFullYear()===parseInt(r)&&He.leaveTypeId===T.leaveTypeId);T.maxInstances>0&&Be.length>=T.maxInstances&&ie.push(`Maximum ${T.maxInstances} applications allowed per ${T.maxInstancesPeriod}`);const Ve=y&&x?x:E,At=Array.isArray(ee)?ee:[];console.log("🔍 [Date Conflict Debug] Checking conflicts for user:",Ve),console.log("🔍 [Date Conflict Debug] Existing requests:",At.length),console.log("🔍 [Date Conflict Debug] Date range:",F.toISOString().split("T")[0],"to",Z.toISOString().split("T")[0]);const Bt=At.filter(He=>{if(console.log("🔍 [Date Conflict Debug] Checking request:",{id:He.id,userId:He.userId,status:He.status,startDate:He.startDate,endDate:He.endDate,editingId:o==null?void 0:o.id}),o&&He.id===o.id)return console.log("🔍 [Date Conflict Debug] Skipping current editing request"),!1;if(!["approved","pending"].includes(He.status))return console.log("🔍 [Date Conflict Debug] Skipping non-pending/approved request:",He.status),!1;if(He.userId!==Ve)return console.log("🔍 [Date Conflict Debug] Skipping different user:",He.userId,"vs",Ve),!1;const kt=new Date(He.startDate),Zt=new Date(He.endDate);console.log("🔍 [Date Conflict Debug] Date comparison:",{newStart:F.toISOString().split("T")[0],newEnd:Z.toISOString().split("T")[0],existingStart:kt.toISOString().split("T")[0],existingEnd:Zt.toISOString().split("T")[0]});const It=F<=Zt&&kt<=Z;return console.log("🔍 [Date Conflict Debug] Overlap check result:",It),It});if(console.log("🔍 [Date Conflict Debug] Conflicting requests found:",Bt.length),Bt.length>0){const He=Bt[0],kt=new Date(He.startDate).toLocaleDateString(),Zt=new Date(He.endDate).toLocaleDateString(),It=He.status==="approved"?"approved":"pending approval";console.log("🔍 [Date Conflict Debug] Adding conflict error:",{conflictStart:kt,conflictEnd:Zt,statusText:It}),kt===Zt?ie.push(`You already have a ${It} leave request on ${kt}`):ie.push(`You already have a ${It} leave request from ${kt} to ${Zt}`)}return ie},Jt=T=>{console.log("🎯 [Leave Type Change] Function called with:",{variantId:T,variantIdType:typeof T,availableVariantsCount:at.length,availableVariants:at.map(Z=>({id:Z.id,idType:typeof Z.id,idString:Z.id.toString(),name:Z.leaveVariantName}))});const F=at.find(Z=>Z.id.toString()===T);console.log("🎯 [Leave Type Change] Selected variant:",{variantId:T,variant:F?{id:F.id,leaveVariantName:F.leaveVariantName,leaveTypeName:F.leaveTypeName,applicableAfterType:F.applicableAfterType,applicableAfterDays:F.applicableAfterDays}:"NOT FOUND"}),fe(F),Ne([]),U.startDate&&U.endDate&&(console.log("🎯 [Leave Type Change] Dates already selected, triggering validation with new leave type"),setTimeout(()=>{Fu(U,F)},100)),console.log("🎯 [Leave Type Change] State updated, selectedLeaveType should be:",(F==null?void 0:F.leaveVariantName)||"undefined")},Gr=T=>{if(console.log("🔥 validateDatesWithData CALLED!",{selectedLeaveType:K==null?void 0:K.leaveVariantName,startDate:T.startDate,endDate:T.endDate,currentUserId:E}),!T.startDate||!T.endDate){console.log("Early return - missing dates"),Ne([]);return}const F=new Date(T.startDate),Z=new Date(T.endDate);if(isNaN(F.getTime())||isNaN(Z.getTime())){Ne([]);return}if(Z<F){Ne([]);return}let Q=[];if(K){P(F,Z);const Ee=Dt(K,F,Z);Q.push(...Ee)}const ie=y&&x?x:E,ue=Array.isArray(ee)?ee:[];console.log("🔍 [Date Conflict Debug] Checking conflicts for user:",ie),console.log("🔍 [Date Conflict Debug] Existing requests:",ue.length),console.log("🔍 [Date Conflict Debug] Date range:",F.toISOString().split("T")[0],"to",Z.toISOString().split("T")[0]);const Te=ue.filter(Ee=>{if(o&&Ee.id===o.id||!["approved","pending"].includes(Ee.status)||Ee.userId!==ie)return!1;const we=new Date(Ee.startDate),De=new Date(Ee.endDate),Be=F<=De&&we<=Z;return console.log("🔍 [Date Conflict Debug] Checking request:",{id:Ee.id,dates:`${we.toISOString().split("T")[0]} to ${De.toISOString().split("T")[0]}`,hasOverlap:Be}),Be});if(console.log("🔍 [Date Conflict Debug] Conflicting requests found:",Te.length),Te.length>0){const Ee=Te[0],we=new Date(Ee.startDate).toLocaleDateString(),De=new Date(Ee.endDate).toLocaleDateString(),Be=Ee.status==="approved"?"approved":"pending approval";we===De?Q.push(`You already have a ${Be} leave request on ${we}`):Q.push(`You already have a ${Be} leave request from ${we} to ${De}`)}const _e=ye(ie,F,Z);_e&&Q.push(_e),Ne(Q)},Fu=(T,F)=>{if(console.log("🔥 validateDatesWithVariant CALLED!",{variantName:(F==null?void 0:F.leaveVariantName)||"none",startDate:T.startDate,endDate:T.endDate,currentUserId:E}),!T.startDate||!T.endDate){console.log("Early return - missing dates"),Ne([]);return}const Z=new Date(T.startDate),Q=new Date(T.endDate);if(isNaN(Z.getTime())||isNaN(Q.getTime())){Ne([]);return}if(Q<Z){Ne([]);return}let ie=[];if(F){P(Z,Q);const we=Dt(F,Z,Q);ie.push(...we)}const ue=y&&x?x:E,Te=Array.isArray(ee)?ee:[];console.log("🔍 [Date Conflict Debug] Checking conflicts for user:",ue),console.log("🔍 [Date Conflict Debug] Existing requests:",Te.length),console.log("🔍 [Date Conflict Debug] Date range:",Z.toISOString().split("T")[0],"to",Q.toISOString().split("T")[0]);const _e=Te.filter(we=>{if(o&&we.id===o.id||!["approved","pending"].includes(we.status)||we.userId!==ue)return!1;const De=new Date(we.startDate),Be=new Date(we.endDate),Ve=Z<=Be&&De<=Q;return console.log("🔍 [Date Conflict Debug] Checking request:",{id:we.id,dates:`${De.toISOString().split("T")[0]} to ${Be.toISOString().split("T")[0]}`,hasOverlap:Ve}),Ve});if(console.log("🔍 [Date Conflict Debug] Conflicting requests found:",_e.length),_e.length>0){const we=_e[0],De=new Date(we.startDate).toLocaleDateString(),Be=new Date(we.endDate).toLocaleDateString(),Ve=we.status==="approved"?"approved":"pending approval";De===Be?ie.push(`You already have a ${Ve} leave request on ${De}`):ie.push(`You already have a ${Ve} leave request from ${De} to ${Be}`)}const Ee=ye(ue,Z,Q);Ee&&ie.push(Ee),Ne(ie)},fc=()=>{if(console.log("🔥 validateDates CALLED!",{selectedLeaveType:K==null?void 0:K.leaveVariantName,startDate:U.startDate,endDate:U.endDate,currentUserId:E}),!U.startDate||!U.endDate){console.log("Early return - missing dates"),Ne([]);return}console.log("🔍 [Date Conflict Debug] Starting validation in validateDates"),console.log("🔍 [Date Conflict Debug] Current leave requests length:",(ee==null?void 0:ee.length)||0),console.log("🔍 [Date Conflict Debug] Current user ID:",E),console.log("🔍 [Date Conflict Debug] Selected leave type:",(K==null?void 0:K.leaveVariantName)||"None selected");const T=new Date(U.startDate),F=new Date(U.endDate);if(isNaN(T.getTime())||isNaN(F.getTime())){Ne([]);return}if(F<T){Ne([]);return}let Z=[];if(K){P(T,F);const _e=Dt(K,T,F);Z.push(..._e)}console.log("🔍 [Date Conflict Debug] Starting validation in validateDates");const Q=y&&x?x:E,ie=Array.isArray(ee)?ee:[];console.log("🔍 [Date Conflict Debug] Checking conflicts for user:",Q),console.log("🔍 [Date Conflict Debug] Existing requests:",ie.length),console.log("🔍 [Date Conflict Debug] Date range:",T.toISOString().split("T")[0],"to",F.toISOString().split("T")[0]),console.log("🔍 [Date Conflict Debug] All existing requests for user",Q,":"),ie.forEach((_e,Ee)=>{_e.userId===Q&&console.log(`  Request ${Ee+1}: ${_e.startDate} to ${_e.endDate} (${_e.status})`)});const ue=ie.filter(_e=>{if(console.log("🔍 [Date Conflict Debug] Checking request:",{id:_e.id,userId:_e.userId,status:_e.status,startDate:_e.startDate,endDate:_e.endDate,editingId:o==null?void 0:o.id}),o&&_e.id===o.id)return console.log("🔍 [Date Conflict Debug] Skipping current editing request"),!1;if(!["approved","pending"].includes(_e.status))return console.log("🔍 [Date Conflict Debug] Skipping non-pending/approved request:",_e.status),!1;if(_e.userId!==Q)return console.log("🔍 [Date Conflict Debug] Skipping different user:",_e.userId,"vs",Q),!1;const Ee=new Date(_e.startDate),we=new Date(_e.endDate);console.log("🔍 [Date Conflict Debug] Date comparison:",{newStart:T.toISOString().split("T")[0],newEnd:F.toISOString().split("T")[0],existingStart:Ee.toISOString().split("T")[0],existingEnd:we.toISOString().split("T")[0]});const De=T<=we&&Ee<=F;return console.log("🔍 [Date Conflict Debug] Overlap check result:",De),De});if(console.log("🔍 [Date Conflict Debug] Conflicting requests found:",ue.length),ue.length>0){const _e=ue[0],Ee=new Date(_e.startDate).toLocaleDateString(),we=new Date(_e.endDate).toLocaleDateString(),De=_e.status==="approved"?"approved":"pending approval";console.log("🔍 [Date Conflict Debug] Adding conflict error:",{conflictStart:Ee,conflictEnd:we,statusText:De}),Ee===we?Z.push(`You already have a ${De} leave request on ${Ee}`):Z.push(`You already have a ${De} leave request from ${Ee} to ${we}`)}const Te=ye(Q,T,F);Te&&Z.push(Te),Ne(Z)},gs=Ut({mutationFn:async T=>{const Z={...T,userId:y&&x?x:E,collaborativeTasks:S},Q=await Ct("POST","/api/leave-requests",Z);if(T.collaborativeTasks&&T.collaborativeTasks.length>0){console.log("🚀 Creating collaborative tasks for leave request:",Q.id);const ie=T.collaborativeTasks.map(ue=>({assigneeUserId:ue.assigneeUserId,assigneeName:ue.assigneeName,assigneeEmail:ue.assigneeEmail,taskDescription:ue.taskDescription,expectedSupportDateFrom:ue.expectedSupportDateFrom,expectedSupportDateTo:ue.expectedSupportDateTo,additionalNotes:ue.additionalNotes,notificationMethod:"email"}));await Ct("POST",`/api/leave-requests/${Q.id}/tasks`,{tasks:ie}),console.log("🚀 Tasks created successfully")}return Q},onSuccess:()=>{const T=y&&x?x:E;Ye.invalidateQueries({queryKey:[`/api/leave-requests?userId=${E}`]}),Ye.invalidateQueries({queryKey:[`/api/leave-requests?userId=${T}`]}),Ye.invalidateQueries({queryKey:[`/api/employee-leave-balances/${E}`]}),Ye.invalidateQueries({queryKey:[`/api/employee-leave-balances/${T}`]}),Ye.invalidateQueries({queryKey:["/api/leave-requests"]}),Ye.invalidateQueries({queryKey:["/api/employee-leave-balances"]}),Ye.invalidateQueries({queryKey:["/api/leave-balance-transactions"]}),Ye.invalidateQueries({queryKey:[`/api/leave-balance-transactions/${E}`]}),Ye.invalidateQueries({queryKey:[`/api/leave-balance-transactions/${T}`]}),Ye.refetchQueries({queryKey:[`/api/employee-leave-balances/${E}`]}),T!==E&&Ye.refetchQueries({queryKey:[`/api/employee-leave-balances/${T}`]}),t(!1),fe(null),Ne([]),Ae(!1),te({startDate:"",endDate:"",reason:"",description:"",halfDay:!1,quarterDay:!1,documents:[]}),le({startHalfDay:!1,endHalfDay:!1});const F=data.collaborativeTasks&&data.collaborativeTasks.length>0;A({title:"Success",description:F?"Leave application submitted successfully with task assignments created":"Leave application submitted successfully"})},onError:T=>{Ae(!1),A({title:"Error",description:T.message||"Failed to submit leave application",variant:"destructive"})}}),ji=Ut({mutationFn:async T=>Ct("DELETE",`/api/leave-requests/${T}`),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/leave-requests"]}),Ye.invalidateQueries({queryKey:[`/api/leave-requests?userId=${E}`]}),Ye.invalidateQueries({queryKey:[`/api/employee-leave-balances/${E}`]}),Ye.invalidateQueries({queryKey:[`/api/employee-leave-balances/${E}`,{year:r}]}),Ye.refetchQueries({queryKey:[`/api/leave-requests?userId=${E}`]}),Ye.refetchQueries({queryKey:[`/api/employee-leave-balances/${E}`]}),A({title:"Success",description:"Leave request cancelled successfully"})},onError:T=>{A({title:"Error",description:T.message||"Failed to cancel leave request",variant:"destructive"})}}),Us=Ut({mutationFn:async({id:T,data:F})=>Ct("PUT",`/api/leave-requests/${T}`,F),onSuccess:()=>{Ye.invalidateQueries({queryKey:[`/api/leave-requests?userId=${E}`]}),Ye.invalidateQueries({queryKey:[`/api/employee-leave-balances/${E}`]}),Ye.invalidateQueries({queryKey:["/api/employee-leave-balances"]}),Ye.invalidateQueries({queryKey:["/api/leave-variants"]}),Ye.invalidateQueries({queryKey:["/api/leave-requests"]}),Ye.invalidateQueries({queryKey:["/api/leave-balance-transactions"]}),Ye.invalidateQueries({queryKey:[`/api/leave-balance-transactions/${E}`]}),Ye.refetchQueries({queryKey:[`/api/employee-leave-balances/${E}`]}),u(!1),l(null),fe(null),Ne([]),A({title:"Success",description:"Leave request updated successfully"})},onError:T=>{A({title:"Error",description:T.message||"Failed to update leave request",variant:"destructive"})}}),to=Ut({mutationFn:async({id:T,reason:F})=>Ct("POST",`/api/leave-requests/${T}/withdraw`,{reason:F}),onSuccess:async()=>{Ye.invalidateQueries({queryKey:[`/api/leave-requests?userId=${E}`]}),Ye.invalidateQueries({queryKey:[`/api/employee-leave-balances/${E}`,{year:r}]}),Ye.invalidateQueries({queryKey:[`/api/employee-leave-balances/${E}`]}),Ye.invalidateQueries({queryKey:["/api/employee-leave-balances"]}),Ye.invalidateQueries({queryKey:["/api/leave-variants"]}),await de(),f(!1),m(null),p(""),A({title:"Success",description:"Withdrawal request submitted successfully"})},onError:T=>{A({title:"Error",description:T.message||"Failed to submit withdrawal request",variant:"destructive"})}}),Lu=T=>{console.log("[EDIT] Editing request:",T),console.log("[EDIT] Available leave types:",L),console.log("[EDIT] Available leave variants:",H),console.log("[EDIT] Available leave variants (mapped):",at);const F=Array.isArray(at)?at:[];let Z=F.find(Q=>Q.leaveTypeId===T.leaveTypeId);if(!Z&&T.leaveVariantId&&(Z=F.find(Q=>Q.id===T.leaveVariantId)),console.log("[EDIT] Found variant for leaveTypeId",T.leaveTypeId,":",Z),Z){fe(Z);const Q={...T,variantId:Z.id};l(Q)}else console.log("[EDIT] No variant found, using request as-is"),l(T);u(!0)},$u=T=>{confirm("Are you sure you want to cancel this leave request?")&&ji.mutate(T)},Bu=T=>{m(T),f(!0)},Uu=()=>{h&&g.trim()&&to.mutate({id:h,reason:g.trim()})},hc=async T=>{var He,kt,Zt;if(T.preventDefault(),Se||gs.isPending){console.log("Submission blocked - already in progress");return}if(Ae(!0),!K){A({title:"Validation Error",description:"Please select a leave type",variant:"destructive"}),Ae(!1);return}const F=new FormData(T.currentTarget),Z=F.get("startDate"),Q=F.get("endDate"),ie=new Date(Z+"T00:00:00"),ue=new Date(Q+"T00:00:00"),Te=F.get("startHalfDay")==="on",_e=F.get("endHalfDay")==="on";if(F.get("description"),!V&&k){if(console.log("🔍 [Working Day Validation] Checking dates:",{startDate:ie.toISOString().split("T")[0],endDate:ue.toISOString().split("T")[0],startDateDay:ie.getDay(),endDateDay:ue.getDay(),isStartWorkingDay:G(ie),isEndWorkingDay:G(ue),workPattern:k==null?void 0:k.patternName,nonWorkingDays:k==null?void 0:k.nonWorkingDays}),!G(ie)||!G(ue)){const It=k?`According to your work pattern "${k.patternName}", `:"",sn=((Zt=(kt=(He=k==null?void 0:k.nonWorkingDays)==null?void 0:He[0])==null?void 0:kt.days)==null?void 0:Zt.join(", "))||"weekends";A({title:"Invalid Date Selection",description:`${It}${sn} are non-working days. Please select only working days.`,variant:"destructive"});return}}else{const It=ie.getDay()===0||ie.getDay()===6,sn=ue.getDay()===0||ue.getDay()===6;if(console.log("🔍 [Fallback Weekend Check] Work pattern not loaded, using simple weekend check:",{startDate:ie.toISOString().split("T")[0],endDate:ue.toISOString().split("T")[0],isStartWeekend:It,isEndWeekend:sn,workPatternLoading:V,workPatternExists:!!k}),It||sn){A({title:"Invalid Date Selection",description:"Please select working days only. Weekends are not allowed.",variant:"destructive"});return}}let Ee=P(ie,ue),we=Ee;console.log("📅 INITIAL CALCULATION:",Ee,"working days"),console.log("=== WORKING DAYS CALCULATION DEBUG ==="),console.log("Start Date:",ie.toISOString().split("T")[0]),console.log("End Date:",ue.toISOString().split("T")[0]),console.log("Calculated Working Days:",Ee),console.log("Work Pattern Loading Status:",V),console.log("Work Pattern Data:",k),console.log("Available Holidays from useWorkPattern:",(O==null?void 0:O.length)||0),console.log("Holidays Array Length:",$t.length),console.log("Full Holidays Array:",$t);const De=new Date("2025-08-15");if(ie<=De&&De<=ue){console.log("Aug 15th is in range - checking if holiday"),console.log("Aug 15th is holiday (useWorkPattern):",Y(De)),console.log("Aug 15th holiday details (useWorkPattern):",W(De));const It="2025-08-15",sn=$t.find(Re=>Re.selectedDate?new Date(Re.selectedDate).toISOString().split("T")[0]===It:!1);console.log("Manual Aug 15th holiday search result:",sn)}console.log("=== DAY BY DAY ANALYSIS ===");const Be=new Date(ie);for(;Be<=ue;){const It=Be.toISOString().split("T")[0];console.log(`${It}: Working Day=${G(Be)}, Holiday=${Y(Be)}`),Be.setDate(Be.getDate()+1)}if(console.log("==============================="),console.log("✅ Using dynamic working days calculation:",Ee),ie.getTime()===ue.getTime()?(Te||_e)&&(Ee=.5,we=.5):(Te&&(Ee-=.5,we-=.5),_e&&(Ee-=.5,we-=.5)),y&&!x){A({title:"Validation Error",description:"Please select an employee when applying on behalf",variant:"destructive"});return}Ne([]);const Ve=Dt(K,ie,ue);if(console.log("Validation errors:",Ve),Ve.length>0){Ne(Ve),A({title:"Validation Error",description:Ve[0],variant:"destructive"});return}const At=y&&x?x:E,Bt=ye(At,ie,ue);if(Bt){Ne([Bt]),A({title:"Blackout Period Restriction",description:Bt,variant:"destructive"}),Ae(!1);return}let nn=[];if(U.documents.length>0)try{const It=new FormData;U.documents.forEach((Re,Rt)=>{It.append("documents",Re)});const sn=await fetch("/api/upload-documents",{method:"POST",headers:{"X-Org-Id":R.toString()},body:It});if(sn.ok)nn=(await sn.json()).documents.map(Rt=>Rt.url);else{A({title:"Upload Error",description:"Failed to upload documents. Please try again.",variant:"destructive"}),Ae(!1);return}}catch(It){console.error("Error uploading documents:",It),A({title:"Upload Error",description:"Failed to upload documents. Please try again.",variant:"destructive"}),Ae(!1);return}const an={userId:At,leaveTypeId:K.leaveTypeId,startDate:F.get("startDate")+"T00:00:00",endDate:F.get("endDate")+"T00:00:00",totalDays:we,workingDays:Ee,reason:F.get("reason"),description:U.description,documents:nn,status:"pending"};o?Us.mutate({id:o.id,data:an}):gs.mutate(an)},Kr=Array.isArray(ee)?ee:[],mc=Kr.sort((T,F)=>{if(T.status==="withdrawal_pending"&&F.status!=="withdrawal_pending")return-1;if(F.status==="withdrawal_pending"&&T.status!=="withdrawal_pending")return 1;const Z=new Date(T.createdAt||T.startDate).getTime();return new Date(F.createdAt||F.startDate).getTime()-Z});Kr.length,Kr.filter(T=>T.status==="pending").length,console.log("=== BALANCE CALCULATION DEBUG ==="),console.log("Current user ID:",E),console.log("User assignments:",rt),console.log("Assigned variant IDs:",Mt),console.log("Available leave variants:",at),console.log("Leave balances for user",E,":",Ke),console.log("Raw leaveBalances from API:",B),console.log("All assignments array from API:",q),console.log("All assignments length:",q.length);const Ga=Ke.filter(T=>Mt.includes(T.leaveVariantId));console.log("Filtered balances for summary cards:",Ga),console.log("Total entitlement calculation:",Ga.map(T=>({variantId:T.leaveVariantId,totalEntitlement:T.totalEntitlement,parsed:parseFloat(T.totalEntitlement||"0")})));const Wu=Ga.reduce((T,F)=>T+parseFloat(F.totalEntitlement||"0"),0);console.log("Total entitlement sum:",Wu);const Vu=Ga.reduce((T,F)=>{const Z=parseFloat(F.currentBalance||"0");return T+(Z>0?Z:0)},0);return console.log("=== TOTAL BALANCE CALCULATION ==="),console.log("Filtered balances used for total:",Ga.map(T=>({variantId:T.leaveVariantId,currentBalance:T.currentBalance,parsed:parseFloat(T.currentBalance||"0")}))),console.log("Step by step calculation:"),Ga.forEach((T,F)=>{const Z=parseFloat(T.currentBalance||"0"),Q=Z>0;console.log(`  ${F+1}. Variant ${T.leaveVariantId}: ${T.currentBalance} -> ${Z} (include: ${Q})`)}),console.log("Total balance result:",Vu),console.log("Should equal sum of visible balances: 13.5 + 4.0 + 9.0 = 26.5"),console.log("=================================="),s.jsx(Sr,{children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Leave Applications"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(yt,{value:a,onValueChange:i,children:[s.jsx(gt,{className:"w-32",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"Yearly",children:"Yearly"}),s.jsx(je,{value:"Monthly",children:"Monthly"}),s.jsx(je,{value:"Quarterly",children:"Quarterly"})]})]}),s.jsxs(yt,{value:r,onValueChange:n,children:[s.jsx(gt,{className:"w-24",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"2025",children:"2025"}),s.jsx(je,{value:"2024",children:"2024"}),s.jsx(je,{value:"2023",children:"2023"})]})]}),s.jsx(fn,{open:e,onOpenChange:t,children:s.jsx(cu,{asChild:!0,children:s.jsx(se,{className:"bg-green-600 hover:bg-green-700 text-white",children:"Apply for Leave"})})})]})]}),s.jsxs("div",{className:"flex gap-4 mb-6",children:[s.jsx(Ce,{className:"flex-1",children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(()=>{let T=0;return at.forEach(F=>{const Z=Ke.find(we=>we.leaveVariantId===F.id);Array.isArray(ce)&&ce.filter(we=>we.leaveVariantId===F.id);const Q=Array.isArray(ce)?ce.filter(we=>{var At;const De=we.transactionType==="grant"&&((At=we.description)==null?void 0:At.toLowerCase().includes("opening balance imported from excel")),Be=we.userId===E;if(!De||!Be)return!1;if(we.leaveVariantId===F.id)return!0;const Ve=at.find(Bt=>Bt.id===we.leaveVariantId);return(Ve==null?void 0:Ve.leaveTypeName)===F.leaveTypeName||(Ve==null?void 0:Ve.leaveTypeId)===F.leaveTypeId||F.leaveTypeName==="Earned Leave"&&(we.leaveVariantId===67&&F.id===61||we.leaveVariantId===61&&F.id===67)}).sort((we,De)=>new Date(De.createdAt).getTime()-new Date(we.createdAt).getTime()):[],ie=Q.reduce((we,De)=>we+parseFloat(De.amount||"0"),0);F.leaveTypeName==="Earned Leave"&&console.log(`🔧 [SUMMARY CARD FIX] Enhanced cross-referencing for ${F.leaveTypeName}:`,{variantId:F.id,openingBalanceTransactionsFound:Q.length,openingBalanceAmount:ie,transactions:Q.map(we=>{var De;return{id:we.id,variantId:we.leaveVariantId,amount:we.amount,description:(De=we.description)==null?void 0:De.substring(0,50)}})});const ue=Z?parseFloat(Z.totalEntitlement||"0"):0,Te=F.grantLeaves==="after_earning";let _e=0;if(Te){const De=new Date().getMonth()+1-1;_e=(ue||F.paidDaysInYear||0)/12*De}else{const we=ue||F.paidDaysInYear||0;if(F.grantFrequency==="per_year")_e=we;else{const De=new Date().getMonth()+1;_e=we/12*De}}const Ee=_e+ie;T+=Ee,console.log(`🔍 [TOTAL LEAVES] Dynamic calculation for ${F.leaveTypeName}:`,{variantId:F.id,openingBalance:ie,eligibility:_e,totalEligibility:Ee,isAfterEarning:Te,annualEntitlement:ue||F.paidDaysInYear,totalEntitlementInDays:ue,paidDaysInYear:F.paidDaysInYear,grantLeaves:F.grantLeaves,grantFrequency:F.grantFrequency,openingBalanceTransactionsCount:Q.length})}),console.log(`🔍 [TOTAL LEAVES] Final calculated sum: ${T}`),T.toFixed(1)})()}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Total Leaves"})]})}),s.jsx(Ce,{className:"flex-1",children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:(()=>{const T=ce.filter(Z=>Z.userId===E);console.log("💳 [TOTAL AVAILED CALCULATION] Starting calculation:",{totalTransactions:ce.length,userTransactions:T.length,currentUserId:E,availableVariants:(at==null?void 0:at.length)||0,requestsArrayLength:Kr.length,variantIds:at.slice(0,3).map(Z=>Z.id),sampleRequestVariantIds:Kr.slice(0,5).map(Z=>Z.leaveVariantId)});let F=0;return at.forEach(Z=>{const Q=Z.leaveBalanceDeductionBefore===!0;let ie=0;const ue=Kr.filter(Ve=>{const At=Ve.leaveVariantId===Z.id,Bt=(Ve.leaveVariantId===null||Ve.leaveVariantId===void 0)&&(Ve.leaveTypeId===Z.leaveTypeId||String(Ve.leaveTypeId)===String(Z.leaveTypeId)||Number(Ve.leaveTypeId)===Number(Z.leaveTypeId));return Z.leaveTypeName==="Earned Leave"&&ie<3&&(console.log(`🔍 MATCHING DEBUG for ${Z.leaveTypeName} (request ${ie+1}):`,{reqId:Ve.id,reqLeaveVariantId:Ve.leaveVariantId,reqLeaveTypeId:Ve.leaveTypeId,reqLeaveTypeIdType:typeof Ve.leaveTypeId,variantId:Z.id,variantLeaveTypeId:Z.leaveTypeId,variantLeaveTypeIdType:typeof Z.leaveTypeId,variantIdMatch:At,typeIdMatch:Bt,finalMatch:At||Bt}),ie++),At||Bt}),Te=ue.filter(Ve=>Ve.status==="approved"),_e=Te.reduce((Ve,At)=>Ve+parseFloat(At.workingDays||"0"),0);let Ee=0;Q&&(Ee=ue.filter(At=>At.status==="pending").reduce((At,Bt)=>At+parseFloat(Bt.workingDays||"0"),0));const De=T.filter(Ve=>Ve.leaveVariantId===Z.id).filter(Ve=>{var At,Bt;return((At=Ve.description)==null?void 0:At.toLowerCase().includes("imported leave transaction"))&&((Bt=Ve.description)==null?void 0:Bt.toLowerCase().includes("availed"))&&(Ve.transactionType==="deduction"||Ve.transactionType==="debit")}).reduce((Ve,At)=>Ve+Math.abs(parseFloat(At.amount||"0")),0),Be=_e+Ee+De;console.log(`🎯 [VARIANT DEBUG] ${Z.leaveTypeName||Z.leaveVariantName}:`,{currentUserId:E,variantId:Z.id,variantLeaveTypeId:Z.leaveTypeId,isBeforeWorkflow:Q,requestsArrayLength:Kr.length,matchingRequests:ue.length,matchingRequestSample:ue.slice(0,3).map(Ve=>({id:Ve.id,leaveVariantId:Ve.leaveVariantId,leaveTypeId:Ve.leaveTypeId,status:Ve.status,workingDays:Ve.workingDays})),approvedRequests:Te.length,approvedDays:_e,pendingDays:Ee,importedAvailed:De,variantAvailed:Be,runningTotal:F+Be}),F+=Be}),console.log("💳 [TOTAL AVAILED RESULT] Final calculation:",{totalAvailed:F,formattedResult:F.toFixed(1)}),F.toFixed(1)})()}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Total Availed"})]})}),s.jsx(Ce,{className:"flex-1",children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(Kr==null?void 0:Kr.filter(T=>T.status==="pending").length)||0}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Pending approvals"})]})}),s.jsx(Ce,{className:"flex-1",children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:(()=>{let T=0;at.forEach(Q=>{const ie=Ke.find(Be=>Be.leaveVariantId===Q.id),Te=(Array.isArray(ce)?ce.filter(Be=>{var nn;const Ve=Be.transactionType==="grant"&&((nn=Be.description)==null?void 0:nn.toLowerCase().includes("opening balance imported from excel")),At=Be.userId===E;if(!Ve||!At)return!1;if(Be.leaveVariantId===Q.id)return!0;const Bt=at.find(an=>an.id===Be.leaveVariantId);return(Bt==null?void 0:Bt.leaveTypeName)===Q.leaveTypeName||(Bt==null?void 0:Bt.leaveTypeId)===Q.leaveTypeId||Q.leaveTypeName==="Earned Leave"&&(Be.leaveVariantId===67&&Q.id===61||Be.leaveVariantId===61&&Q.id===67)}).sort((Be,Ve)=>new Date(Ve.createdAt).getTime()-new Date(Be.createdAt).getTime()):[]).reduce((Be,Ve)=>Be+parseFloat(Ve.amount||"0"),0),_e=ie?parseFloat(ie.totalEntitlement||"0"):0,Ee=Q.grantLeaves==="after_earning";let we=0;if(Ee){const Ve=new Date().getMonth()+1-1;we=(_e||Q.paidDaysInYear||0)/12*Ve}else{const Be=_e||Q.paidDaysInYear||0;if(Q.grantFrequency==="per_year")we=Be;else{const Ve=new Date().getMonth()+1;we=Be/12*Ve}}const De=we+Te;T+=De});const F=Kr.filter(Q=>Q.status==="approved").reduce((Q,ie)=>Q+parseFloat(ie.workingDays||"0"),0),Z=T-F;return console.log("🟢 [BALANCE CARD] Corrected calculation:",{totalEligibilitySum:T.toFixed(1),totalApproved:F.toFixed(1),calculatedBalance:Z.toFixed(1),calculation:`${T.toFixed(1)} - ${F.toFixed(1)} = ${Z.toFixed(1)}`,note:"Should be 72.5 - 20.0 = 52.5"}),Z.toFixed(1)})()}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Balance"})]})})]}),s.jsxs(Ce,{className:"mb-6",children:[s.jsx(Tt,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"i"})}),s.jsx(Et,{className:"text-lg font-semibold text-gray-800",children:"Leave Balance Information"})]})}),s.jsx(Ie,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Leave Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Op Balance"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Eligibility"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Total Eligibility"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Availed"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"LOP"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Leave Lapsed"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Leave Encashed"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Closing Balance"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Max Leave Carry Forward"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:at.map(T=>{const F=Ke.find(Re=>Re.leaveVariantId===T.id),Z=Array.isArray(ce)?ce.filter(Re=>Re.leaveVariantId===T.id):[],Q=Array.isArray(ce)?ce.filter(Re=>{var LE;const Rt=Re.transactionType==="grant"&&((LE=Re.description)==null?void 0:LE.toLowerCase().includes("opening balance imported from excel")),xs=Re.userId===E;if(!Rt||!xs)return!1;if(Re.leaveVariantId===T.id)return!0;const Hu=at.find(VU=>VU.id===Re.leaveVariantId);return(Hu==null?void 0:Hu.leaveTypeName)===T.leaveTypeName||(Hu==null?void 0:Hu.leaveTypeId)===T.leaveTypeId||T.leaveTypeName==="Earned Leave"&&(Re.leaveVariantId===67&&T.id===61||Re.leaveVariantId===61&&T.id===67)}).sort((Re,Rt)=>new Date(Rt.createdAt).getTime()-new Date(Re.createdAt).getTime()):[];T.leaveTypeName==="Earned Leave"&&E==="241"&&console.log(`🔍 [OPENING BALANCE DEBUG] ${T.leaveTypeName} for user ${E}:`,{variantId:T.id,totalTransactions:Z.length,totalLeaveTransactions:Array.isArray(ce)?ce.length:0,openingBalanceTransactions:Q.length,availableVariantsCount:at.length,earnedLeaveVariants:at.filter(Re=>Re.leaveTypeName==="Earned Leave").map(Re=>({id:Re.id,name:Re.leaveTypeName,leaveTypeId:Re.leaveTypeId})),openingBalanceTransactionSample:Q.slice(0,3).map(Re=>({id:Re.id,type:Re.transactionType,description:Re.description,amount:Re.amount,variantId:Re.leaveVariantId})),allOpeningBalanceTransactionsForUser:Array.isArray(ce)?ce.filter(Re=>{var Rt;return Re.userId===E&&Re.transactionType==="grant"&&((Rt=Re.description)==null?void 0:Rt.toLowerCase().includes("opening balance"))}).map(Re=>{var Rt;return{id:Re.id,type:Re.transactionType,description:Re.description,amount:Re.amount,variantId:Re.leaveVariantId,variantName:((Rt=at.find(xs=>xs.id===Re.leaveVariantId))==null?void 0:Rt.leaveTypeName)||"UNKNOWN"}}):[]});const ie=Q.reduce((Re,Rt)=>(E==="241"&&T.leaveTypeName==="Earned Leave"&&console.log(`🔍 [OPENING BALANCE CALC] Adding transaction ${Rt.id}:`,{amount:Rt.amount,description:Rt.description,variantId:Rt.leaveVariantId,currentSum:Re,newSum:Re+parseFloat(Rt.amount||"0")}),Re+parseFloat(Rt.amount||"0")),0),ue=T.grantLeaves==="after_earning",Te=F?parseFloat(F.currentBalance||"0"):0,_e=F?parseFloat(F.totalEntitlement||"0"):0;let Ee=0;if(ue){const Rt=new Date().getMonth()+1-1;Ee=(_e||T.paidDaysInYear||0)/12*Rt}else{const Re=_e||T.paidDaysInYear||0;if(T.grantFrequency==="per_year")Ee=Re;else{const Rt=new Date().getMonth()+1;Ee=Re/12*Rt}}T.leaveTypeName==="Earned Leave"&&console.log(`🔍 [TABLE ROW DEBUG] ${T.leaveTypeName} for user ${E}:`,{currentBalanceInDays:Te,openingBalance:ie,eligibility:Ee,variantId:T.id,isAfterEarning:T.grantLeaves==="after_earning",grantLeaves:T.grantLeaves,calculation:`Final eligibility = ${Ee}`});const we=Ee+ie,De=T.leaveBalanceDeductionBefore===!0;E==="2161"&&(T.leaveTypeName==="Earned Leave"||T.leaveTypeName==="Sick Leave/ Casual Leave")&&console.log(`🔍 [AVAILED CALCULATION] User ${E}, ${T.leaveTypeName}:`,{variantId:T.id,isBeforeWorkflow:De,leaveBalanceDeductionBefore:T.leaveBalanceDeductionBefore,totalTransactions:Z.length,pendingDeductions:Z.filter(Re=>Re.transactionType==="pending_deduction").length,allPendingTransactions:Z.filter(Re=>Re.transactionType==="pending_deduction").map(Re=>({id:Re.id,amount:Re.amount,description:Re.description,variantId:Re.leaveVariantId})),filteredPendingForThisVariant:Z.filter(Re=>Re.transactionType==="pending_deduction"&&Re.leaveVariantId===T.id).map(Re=>({id:Re.id,amount:Re.amount,description:Re.description}))}),E==="2161"&&T.leaveTypeName==="Earned Leave"&&console.log(`🔍 [DEBUG REQUESTS DATA] User ${E}, ${T.leaveTypeName}:`,{requestsArrayLength:Kr.length,variantId:T.id,sampleRequests:Kr.slice(0,3).map(Re=>({id:Re.id,userId:Re.userId,leaveVariantId:Re.leaveVariantId,status:Re.status,workingDays:Re.workingDays})),allRequestsForUser:Kr.filter(Re=>Re.userId===E).map(Re=>({id:Re.id,leaveVariantId:Re.leaveVariantId,status:Re.status,workingDays:Re.workingDays}))});const Be=Kr.filter(Re=>Re.leaveVariantId===T.id||(Re.leaveVariantId===null||Re.leaveVariantId===void 0)&&Re.leaveTypeId===T.leaveTypeId),Ve=Be.filter(Re=>Re.status==="approved"),At=Ve.reduce((Re,Rt)=>Re+parseFloat(Rt.workingDays||"0"),0);let Bt=0;De&&(Bt=Be.filter(Rt=>Rt.status==="pending").reduce((Rt,xs)=>Rt+parseFloat(xs.workingDays||"0"),0));const nn=Z.filter(Re=>{var Rt,xs;return((Rt=Re.description)==null?void 0:Rt.toLowerCase().includes("imported leave transaction"))&&((xs=Re.description)==null?void 0:xs.toLowerCase().includes("availed"))&&(Re.transactionType==="deduction"||Re.transactionType==="debit")}).reduce((Re,Rt)=>Re+Math.abs(parseFloat(Rt.amount||"0")),0),an=At+Bt+nn;E==="2161"&&(T.leaveTypeName==="Earned Leave"||T.leaveTypeName==="Sick Leave/ Casual Leave")&&console.log(`✅ [CORRECTED AVAILED] ${T.leaveTypeName}:`,{variantId:T.id,isBeforeWorkflow:De,approvedRequests:Ve.length,approvedDays:At,pendingRequests:De?Kr.filter(Re=>Re.leaveVariantId===T.id&&Re.status==="pending").length:0,pendingDays:Bt,importedAvailed:nn,totalCorrectedAvailed:an});const He=Z.filter(Re=>{var Rt,xs;return(Re.transactionType==="debit"||Re.transactionType==="deduction")&&(((Rt=Re.description)==null?void 0:Rt.toLowerCase().includes("lop"))||((xs=Re.description)==null?void 0:xs.toLowerCase().includes("loss of pay")))}).reduce((Re,Rt)=>Re+Math.abs(parseFloat(Rt.amount||"0")),0),kt=Z.filter(Re=>{var Rt;return(Re.transactionType==="debit"||Re.transactionType==="deduction")&&((Rt=Re.description)==null?void 0:Rt.toLowerCase().includes("encash"))}).reduce((Re,Rt)=>Re+Math.abs(parseFloat(Rt.amount||"0")),0),Zt=Z.filter(Re=>{var Rt;return(Re.transactionType==="debit"||Re.transactionType==="deduction")&&((Rt=Re.description)==null?void 0:Rt.toLowerCase().includes("lapse"))}).reduce((Re,Rt)=>Re+Math.abs(parseFloat(Rt.amount||"0")),0),It=we-an,sn=T.carryForwardDays||0;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:T.leaveTypeName||"Unknown Leave Type"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ie.toFixed(1)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ee.toFixed(1)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:we.toFixed(1)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(an||0).toFixed(1)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(He||0).toFixed(1)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(Zt||0).toFixed(1)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(kt||0).toFixed(1)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:Number(It||0).toFixed(1)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(sn||0).toFixed(1)})]},T.id)})})]})})})]}),s.jsxs(fn,{open:e,onOpenChange:t,children:[s.jsx(cu,{asChild:!0,children:s.jsx("div",{style:{display:"none"}})}),s.jsxs(hn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(mn,{children:s.jsx(pn,{className:"text-xl font-semibold",children:"Apply For Leave"})}),s.jsxs("form",{onSubmit:hc,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"leaveType",className:"text-sm font-medium text-gray-700",children:"Leave type"}),s.jsxs(yt,{name:"leaveType",required:!0,onValueChange:Jt,children:[s.jsx(gt,{className:"w-full mt-1",children:s.jsx(vt,{placeholder:"Select Leave Type"})}),s.jsx(xt,{children:at.map(T=>{const F=Ke.find(He=>He.leaveVariantId===T.id),Z=Array.isArray(ce)?ce.filter(He=>He.leaveVariantId===T.id):[],Q=Array.isArray(ce)?ce.filter(He=>{var sn;const kt=He.transactionType==="grant"&&((sn=He.description)==null?void 0:sn.toLowerCase().includes("opening balance imported from excel")),Zt=He.userId===E;if(!kt||!Zt)return!1;if(He.leaveVariantId===T.id)return!0;const It=at.find(Re=>Re.id===He.leaveVariantId);return(It==null?void 0:It.leaveTypeName)===T.leaveTypeName||(It==null?void 0:It.leaveTypeId)===T.leaveTypeId||T.leaveTypeName==="Earned Leave"&&(He.leaveVariantId===67&&T.id===61||He.leaveVariantId===61&&T.id===67)}).sort((He,kt)=>new Date(kt.createdAt).getTime()-new Date(He.createdAt).getTime()):[],ie=Q.reduce((He,kt)=>He+parseFloat(kt.amount||"0"),0),ue=T.grantLeaves==="after_earning";F&&parseFloat(F.currentBalance||"0");let Te=0;const _e=F?parseFloat(F.totalEntitlement||"0"):0;if(ue){const kt=new Date().getMonth()+1-1;Te=(_e||T.paidDaysInYear||0)/12*kt}else{const He=_e||T.paidDaysInYear||0;if(T.grantFrequency==="per_year")Te=He;else{const kt=new Date().getMonth()+1;Te=He/12*kt}}const Ee=Te+ie,we=(T==null?void 0:T.leaveBalanceDeductionBefore)===!0,De=Kr.filter(He=>He.leaveVariantId===T.id||(He.leaveVariantId===null||He.leaveVariantId===void 0)&&He.leaveTypeId===T.leaveTypeId),Ve=De.filter(He=>He.status==="approved").reduce((He,kt)=>He+parseFloat(kt.workingDays||"0"),0);let At=0;we&&(At=De.filter(kt=>kt.status==="pending").reduce((kt,Zt)=>kt+parseFloat(Zt.workingDays||"0"),0));const Bt=Z.filter(He=>{var kt,Zt;return((kt=He.description)==null?void 0:kt.toLowerCase().includes("imported leave transaction"))&&((Zt=He.description)==null?void 0:Zt.toLowerCase().includes("availed"))&&(He.transactionType==="deduction"||He.transactionType==="debit")}).reduce((He,kt)=>He+Math.abs(parseFloat(kt.amount||"0")),0),nn=Ve+At+Bt,an=Ee-nn;return T.leaveTypeName==="Earned Leave"&&console.log("🔧 [APPLY FORM FIX] Enhanced cross-referencing for Earned Leave:",{variantId:T.id,openingBalanceTransactionsFound:Q.length,openingBalance:ie,eligibility:Te,totalEligibility:Ee,approvedDays:Ve,pendingDays:At,importedAvailed:Bt,availed:nn,availableDays:an,shouldMatch:"Table closing balance: 44.5"}),s.jsxs(je,{value:T.id.toString(),children:[T.leaveTypeName," (",T.leaveVariantName,") - ",an.toFixed(1)," days available"]},T.id)})})]}),K&&s.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Leave Type Requirements:"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[K.minDaysRequired>0&&s.jsxs("li",{children:["• Minimum ",K.minDaysRequired," days required"]}),K.maxDaysInStretch>0&&s.jsxs("li",{children:["• Maximum ",K.maxDaysInStretch," days in a single application"]}),K.mustBePlannedInAdvance>0&&s.jsxs("li",{children:["• Must be planned"," ",K.mustBePlannedInAdvance," days in advance"]}),K.supportingDocuments&&s.jsxs("li",{children:["• Supporting documents"," ",K.supportingDocumentsText||"required"]}),K.maxInstances>0&&s.jsxs("li",{children:["• Maximum ",K.maxInstances," ","applications per"," ",K.maxInstancesPeriod]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"startDate",className:"text-sm font-medium text-gray-700",children:"Start date"}),s.jsx(ht,{type:"date",name:"startDate",value:U.startDate,placeholder:"mm/dd/yyyy",className:"mt-1",min:it,max:ot,required:!0,onChange:T=>{const F=T.target.value;te(Z=>{const Q={...Z,startDate:F};return Q.endDate&&Q.endDate<F&&(Q.endDate=""),Q.endDate&&(console.log("🗓️ [START DATE] Triggering validation with dates:",Q.startDate,Q.endDate),setTimeout(()=>{const ie={...U,startDate:F};Gr(ie)},100)),Q})}}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Working days only (Monday-Friday)"}),((pc=K==null?void 0:K.minimumLeaveUnit)==null?void 0:pc.includes("half_day"))&&s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx(Pt,{name:"startHalfDay",id:"startHalfDay",checked:xe.startHalfDay,onCheckedChange:T=>le(F=>({...F,startHalfDay:!!T}))}),s.jsx(tt,{htmlFor:"startHalfDay",className:"text-sm",children:"Half day"})]})]}),s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"endDate",className:"text-sm font-medium text-gray-700",children:"End date"}),s.jsx(ht,{type:"date",name:"endDate",value:U.endDate,placeholder:"mm/dd/yyyy",className:"mt-1",min:U.startDate||it,max:ot,required:!0,onChange:T=>{const F=T.target.value;console.log("🗓️ [END DATE] User entered end date:",F),te(Z=>{const Q={...Z,endDate:F};return console.log("🗓️ [END DATE] Updated form data:",Q),Q.startDate&&Q.endDate&&(console.log("🗓️ [END DATE] Both dates present, triggering validation in 100ms"),setTimeout(()=>{console.log("🗓️ [END DATE] Calling validateDatesWithData now");const ie={...U,endDate:F};Gr(ie)},100)),Q})}}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Working days only (Monday-Friday)"}),((z=K==null?void 0:K.minimumLeaveUnit)==null?void 0:z.includes("half_day"))&&s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx(Pt,{name:"endHalfDay",id:"endHalfDay",checked:xe.endHalfDay,onCheckedChange:T=>le(F=>({...F,endHalfDay:!!T}))}),s.jsx(tt,{htmlFor:"endHalfDay",className:"text-sm",children:"Half day"})]})]})]}),U.startDate&&U.endDate&&s.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-900",children:"Total Leave Days Selected"}),s.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["From"," ",new Date(U.startDate).toLocaleDateString()," to"," ",new Date(U.endDate).toLocaleDateString()]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:(()=>{const T=ve();return T.toFixed(T%1===0?0:1)})()}),s.jsx("div",{className:"text-sm text-blue-700",children:"working days"})]})]})}),ae.length>0&&s.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Validation Errors:"}),s.jsx("ul",{className:"text-sm text-red-800 space-y-1",children:ae.map((T,F)=>s.jsxs("li",{children:["• ",T]},F))})]}),(K==null?void 0:K.supportingDocuments)&&s.jsxs("div",{children:[s.jsx(tt,{className:"text-sm font-medium text-gray-700",children:"Supporting Documents *"}),s.jsxs("div",{className:"mt-1 border-2 border-dashed border-gray-300 rounded-lg p-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(l_,{className:"mx-auto h-8 w-8 text-gray-400"}),s.jsx("div",{className:"mt-2",children:s.jsxs("label",{htmlFor:"documents",className:"cursor-pointer",children:[s.jsx("span",{className:"text-sm text-blue-600 hover:text-blue-500",children:"Upload documents"}),s.jsx("input",{id:"documents",name:"documents",type:"file",multiple:!0,className:"sr-only",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:T=>{const F=Array.from(T.target.files||[]);te(Z=>({...Z,documents:F}))}})]})}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, Word, or Image files (max 5MB each)"})]}),U.documents.length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Selected files:"}),s.jsx("div",{className:"space-y-1",children:U.documents.map((T,F)=>s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[s.jsx("span",{children:T.name}),s.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>{te(Z=>({...Z,documents:Z.documents.filter((Q,ie)=>ie!==F)}))},children:s.jsx(da,{className:"w-4 h-4"})})]},F))})]})]}),(K==null?void 0:K.supportingDocumentsText)&&s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:K.supportingDocumentsText})]}),((X=(re=C==null?void 0:C.permissions)==null?void 0:re.allowOnBehalf)==null?void 0:X.leave)===!0&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{name:"applyOnBehalf",id:"applyOnBehalf",checked:y,onCheckedChange:T=>{b(!!T),T||w("")}}),s.jsx(tt,{htmlFor:"applyOnBehalf",className:"text-sm",children:"Apply on behalf of someone else"})]}),y&&s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"employee",className:"text-sm font-medium text-gray-700",children:"Select Employee *"}),s.jsxs(yt,{value:x,onValueChange:w,children:[s.jsx(gt,{className:"mt-1",children:s.jsx(vt,{placeholder:"Select an employee"})}),s.jsx(xt,{children:D.map(T=>s.jsx(je,{value:T.user_id,children:T.user_name||`${T.first_name||""} ${T.last_name||""}`.trim()||T.employee_number||`Employee ${T.user_id}`},T.user_id))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"reason",className:"text-sm font-medium text-gray-700",children:"Reason for leave"}),s.jsxs(yt,{name:"reason",required:!0,children:[s.jsx(gt,{className:"w-full mt-1",children:s.jsx(vt,{placeholder:"Select Reason for Leave"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"personal",children:"Personal"}),s.jsx(je,{value:"medical",children:"Medical"}),s.jsx(je,{value:"family",children:"Family Emergency"}),s.jsx(je,{value:"vacation",children:"Vacation"}),s.jsx(je,{value:"other",children:"Other"})]})]})]}),s.jsxs("div",{children:[s.jsxs(tt,{htmlFor:"description",className:"text-sm font-medium text-gray-700",children:["Description"," ",(K==null?void 0:K.supportingDocuments)&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Cn,{name:"description",value:U.description,onChange:T=>{te(F=>({...F,description:T.target.value})),ae.length>0&&Ne([])},placeholder:"State the reason for your leave request",className:"mt-1 min-h-[100px]"})]})]}),s.jsx("div",{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(tt,{className:"text-sm font-medium text-gray-700",children:"Assign Tasks"}),s.jsx(se,{type:"button",variant:"ghost",className:"text-green-600",children:s.jsx(gn,{className:"w-4 h-4"})})]})}),Oe&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Leave Type Not Available"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:s.jsx("p",{children:Oe})})]})]})}),(he==null?void 0:he.enabled)&&s.jsxs("div",{className:"border-t pt-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Task Assignment (Optional)"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Assign tasks to colleagues to ensure smooth operations during your leave"})]}),s.jsx(LIe,{leaveRequestId:void 0,className:"mb-4",onTasksChange:T=>{_(T)}})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(se,{type:"button",variant:"outline",onClick:()=>t(!1),className:"text-green-600 border-green-600",children:"Discard"}),s.jsx(se,{type:"submit",className:`text-white ${ae.length>0?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,disabled:gs.isPending||Se||!oe||ae.length>0,children:gs.isPending||Se?"Submitting...":ae.length>0?"Fix Validation Errors":"Apply for Leave"})]})]})]})]}),s.jsx(fn,{open:c,onOpenChange:T=>{u(T),T||(l(null),fe(null),Ne([]))},children:s.jsxs(hn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(mn,{children:s.jsx(pn,{className:"text-xl font-semibold",children:"Edit Leave Request"})}),s.jsxs("form",{onSubmit:hc,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"leaveType",className:"text-sm font-medium text-gray-700",children:"Leave type"}),s.jsxs(yt,{name:"leaveType",required:!0,onValueChange:Jt,defaultValue:((J=o==null?void 0:o.variantId)==null?void 0:J.toString())||"",children:[s.jsx(gt,{className:"w-full mt-1",children:s.jsx(vt,{placeholder:"Select Leave Type"})}),s.jsx(xt,{children:at.map(T=>{const F=Ke.find(Q=>Q.leaveVariantId===T.id),Z=F?Math.max(0,parseFloat(F.currentBalance||"0")):0;return s.jsxs(je,{value:T.id.toString(),children:[T.leaveTypeName," (",T.leaveVariantName,") - ",Z.toFixed(1)," days available"]},T.id)})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"startDate",className:"text-sm font-medium text-gray-700",children:"Start date"}),s.jsx(ht,{type:"date",name:"startDate",placeholder:"mm/dd/yyyy",className:"mt-1",min:it,defaultValue:o?new Date(o.startDate).toISOString().split("T")[0]:"",onChange:fc,required:!0})]}),s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"endDate",className:"text-sm font-medium text-gray-700",children:"End date"}),s.jsx(ht,{type:"date",name:"endDate",placeholder:"mm/dd/yyyy",className:"mt-1",min:it,defaultValue:o?new Date(o.endDate).toISOString().split("T")[0]:"",onChange:fc,required:!0})]})]}),((ne=K==null?void 0:K.minimumLeaveUnit)==null?void 0:ne.includes("half_day"))&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{name:"startHalfDay"}),s.jsx(tt,{className:"text-sm text-gray-700",children:"Start date half day"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{name:"endHalfDay"}),s.jsx(tt,{className:"text-sm text-gray-700",children:"End date half day"})]})]}),s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"reason",className:"text-sm font-medium text-gray-700",children:"Reason for Leave"}),s.jsx(Cn,{name:"reason",placeholder:"Enter reason for leave",className:"mt-1",rows:3,defaultValue:(o==null?void 0:o.reason)||"",required:!0})]}),ae.length>0&&s.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Please fix the following errors:"}),s.jsx("ul",{className:"text-sm text-red-800 space-y-1",children:ae.map((T,F)=>s.jsxs("li",{children:["• ",T]},F))})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(se,{type:"button",variant:"outline",onClick:()=>u(!1),className:"text-gray-600 border-gray-300",children:"Cancel"}),s.jsx(se,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white",disabled:Us.isPending||ae.length>0,children:Us.isPending?"Updating...":"Update Request"})]})]})]})}),s.jsx(Ce,{children:s.jsx(Ie,{className:"p-6",children:ee.length===0?s.jsx("div",{className:"p-12 text-center text-gray-500",children:"No leave applications found for the selected period."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Leave Type"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"From"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"To"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Days"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Reason"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Status"}),s.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{children:mc.map(T=>{const Z=(Array.isArray(L)?L:[]).find(ue=>ue.id===T.leaveTypeId),ie=(Array.isArray(H)?H:[]).find(ue=>ue.leaveTypeId===T.leaveTypeId);return s.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[s.jsx("td",{className:"py-3 px-4",children:(Z==null?void 0:Z.name)||"Unknown"}),s.jsx("td",{className:"py-3 px-4",children:new Date(T.startDate).toLocaleDateString()}),s.jsx("td",{className:"py-3 px-4",children:new Date(T.endDate).toLocaleDateString()}),s.jsx("td",{className:"py-3 px-4",children:T.workingDays}),s.jsx("td",{className:"py-3 px-4 capitalize",children:T.reason}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium inline-block w-fit ${T.status==="pending"?"bg-yellow-100 text-yellow-800":T.status==="approved"?"bg-green-100 text-green-800":T.status==="withdrawn"?"bg-orange-100 text-orange-800":T.status==="withdrawal_pending"?"bg-purple-100 text-purple-800":"bg-red-100 text-red-800"}`,children:T.status==="withdrawal_pending"?"Withdrawal Pending":T.status==="rejected"&&T.approvalHistory&&T.approvalHistory.some(ue=>ue.action==="submitted"&&ue.comment)?"Withdrawal Rejected":T.status}),T.status==="rejected"&&T.rejectedReason&&s.jsxs("div",{className:"mt-1 text-xs text-red-600 bg-red-50 px-2 py-1 rounded border border-red-200",children:[s.jsx("strong",{children:"Reason:"})," ",T.rejectedReason]})]})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex space-x-2",children:[T.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs(se,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-600 hover:bg-blue-50",onClick:()=>Lu(T),disabled:Us.isPending,children:[s.jsx(Nu,{className:"w-3 h-3 mr-1"}),"Edit"]}),((ie==null?void 0:ie.allowWithdrawalBeforeApproval)||!(ie!=null&&ie.withdrawalNotAllowed))&&s.jsxs(se,{variant:"outline",size:"sm",className:"text-red-600 border-red-600 hover:bg-red-50",onClick:()=>$u(T.id),disabled:ji.isPending,children:[s.jsx(ua,{className:"w-3 h-3 mr-1"}),ji.isPending?"Cancelling...":"Cancel"]})]}),T.status==="approved"&&(ie==null?void 0:ie.allowWithdrawalAfterApproval)&&s.jsxs(se,{variant:"outline",size:"sm",className:"text-orange-600 border-orange-600 hover:bg-orange-50",onClick:()=>Bu(T.id),disabled:to.isPending,children:[s.jsx(da,{className:"w-3 h-3 mr-1"}),to.isPending?"Withdrawing...":"Withdraw"]})]})})]},T.id)})})]})})})}),s.jsx(fn,{open:d,onOpenChange:T=>{f(T),T||(m(null),p(""))},children:s.jsxs(hn,{className:"max-w-md",children:[s.jsx(mn,{children:s.jsx(pn,{children:"Withdraw Leave Request"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Please provide a reason for withdrawing this leave request. This action may require approval before completion."}),s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"withdrawalReason",className:"text-sm font-medium",children:"Reason for withdrawal *"}),s.jsx(Cn,{id:"withdrawalReason",placeholder:"Enter reason for withdrawal...",value:g,onChange:T=>p(T.target.value),className:"mt-1",rows:3,required:!0})]}),s.jsxs("div",{className:"flex space-x-2 pt-4",children:[s.jsx(se,{type:"button",variant:"outline",onClick:()=>{f(!1),m(null),p("")},children:"Cancel"}),s.jsx(se,{onClick:Uu,disabled:!g.trim()||to.isPending,className:"bg-orange-600 hover:bg-orange-700",children:to.isPending?"Submitting...":"Submit Withdrawal"})]})]})]})})]})})})}function $Ie(){const[e,t]=N.useState("July 2025"),[r,n]=N.useState("yearly"),a=()=>{const j=["January","February","March","April","May","June","July","August","September","October","November","December"],[S,_]=e.split(" "),A=j.indexOf(S);t(A===0?`December ${parseInt(_)-1}`:`${j[A-1]} ${_}`)},i=()=>{const j=["January","February","March","April","May","June","July","August","September","October","November","December"],[S,_]=e.split(" "),A=j.indexOf(S);t(A===11?`January ${parseInt(_)+1}`:`${j[A+1]} ${_}`)},o=()=>{const j=new Date;t(`${["January","February","March","April","May","June","July","August","September","October","November","December"][j.getMonth()]} ${j.getFullYear()}`)},{workPattern:l,isLoading:c}=oh(),{data:u,isLoading:d}=Fe({queryKey:["/api/holidays"],staleTime:5*60*1e3}),{data:f,isLoading:h,error:m}=Fe({queryKey:["/external/holidays"],queryFn:async()=>{const j=localStorage.getItem("jwt_token");if(console.log("🔑 [External Holidays] JWT token found:",!!j),console.log("🔑 [External Holidays] JWT token length:",j==null?void 0:j.length),!j)throw new Error("JWT token not found in localStorage");console.log("🌐 [External Holidays] Calling API: https://apiv1.resolvepay.in/organization/holidays");const S=await fetch("https://apiv1.resolvepay.in/organization/holidays",{method:"GET",headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json"}});if(console.log("🌐 [External Holidays] Response status:",S.status),!S.ok){const A=await S.text();throw console.log("🌐 [External Holidays] Error response:",A),new Error(`Failed to fetch holidays: ${S.status} ${S.statusText}`)}const _=await S.json();return console.log("🌐 [External Holidays] Response data:",_),_.data||_||[]},staleTime:5*60*1e3,refetchOnMount:!0}),g=f&&f.length>0?f:u||[],p=l&&l.selectedHolidays?g.filter(j=>l.selectedHolidays.includes(j.id)):g;console.log("🔄 Holiday Source: Using",f&&f.length>0?"External API":"Database","holidays"),console.log("🏢 [Holidays Debug] All holidays count:",g.length),console.log("🏢 [Holidays Debug] Raw holidays:",g),console.log("🏢 [Holidays Debug] Work pattern selectedHolidays:",l==null?void 0:l.selectedHolidays),console.log("🏢 [Holidays Debug] Filtered holidays count:",p.length);const y=p.map(j=>{let S="",_="";return j.selectedDate?(S=j.selectedDate.split("T")[0],_=j.holidayName||"Holiday"):j.date&&(S=j.date.includes("T")?j.date.split("T")[0]:j.date,_=j.name||"Holiday"),{date:S,name:_}});console.log("🗓️ [Holidays Debug] Final processed holidays:",y),console.log("🗓️ [Holidays Debug] Selected month:",e);const x=(()=>{const S=["January","February","March","April","May","June","July","August","September","October","November","December"],_=e.split(" ")[0],A=S.indexOf(_),C=new Date(2025,A,1),D=new Date(C);D.setDate(D.getDate()-C.getDay());const k=[],O=new Date(D);for(let V=0;V<42;V++){const G=O.getFullYear(),Y=String(O.getMonth()+1).padStart(2,"0"),W=String(O.getDate()).padStart(2,"0"),P=`${G}-${Y}-${W}`,E=y.find(I=>I.date===P),R=O.getMonth()===A;e.includes("August")&&O.getMonth()===7&&O.getDate()>=14&&O.getDate()<=17&&console.log(`🔍 August Debug: ${P} -> Day ${O.getDate()}, Holiday: ${(E==null?void 0:E.name)||"none"}`),k.push({date:O.getDate(),fullDate:P,isCurrentMonth:R,holiday:E==null?void 0:E.name,isHoliday:!!E}),O.setDate(O.getDate()+1)}return k})();console.log("🗓️ Generated Calendar Days:",x),console.log("Calendar Days Length:",x.length);const v=["January","February","March","April","May","June","July","August","September","October","November","December"].map((_,A)=>{const C=new Date(2025,A,1),D=new Date(C);D.setDate(D.getDate()-C.getDay());const k=[],O=new Date(D);for(let V=0;V<42;V++){const G=O.getFullYear(),Y=String(O.getMonth()+1).padStart(2,"0"),W=String(O.getDate()).padStart(2,"0"),P=`${G}-${Y}-${W}`,E=y.find(I=>I.date===P),R=O.getMonth()===A;k.push({date:O.getDate(),fullDate:P,isCurrentMonth:R,holiday:E==null?void 0:E.name,isHoliday:!!E}),O.setDate(O.getDate()+1)}return{monthName:_,monthIndex:A,days:k}});return h||c?s.jsx(Sr,{children:s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading holidays..."})]})})})})}):m?s.jsx(Sr,{children:s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-500 mb-4",children:s.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load holidays"}),s.jsx("p",{className:"text-gray-600 mb-4",children:m instanceof Error?m.message:"Unable to fetch holiday data from the server"}),s.jsx(se,{onClick:()=>window.location.reload(),variant:"outline",children:"Try Again"})]})})})})}):s.jsx(Sr,{children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h1",{className:"text-2xl font-semibold text-gray-900",children:["Holidays"," ",p&&p.length>0&&`(${p.length} total)`]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>n("monthly"),className:`px-3 py-1 text-sm font-medium rounded transition-colors ${r==="monthly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}`,children:"Monthly"}),s.jsx("button",{onClick:()=>n("yearly"),className:`px-3 py-1 text-sm font-medium rounded transition-colors ${r==="yearly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-200"}`,children:"Yearly"})]}),r==="monthly"&&s.jsxs(yt,{value:e,onValueChange:t,children:[s.jsx(gt,{className:"w-40",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"January 2025",children:"January 2025"}),s.jsx(je,{value:"February 2025",children:"February 2025"}),s.jsx(je,{value:"March 2025",children:"March 2025"}),s.jsx(je,{value:"April 2025",children:"April 2025"}),s.jsx(je,{value:"May 2025",children:"May 2025"}),s.jsx(je,{value:"June 2025",children:"June 2025"}),s.jsx(je,{value:"July 2025",children:"July 2025"}),s.jsx(je,{value:"August 2025",children:"August 2025"}),s.jsx(je,{value:"September 2025",children:"September 2025"}),s.jsx(je,{value:"October 2025",children:"October 2025"}),s.jsx(je,{value:"November 2025",children:"November 2025"}),s.jsx(je,{value:"December 2025",children:"December 2025"})]})]})]})]}),r==="yearly"&&s.jsx("div",{className:"mb-6",children:s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"All Holidays for 2025"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((j,S)=>s.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full flex-shrink-0"}),s.jsxs("span",{className:"text-sm text-gray-700",children:[new Date(j.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})," ","- ",j.name]})]},S))})]})})}),r==="monthly"&&s.jsx("div",{className:"mb-6",children:s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:["Holidays for ",e]}),s.jsx("div",{className:"space-y-2",children:(()=>{const j=["January","February","March","April","May","June","July","August","September","October","November","December"],S=e.split(" ")[0],_=j.indexOf(S),A=`2025-${String(_+1).padStart(2,"0")}`,C=y.filter(D=>D.date.startsWith(A));return C.length===0?s.jsxs("div",{className:"text-sm text-gray-500 italic",children:["No holidays in ",e]}):C.map((D,k)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsxs("span",{className:"text-sm text-gray-700",children:[new Date(D.date).toLocaleDateString("en-US",{month:"long",day:"numeric"})," ","- ",D.name]})]},k))})()})]})})}),r==="monthly"?s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:e}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"px-3 py-2 text-sm bg-gray-600 text-white rounded cursor-pointer hover:bg-gray-700 transition-colors",onClick:o,children:"today"}),s.jsx("span",{className:"px-3 py-2 text-sm border border-gray-300 rounded cursor-pointer hover:bg-gray-50 transition-colors",onClick:a,children:"‹"}),s.jsx("span",{className:"px-3 py-2 text-sm border border-gray-300 rounded cursor-pointer hover:bg-gray-50 transition-colors",onClick:i,children:"›"})]})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(j=>s.jsx("div",{className:"p-3 text-center text-sm font-medium text-gray-500",children:j},j))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:x.map((j,S)=>s.jsxs("div",{className:`min-h-[100px] p-2 border border-gray-200 ${j.isCurrentMonth?j.isHoliday?"bg-red-50 text-red-900":"bg-white text-gray-900 hover:bg-gray-50":"bg-gray-50 text-gray-400"}`,children:[s.jsx("div",{className:`text-sm font-medium ${j.isHoliday?"text-red-600":""}`,children:j.date}),j.holiday&&s.jsx("div",{className:"mt-1 text-xs text-red-600 font-medium",children:j.holiday})]},S))})]})}):s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 text-center",children:"2025 Holiday Calendar"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:v.map(j=>s.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-3",children:j.monthName}),s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["S","M","T","W","T","F","S"].map((S,_)=>s.jsx("div",{className:"text-center text-xs font-medium text-gray-500 p-1",children:S},_))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:j.days.map((S,_)=>s.jsx("div",{className:`h-8 flex items-center justify-center text-xs ${S.isCurrentMonth?S.isHoliday?"bg-red-100 text-red-800 font-semibold rounded":"text-gray-700 hover:bg-gray-50 rounded":"text-gray-300"}`,title:S.holiday||"",children:S.date},_))}),s.jsxs("div",{className:"mt-3 space-y-1",children:[j.days.filter(S=>S.isHoliday&&S.isCurrentMonth).map((S,_)=>s.jsx("div",{className:"text-xs",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full flex-shrink-0"}),s.jsxs("span",{className:"text-gray-600 truncate",children:[S.date," - ",S.holiday]})]})},_)),j.days.filter(S=>S.isHoliday&&S.isCurrentMonth).length===0&&s.jsx("div",{className:"text-xs text-gray-400 italic",children:"No holidays"})]})]},j.monthName))})]})})]})})})}const Cg=(e,t,r)=>{let n=0;const a=new Date(e);for(;a<=t;){const i=a.getDay(),o=i===0||i===6,l=Bp(a,r);!o&&!l&&n++,a.setDate(a.getDate()+1)}return n},Bp=(e,t)=>{const r=dt(e,"yyyy-MM-dd");return t.some(n=>{const a=new Date(n.selectedDate||n.date);return dt(a,"yyyy-MM-dd")===r})},rv=e=>{const t=e.getDay();return t===0||t===6},gU=(e,t,r)=>{const n=r.getMonth(),a=r.getFullYear();return e.filter(i=>{if(i.userId!==t)return!1;const o=new Date(i.appliedAt||i.createdAt);return o.getMonth()===n&&o.getFullYear()===a}).length},BIe=(e,t=!0,r=999,n=0,a="")=>Zn({startDate:ql({required_error:"Start date is required"}),endDate:ql({required_error:"End date is required"}),dayType:On(["full","half","quarter"],{required_error:"Please select full day, half day, or quarter day"}),reason:rr().min(1,"Reason for comp-off is required").max(500,"Reason cannot exceed 500 characters")}).refine(i=>i.endDate>=i.startDate,{message:"End date must be after or same as start date",path:["endDate"]}).refine(i=>!Bp(i.startDate,e),{message:"Cannot apply comp-off on a holiday. Please select a different start date.",path:["startDate"]}).refine(i=>!Bp(i.endDate,e),{message:"Cannot apply comp-off on a holiday. Please select a different end date.",path:["endDate"]}).refine(i=>t?!0:!rv(i.startDate),{message:"Cannot apply comp-off on weekends. This comp-off type only allows working days.",path:["startDate"]}).refine(i=>t?!0:!rv(i.endDate),{message:"Cannot apply comp-off on weekends. This comp-off type only allows working days.",path:["endDate"]}).refine(i=>(gU([],a,i.startDate),n<r),{message:`You have reached the maximum limit of ${r} comp-off applications per month.`,path:["startDate"]}),UIe=(e,t=!0,r=999,n=0,a="")=>Zn({startDate:ql({required_error:"Start date is required"}),endDate:ql({required_error:"End date is required"}),dayType:On(["full","half","quarter"],{required_error:"Please select full day, half day, or quarter day"}),reason:rr().min(1,"Reason for taking comp-off is required").max(500,"Reason cannot exceed 500 characters")}).refine(i=>i.endDate>=i.startDate,{message:"End date must be after or same as start date",path:["endDate"]}).refine(i=>!Bp(i.startDate,e),{message:"Cannot avail comp-off on a holiday. Please select a different start date.",path:["startDate"]}).refine(i=>!Bp(i.endDate,e),{message:"Cannot avail comp-off on a holiday. Please select a different end date.",path:["endDate"]}).refine(i=>t?!0:!rv(i.startDate),{message:"Cannot avail comp-off on weekends. This comp-off type only allows working days.",path:["startDate"]}).refine(i=>t?!0:!rv(i.endDate),{message:"Cannot avail comp-off on weekends. This comp-off type only allows working days.",path:["endDate"]}).refine(i=>n<r,{message:`You have reached the maximum limit of ${r} comp-off applications per month.`,path:["startDate"]}),WIe=Zn({leaveTypeId:rr().min(1,"Leave type is required"),transferDays:er().min(.5,"Minimum 0.5 days required").max(30,"Maximum 30 days allowed"),reason:rr().min(1,"Reason for transfer is required").max(500,"Reason cannot exceed 500 characters")}),VIe=Zn({enCashDays:er().min(.5,"Minimum 0.5 days required").max(30,"Maximum 30 days allowed"),dailyRate:er().min(1,"Daily rate must be greater than 0"),reason:rr().min(1,"Reason for en-cash is required").max(500,"Reason cannot exceed 500 characters")});function HIe(){var Lu,$u,Bu,Uu,hc,Kr,mc,Ga,Wu,Vu,pc,z,re,X,J,ne;const[e,t]=N.useState("All"),[r,n]=N.useState("2024"),[a,i]=N.useState("Yearly"),[o,l]=N.useState(!1),[c,u]=N.useState(!1),[d,f]=N.useState(!1),[h,m]=N.useState(!1),[g,p]=N.useState(!1),[y,b]=N.useState(""),[x,w]=N.useState(!1),[v,j]=N.useState(null),{toast:S}=Vr(),_=n0(),{employees:A}=Ru(),{workPattern:C}=oh(),{data:D=[]}=Fe({queryKey:["/api/holidays"],queryFn:async()=>{const T=await fetch("/api/holidays",{credentials:"include",headers:{"X-Org-Id":localStorage.getItem("org_id")||"60"}});return T.ok?T.json():[]}}),k=C&&C.selectedHolidays?D.filter(T=>C.selectedHolidays.includes(T.id)):D;console.log("🎯 Comp-off Form Holiday Filtering:",{workPattern:C==null?void 0:C.patternName,selectedHolidayIds:C==null?void 0:C.selectedHolidays,allHolidays:D.length,filteredHolidays:k.length}),N.useEffect(()=>{var T,F,Z,Q;console.log("=== COMP-OFF PERMISSION DEBUG ==="),console.log("Comp-off allowOnBehalf permission:",(F=(T=_==null?void 0:_.permissions)==null?void 0:T.allowOnBehalf)==null?void 0:F.compOff),console.log("Should show checkbox?",((Q=(Z=_==null?void 0:_.permissions)==null?void 0:Z.allowOnBehalf)==null?void 0:Q.compOff)===!0),console.log("External employees array:",A),console.log("External employees length:",A==null?void 0:A.length),console.log("Apply on behalf state:",g),console.log("==================================")},[_,A,g]),N.useEffect(()=>{!o&&!c&&!d&&!h&&(p(!1),b(""))},[o,c,d,h]);const{data:O=[],isLoading:V}=Fe({queryKey:["/api/comp-off-requests"]}),{data:G,refetch:Y}=Fe({queryKey:["/api/comp-off-config"],staleTime:0,cacheTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0});console.log("🏗️ Comp-off Config Data Structure:",{config:G,hasVariantSettings:G==null?void 0:G.variantSettings,allowOnNonWorkingDays:(Lu=G==null?void 0:G.variantSettings)==null?void 0:Lu.allowOnNonWorkingDays,maxApplications:($u=G==null?void 0:G.variantSettings)==null?void 0:$u.maxApplicationsPerMonth}),N.useEffect(()=>{Ye.removeQueries({queryKey:["/api/comp-off-config"]}),Ye.invalidateQueries({queryKey:["/api/comp-off-config"]}),Y()},[Y]);const P=(()=>{const T=["bank","avail"];if(console.log("CompOff Config Data:",G),console.log("Compensation Options:",G==null?void 0:G.compensationOptions),!G||!G.compensationOptions)return console.log("No compensation options found, showing all actions"),[...T,"transfer","encash"];const F=Array.isArray(G.compensationOptions)?G.compensationOptions:[G.compensationOptions];console.log("Parsed compensation options:",F);const Z=[...T];return F.includes("En-cashment")&&(Z.push("encash"),console.log("Added en-cash action")),F.includes("Convert to leaves")&&(Z.push("transfer"),console.log("Added transfer action")),console.log("Final available actions:",Z),Z})(),{data:E=[]}=Fe({queryKey:["/api/comp-off-variants"]}),R=localStorage.getItem("user_id")||"225",{data:I=[],isLoading:ee,refetch:L}=Fe({queryKey:["/api/comp-off-requests",R],queryFn:async()=>{const T=await fetch(`/api/comp-off-requests?userId=${R}`,{credentials:"include",headers:{"X-Org-Id":localStorage.getItem("org_id")||""}});if(!T.ok)throw new Error("Failed to fetch comp-off requests");return T.json()}}),{data:q=[]}=Fe({queryKey:["/api/employee-assignments"]}),{data:H=[]}=Fe({queryKey:["/api/leave-types"]});H.filter(T=>q.some(F=>F.userId===R&&F.leaveTypeId===T.id));const B=H.filter(T=>{if(!E||E.length===0)return!1;const F=E[0];return!F.convertibleLeaveTypes||!Array.isArray(F.convertibleLeaveTypes)?!1:F.convertibleLeaveTypes.includes(T.id)}),ce=(()=>{if(!E||E.length===0)return[{value:"full",label:"Full Day"}];const T=E[0],F=[];return T.allowFullDay&&F.push({value:"full",label:"Full Day"}),T.allowHalfDay&&F.push({value:"half",label:"Half Day"}),T.allowQuarterDay&&F.push({value:"quarter",label:"Quarter Day"}),F.length>0?F:[{value:"full",label:"Full Day"}]})(),ge=Ut({mutationFn:async T=>await Ct("POST","/api/comp-off-requests",T),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/comp-off-requests",R]})}});Ut({mutationFn:async({id:T,data:F})=>await Ct("PATCH",`/api/comp-off-requests/${T}`,F),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/comp-off-requests",R]})}}),Ut({mutationFn:async T=>await Ct("DELETE",`/api/comp-off-requests/${T}`),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/comp-off-requests",R]})}});const he=I.filter(T=>T.type==="bank"&&T.status==="approved").length,K=I.filter(T=>T.type==="avail"&&T.status==="approved").length,fe=I.filter(T=>T.type==="transfer"&&T.status==="approved").reduce((T,F)=>T+(parseFloat(F.transferAmount)||0),0),ae=I.filter(T=>T.type==="en_cash"&&T.status==="approved").reduce((T,F)=>T+(parseFloat(F.transferAmount)||0),0),Ne={totalCompOffs:I.length,banked:he,availed:K,pendingApprovals:I.filter(T=>T.status==="pending").length,expired:I.filter(T=>T.status==="expired").length,balance:he-K-fe-ae,carryForward:he,enCashable:he-K-fe-ae},Se=[{id:"All",label:"All"},{id:"Pending",label:"Pending",badge:!0},{id:"Banked",label:"Banked",badge:!0},{id:"Availed",label:"Availed",badge:!0},{id:"Rejected",label:"Rejected",badge:!0},{id:"Expired",label:"Expired",badge:!0}],Ae=T=>{switch(T.status){case"approved":case"banked":return s.jsxs(se,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-200 hover:bg-blue-50",onClick:()=>Oe(T),children:[s.jsx(jx,{className:"w-4 h-4 mr-1"}),"View"]});case"expired":return s.jsxs(se,{variant:"outline",size:"sm",className:"text-green-600 border-green-200 hover:bg-green-50",onClick:()=>handleReapply(T),children:[s.jsx(Fq,{className:"w-4 h-4 mr-1"}),"Re-apply"]});case"pending":return s.jsxs(se,{variant:"outline",size:"sm",className:"text-orange-600 border-orange-200 hover:bg-orange-50",onClick:()=>Oe(T),children:[s.jsx(jx,{className:"w-4 h-4 mr-1"}),"Pending"]});case"rejected":return s.jsx("div",{className:"text-xs text-red-600 font-medium",children:"Rejected"});default:return null}},Oe=T=>{console.log("View comp off:",T),j(T),w(!0)};let M=!0,oe=999;if(G){M=G.allownonworkingdays??G.allowNonWorkingDays??G.allowOnNonWorkingDays??((Bu=G.variantSettings)==null?void 0:Bu.allownonworkingdays)??((Uu=G.variantSettings)==null?void 0:Uu.allowNonWorkingDays)??!0;const T=G.maxcompoffapplications;T?typeof T=="object"&&T.Month?oe=T.Month:typeof T=="number"&&(oe=T):oe=G.maxApplicationsPerMonth??999}const be="Month",U=localStorage.getItem("user_id")||"",te=localStorage.getItem("org_id")||"13",xe=gU(O,U,new Date);M=!1,oe=3,console.log("🔒 Comp-off Validation Settings:",{allowOnNonWorkingDays:M,maxApplicationsPerMonth:oe,maxApplicationsPeriod:be,currentMonthCount:xe,userId:U,orgId:te,configData:G,rawConfigKeys:G?Object.keys(G):[],weekendValidationActive:!M,TESTING_NOTE:"Temporarily forcing allowOnNonWorkingDays = false to test validation"});const le=BIe(k,M,oe,xe,U),ye=UIe(k,M,oe,xe,U),ve=os({resolver:Cs(le),defaultValues:{reason:"",dayType:((hc=ce[0])==null?void 0:hc.value)||"full"}}),ke=os({resolver:Cs(ye),defaultValues:{reason:"",dayType:((Kr=ce[0])==null?void 0:Kr.value)||"full"}}),it=os({resolver:Cs(WIe),defaultValues:{leaveTypeId:"",transferDays:1,reason:""}}),ot=os({resolver:Cs(VIe),defaultValues:{enCashDays:1,dailyRate:0,reason:""}}),Nt=()=>{l(!0)},Le=()=>{u(!0)},rt=()=>{if(!P.includes("transfer")){S({title:"Action Not Available",description:"Transfer to leaves is not enabled in your organization's compensation options",variant:"destructive"});return}f(!0)},Mt=T=>{const F=g&&y?y:localStorage.getItem("user_id")||"1",Z=Ne.balance;if(T.transferDays>Z){S({title:"Insufficient Balance",description:`You only have ${Z} banked comp-off days available for transfer`,variant:"destructive"});return}const Q={reason:T.reason,workedDate:new Date().toISOString().split("T")[0],compensateWith:"",notes:T.reason,status:"pending",type:"transfer",transferAmount:T.transferDays.toString(),leaveTypeId:T.leaveTypeId,userId:F};console.log("Submitting transfer to leave data:",Q),ge.mutate(Q,{onSuccess:ie=>{const ue=(ie==null?void 0:ie.status)==="approved";S({title:"Success",description:ue?"Transfer to leave request submitted and auto-approved successfully":"Transfer to leave request submitted successfully"}),f(!1),it.reset()},onError:ie=>{S({title:"Error",description:ie.message||"Failed to submit transfer request",variant:"destructive"})}})},at=()=>{if(!P.includes("encash")){S({title:"Action Not Available",description:"En-cash compensation is not enabled in your organization's compensation options",variant:"destructive"});return}m(!0)},$t=T=>{const F=E[0];let Z=Cg(T.startDate,T.endDate,k);const Q=dt(T.startDate,"yyyy-MM-dd"),ie=dt(T.endDate,"yyyy-MM-dd");if(console.log("✅ Using dynamic working days calculation for comp-off:",Z),console.log("Bank Comp-off Working Days Calculation:",{startDate:Q,endDate:ie,calculatedWorkingDays:Cg(T.startDate,T.endDate,k),finalWorkingDays:Z}),F){const _e=new Date,Ee=T.startDate,we=ig(_e,Ee);if(F.approvalDays&&we<F.approvalDays){S({title:"Validation Error",description:`Comp-off request should be made at least ${F.approvalDays} days in advance`,variant:"destructive"});return}if(F.availWithinDays&&we>F.availWithinDays){S({title:"Validation Error",description:`Comp-off should be availed within ${F.availWithinDays} days from date of working`,variant:"destructive"});return}}const Te={userId:g&&y?y:localStorage.getItem("user_id")||"1",reason:T.reason,workedDate:dt(T.startDate,"yyyy-MM-dd"),compensateWith:dt(T.endDate,"yyyy-MM-dd"),notes:`${T.reason} (${T.dayType==="half"?"Half Day":"Full Day"}) - ${Z} working days`,status:"pending",type:"bank",dayType:T.dayType,workingDays:Z};console.log("Submitting bank comp-off data:",Te),ge.mutate(Te,{onSuccess:_e=>{const Ee=(_e==null?void 0:_e.status)==="approved";S({title:"Success",description:Ee?"Comp-off banking request submitted and auto-approved successfully":"Comp-off banking request submitted successfully"}),l(!1),ve.reset()},onError:_e=>{S({title:"Error",description:_e.message||"Failed to submit comp-off banking request",variant:"destructive"})}})},Ke=T=>{const F=E[0];let Z=Cg(T.startDate,T.endDate,k);const Q=dt(T.startDate,"yyyy-MM-dd"),ie=dt(T.endDate,"yyyy-MM-dd");console.log("✅ Using dynamic working days calculation for avail comp-off:",Z),console.log("Avail Comp-off Working Days Calculation:",{startDate:Q,endDate:ie,calculatedWorkingDays:Cg(T.startDate,T.endDate,k),finalWorkingDays:Z});const ue=Ne.balance,Te=Z;if(ue<Te){S({title:"Insufficient Balance",description:`You have ${ue} comp-off days available, but requesting ${Te} working days`,variant:"destructive"});return}if(F){const we=new Date,De=T.startDate,Be=ig(De,we);if(F.approvalDays&&Be<F.approvalDays){S({title:"Validation Error",description:`Comp-off request should be made at least ${F.approvalDays} days in advance`,variant:"destructive"});return}}const Ee={userId:localStorage.getItem("user_id")||"1",reason:T.reason,workedDate:dt(T.startDate,"yyyy-MM-dd"),compensateWith:dt(T.endDate,"yyyy-MM-dd"),notes:`${T.reason} (${T.dayType==="half"?"Half Day":"Full Day"}) - ${Z} working days`,status:"pending",type:"avail",dayType:T.dayType,workingDays:Z};console.log("Submitting avail comp-off data:",Ee),ge.mutate(Ee,{onSuccess:we=>{const De=(we==null?void 0:we.status)==="approved";S({title:"Success",description:De?"Comp-off avail request submitted and auto-approved successfully":"Comp-off avail request submitted successfully"}),u(!1),ke.reset()},onError:we=>{S({title:"Error",description:we.message||"Failed to submit comp-off avail request",variant:"destructive"})}})},Dt=T=>{const F=Ne.balance;if(F<T.enCashDays){S({title:"Insufficient Balance",description:`You have ${F} comp-off days available, but requesting ${T.enCashDays} days`,variant:"destructive"});return}const Z=g&&y?y:localStorage.getItem("user_id")||"1",Q=T.enCashDays*T.dailyRate,ie={userId:Z,reason:T.reason,workedDate:new Date().toISOString().split("T")[0],compensateWith:"",notes:T.reason,status:"pending",type:"en_cash",enCashAmount:Q.toString(),paymentDetails:`Days: ${T.enCashDays}, Rate: ₹${T.dailyRate}/day, Total: ₹${Q.toFixed(2)}`};ge.mutate(ie,{onSuccess:()=>{S({title:"Success",description:"En-cash request submitted successfully"}),m(!1),ot.reset()},onError:ue=>{S({title:"Error",description:ue.message||"Failed to submit en-cash request",variant:"destructive"})}})},Jt=ve.watch("startDate"),Gr=ve.watch("endDate"),Fu=ve.watch("dayType"),fc=()=>{if(!Jt||!Gr)return"";const T=ig(Gr,Jt)+1,F=Fu==="half"?"HALF DAY":"FULL DAY";return T===1?`Banking comp-off for ${F} overtime work on ${dt(Jt,"EEE, dd MMM yyyy")}`:`Banking comp-off for ${T} ${F.toLowerCase()}${T>1?"s":""} overtime work from ${dt(Jt,"EEE, dd MMM yyyy")} to ${dt(Gr,"EEE, dd MMM yyyy")}`},gs=ke.watch("startDate"),ji=ke.watch("endDate"),Us=ke.watch("dayType"),to=()=>{if(!gs||!ji)return"";const T=ig(ji,gs)+1,F=Us==="half"?"HALF DAY":"FULL DAY";return T===1?`Taking ${F} comp-off on ${dt(gs,"EEE, dd MMM yyyy")}`:`Taking ${T} ${F.toLowerCase()}${T>1?"s":""} comp-off from ${dt(gs,"EEE, dd MMM yyyy")} to ${dt(ji,"EEE, dd MMM yyyy")}`};return s.jsxs(Sr,{children:[s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Compensatory off"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(yt,{value:a,onValueChange:i,children:[s.jsx(gt,{className:"w-24",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"Yearly",children:"Yearly"}),s.jsx(je,{value:"Monthly",children:"Monthly"}),s.jsx(je,{value:"Quarterly",children:"Quarterly"})]})]}),s.jsxs(yt,{value:r,onValueChange:n,children:[s.jsx(gt,{className:"w-20",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"2024",children:"2024"}),s.jsx(je,{value:"2023",children:"2023"}),s.jsx(je,{value:"2022",children:"2022"})]})]}),s.jsx(fn,{open:o,onOpenChange:l,children:s.jsxs(hn,{className:"sm:max-w-md",children:[s.jsx(mn,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(pn,{className:"text-lg font-semibold",children:"Bank Comp Off"}),s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>l(!1),className:"h-6 w-6",children:s.jsx(da,{className:"h-4 w-4"})})]})}),((Ga=(mc=_==null?void 0:_.permissions)==null?void 0:mc.allowOnBehalf)==null?void 0:Ga.compOff)===!0&&s.jsxs("div",{className:"space-y-3 pb-4 border-b",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"compoff-bank-apply-on-behalf",checked:g,onCheckedChange:T=>p(!!T)}),s.jsx("label",{htmlFor:"compoff-bank-apply-on-behalf",className:"text-sm font-medium leading-none cursor-pointer",children:"Apply on behalf of someone else"})]}),g&&s.jsxs(yt,{value:y,onValueChange:b,children:[s.jsx(gt,{className:"w-full",children:s.jsx(vt,{placeholder:"Select Employee"})}),s.jsx(xt,{children:A.map(T=>s.jsx(je,{value:T.user_id.toString(),children:T.user_name},T.user_id))})]})]}),s.jsx(ai,{...ve,children:s.jsxs("form",{onSubmit:ve.handleSubmit($t),className:"space-y-4",children:[s.jsx(et,{control:ve.control,name:"startDate",render:({field:T})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Overtime work start date"}),s.jsxs(wl,{children:[s.jsx(bl,{asChild:!0,children:s.jsx(lt,{children:s.jsxs(se,{variant:"outline",className:Ge("w-full pl-3 text-left font-normal",!T.value&&"text-muted-foreground"),children:[T.value?dt(T.value,"mm/dd/yyyy"):s.jsx("span",{children:"mm/dd/yyyy"}),s.jsx(br,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(yo,{className:"w-auto p-0",align:"start",children:s.jsx(xo,{mode:"single",selected:T.value,onSelect:T.onChange,disabled:F=>F>new Date||F<new Date("1900-01-01"),initialFocus:!0})})]}),s.jsx(wt,{})]})}),s.jsx(et,{control:ve.control,name:"endDate",render:({field:T})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Overtime work end date"}),s.jsxs(wl,{children:[s.jsx(bl,{asChild:!0,children:s.jsx(lt,{children:s.jsxs(se,{variant:"outline",className:Ge("w-full pl-3 text-left font-normal",!T.value&&"text-muted-foreground"),children:[T.value?dt(T.value,"mm/dd/yyyy"):s.jsx("span",{children:"mm/dd/yyyy"}),s.jsx(br,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(yo,{className:"w-auto p-0",align:"start",children:s.jsx(xo,{mode:"single",selected:T.value,onSelect:T.onChange,disabled:F=>F>new Date||F<new Date("1900-01-01"),initialFocus:!0})})]}),s.jsx(wt,{})]})}),s.jsx(et,{control:ve.control,name:"dayType",render:({field:T})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Day Type"}),s.jsxs(yt,{onValueChange:T.onChange,defaultValue:T.value,children:[s.jsx(lt,{children:s.jsx(gt,{children:s.jsx(vt,{placeholder:"Select day type"})})}),s.jsx(xt,{children:ce.map(F=>s.jsx(je,{value:F.value,children:F.label},F.value))})]}),s.jsx(wt,{})]})}),Jt&&Gr&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:s.jsx("p",{className:"text-sm text-blue-700",children:fc()})}),s.jsx(et,{control:ve.control,name:"reason",render:({field:T})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Reason for overtime work"}),s.jsx(lt,{children:s.jsx(Cn,{placeholder:"Enter your reason for overtime work",className:"min-h-[100px] resize-none",...T})}),s.jsx(wt,{})]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsxs(se,{type:"button",variant:"outline",onClick:()=>l(!1),className:"text-teal-600 border-teal-200 hover:bg-teal-50",children:[s.jsx(ua,{className:"w-4 h-4 mr-2"}),"Discard"]}),s.jsx(se,{type:"submit",disabled:ge.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white",children:ge.isPending?"Banking...":"Bank Comp-off"})]})]})})]})}),s.jsx(fn,{open:c,onOpenChange:u,children:s.jsxs(hn,{className:"sm:max-w-md",children:[s.jsx(mn,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(pn,{className:"text-lg font-semibold",children:"Avail Comp Off"}),s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>u(!1),className:"h-6 w-6",children:s.jsx(da,{className:"h-4 w-4"})})]})}),((Vu=(Wu=_==null?void 0:_.permissions)==null?void 0:Wu.allowOnBehalf)==null?void 0:Vu.compOff)===!0&&s.jsxs("div",{className:"space-y-3 pb-4 border-b",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"compoff-avail-apply-on-behalf",checked:g,onCheckedChange:T=>p(!!T)}),s.jsx("label",{htmlFor:"compoff-avail-apply-on-behalf",className:"text-sm font-medium leading-none cursor-pointer",children:"Apply on behalf of someone else"})]}),g&&s.jsxs(yt,{value:y,onValueChange:b,children:[s.jsx(gt,{className:"w-full",children:s.jsx(vt,{placeholder:"Select Employee"})}),s.jsx(xt,{children:A.map(T=>s.jsx(je,{value:T.user_id.toString(),children:T.user_name},T.user_id))})]})]}),s.jsx(ai,{...ke,children:s.jsxs("form",{onSubmit:ke.handleSubmit(Ke),className:"space-y-4",children:[s.jsx(et,{control:ke.control,name:"startDate",render:({field:T})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Comp-off start date"}),s.jsxs(wl,{children:[s.jsx(bl,{asChild:!0,children:s.jsx(lt,{children:s.jsxs(se,{variant:"outline",className:Ge("w-full pl-3 text-left font-normal",!T.value&&"text-muted-foreground"),children:[T.value?dt(T.value,"mm/dd/yyyy"):s.jsx("span",{children:"mm/dd/yyyy"}),s.jsx(br,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(yo,{className:"w-auto p-0",align:"start",children:s.jsx(xo,{mode:"single",selected:T.value,onSelect:T.onChange,disabled:F=>F<new Date||F<new Date("1900-01-01"),initialFocus:!0})})]}),s.jsx(wt,{})]})}),s.jsx(et,{control:ke.control,name:"endDate",render:({field:T})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Comp-off end date"}),s.jsxs(wl,{children:[s.jsx(bl,{asChild:!0,children:s.jsx(lt,{children:s.jsxs(se,{variant:"outline",className:Ge("w-full pl-3 text-left font-normal",!T.value&&"text-muted-foreground"),children:[T.value?dt(T.value,"mm/dd/yyyy"):s.jsx("span",{children:"mm/dd/yyyy"}),s.jsx(br,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(yo,{className:"w-auto p-0",align:"start",children:s.jsx(xo,{mode:"single",selected:T.value,onSelect:T.onChange,disabled:F=>F<new Date||F<new Date("1900-01-01"),initialFocus:!0})})]}),s.jsx(wt,{})]})}),s.jsx(et,{control:ke.control,name:"dayType",render:({field:T})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Day Type"}),s.jsxs(yt,{onValueChange:T.onChange,defaultValue:T.value,children:[s.jsx(lt,{children:s.jsx(gt,{children:s.jsx(vt,{placeholder:"Select day type"})})}),s.jsx(xt,{children:ce.map(F=>s.jsx(je,{value:F.value,children:F.label},F.value))})]}),s.jsx(wt,{})]})}),gs&&ji&&s.jsx("div",{className:"bg-teal-50 border border-teal-200 rounded-md p-3",children:s.jsx("p",{className:"text-sm text-teal-700",children:to()})}),s.jsx(et,{control:ke.control,name:"reason",render:({field:T})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Reason for taking comp-off"}),s.jsx(lt,{children:s.jsx(Cn,{placeholder:"Enter your reason for taking comp-off",className:"min-h-[100px] resize-none",...T})}),s.jsx(wt,{})]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsxs(se,{type:"button",variant:"outline",onClick:()=>u(!1),className:"text-teal-600 border-teal-200 hover:bg-teal-50",children:[s.jsx(ua,{className:"w-4 h-4 mr-2"}),"Discard"]}),s.jsx(se,{type:"submit",disabled:ge.isPending,className:"bg-teal-600 hover:bg-teal-700 text-white",children:ge.isPending?"Submitting...":"Avail Comp-off"})]})]})})]})}),s.jsx(fn,{open:d,onOpenChange:f,children:s.jsxs(hn,{className:"sm:max-w-md",children:[s.jsx(mn,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(pn,{className:"text-lg font-semibold",children:"Transfer to Leave"}),s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>f(!1),className:"h-6 w-6",children:s.jsx(da,{className:"h-4 w-4"})})]})}),((z=(pc=_==null?void 0:_.permissions)==null?void 0:pc.allowOnBehalf)==null?void 0:z.compOff)===!0&&s.jsxs("div",{className:"space-y-3 pb-4 border-b",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"compoff-transfer-apply-on-behalf",checked:g,onCheckedChange:T=>p(!!T)}),s.jsx("label",{htmlFor:"compoff-transfer-apply-on-behalf",className:"text-sm font-medium leading-none cursor-pointer",children:"Apply on behalf of someone else"})]}),g&&s.jsxs(yt,{value:y,onValueChange:b,children:[s.jsx(gt,{className:"w-full",children:s.jsx(vt,{placeholder:"Select Employee"})}),s.jsx(xt,{children:A.map(T=>s.jsx(je,{value:T.user_id.toString(),children:T.user_name},T.user_id))})]})]}),s.jsx(ai,{...it,children:s.jsxs("form",{onSubmit:it.handleSubmit(Mt),className:"space-y-4",children:[s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-md p-3",children:s.jsxs("p",{className:"text-sm text-orange-700",children:["Available Comp-off Balance: ",s.jsxs("strong",{children:[Ne.balance," days"]})]})}),s.jsx(et,{control:it.control,name:"leaveTypeId",render:({field:T})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Transfer to Leave Type"}),s.jsxs(yt,{onValueChange:T.onChange,defaultValue:T.value,children:[s.jsx(lt,{children:s.jsx(gt,{children:s.jsx(vt,{placeholder:"Select leave type"})})}),s.jsx(xt,{children:B&&B.length>0?B.map(F=>s.jsx(je,{value:F.id.toString(),children:F.name},F.id)):s.jsx(je,{value:"no-types",disabled:!0,children:"No convertible leave types configured"})})]}),s.jsx(wt,{})]})}),s.jsx(et,{control:it.control,name:"transferDays",render:({field:T})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Days to transfer to leave"}),s.jsx(lt,{children:s.jsx(ht,{type:"number",step:"0.5",min:"0.5",max:Ne.balance,placeholder:"Enter days to transfer",...T,onChange:F=>T.onChange(parseFloat(F.target.value))})}),s.jsx(wt,{})]})}),s.jsx(et,{control:it.control,name:"reason",render:({field:T})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Reason for transfer"}),s.jsx(lt,{children:s.jsx(Cn,{placeholder:"Enter your reason for transferring comp-off to leave",className:"min-h-[100px] resize-none",...T})}),s.jsx(wt,{})]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsxs(se,{type:"button",variant:"outline",onClick:()=>f(!1),className:"text-orange-600 border-orange-200 hover:bg-orange-50",children:[s.jsx(ua,{className:"w-4 h-4 mr-2"}),"Discard"]}),s.jsx(se,{type:"submit",disabled:ge.isPending,className:"bg-orange-600 hover:bg-orange-700 text-white",children:ge.isPending?"Transferring...":"Transfer to Leave"})]})]})})]})}),s.jsx(fn,{open:h,onOpenChange:m,children:s.jsxs(hn,{className:"sm:max-w-md",children:[s.jsx(mn,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(pn,{className:"text-lg font-semibold",children:"En-Cash Comp Off"}),s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>m(!1),className:"h-6 w-6",children:s.jsx(da,{className:"h-4 w-4"})})]})}),((X=(re=_==null?void 0:_.permissions)==null?void 0:re.allowOnBehalf)==null?void 0:X.compOff)===!0&&s.jsxs("div",{className:"space-y-3 pb-4 border-b",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"compoff-encash-apply-on-behalf",checked:g,onCheckedChange:T=>p(!!T)}),s.jsx("label",{htmlFor:"compoff-encash-apply-on-behalf",className:"text-sm font-medium leading-none cursor-pointer",children:"Apply on behalf of someone else"})]}),g&&s.jsxs(yt,{value:y,onValueChange:b,children:[s.jsx(gt,{className:"w-full",children:s.jsx(vt,{placeholder:"Select Employee"})}),s.jsx(xt,{children:A.map(T=>s.jsx(je,{value:T.user_id.toString(),children:T.user_name},T.user_id))})]})]}),s.jsx(ai,{...ot,children:s.jsxs("form",{onSubmit:ot.handleSubmit(Dt),className:"space-y-4",children:[s.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-md p-3",children:s.jsxs("p",{className:"text-sm text-purple-700",children:["Available Comp-off Balance: ",s.jsxs("strong",{children:[Ne.balance," days"]})]})}),s.jsx(et,{control:ot.control,name:"enCashDays",render:({field:T})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Days to en-cash"}),s.jsx(lt,{children:s.jsx(ht,{type:"number",step:"0.5",min:"0.5",max:Ne.balance,placeholder:"Enter days to en-cash",...T,onChange:F=>T.onChange(parseFloat(F.target.value))})}),s.jsx(wt,{})]})}),s.jsx(et,{control:ot.control,name:"dailyRate",render:({field:T})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Daily rate (₹)"}),s.jsx(lt,{children:s.jsx(ht,{type:"number",step:"0.01",min:"1",placeholder:"Enter daily rate for compensation",...T,onChange:F=>T.onChange(parseFloat(F.target.value))})}),s.jsx(wt,{})]})}),ot.watch("enCashDays")&&ot.watch("dailyRate")&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:s.jsxs("p",{className:"text-sm text-green-700",children:["Total Amount: ",s.jsxs("strong",{children:["₹",(ot.watch("enCashDays")*ot.watch("dailyRate")).toFixed(2)]})]})}),s.jsx(et,{control:ot.control,name:"reason",render:({field:T})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Reason for en-cash"}),s.jsx(lt,{children:s.jsx(Cn,{placeholder:"Enter your reason for en-cashing comp-off",className:"min-h-[100px] resize-none",...T})}),s.jsx(wt,{})]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsxs(se,{type:"button",variant:"outline",onClick:()=>m(!1),className:"text-purple-600 border-purple-200 hover:bg-purple-50",children:[s.jsx(ua,{className:"w-4 h-4 mr-2"}),"Discard"]}),s.jsx(se,{type:"submit",disabled:ge.isPending,className:"bg-purple-600 hover:bg-purple-700 text-white",children:ge.isPending?"Processing...":"En-Cash Comp-off"})]})]})})]})})]})]}),s.jsxs("div",{className:`grid gap-4 ${P.length===2?"grid-cols-2":P.length===3?"grid-cols-3":"grid-cols-4"}`,children:[P.includes("avail")&&s.jsx(Ce,{className:"border border-teal-200 bg-teal-50 cursor-pointer hover:bg-teal-100 transition-colors",onClick:Le,children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx("h3",{className:"text-sm font-medium text-teal-700",children:"Avail Comp-off"})}),s.jsx(eg,{className:"w-5 h-5 text-teal-600"})]})})}),P.includes("bank")&&s.jsx(Ce,{className:"border border-blue-200 bg-blue-50 cursor-pointer hover:bg-blue-100 transition-colors",onClick:Nt,children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx("h3",{className:"text-sm font-medium text-blue-700",children:"Bank Comp-off"})}),s.jsx(eg,{className:"w-5 h-5 text-blue-600"})]})})}),P.includes("transfer")&&s.jsx(Ce,{className:"border border-purple-200 bg-purple-50 cursor-pointer hover:bg-purple-100 transition-colors",onClick:rt,children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx("h3",{className:"text-sm font-medium text-purple-700",children:"Transfer to Leaves"})}),s.jsx(eg,{className:"w-5 h-5 text-purple-600"})]})})}),P.includes("encash")&&s.jsx(Ce,{className:"border border-gray-200 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:at,children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"En-Cash Comp"})}),s.jsx(eg,{className:"w-5 h-5 text-gray-600"})]})})})]}),s.jsxs("div",{className:"grid grid-cols-8 gap-4",children:[s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Ne.totalCompOffs}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total comp offs"})]})}),s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Ne.banked}),s.jsx("div",{className:"text-sm text-gray-600",children:"Banked"})]})}),s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Ne.availed}),s.jsx("div",{className:"text-sm text-gray-600",children:"Availed"})]})}),s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Ne.pendingApprovals}),s.jsx("div",{className:"text-sm text-gray-600",children:"Pending approvals"})]})}),s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Ne.expired}),s.jsx("div",{className:"text-sm text-gray-600",children:"Expired"})]})}),s.jsx(Ce,{className:"bg-orange-50 border-orange-200",children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:Ne.balance}),s.jsx("div",{className:"text-sm text-orange-700",children:"Balance"})]})}),s.jsx(Ce,{className:"bg-orange-50 border-orange-200",children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:Ne.carryForward}),s.jsx("div",{className:"text-sm text-orange-700",children:"Carry forward"})]})}),s.jsx(Ce,{className:"bg-orange-50 border-orange-200",children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:Ne.enCashable}),s.jsx("div",{className:"text-sm text-orange-700",children:"En-cashable"})]})})]}),s.jsx("div",{className:"flex items-center space-x-6 border-b border-gray-200",children:Se.map(T=>s.jsxs("button",{onClick:()=>t(T.id),className:`flex items-center space-x-2 px-1 py-3 text-sm font-medium border-b-2 transition-colors ${e===T.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[s.jsx("span",{children:T.label}),T.badge&&s.jsx(Lt,{variant:"secondary",className:"bg-gray-100 text-gray-600 text-xs",children:T.id==="Pending"?"1":"0"})]},T.id))}),s.jsx(Ce,{children:s.jsx(Ie,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Worked Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Day Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-sm text-gray-500",children:"Loading comp off requests..."})}):I.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No comp off requests found"})}):I.map(T=>{var Q,ie;const F=ue=>{switch(ue){case"bank":return"Bank";case"avail":return"Avail";case"transfer":return"Transfer";case"en-cash":return"En-Cash";default:return ue||"Bank"}},Z=ue=>{const Te="px-2 py-1 text-xs font-medium rounded-full";switch(ue){case"approved":return`${Te} bg-green-100 text-green-800`;case"pending":return`${Te} bg-yellow-100 text-yellow-800`;case"rejected":return`${Te} bg-red-100 text-red-800`;default:return`${Te} bg-gray-100 text-gray-800`}};return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:F(T.type)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.reason}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(T.workedDate).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.type==="transfer"&&T.transferAmount?`${T.transferAmount} days`:T.dayType==="full"?"Full Day":"Half Day"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:Z(T.status),children:((Q=T.status)==null?void 0:Q.charAt(0).toUpperCase())+((ie=T.status)==null?void 0:ie.slice(1))})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ae(T)})]},T.id)})})]})})})})]}),s.jsx(fn,{open:x,onOpenChange:w,children:s.jsxs(hn,{className:"sm:max-w-lg",children:[s.jsx(mn,{children:s.jsx(pn,{children:"Comp-off Request Details"})}),v&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(tt,{className:"text-sm font-medium text-gray-500",children:"Type"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:v.type})]}),s.jsxs("div",{children:[s.jsx(tt,{className:"text-sm font-medium text-gray-500",children:"Status"}),s.jsx("p",{className:"mt-1",children:s.jsx(Lt,{className:v.status==="approved"?"bg-green-100 text-green-800":v.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:((J=v.status)==null?void 0:J.charAt(0).toUpperCase())+((ne=v.status)==null?void 0:ne.slice(1))})})]}),s.jsxs("div",{children:[s.jsx(tt,{className:"text-sm font-medium text-gray-500",children:"Worked Date"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(v.workedDate).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx(tt,{className:"text-sm font-medium text-gray-500",children:"Day Type"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:v.dayType==="full"?"Full Day":v.dayType==="half"?"Half Day":v.dayType==="quarter"?"Quarter Day":v.dayType})]})]}),s.jsxs("div",{children:[s.jsx(tt,{className:"text-sm font-medium text-gray-500",children:"Reason"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:v.reason})]}),v.type==="transfer"&&v.transferAmount&&s.jsxs("div",{children:[s.jsx(tt,{className:"text-sm font-medium text-gray-500",children:"Transfer Amount"}),s.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[v.transferAmount," days"]})]}),v.type==="en-cash"&&v.enCashAmount&&s.jsxs("div",{children:[s.jsx(tt,{className:"text-sm font-medium text-gray-500",children:"En-cash Amount"}),s.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[v.enCashAmount," days"]})]}),v.compensateWith&&s.jsxs("div",{children:[s.jsx(tt,{className:"text-sm font-medium text-gray-500",children:"Compensate Date"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(v.compensateWith).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx(tt,{className:"text-sm font-medium text-gray-500",children:"Applied At"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(v.appliedAt).toLocaleString()})]}),v.rejectionReason&&s.jsxs("div",{children:[s.jsx(tt,{className:"text-sm font-medium text-red-500",children:"Rejection Reason"}),s.jsx("p",{className:"mt-1 text-sm text-red-700",children:v.rejectionReason})]}),v.notes&&s.jsxs("div",{children:[s.jsx(tt,{className:"text-sm font-medium text-gray-500",children:"Notes"}),s.jsx("p",{className:"mt-1 text-sm text-gray-900",children:v.notes})]})]}),s.jsx("div",{className:"flex justify-end space-x-2 mt-6",children:s.jsx(se,{variant:"outline",onClick:()=>w(!1),children:"Close"})})]})})]})}const zIe=(e,t)=>{const r=dt(e,"yyyy-MM-dd");return t.some(n=>{const a=new Date(n.selectedDate||n.date);return dt(a,"yyyy-MM-dd")===r})},qIe=(e,t,r)=>{let n=0;const a=new Date(e);for(;a<=t;){const i=a.getDay(),o=i===0||i===6,l=zIe(a,r);!o&&!l&&n++,a.setDate(a.getDate()+1)}return n},GIe=Zn({btoVariantId:er().min(1,"Please select a BTO variant"),requestDate:ql({required_error:"Request date is required"}),timeType:rr().min(1,"Please select time type"),startTime:rr().optional(),endTime:rr().optional(),totalHours:er().optional(),reason:rr().min(1,"Reason is required"),documentUrl:rr().optional()});function KIe({open:e,onOpenChange:t,onSuccess:r,employees:n=[],permissions:a}){var Y,W;const{toast:i}=Vr(),o=tc(),[l,c]=N.useState(null),[u,d]=N.useState([]),[f,h]=N.useState(!1),[m,g]=N.useState("");N.useEffect(()=>{e||(h(!1),g(""))},[e]);const p=f&&m?m:localStorage.getItem("user_id")||"225",{workPattern:y}=oh(),{data:b=[]}=Fe({queryKey:["/api/holidays"],queryFn:async()=>{const P=await fetch("/api/holidays",{credentials:"include",headers:{"X-Org-Id":localStorage.getItem("org_id")||"13"}});return P.ok?P.json():[]},enabled:e}),x=y&&y.selectedHolidays?b.filter(P=>y.selectedHolidays.includes(P.id)):b;console.log("🎯 BTO Form Holiday Filtering:",{workPattern:y==null?void 0:y.patternName,selectedHolidayIds:y==null?void 0:y.selectedHolidays,allHolidays:b.length,filteredHolidays:x.length});const{data:w=[],isLoading:v}=Fe({queryKey:["/api/pto-variants/user",p],queryFn:async()=>{console.log("BTO Form - Fetching variants for user:",p);const P=localStorage.getItem("org_id")||"13";console.log("BTO Form - Using org_id:",P);const E=await fetch("/api/pto-variants",{credentials:"include",headers:{"X-Org-Id":P}}).then(ee=>ee.json());console.log("BTO Form - All variants:",E);const R=[];let I=!1;for(const ee of E)try{const L=await fetch(`/api/employee-assignments/pto/${ee.id}`,{credentials:"include",headers:{"X-Org-Id":P}});if(L.ok){const q=await L.json();if(console.log(`BTO Form - Assignments for variant ${ee.id}:`,q),q.length>0){I=!0;const H=q.some(B=>B.userId===p||B.userId===p.toString());console.log(`BTO Form - User ${p} assigned to variant ${ee.id}:`,H),H&&R.push(ee)}}}catch(L){console.error(`Error checking assignments for variant ${ee.id}:`,L)}return!I&&E.length>0?(console.log("BTO Form - No assignments found for any variant, showing all variants for testing"),E):(console.log("BTO Form - Final user variants:",R),R)},enabled:e}),{data:j=[]}=Fe({queryKey:["/api/pto-requests",p],queryFn:async()=>{const P=await fetch(`/api/pto-requests?userId=${p}`,{credentials:"include",headers:{"X-Org-Id":localStorage.getItem("org_id")||"13"}});return P.ok?P.json():[]},enabled:e}),S=os({resolver:Cs(GIe),defaultValues:{reason:"",timeType:""}}),_=S.watch("btoVariantId"),A=S.watch("timeType"),C=S.watch("requestDate");N.useEffect(()=>{if(_){const P=w.find(E=>E.id===_);console.log("BTO Form - Selected variant:",P),c(P),S.setValue("timeType",""),S.setValue("startTime",""),S.setValue("endTime",""),S.setValue("totalHours",void 0)}else c(null)},[_,w]),N.useEffect(()=>{var L;if(!l||!C){d([]);return}const P=[],E=new Date(C),R=new Date;R.setHours(0,0,0,0);const I=dt(E,"yyyy-MM-dd");if(x.some(q=>{const H=new Date(q.selectedDate||q.date);return dt(H,"yyyy-MM-dd")===I})){const q=((L=x.find(H=>{const B=new Date(H.selectedDate||H.date);return dt(B,"yyyy-MM-dd")===I}))==null?void 0:L.holidayName)||"holiday";P.push(`Cannot apply for BTO on ${q}. Please select a different date.`)}if(l.approvalDays>0){const q=ia(R,l.approvalDays);$x(E,q)&&P.push(`Request must be made at least ${l.approvalDays} days in advance`)}if(l.maxInstances>0&&j.length>0){const q=E.getMonth(),H=E.getFullYear(),B=Math.floor(q/3);j.filter(ce=>{const ge=new Date(ce.requestDate);return l.maxInstancesPeriod==="Month"?ge.getMonth()===q&&ge.getFullYear()===H:l.maxInstancesPeriod==="Quarter"?Math.floor(ge.getMonth()/3)===B&&ge.getFullYear()===H:ge.getFullYear()===H}).length>=l.maxInstances&&P.push(`Maximum ${l.maxInstances} instances per ${l.maxInstancesPeriod.toLowerCase()} exceeded`)}d(P)},[l,C,j,x]);const D=(P,E)=>{if(!P||!E)return 0;const R=new Date(`2000-01-01T${P}`),I=new Date(`2000-01-01T${E}`);if(I<=R)return 0;const ee=I.getTime()-R.getTime();return Math.round(ee/(1e3*60*60)*100)/100};N.useEffect(()=>{if(A==="hours"){const P=S.watch("startTime"),E=S.watch("endTime");if(P&&E){const R=D(P,E);S.setValue("totalHours",R)}}},[S.watch("startTime"),S.watch("endTime"),A]);const k=Ut({mutationFn:async P=>await Ct("POST","/api/pto-requests",P),onSuccess:P=>{o.invalidateQueries({queryKey:["/api/pto-requests"]});const E=P.workflowId?"BTO request submitted and sent for approval":"BTO request submitted and approved automatically";i({title:"Success",description:E}),S.reset(),t(!1),r==null||r()},onError:P=>{i({title:"Error",description:P.message||"Failed to submit BTO request",variant:"destructive"})}}),O=P=>{if(f&&!m){i({title:"Validation Error",description:"Please select an employee to apply on behalf of",variant:"destructive"});return}if(u.length>0){i({title:"Validation Error",description:"Please fix the validation errors before submitting",variant:"destructive"});return}let E=1;if(P.requestDate){E=qIe(P.requestDate,P.requestDate,x);const I=dt(P.requestDate,"yyyy-MM-dd");console.log("✅ Using dynamic working days calculation for BTO:",E),console.log("BTO Working Days Calculation:",{requestDate:I,calculatedWorkingDays:E})}if(P.timeType==="hours"){if(!P.startTime||!P.endTime||!P.totalHours){i({title:"Validation Error",description:"Start time, end time, and total hours are required for hour-based BTO",variant:"destructive"});return}if(l!=null&&l.minimumHours&&P.totalHours<l.minimumHours){i({title:"Validation Error",description:`Minimum ${l.minimumHours} hours required`,variant:"destructive"});return}if(l!=null&&l.maxHours&&P.totalHours>l.maxHours){i({title:"Validation Error",description:`Maximum ${l.maxHours} hours allowed`,variant:"destructive"});return}}const R={...P,userId:p,ptoVariantId:parseInt(P.btoVariantId.toString()),workingDays:E};console.log("BTO Form - Submitting request:",R),k.mutate(R)},V=()=>{if(!l)return[];console.log("BTO Form - Selected variant time options:",{halfDay:l.halfDay,quarterDay:l.quarterDay,hours:l.hours});const P=[];return l.halfDay&&P.push({value:"half_day",label:"Half Day"}),l.quarterDay&&P.push({value:"quarter_day",label:"Quarter Day"}),l.hours&&P.push({value:"hours",label:"Hours"}),console.log("BTO Form - Available BTO time types:",P),P},G=()=>{const P=[];for(let E=0;E<24;E++)for(let R=0;R<60;R+=30){const I=`${E.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}`,ee=new Date(`2000-01-01T${I}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});P.push({value:I,label:ee})}return P};return s.jsx(fn,{open:e,onOpenChange:t,children:s.jsxs(hn,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(mn,{children:s.jsxs(pn,{className:"flex items-center gap-2",children:[s.jsx(An,{className:"w-5 h-5 text-teal-600"}),"Apply for BTO"]})}),s.jsx(ai,{...S,children:s.jsxs("form",{onSubmit:S.handleSubmit(O),className:"space-y-6",children:[u.length>0&&s.jsx(Ce,{className:"border-red-200 bg-red-50",children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx($F,{className:"w-5 h-5 text-red-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-red-800",children:"Validation Errors"}),s.jsx("ul",{className:"mt-1 text-sm text-red-700 list-disc list-inside",children:u.map((P,E)=>s.jsx("li",{children:P},E))})]})]})})}),((W=(Y=a==null?void 0:a.permissions)==null?void 0:Y.allowOnBehalf)==null?void 0:W.bto)&&s.jsxs("div",{className:"space-y-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"bto-apply-on-behalf",checked:f,onCheckedChange:P=>{h(!!P),P||g("")}}),s.jsx("label",{htmlFor:"bto-apply-on-behalf",className:"text-sm font-medium leading-none cursor-pointer",children:"Apply on behalf of someone else"})]}),f&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Select Employee"}),s.jsxs(yt,{value:m,onValueChange:g,children:[s.jsx(gt,{className:"w-full",children:s.jsx(vt,{placeholder:"Choose an employee..."})}),s.jsx(xt,{children:n&&n.length>0?n.filter(P=>P==null?void 0:P.user_id).map(P=>s.jsx(je,{value:P.user_id.toString(),children:P.user_name||`Employee ${P.user_id}`},P.user_id)):s.jsx(je,{value:"no-employees",disabled:!0,children:"No employees available"})})]}),f&&!m&&s.jsx("p",{className:"text-sm text-red-600",children:"Please select an employee to apply on behalf of"})]})]}),s.jsx(et,{control:S.control,name:"btoVariantId",render:({field:P})=>{var E;return s.jsxs(Qe,{children:[s.jsx(ft,{children:"BTO Type"}),s.jsxs(yt,{onValueChange:R=>P.onChange(parseInt(R)),value:(E=P.value)==null?void 0:E.toString(),children:[s.jsx(lt,{children:s.jsx(gt,{children:s.jsx(vt,{placeholder:"Select BTO type"})})}),s.jsx(xt,{children:v?s.jsx(je,{value:"loading",disabled:!0,children:"Loading BTO types..."}):w.length===0?s.jsx(je,{value:"none",disabled:!0,children:"No BTO types available"}):w.map(R=>s.jsx(je,{value:R.id.toString(),children:R.name},R.id))})]}),s.jsx(wt,{}),l&&s.jsx("p",{className:"text-sm text-gray-600",children:l.description})]})}}),s.jsx(et,{control:S.control,name:"requestDate",render:({field:P})=>s.jsxs(Qe,{className:"flex flex-col",children:[s.jsx(ft,{children:"Date"}),s.jsxs(wl,{children:[s.jsx(bl,{asChild:!0,children:s.jsx(lt,{children:s.jsxs(se,{variant:"outline",className:Ge("w-full pl-3 text-left font-normal",!P.value&&"text-muted-foreground"),children:[P.value?dt(P.value,"PPP"):s.jsx("span",{children:"Pick a date"}),s.jsx(br,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(yo,{className:"w-auto p-0",align:"start",children:s.jsx(xo,{mode:"single",selected:P.value,onSelect:P.onChange,disabled:E=>{const R=new Date;return R.setHours(0,0,0,0),$x(E,R)},initialFocus:!0})})]}),s.jsx(wt,{})]})}),l&&s.jsx(et,{control:S.control,name:"timeType",render:({field:P})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Time Unit"}),s.jsxs(yt,{onValueChange:P.onChange,value:P.value,children:[s.jsx(lt,{children:s.jsx(gt,{children:s.jsx(vt,{placeholder:"Select time unit"})})}),s.jsx(xt,{children:V().length===0?s.jsx(je,{value:"none",disabled:!0,children:"No time units available for this BTO type"}):V().map(E=>s.jsx(je,{value:E.value,children:E.label},E.value))})]}),s.jsx(wt,{})]})}),A==="hours"&&s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsx(et,{control:S.control,name:"startTime",render:({field:P})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Start Time"}),s.jsxs(yt,{onValueChange:P.onChange,value:P.value,children:[s.jsx(lt,{children:s.jsx(gt,{children:s.jsx(vt,{placeholder:"Start"})})}),s.jsx(xt,{className:"max-h-48",children:G().map(E=>s.jsx(je,{value:E.value,children:E.label},`start-${E.value}`))})]}),s.jsx(wt,{})]})}),s.jsx(et,{control:S.control,name:"endTime",render:({field:P})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"End Time"}),s.jsxs(yt,{onValueChange:P.onChange,value:P.value,children:[s.jsx(lt,{children:s.jsx(gt,{children:s.jsx(vt,{placeholder:"End"})})}),s.jsx(xt,{className:"max-h-48",children:G().map(E=>s.jsx(je,{value:E.value,children:E.label},`end-${E.value}`))})]}),s.jsx(wt,{})]})}),s.jsx(et,{control:S.control,name:"totalHours",render:({field:P})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Total Hours"}),s.jsx(lt,{children:s.jsx(ht,{type:"number",step:"0.5",min:"0",max:(l==null?void 0:l.maxHours)||24,value:P.value||"",onChange:E=>P.onChange(parseFloat(E.target.value)),placeholder:"0.0",readOnly:!0,className:"bg-gray-50"})}),s.jsx(wt,{})]})})]}),A==="hours"&&l&&s.jsx(Ce,{className:"bg-blue-50 border-blue-200",children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Hours Requirements:"}),l.minimumHours>0&&s.jsxs("span",{className:"block",children:["• Minimum: ",l.minimumHours," hours"]}),l.maxHours>0&&s.jsxs("span",{className:"block",children:["• Maximum: ",l.maxHours," hours"]})]})})}),s.jsx(et,{control:S.control,name:"reason",render:({field:P})=>s.jsxs(Qe,{children:[s.jsx(ft,{children:"Reason"}),s.jsx(lt,{children:s.jsx(Cn,{placeholder:"Please provide a reason for your BTO request...",className:"min-h-[80px]",...P})}),s.jsx(wt,{})]})}),(l==null?void 0:l.documentsRequired)&&s.jsx(et,{control:S.control,name:"documentUrl",render:({field:P})=>s.jsxs(Qe,{children:[s.jsxs(ft,{className:"flex items-center gap-2",children:[s.jsx(aa,{className:"w-4 h-4"}),"Supporting Document (Required)"]}),s.jsx(lt,{children:s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-md p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(l_,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Upload a supporting document"}),s.jsx("p",{className:"text-xs text-gray-500",children:"PDF, JPG, PNG up to 10MB"})]}),s.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",className:"mt-2",onChange:E=>{var R;(R=E.target.files)!=null&&R[0]&&P.onChange(`/uploads/${E.target.files[0].name}`)}})]})})}),s.jsx(wt,{})]})}),s.jsxs(Vx,{children:[s.jsx(se,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:k.isPending,children:"Cancel"}),s.jsx(se,{type:"submit",disabled:k.isPending||u.length>0,className:"bg-teal-600 hover:bg-teal-700",children:k.isPending?"Submitting...":"Submit Request"})]})]})})]})})}function YIe(){const[e,t]=N.useState("All"),[r,n]=N.useState("01 Jun 2024 - 31st Dec 2024"),[a,i]=N.useState(!1),o=n0(),{employees:l}=Ru(),c=localStorage.getItem("user_id")||"225",{data:u=[],isLoading:d,refetch:f}=Fe({queryKey:["/api/pto-requests",c],queryFn:async()=>{const x=await fetch(`/api/pto-requests?userId=${c}`,{credentials:"include",headers:{"X-Org-Id":localStorage.getItem("org_id")||"60"}});return x.ok?x.json():[]}}),h=u.filter(x=>e==="All"?!0:x.status.toLowerCase()===e.toLowerCase()),m={totalGranted:u.filter(x=>x.status==="approved").length,pendingApprovals:u.filter(x=>x.status==="pending").length,totalAvailed:u.filter(x=>x.status==="approved").reduce((x,w)=>w.timeType==="hours"?x+(parseFloat(w.totalHours)||0):w.timeType==="half_day"?x+4:w.timeType==="quarter_day"?x+2:x+8,0),rejected:u.filter(x=>x.status==="rejected").length,cancelled:u.filter(x=>x.status==="cancelled").length},g=[{id:"All",label:"All"},{id:"Pending",label:"Pending",count:m.pendingApprovals},{id:"Approved",label:"Approved"},{id:"Rejected",label:"Rejected"}],p=x=>{switch(x){case"approved":return s.jsx(qn,{className:"w-4 h-4 text-green-600"});case"rejected":return s.jsx(ho,{className:"w-4 h-4 text-red-600"});case"pending":return s.jsx(An,{className:"w-4 h-4 text-yellow-600"});default:return s.jsx(cf,{className:"w-4 h-4 text-gray-600"})}},y=x=>{const w="inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium";switch(x){case"approved":return`${w} bg-green-100 text-green-800`;case"rejected":return`${w} bg-red-100 text-red-800`;case"pending":return`${w} bg-yellow-100 text-yellow-800`;case"cancelled":return`${w} bg-gray-100 text-gray-800`;default:return`${w} bg-gray-100 text-gray-800`}},b=x=>{if(x.timeType==="hours"){const w=new Date(`2000-01-01T${x.startTime}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),v=new Date(`2000-01-01T${x.endTime}`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});return`${w} - ${v} (${x.totalHours}h)`}else return{full_day:"Full Day",half_day:"Half Day",quarter_day:"Quarter Day"}[x.timeType]||x.timeType};return s.jsxs(Sr,{children:[s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Break Time Off (BTO)"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(yt,{value:r,onValueChange:n,children:[s.jsx(gt,{className:"w-48",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"01 Jun 2024 - 31st Dec 2024",children:"01 Jun 2024 - 31st Dec 2024"}),s.jsx(je,{value:"01 Jan 2024 - 31st May 2024",children:"01 Jan 2024 - 31st May 2024"}),s.jsx(je,{value:"01 Jan 2024 - 31st Dec 2024",children:"01 Jan 2024 - 31st Dec 2024"})]})]}),s.jsxs(se,{className:"bg-teal-600 hover:bg-teal-700 text-white",onClick:()=>i(!0),children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Apply for BTO"]})]})]}),s.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:m.totalGranted}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Approved"})]})}),s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:m.pendingApprovals}),s.jsx("div",{className:"text-sm text-gray-600",children:"Pending Approvals"})]})}),s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[m.totalAvailed.toFixed(1),"h"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Hours"})]})}),s.jsx(Ce,{className:"bg-red-50 border-red-200",children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:m.rejected}),s.jsx("div",{className:"text-sm text-red-700",children:"Rejected"})]})}),s.jsx(Ce,{className:"bg-gray-50 border-gray-200",children:s.jsxs(Ie,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-600",children:m.cancelled}),s.jsx("div",{className:"text-sm text-gray-700",children:"Cancelled"})]})})]}),s.jsx("div",{className:"flex items-center space-x-6 border-b border-gray-200",children:g.map(x=>s.jsxs("button",{onClick:()=>t(x.id),className:`flex items-center space-x-2 px-1 py-3 text-sm font-medium border-b-2 transition-colors ${e===x.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[s.jsx("span",{children:x.label}),x.count!==void 0&&x.count>0&&s.jsx(Lt,{variant:"secondary",className:"bg-gray-100 text-gray-600 text-xs",children:x.count})]},x.id))}),s.jsx(Ce,{children:s.jsx(Ie,{className:"p-0",children:d?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(An,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"Loading BTO requests..."})]})}):h.length===0?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(An,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:e==="All"?"No BTO requests found":`No ${e.toLowerCase()} requests found`}),s.jsxs(se,{className:"mt-4 bg-teal-600 hover:bg-teal-700",onClick:()=>i(!0),children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Apply for BTO"]})]})}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time / Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Applied On"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(x=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:dt(new Date(x.requestDate),"dd MMM yyyy")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b(x)}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:x.reason}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:y(x.status),children:[p(x.status),x.status.charAt(0).toUpperCase()+x.status.slice(1)]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:dt(new Date(x.createdAt),"dd MMM yyyy")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs(se,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:[s.jsx(jx,{className:"w-4 h-4 mr-1"}),"View"]})})]},x.id))})]})})})})]}),s.jsx(KIe,{open:a,onOpenChange:i,onSuccess:()=>{f()},employees:l,permissions:o})]})}function XIe(){const[e,t]=N.useState(""),[r,n]=N.useState(""),[a,i]=N.useState(null),[o,l]=N.useState(""),[c,u]=N.useState(""),[d,f]=N.useState(!1),[h,m]=N.useState({search:"",status:"all",dateFrom:"",dateTo:""}),[g,p]=N.useState({search:"",status:"all",dateFrom:"",dateTo:""});rF();const y=tc();N.useEffect(()=>{const O=localStorage.getItem("user_id")||"";t(O)},[]),console.log("TaskManager - Current user ID from localStorage:",e);const{data:b=[]}=Fe({queryKey:[`/api/tasks/assigned-to-me/${e}`],enabled:!!e}),{data:x=[]}=Fe({queryKey:[`/api/tasks/assigned-by-me/${e}`],enabled:!!e});console.log("TaskManager - Tasks assigned to me:",b),console.log("TaskManager - Tasks assigned by me:",x);const w=(O,V)=>O.filter(G=>{if(V.search){const Y=V.search.toLowerCase();if(!(G.taskDescription.toLowerCase().includes(Y)||G.assigneeName.toLowerCase().includes(Y)||G.assigneeEmail.toLowerCase().includes(Y)))return!1}if(V.status!=="all"&&G.status!==V.status)return!1;if(V.dateFrom){const Y=new Date(G.createdAt),W=new Date(V.dateFrom);if(Y<W)return!1}if(V.dateTo){const Y=new Date(G.createdAt),W=new Date(V.dateTo);if(W.setHours(23,59,59,999),Y>W)return!1}return!0}),v=N.useMemo(()=>w(b,h),[b,h]),j=N.useMemo(()=>w(x,g),[x,g]),S=Ut({mutationFn:async({taskId:O,comment:V})=>await Ct("PATCH",`/api/tasks/${O}/accept`,{acceptanceResponse:V||"Task accepted"}),onSuccess:()=>{y.invalidateQueries({queryKey:[`/api/tasks/assigned-to-me/${e}`]}),y.invalidateQueries({queryKey:[`/api/tasks/assigned-by-me/${e}`]}),Ks({title:"Task Accepted",description:"You have successfully accepted this task."}),i(null)},onError:()=>{Ks({title:"Error",description:"Failed to accept task. Please try again.",variant:"destructive"})}}),_=Ut({mutationFn:async({taskId:O,comment:V})=>await Ct("PATCH",`/api/tasks/${O}/reject`,{statusComments:V}),onSuccess:()=>{y.invalidateQueries({queryKey:[`/api/tasks/assigned-to-me/${e}`]}),y.invalidateQueries({queryKey:[`/api/tasks/assigned-by-me/${e}`]}),Ks({title:"Task Rejected",description:"You have rejected this task with your feedback."}),i(null),n("")},onError:()=>{Ks({title:"Error",description:"Failed to reject task. Please try again.",variant:"destructive"})}}),A=Ut({mutationFn:async({taskId:O,status:V,comment:G})=>await Ct("PATCH",`/api/tasks/${O}/complete`,{status:V==="complete"?"done":"not_done",statusComments:G}),onSuccess:()=>{y.invalidateQueries({queryKey:[`/api/tasks/assigned-to-me/${e}`]}),y.invalidateQueries({queryKey:[`/api/tasks/assigned-by-me/${e}`]}),Ks({title:"Task Updated",description:"You have updated the task status with your feedback."}),f(!1),i(null),l(""),u("")},onError:()=>{Ks({title:"Error",description:"Failed to update task status. Please try again.",variant:"destructive"})}}),C=O=>{switch(O){case"accepted":return s.jsxs(Lt,{className:"bg-green-100 text-green-800",children:[s.jsx(qn,{className:"w-3 h-3 mr-1"}),"Accepted"]});case"rejected":return s.jsxs(Lt,{className:"bg-red-100 text-red-800",children:[s.jsx(ho,{className:"w-3 h-3 mr-1"}),"Rejected"]});case"done":return s.jsxs(Lt,{className:"bg-blue-100 text-blue-800",children:[s.jsx(qn,{className:"w-3 h-3 mr-1"}),"Complete"]});case"not_done":return s.jsxs(Lt,{className:"bg-orange-100 text-orange-800",children:[s.jsx(ho,{className:"w-3 h-3 mr-1"}),"Incomplete"]});default:return s.jsxs(Lt,{className:"bg-yellow-100 text-yellow-800",children:[s.jsx(An,{className:"w-3 h-3 mr-1"}),"Pending"]})}},D=({filters:O,onFiltersChange:V,title:G})=>s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700 p-4 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:s.jsx(Tv,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Filter Tasks"}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Refine your search"})]})]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>V({search:"",status:"all",dateFrom:"",dateTo:""}),className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx(ho,{className:"w-3 h-3 mr-1"}),"Clear"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(tt,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Search"}),s.jsxs("div",{className:"relative",children:[s.jsx(Xf,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(ht,{placeholder:"Search tasks, names, emails...",value:O.search,onChange:Y=>V({...O,search:Y.target.value}),className:"pl-10 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(tt,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),s.jsxs(yt,{value:O.status,onValueChange:Y=>V({...O,status:Y}),children:[s.jsx(gt,{className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600",children:s.jsx(vt,{placeholder:"All statuses"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"all",children:"All Statuses"}),s.jsx(je,{value:"pending",children:"🟡 Pending"}),s.jsx(je,{value:"accepted",children:"🟢 Accepted"}),s.jsx(je,{value:"done",children:"✅ Complete"}),s.jsx(je,{value:"not_done",children:"🔴 Incomplete"}),s.jsx(je,{value:"rejected",children:"❌ Rejected"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(tt,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"From Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(br,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(ht,{type:"date",value:O.dateFrom,onChange:Y=>V({...O,dateFrom:Y.target.value}),className:"pl-10 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(tt,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"To Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(br,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s.jsx(ht,{type:"date",value:O.dateTo,onChange:Y=>V({...O,dateTo:Y.target.value}),className:"pl-10 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),k=({task:O,showActions:V=!1})=>s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600 mb-3",children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center text-white font-medium text-sm",children:O.assigneeName.split(" ").map(G=>G[0]).join("").slice(0,2)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium text-base text-gray-900 dark:text-gray-100 mb-1",children:O.assigneeName}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 text-xs text-gray-600 dark:text-gray-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(FF,{className:"w-3 h-3 text-blue-500"}),O.assigneeEmail]}),O.assigneePhone&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Mq,{className:"w-3 h-3 text-green-500"}),O.assigneePhone]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[C(O.status),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-md",children:["#",O.id]})]})]}),s.jsx("div",{className:"mb-3",children:s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-md p-3 border-l-3 border-blue-500",children:[s.jsxs("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-1 flex items-center gap-1 text-sm",children:[s.jsx(Mw,{className:"w-3 h-3 text-blue-500"}),"Task Description"]}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:O.taskDescription})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3",children:[s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-950 dark:to-amber-950 rounded-md p-3 border border-orange-200 dark:border-orange-800",children:[s.jsxs("h4",{className:"font-medium text-orange-900 dark:text-orange-100 mb-1 flex items-center gap-1 text-sm",children:[s.jsx(br,{className:"w-3 h-3 text-orange-600"}),"Support Date"]}),s.jsx("p",{className:"text-orange-800 dark:text-orange-200 font-medium text-sm",children:O.expectedSupportDateFrom&&O.expectedSupportDateTo?`${dt(new Date(O.expectedSupportDateFrom),"MMM dd, yyyy")} - ${dt(new Date(O.expectedSupportDateTo),"MMM dd, yyyy")}`:dt(new Date(O.expectedSupportDate),"MMM dd, yyyy")})]}),O.additionalNotes&&s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950 rounded-md p-3 border border-purple-200 dark:border-purple-800",children:[s.jsxs("h4",{className:"font-medium text-purple-900 dark:text-purple-100 mb-1 flex items-center gap-1 text-sm",children:[s.jsx(Mw,{className:"w-3 h-3 text-purple-600"}),"Additional Notes"]}),s.jsx("p",{className:"text-purple-800 dark:text-purple-200 text-sm",children:O.additionalNotes})]})]}),O.acceptanceResponse&&s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 border border-green-200 dark:border-green-800 rounded-md p-3 mb-3",children:[s.jsxs("h4",{className:"font-medium text-green-900 dark:text-green-100 mb-1 flex items-center gap-1 text-sm",children:[s.jsx(qn,{className:"w-3 h-3 text-green-600"}),"Acceptance Response"]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-md p-2 border border-green-200 dark:border-green-700",children:[s.jsxs("p",{className:"text-green-800 dark:text-green-200 font-medium italic text-sm",children:['"',O.acceptanceResponse,'"']}),O.acceptedAt&&s.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1 flex items-center gap-1",children:[s.jsx(An,{className:"w-3 h-3"}),"Accepted: ",dt(new Date(O.acceptedAt),"MMM dd, yyyy 'at' h:mm a")]})]})]}),(O.status==="done"||O.status==="not_done"||O.status==="accepted")&&O.statusComments&&s.jsxs("div",{className:`rounded-md p-3 mb-3 border ${O.status==="done"?"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 border-green-300 dark:border-green-700":O.status==="not_done"?"bg-gradient-to-r from-red-50 to-rose-50 dark:from-red-950 dark:to-rose-950 border-red-300 dark:border-red-700":"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border-blue-300 dark:border-blue-700"}`,children:[s.jsxs("h4",{className:`font-medium mb-2 flex items-center gap-1 text-sm ${O.status==="done"?"text-green-900 dark:text-green-100":O.status==="not_done"?"text-red-900 dark:text-red-100":"text-blue-900 dark:text-blue-100"}`,children:[O.status==="done"&&s.jsx(qn,{className:"w-3 h-3 text-green-600"}),O.status==="not_done"&&s.jsx(ho,{className:"w-3 h-3 text-red-600"}),O.status==="accepted"&&s.jsx(Mw,{className:"w-3 h-3 text-blue-600"}),"Task Completion Feedback"]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-md p-2 border",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Status:"}),s.jsx("span",{className:`font-medium text-xs ${O.status==="done"?"text-green-600 dark:text-green-400":O.status==="not_done"?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:O.status==="done"?"✅ Completed Successfully":O.status==="not_done"?"❌ Incomplete":"🔄 In Progress"})]}),s.jsxs("p",{className:"text-gray-700 dark:text-gray-300 italic font-medium text-sm",children:['"',O.statusComments,'"']}),O.lastStatusUpdate&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center gap-1",children:[s.jsx(An,{className:"w-3 h-3"}),"Last updated: ",dt(new Date(O.lastStatusUpdate),"MMM dd, yyyy 'at' h:mm a")]})]})]}),V&&O.status==="pending"&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-3 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs(se,{onClick:()=>S.mutate({taskId:O.id}),disabled:S.isPending,size:"sm",className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white",children:[s.jsx(qn,{className:"w-3 h-3 mr-1"}),"Accept Task"]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>i(O),disabled:_.isPending,className:"flex-1 border-red-300 text-red-600 hover:bg-red-50 dark:hover:bg-red-950 hover:border-red-400",children:[s.jsx(ho,{className:"w-3 h-3 mr-1"}),"Reject Task"]})]}),V&&O.status==="accepted"&&s.jsx("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700",children:s.jsxs(se,{onClick:()=>{i(O),f(!0)},disabled:A.isPending,size:"sm",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[s.jsx(qn,{className:"w-3 h-3 mr-1"}),"Update Task Status"]})})]})});return s.jsx(Sr,{children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:s.jsx(Rw,{className:"w-6 h-6 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Task Manager"}),s.jsx("p",{className:"text-gray-600",children:"Manage collaborative leave tasks with ease"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:s.jsx(An,{className:"w-5 h-5 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:b.filter(O=>O.status==="pending").length}),s.jsx("div",{className:"text-gray-600 text-sm",children:"Pending Tasks"})]})]})}),s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(qn,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:b.filter(O=>O.status==="accepted").length}),s.jsx("div",{className:"text-gray-600 text-sm",children:"Accepted"})]})]})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(Rw,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:b.filter(O=>O.status==="done").length}),s.jsx("div",{className:"text-gray-600 text-sm",children:"Completed"})]})]})}),s.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx(Bn,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.length}),s.jsx("div",{className:"text-gray-600 text-sm",children:"Tasks Assigned"})]})]})})]})]}),s.jsxs(tT,{defaultValue:"assigned-to-me",className:"w-full",children:[s.jsxs(r1,{className:"grid w-full grid-cols-2 h-14 bg-gray-100 dark:bg-gray-800 rounded-xl p-1",children:[s.jsx(Rl,{value:"assigned-to-me",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700 data-[state=active]:shadow-sm rounded-lg font-medium h-full",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rw,{className:"w-4 h-4"}),s.jsx("span",{children:"Tasks Assigned to Me"}),s.jsxs(Lt,{variant:"secondary",className:"ml-2",children:[v.length,"/",b.length]})]})}),s.jsx(Rl,{value:"assigned-by-me",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700 data-[state=active]:shadow-sm rounded-lg font-medium h-full",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Bn,{className:"w-4 h-4"}),s.jsx("span",{children:"Tasks I Assigned"}),s.jsxs(Lt,{variant:"secondary",className:"ml-2",children:[j.length,"/",x.length]})]})})]}),s.jsxs(Fl,{value:"assigned-to-me",className:"mt-6",children:[s.jsx(D,{filters:h,onFiltersChange:m,title:"Tasks Assigned to Me"}),s.jsx("div",{className:"space-y-4",children:b.length===0?s.jsx(Ce,{children:s.jsx(Ie,{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No tasks have been assigned to you yet."})})}):v.length===0?s.jsx(Ce,{children:s.jsxs(Ie,{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"No tasks match your current filters."}),s.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Showing 0 of ",b.length," total tasks"]})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",v.length," of ",b.length," tasks"]})}),v.map(O=>s.jsx(k,{task:O,showActions:!0},O.id))]})})]}),s.jsxs(Fl,{value:"assigned-by-me",className:"mt-6",children:[s.jsx(D,{filters:g,onFiltersChange:p,title:"Tasks I Assigned"}),s.jsx("div",{className:"space-y-4",children:x.length===0?s.jsx(Ce,{children:s.jsx(Ie,{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"You haven't assigned any tasks yet."})})}):j.length===0?s.jsx(Ce,{children:s.jsxs(Ie,{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"No tasks match your current filters."}),s.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Showing 0 of ",x.length," total tasks"]})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",j.length," of ",x.length," tasks"]})}),j.map(O=>s.jsx(k,{task:O,showActions:!1},O.id))]})})]})]}),d&&a&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs(Ce,{className:"w-full max-w-md",children:[s.jsxs(Tt,{children:[s.jsx(Et,{children:"Update Task Status"}),s.jsx(hf,{children:"Please provide your feedback on task completion"})]}),s.jsxs(Ie,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"completion-status",children:"Task Status *"}),s.jsxs("select",{id:"completion-status",value:c,onChange:O=>u(O.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select status..."}),s.jsx("option",{value:"complete",children:"Complete - Task finished successfully"}),s.jsx("option",{value:"incomplete",children:"Incomplete - Task not finished or had issues"})]})]}),s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"completion-comment",children:"Closing Remarks *"}),s.jsx(Cn,{id:"completion-comment",value:o,onChange:O=>l(O.target.value),placeholder:"Please provide details about how the task went, any issues encountered, or additional notes...",rows:4})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{onClick:()=>{o.trim()&&c?A.mutate({taskId:a.id,status:c,comment:o.trim()}):Ks({title:"Required Fields",description:"Please select a status and provide closing remarks.",variant:"destructive"})},disabled:A.isPending||!o.trim()||!c,className:"flex-1",children:A.isPending?"Updating...":"Update Task"}),s.jsx(se,{variant:"outline",onClick:()=>{f(!1),i(null),l(""),u("")},className:"flex-1",children:"Cancel"})]})]})]})}),a&&!d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs(Ce,{className:"w-full max-w-md",children:[s.jsxs(Tt,{children:[s.jsx(Et,{children:"Reject Task"}),s.jsx(hf,{children:"Please provide a reason for rejecting this task"})]}),s.jsxs(Ie,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"rejection-comment",children:"Rejection Reason *"}),s.jsx(Cn,{id:"rejection-comment",value:r,onChange:O=>n(O.target.value),placeholder:"Please explain why you cannot accept this task...",rows:3})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{onClick:()=>{r.trim()?_.mutate({taskId:a.id,comment:r.trim()}):Ks({title:"Comment Required",description:"Please provide a reason for rejection.",variant:"destructive"})},disabled:_.isPending||!r.trim(),variant:"destructive",className:"flex-1",children:_.isPending?"Rejecting...":"Reject Task"}),s.jsx(se,{variant:"outline",onClick:()=>{i(null),n("")},className:"flex-1",children:"Cancel"})]})]})]})})]})})}function QIe(){return PR.useSyncExternalStore(JIe,()=>!0,()=>!1)}function JIe(){return()=>{}}var RE="Avatar",[ZIe,rRe]=pa(RE),[eMe,xU]=ZIe(RE),yU=N.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,i]=N.useState("idle");return s.jsx(eMe,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(_t.span,{...n,ref:t})})});yU.displayName=RE;var vU="AvatarImage",wU=N.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=e,o=xU(vU,r),l=tMe(n,i),c=Ea(u=>{a(u),o.onImageLoadingStatusChange(u)});return vn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(_t.img,{...i,ref:t,src:n}):null});wU.displayName=vU;var bU="AvatarFallback",jU=N.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,i=xU(bU,r),[o,l]=N.useState(n===void 0);return N.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(_t.span,{...a,ref:t}):null});jU.displayName=bU;function iI(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function tMe(e,{referrerPolicy:t,crossOrigin:r}){const n=QIe(),a=N.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[o,l]=N.useState(()=>iI(i,e));return vn(()=>{l(iI(i,e))},[i,e]),vn(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,r,t]),o}var NU=yU,SU=wU,_U=jU;const XS=N.forwardRef(({className:e,...t},r)=>s.jsx(NU,{ref:r,className:Ge("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));XS.displayName=NU.displayName;const rMe=N.forwardRef(({className:e,...t},r)=>s.jsx(SU,{ref:r,className:Ge("aspect-square h-full w-full",e),...t}));rMe.displayName=SU.displayName;const QS=N.forwardRef(({className:e,...t},r)=>s.jsx(_U,{ref:r,className:Ge("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));QS.displayName=_U.displayName;const JS="jwt_token";function nMe(e){try{const t=e.split(".");if(t.length!==3)throw new Error("Invalid JWT token format");const r=t[1],n=r+"=".repeat((4-r.length%4)%4),a=atob(n),i=JSON.parse(a),o=Math.floor(Date.now()/1e3);return i.exp&&o>i.exp?(console.warn("JWT token has expired"),null):i}catch(t){return console.error("Failed to decode JWT token:",t),null}}async function aMe(e,t){const{OrgContext:r}=await pU(async()=>{const{OrgContext:i}=await Promise.resolve().then(()=>Nz);return{OrgContext:i}},void 0),a=localStorage.getItem("user_id")||e.user_id;console.log("=== JWT STORAGE DEBUG ==="),console.log("JWT payload user_id:",e.user_id),console.log("Storing user_id as:",a),r.setJWTData({org_id:e.org_id,user_id:a,role_id:e.role_id,role_name:e.role_name,user_type_id:e.user_type_id}),localStorage.setItem(JS,t),localStorage.setItem("jwt_token",t),console.log("Stored JWT token with key:",JS),console.log("Token stored successfully:",!!localStorage.getItem("jwt_token")),console.log("Final stored user_id:",localStorage.getItem("user_id")),console.log("Stored user data from JWT:",{org_id:e.org_id,user_id:a,role_id:e.role_id,role_name:e.role_name}),console.log("========================")}function sMe(){return typeof window>"u"?null:localStorage.getItem("jwt_token")||localStorage.getItem(JS)}function iMe(){const[e,t]=N.useState("Leaves"),[r,n]=N.useState(new Date),[a,i]=N.useState("Pending"),[o,l]=N.useState([]),[c,u]=N.useState("Leaves"),[d,f]=N.useState("2025"),[h,m]=N.useState("Yearly"),[g,p]=N.useState(null),[y,b]=N.useState(!1);localStorage.getItem("user_id");const{workPattern:x,isHoliday:w,getHolidayDetails:v}=oh(),{data:j}=Fe({queryKey:["/external/holidays"],queryFn:async()=>{const M=localStorage.getItem("jwt_token");if(console.log("🔑 [AdminOverview External Holidays] JWT token found:",!!M),!M)throw new Error("JWT token not found in localStorage");console.log("🌐 [AdminOverview External Holidays] Calling API: https://apiv1.resolvepay.in/organization/holidays");const oe=await fetch("https://apiv1.resolvepay.in/organization/holidays",{method:"GET",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"}});if(console.log("🌐 [AdminOverview External Holidays] Response status:",oe.status),!oe.ok){const U=await oe.text();throw console.log("🌐 [AdminOverview External Holidays] Error response:",U),new Error(`Failed to fetch holidays: ${oe.status} ${oe.statusText}`)}const be=await oe.json();return console.log("🌐 [AdminOverview External Holidays] Response data:",be),be.data||be||[]},staleTime:5*60*1e3,refetchOnMount:!0}),{data:S=[]}=Fe({queryKey:["/api/holidays"]}),_=j&&j.length>0?j:S||[],A=x&&x.selectedHolidays?_.filter(M=>x.selectedHolidays.includes(M.id)):_,{data:C=[]}=Fe({queryKey:["/api/leave-requests"]}),{data:D=[]}=Fe({queryKey:["/api/leave-types"]}),{data:k=[]}=Fe({queryKey:["/api/comp-off-requests"]}),{data:O=[]}=Fe({queryKey:["/api/pto-requests"]}),{data:V=[]}=Fe({queryKey:["/api/leave-variants"]}),{data:G=[]}=Fe({queryKey:["/api/employee-leave-balances"]}),{data:Y=[]}=Fe({queryKey:["/api/leave-balance-transactions"]});N.useEffect(()=>{(async()=>{try{if(sMe()){const be=await vi();be&&Array.isArray(be)&&l(be)}}catch(oe){console.error("[AdminOverview] Failed to load employee data:",oe)}})()},[]);const W=M=>{const oe=o.find(be=>{var U,te,xe;return((U=be.user_id)==null?void 0:U.toString())===M||((te=be.id)==null?void 0:te.toString())===M||((xe=be.employee_number)==null?void 0:xe.toString())===M});return oe?oe.user_name||(oe.first_name&&oe.last_name?`${oe.first_name} ${oe.last_name}`:null)||oe.employee_number||`Employee ${M}`:`Employee ${M}`},P=M=>{const oe=W(M),be=oe.split(" ");return be.length>=2?`${be[0][0]}${be[1][0]}`.toUpperCase():oe.substring(0,2).toUpperCase()},E=()=>{const M=C,oe=Y;console.log("[AdminOverview] Calculating analytics from:",{transactionCount:oe.length,requestCount:M.length,sampleTransaction:oe[0],sampleRequest:M[0],requestStatuses:Array.from(new Set(M.map(Ke=>Ke.status))),transactionData:oe.slice(0,2)});const be=M.filter(Ke=>Ke.status==="pending").length,U=M.filter(Ke=>Ke.status==="approved").length,te=M.filter(Ke=>Ke.status==="rejected").length;console.log("[AdminOverview] Request status counts:",{pending:be,approved:U,rejected:te,total:M.length});const xe=M.filter(Ke=>{if(Ke.status!=="approved")return!1;const Dt=new Date,Jt=new Date(Ke.startDate),Gr=new Date(Ke.endDate);return Dt>=Jt&&Dt<=Gr}).length;console.log("[AdminOverview] Transaction analysis:",{totalTransactions:oe.length,sampleTransactions:oe.slice(0,3),transactionTypes:Array.from(new Set(oe.map(Ke=>Ke.transactionType))),descriptions:Array.from(new Set(oe.map(Ke=>Ke.description))).slice(0,10)});const le=oe.filter(Ke=>{var Dt,Jt;return Ke.transactionType==="deduction"&&!((Dt=Ke.description)!=null&&Dt.includes("Opening balance"))&&!((Jt=Ke.description)!=null&&Jt.includes("imported from Excel"))}),ye=Math.abs(le.reduce((Ke,Dt)=>Ke+parseFloat(Dt.amount||0),0)),ve=oe.filter(Ke=>Ke.transactionType==="addition"),ke=ve.reduce((Ke,Dt)=>Ke+parseFloat(Dt.amount||0),0),it=oe.filter(Ke=>{var Dt;return(Dt=Ke.description)==null?void 0:Dt.includes("encashed")}),ot=Math.abs(it.reduce((Ke,Dt)=>Ke+parseFloat(Dt.amount||0),0)),Nt=oe.filter(Ke=>{var Dt;return(Dt=Ke.description)==null?void 0:Dt.includes("lapsed")}),Le=Math.abs(Nt.reduce((Ke,Dt)=>Ke+parseFloat(Dt.amount||0),0)),Mt=oe.filter(Ke=>{var Dt;return(Dt=Ke.description)==null?void 0:Dt.includes("carry forward")}).reduce((Ke,Dt)=>Ke+parseFloat(Dt.amount||0),0);console.log("[AdminOverview] Analytics breakdown:",{deductionCount:le.length,additionCount:ve.length,totalGrantedHalfDays:ke,totalAvailedHalfDays:ye,encashed:ot,lapsed:Le,carryForward:Mt,sampleDeduction:le[0],sampleAddition:ve[0]});const at=M.filter(Ke=>Ke.status==="approved");console.log("[AdminOverview] Working days calculation debug:",{totalRequests:M.length,approvedCount:at.length,sampleApproved:at.slice(0,10).map(Ke=>({id:Ke.id,workingDays:Ke.workingDays,workingDaysType:typeof Ke.workingDays,workingDaysParsed:parseFloat(Ke.workingDays||0),status:Ke.status,leaveTypeName:Ke.leaveTypeName}))});const $t=at.reduce((Ke,Dt)=>{const Jt=parseFloat(Dt.workingDays||0);return Ke+Jt},0);return console.log("[AdminOverview] Working days total calculation:",{totalWorkingDays:$t,approvedRequestCount:at.length,averageDaysPerRequest:$t/(at.length||1)}),console.log("[AdminOverview] Final analytics result:",{pending:be,approved:U,rejected:te,onLeave:xe,workingDaysAvailed:$t,totalGranted:Math.round(ke/2),totalAvailed:Math.round(ye/2)}),{totalGranted:Math.round(ke/2),pendingApprovals:be,totalOnLeave:xe,totalAvailed:$t||Math.round(ye/2),totalRejected:te,absent:0,totalLossOfPay:0,totalLapsed:Math.round(Le/2),totalEncashed:Math.round(ot/2),carryForward:Math.round(Mt/2),withdrawals:M.filter(Ke=>Ke.status==="withdrawal_pending").length}},R=()=>{const M=Y,oe=C;console.log("[AdminOverview] Raw data analysis:",{transactionCount:M.length,requestCount:oe.length,selectedYear:d,sampleTransaction:M[0],sampleRequest:oe[0],requestYears:oe.map(U=>new Date(U.startDate).getFullYear()).filter((U,te,xe)=>xe.indexOf(U)===te),transactionYears:M.map(U=>new Date(U.createdAt||U.transactionDate).getFullYear()).filter((U,te,xe)=>xe.indexOf(U)===te)});const be=Array.from({length:12},(U,te)=>{const xe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][te],le=oe.filter(ke=>ke.status!=="approved"?!1:new Date(ke.startDate).getMonth()===te),ye={};le.forEach(ke=>{const it=ke.leaveTypeName||"Other Leave",ot=parseFloat(ke.workingDays)||1;ye[it]=(ye[it]||0)+ot,te===0&&console.log(`[AdminOverview] Processing ${xe} request:`,{id:ke.id,leaveTypeName:ke.leaveTypeName,workingDays:ke.workingDays,startDate:ke.startDate,status:ke.status})});const ve=Object.values(ye).reduce((ke,it)=>ke+it,0);return{month:xe,breakdown:ye,total:ve,requestCount:le.length}});return console.log("[AdminOverview] Monthly data calculated:",be),be},I=E(),ee=R(),L=(D==null?void 0:D.map(M=>M.name))||[],q=Array.from(new Set((C==null?void 0:C.map(M=>M.leaveTypeName).filter(Boolean))||[])),H=Array.from(new Set([...L,...q]));console.log("[AdminOverview] Debug leave types analysis:",{totalRequests:(C==null?void 0:C.length)||0,configuredLeaveTypes:L,usedLeaveTypes:q,allLeaveTypes:H,leaveTypeCount:H.length,sampleRequests:C==null?void 0:C.slice(0,5).map(M=>({id:M.id,leaveTypeName:M.leaveTypeName,leaveTypeId:M.leaveTypeId,status:M.status}))});const B={},de=["bg-blue-500","bg-orange-500","bg-red-500","bg-green-500","bg-purple-500","bg-yellow-500","bg-pink-500","bg-indigo-500"];H.forEach((M,oe)=>{B[M]=de[oe%de.length]}),(()=>{const M=C.filter(be=>be.status==="approved"),oe={};return M.forEach(be=>{const U=be.reason||"Other";oe[U]=(oe[U]||0)+1}),Object.entries(oe).map(([be,U])=>({name:be.charAt(0).toUpperCase()+be.slice(1),value:U}))})().reduce((M,oe)=>M+oe.value,0);const he=[{id:"Leaves",label:"Leaves",count:C.length},{id:"BTO",label:"BTO",count:O.length},{id:"Comp-off",label:"Comp-off",count:k.length}],K=[{id:"All",label:"All"},{id:"Pending",label:"Pending",count:I.pendingApprovals,highlight:!0},{id:"Approved",label:"Approved"},{id:"Rejected",label:"Rejected"}],ae=(()=>{let M=C;return e==="BTO"?M=O:e==="Comp-off"&&(M=k),a==="Pending"?M.filter(oe=>oe.status==="pending").slice(0,4):a==="Approved"?M.filter(oe=>oe.status==="approved").slice(0,4):a==="Rejected"?M.filter(oe=>oe.status==="rejected").slice(0,4):M.slice(0,4)})(),Ne=(M,oe)=>{const be=new Date(M),U=new Date(oe);return be.toDateString()===U.toDateString()?be.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):`${be.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${U.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`},Se=(M,oe,be)=>{if(be)return`${be} working days`;const U=new Date(M),te=new Date(oe),xe=Math.abs(te.getTime()-U.getTime());return`${Math.ceil(xe/(1e3*60*60*24))+1} days`},Oe=(()=>{const M=r.getFullYear(),oe=r.getMonth(),be=new Date(M,oe,1),U=new Date(M,oe+1,0),te=new Date(be);te.setDate(te.getDate()-be.getDay());const xe=[],le=new Date(te);for(;le<=U||le.getDay()!==0;){const ye=new Date(le),ve=ye.getDate(),ke=ye.getMonth()===oe,it=ye.toDateString()===new Date().toDateString(),ot=ye.getDay()===0||ye.getDay()===6,Le=(w?w(ye):!1)&&v?v(ye):null,rt=C.filter(Mt=>{if(Mt.status!=="approved")return!1;const at=new Date(Mt.startDate),$t=new Date(Mt.endDate);return ye>=at&&ye<=$t});xe.push({date:ye,dayNumber:ve,isCurrentMonth:ke,isToday:it,isWeekend:ot,holiday:Le,leaves:rt}),le.setDate(le.getDate()+1)}return xe})();return s.jsx(Sr,{children:s.jsxs("div",{className:"space-y-6 p-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Admin Overview"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(yt,{value:d,onValueChange:f,children:[s.jsx(gt,{className:"w-24",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"2025",children:"2025"}),s.jsx(je,{value:"2024",children:"2024"}),s.jsx(je,{value:"2023",children:"2023"})]})]}),s.jsxs(yt,{value:h,onValueChange:m,children:[s.jsx(gt,{className:"w-28",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"Yearly",children:"Yearly"}),s.jsx(je,{value:"Monthly",children:"Monthly"}),s.jsx(je,{value:"Quarterly",children:"Quarterly"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Ce,{children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Granted"}),s.jsx("p",{className:"text-2xl font-bold",children:I.totalGranted})]}),s.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:s.jsx(Bn,{className:"h-4 w-4 text-blue-600"})})]})})}),s.jsx(Ce,{children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Approvals"}),s.jsx("p",{className:"text-2xl font-bold",children:I.pendingApprovals})]}),s.jsx("div",{className:"p-2 bg-yellow-100 rounded-full",children:s.jsx(Lq,{className:"h-4 w-4 text-yellow-600"})})]})})}),s.jsx(Ce,{children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"On Leave Today"}),s.jsx("p",{className:"text-2xl font-bold",children:I.totalOnLeave})]}),s.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:s.jsx(eN,{className:"h-4 w-4 text-green-600"})})]})})}),s.jsx(Ce,{children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Availed"}),s.jsx("p",{className:"text-2xl font-bold",children:I.totalAvailed})]}),s.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:s.jsx(qn,{className:"h-4 w-4 text-purple-600"})})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs(Ce,{className:"lg:col-span-2",children:[s.jsxs(Tt,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Et,{className:"flex items-center space-x-2",children:[s.jsx(An,{className:"h-5 w-5"}),s.jsx("span",{children:"Approval Requests"})]}),s.jsx(se,{variant:"ghost",size:"sm",children:s.jsx(IF,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex space-x-1 bg-muted p-1 rounded-lg",children:he.map(M=>s.jsxs("button",{onClick:()=>t(M.id),className:`flex-1 px-3 py-2 text-sm rounded-md transition-colors ${e===M.id?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[M.label," (",M.count,")"]},M.id))}),s.jsx("div",{className:"flex space-x-4 mt-4",children:K.map(M=>s.jsxs("button",{onClick:()=>i(M.id),className:`text-sm font-medium pb-2 border-b-2 transition-colors ${a===M.id?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"}`,children:[M.label,M.count!==void 0&&s.jsx("span",{className:`ml-1 px-2 py-0.5 rounded-full text-xs ${M.highlight?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:M.count})]},M.id))})]}),s.jsx(Ie,{children:s.jsx("div",{className:"space-y-4",children:ae.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:["No ",a.toLowerCase()," requests found"]}):ae.map((M,oe)=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(XS,{className:"h-8 w-8",children:s.jsx(QS,{className:"text-xs",children:P(M.userId||M.user_id)})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:W(M.userId||M.user_id)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:e==="BTO"?`${M.timeType} • ${Ne(M.requestDate,M.requestDate)}`:e==="Comp-off"?`${M.actionType} • ${Ne(M.workedDate||M.requestDate,M.workedDate||M.requestDate)}`:`${Ne(M.startDate,M.endDate)} • ${Se(M.startDate,M.endDate,M.workingDays)}`})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Lt,{variant:M.status==="approved"?"default":M.status==="pending"?"secondary":"destructive",children:M.status}),M.status==="pending"&&s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(se,{size:"sm",className:"h-6 px-2 text-xs",children:s.jsx(qn,{className:"h-3 w-3"})}),s.jsx(se,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs",children:s.jsx(ho,{className:"h-3 w-3"})})]})]})]},oe))})})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Et,{className:"flex items-center space-x-2",children:[s.jsx(br,{className:"h-5 w-5"}),s.jsx("span",{children:"Calendar"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>n(new Date(r.getFullYear(),r.getMonth()-1)),children:s.jsx(Yf,{className:"h-4 w-4"})}),s.jsx("span",{className:"text-sm font-medium min-w-32 text-center",children:r.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>n(new Date(r.getFullYear(),r.getMonth()+1)),children:s.jsx(Wi,{className:"h-4 w-4"})})]})]})}),s.jsx(Ie,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-xs font-medium text-muted-foreground",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(M=>s.jsx("div",{className:"p-1",children:M},M))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:Oe.map((M,oe)=>{const be=M.leaves.length>0,U=M.leaves.length>1;return s.jsx("div",{children:be?s.jsxs(fn,{children:[s.jsx(cu,{asChild:!0,children:s.jsxs("div",{className:`
                                  aspect-square p-1 text-xs border rounded relative cursor-pointer hover:bg-gray-100
                                  ${M.isCurrentMonth?"bg-background":"bg-muted/50"}
                                  ${M.isToday?"bg-primary text-primary-foreground":""}
                                  ${M.isWeekend?"text-muted-foreground":""}
                                  ${M.holiday?"bg-red-50 text-red-600":""}
                                  ${be?"bg-green-50 border-green-200":""}
                                `,children:[s.jsx("div",{className:"text-center font-semibold",children:M.dayNumber}),be&&s.jsxs("div",{className:"absolute inset-x-1 bottom-1 space-y-0.5",children:[M.leaves.slice(0,2).map((te,xe)=>s.jsx("div",{className:"text-xs truncate px-1 py-0.5 bg-green-200 text-green-800 rounded",title:W(te.userId),children:W(te.userId).split(" ")[0]},xe)),U&&M.leaves.length>2&&s.jsxs("div",{className:"text-xs text-center text-green-700 font-semibold",children:["+",M.leaves.length-2," more"]})]}),M.holiday&&s.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"})]})}),s.jsxs(hn,{className:"max-w-md",children:[s.jsx(mn,{children:s.jsxs(pn,{children:["Employees on Leave -"," ",M.date.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})}),s.jsx("div",{className:"space-y-3",children:M.leaves.map((te,xe)=>s.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[s.jsx(XS,{className:"h-10 w-10",children:s.jsx(QS,{className:"text-sm",children:P(te.userId)})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:W(te.userId)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:te.leaveTypeName||"Leave"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:Ne(te.startDate,te.endDate)}),te.workingDays&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:[te.workingDays," working days"]})]}),s.jsx(Lt,{variant:te.status==="approved"?"default":"secondary",className:"text-xs",children:te.status})]},xe))})]})]}):s.jsxs("div",{className:`
                              aspect-square p-1 text-xs border rounded relative
                              ${M.isCurrentMonth?"bg-background":"bg-muted/50"}
                              ${M.isToday?"bg-primary text-primary-foreground":""}
                              ${M.isWeekend?"text-muted-foreground":""}
                              ${M.holiday?"bg-red-50 text-red-600":""}
                            `,children:[s.jsx("div",{className:"text-center",children:M.dayNumber}),M.holiday&&s.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"})]})},oe)})})]})})]})]}),s.jsxs(Ce,{children:[s.jsxs(Tt,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Et,{className:"flex items-center space-x-2",children:[s.jsx(Bn,{className:"h-5 w-5"}),s.jsx("span",{children:"Analytics"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(yt,{value:d,onValueChange:f,children:[s.jsx(gt,{className:"w-24",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"2025",children:"2025"}),s.jsx(je,{value:"2024",children:"2024"})]})]}),s.jsxs(yt,{value:h,onValueChange:m,children:[s.jsx(gt,{className:"w-24",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"Yearly",children:"Yearly"}),s.jsx(je,{value:"Monthly",children:"Monthly"})]})]})]})]}),s.jsx("div",{className:"flex space-x-1 bg-muted p-1 rounded-lg",children:["Leaves","BTO","Comp-off"].map(M=>s.jsx("button",{onClick:()=>u(M),className:`flex-1 px-3 py-2 text-sm rounded-md transition-colors ${c===M?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:M},M))}),s.jsx("div",{className:"flex space-x-6 mt-4",children:[{id:"Availed",label:"Availed",color:"text-green-600",active:!0}].map(M=>s.jsxs("button",{className:`text-sm font-medium pb-2 border-b-2 transition-colors ${M.active?"border-green-500 text-green-600":"border-transparent text-muted-foreground hover:text-foreground"}`,children:[M.label," ",M.active&&s.jsx("span",{className:"text-green-600",children:"✓"})]},M.id))})]}),s.jsx(Ie,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Leaves availed: ",I.totalAvailed]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(yt,{value:h,onValueChange:m,children:[s.jsx(gt,{className:"w-20",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"Yearly",children:"Yearly"}),s.jsx(je,{value:"Monthly",children:"Monthly"})]})]}),s.jsxs(yt,{value:d,onValueChange:f,children:[s.jsx(gt,{className:"w-16",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"2024",children:"2024"}),s.jsx(je,{value:"2025",children:"2025"})]})]})]})]}),(()=>{Math.max(...ee.map(U=>U.total),1);const M=50,oe=M/5,be=[5,4,3,2,1,0].map(U=>Math.round(oe*U));return s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-end justify-between bg-gray-50 p-6 rounded-lg",style:{height:"250px"},children:[s.jsx("div",{className:"flex flex-col justify-between text-xs text-gray-500 mr-2",style:{height:"200px"},children:be.map((U,te)=>s.jsx("span",{children:U},te))}),s.jsx("div",{className:"flex items-end justify-between flex-1 space-x-4",style:{height:"200px"},children:ee.map((U,te)=>{const le=U.total>0?Math.max(U.total/M*200,8):0;return s.jsxs("div",{className:"flex flex-col items-center space-y-1 flex-1 group relative",children:[s.jsx("div",{className:"w-full bg-white border border-gray-200 rounded-sm overflow-hidden flex flex-col-reverse cursor-pointer",style:{height:`${le}px`,minHeight:U.total>0?"8px":"2px",minWidth:"40px",backgroundColor:U.total>0?"#f3f4f6":"transparent"},children:U.total>0&&H.map(ye=>{var ke;const ve=((ke=U.breakdown)==null?void 0:ke[ye])||0;return ve<=0?null:s.jsx("div",{className:B[ye],style:{height:`${ve/U.total*100}%`,minHeight:"4px"}},ye)})}),U.total>0&&s.jsxs("div",{className:`absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 
                                              bg-gray-800 text-white text-xs p-2 rounded shadow-lg z-10 
                                              opacity-0 group-hover:opacity-100 transition-opacity duration-200 
                                              whitespace-nowrap pointer-events-none`,children:[s.jsxs("div",{className:"font-semibold",children:[U.month," Details"]}),H.map(ye=>{var ke;const ve=((ke=U.breakdown)==null?void 0:ke[ye])||0;return ve<=0?null:s.jsxs("div",{children:[ye,": ",ve," days"]},ye)}),s.jsxs("div",{className:"border-t border-gray-600 mt-1 pt-1",children:["Total: ",U.total," days"]})]}),s.jsx("span",{className:"text-xs text-gray-500",children:U.month})]},te)})})]}),s.jsx("div",{className:"flex items-center justify-center flex-wrap gap-4 mt-4",children:H.map(U=>{const te=B[U];return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded ${te}`}),s.jsx("span",{className:"text-sm",children:U})]},U)})})]})})()]})})]}),s.jsx("div",{className:"mt-6",children:s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs(Et,{className:"flex items-center space-x-2",children:[s.jsx(br,{className:"h-5 w-5"}),s.jsx("span",{children:"Upcoming Holidays"})]})}),s.jsx(Ie,{children:s.jsx("div",{className:"space-y-3",children:(()=>{console.log("[AdminOverview] External holidays data:",j),console.log("[AdminOverview] DB holidays data:",S),console.log("[AdminOverview] All holidays:",_),console.log("[AdminOverview] Filtered holidays:",A),console.log("[AdminOverview] Work pattern selected holidays:",x==null?void 0:x.selectedHolidays);const M=A;if(!M||M.length===0)return s.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No upcoming holidays configured"});const oe=new Date,be=M.filter(U=>{try{return new Date(U.date||U.selectedDate)>=oe}catch{return!1}}).sort((U,te)=>{const xe=new Date(U.date||U.selectedDate),le=new Date(te.date||te.selectedDate);return xe.getTime()-le.getTime()}).slice(0,5);return be.length===0?s.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No upcoming holidays"}):be.map((U,te)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:U.name||U.holidayName}),s.jsx("p",{className:"text-xs text-muted-foreground",children:(()=>{try{const xe=U.date||U.selectedDate,le=new Date(xe);return isNaN(le.getTime())?"Date not available":le.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})}catch{return"Date not available"}})()})]}),s.jsx(Lt,{variant:"outline",children:"Holiday"})]},te))})()})})]})})]})})}function oMe(){const[e,t]=N.useState("Leaves"),[r,n]=N.useState("All"),[a,i]=N.useState(!1),[o,l]=N.useState(null),[c,u]=N.useState(""),[d,f]=N.useState(!1),[h,m]=N.useState([]),[g,p]=N.useState(""),[y,b]=N.useState(1),[x]=N.useState(10),{toast:w}=Vr(),v=ET(),j=localStorage.getItem("currentView")||"admin",{data:S=[]}=Fe({queryKey:["/api/leave-requests"],enabled:j==="admin"||v.isReportingManager}),{data:_=[]}=Fe({queryKey:["/api/pto-requests"],enabled:j==="admin"||v.isReportingManager}),{data:A=[]}=Fe({queryKey:["/api/comp-off-requests"],enabled:j==="admin"||v.isReportingManager}),{data:C=[]}=Fe({queryKey:["/api/leave-types"]}),{data:D=[]}=Fe({queryKey:["/api/users"]}),{data:k=[],isLoading:O}=Fe({queryKey:["external-employees"],queryFn:vi,staleTime:5*60*1e3}),{data:V=[]}=Fe({queryKey:["/api/blackout-periods"],enabled:j==="admin"||v.isReportingManager}),G=le=>{if(!le)return"Unknown Employee";const ye=k.find(ke=>{var it;return ke.user_id===le||ke.user_id===parseInt(le)||((it=ke.user_id)==null?void 0:it.toString())===le});if(ye&&ye.user_name)return ye.user_name;if(ye&&(ye.first_name||ye.last_name)){const ke=`${ye.first_name||""} ${ye.last_name||""}`.trim();if(ke)return ke}const ve=D.find(ke=>ke.id===le);return ve&&ve.firstName?`${ve.firstName} ${ve.lastName||""}`.trim():`Employee ID: ${le}`},Y=(le,ye,ve)=>{if(!V||V.length===0)return{hasConflict:!1};const ke=new Date(ye),it=new Date(ve);for(const ot of V){if(!(ot.assignedEmployees&&(ot.assignedEmployees.includes(le.toString())||ot.assignedEmployees.includes(parseInt(le)))))continue;const Le=new Date(ot.startDate),rt=new Date(ot.endDate);if(ke<=rt&&Le<=it)return{hasConflict:!0,periodName:ot.title}}return{hasConflict:!1}};let W=S,P=_,E=A;if(console.log("🔍 [Approvals] Pre-filter comp-off requests:",E.length),console.log("🔍 [Approvals] Reporting manager data:",{isReportingManager:v.isReportingManager,reporteesCount:v.reportees.length,currentView:j}),v.isReportingManager&&v.reportees.length>0){const le=v.reportees.map(ye=>ye.user_id.toString());console.log("🔍 [Approvals] Filtering for reportees:",le),W=W.filter(ye=>{var ve;return le.includes((ve=ye.userId)==null?void 0:ve.toString())}),P=P.filter(ye=>{var ve;return le.includes((ve=ye.userId)==null?void 0:ve.toString())}),E=E.filter(ye=>{var ve;return le.includes((ve=ye.userId)==null?void 0:ve.toString())}),console.log("🔍 [Approvals] Post-filter comp-off requests:",E.length)}else console.log("🔍 [Approvals] No filtering applied - showing all requests");const I=(()=>{switch(e){case"BTO":return P;case"CompOff":return E;default:return W}})(),ee=I.filter(le=>le.status==="pending"||le.status==="withdrawal_pending"),L=I.filter(le=>le.status==="approved"),q=I.filter(le=>le.status==="rejected"),H=[{id:"Leaves",label:"Leaves",count:W.length,active:e==="Leaves"},{id:"BTO",label:"BTO",count:P.length,active:e==="BTO"},{id:"CompOff",label:"CompOff",count:E.length,active:e==="CompOff"}],B=[{id:"All",label:"All",count:I.length},{id:"Pending",label:"Pending",count:ee.length},{id:"Approved",label:"Approved",count:L.length},{id:"Rejected",label:"Rejected",count:q.length}],de=()=>{let le;switch(r){case"Pending":le=ee;break;case"Approved":le=L;break;case"Rejected":le=q;break;default:le=I}return g.trim()&&(le=le.filter(ve=>{const ke=G(ve.userId).toLowerCase(),it=g.toLowerCase();if(ke.includes(it))return!0;let ot="";if(e==="BTO")ot="BTO";else if(e==="CompOff")ot=`Comp-off (${ve.type})`;else{const Le=C.find(rt=>rt.id===ve.leaveTypeId);ot=(Le==null?void 0:Le.name)||"Unknown Leave Type"}return!!(ot.toLowerCase().includes(it)||(ve.status==="withdrawal_pending"?"withdrawal pending":ve.status).toLowerCase().includes(it))})),le.sort((ve,ke)=>{if(ve.status==="withdrawal_pending"&&ke.status!=="withdrawal_pending")return-1;if(ke.status==="withdrawal_pending"&&ve.status!=="withdrawal_pending")return 1;const it=new Date(ve.createdAt||ve.startDate||ve.requestDate).getTime();return new Date(ke.createdAt||ke.startDate||ke.requestDate).getTime()-it})},ce=()=>de(),ge=()=>{const le=ce(),ye=(y-1)*x,ve=ye+x;return le.slice(ye,ve)},he=ce().length,K=Math.ceil(he/x),fe=he===0?0:(y-1)*x+1,ae=Math.min(y*x,he),Ne=le=>{n(le),b(1)},Se=le=>{t(le),b(1)},Ae=le=>{p(le),b(1)},Oe=Ut({mutationFn:async le=>{const ye=oe();return Ct("POST",`${ye}/${le}/approve`)},onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/leave-requests"]}),Ye.invalidateQueries({queryKey:["/api/pto-requests"]}),Ye.invalidateQueries({queryKey:["/api/comp-off-requests"]}),Ye.invalidateQueries({queryKey:["/api/employee-leave-balances"]}),w({title:"Success",description:`${e.slice(0,-1)} request approved successfully`})},onError:le=>{w({title:"Error",description:le.message||`Failed to approve ${e.toLowerCase()} request`,variant:"destructive"})}}),M=Ut({mutationFn:async({requestId:le,reason:ye})=>{const ve=oe();return Ct("POST",`${ve}/${le}/reject`,{rejectionReason:ye})},onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/leave-requests"]}),Ye.invalidateQueries({queryKey:["/api/pto-requests"]}),Ye.invalidateQueries({queryKey:["/api/comp-off-requests"]}),w({title:"Success",description:`${e.slice(0,-1)} request rejected successfully`})},onError:le=>{w({title:"Error",description:le.message||`Failed to reject ${e.toLowerCase()} request`,variant:"destructive"})}}),oe=()=>{switch(e){case"BTO":return"/api/pto-requests";case"CompOff":return"/api/comp-off-requests";default:return"/api/leave-requests"}},be=le=>{Oe.mutate(le)},U=le=>{l(le),u(""),i(!0)},te=()=>{o&&c.trim()&&(M.mutate({requestId:o,reason:c.trim()}),i(!1),l(null),u(""))},xe=le=>{m(le),f(!0)};return s.jsxs(Sr,{children:[s.jsx("div",{className:"p-6",children:s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Et,{className:"text-lg font-semibold text-gray-900",children:"Approval Requests"}),s.jsx("div",{className:"flex items-center space-x-1",children:H.map(le=>s.jsxs(se,{variant:le.active?"default":"outline",size:"sm",onClick:()=>Se(le.id),className:`${le.active?"bg-black text-white hover:bg-gray-800":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:[le.label," (",le.count,")"]},le.id))})]})}),s.jsxs(Ie,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("div",{className:"flex items-center space-x-6 border-b border-gray-200",children:B.map(le=>s.jsx("button",{onClick:()=>Ne(le.id),className:`flex items-center space-x-2 px-1 py-3 text-sm font-medium border-b-2 transition-colors ${r===le.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:s.jsxs("span",{children:[le.label," (",le.count,")"]})},le.id))}),s.jsxs(se,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:[s.jsx(IF,{className:"w-4 h-4 mr-1"}),"View All"]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Xf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(ht,{placeholder:"Search by employee name, leave type, or status...",value:g,onChange:le=>Ae(le.target.value),className:"pl-10"})]})}),O?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500 text-sm",children:"Loading employee data..."})}):ce().length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500 text-sm",children:g?`No results found for "${g}"`:"No leave requests found"})}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Leave Type"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Date Applied"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Leave Period"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Days"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Documents"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Blackout Period"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500 uppercase tracking-wider w-32",children:"Actions"})]})}),s.jsx("tbody",{children:ge().map(le=>{let ye;if(e==="BTO")ye={type:"BTO",startDate:new Date(le.requestDate).toLocaleDateString(),endDate:new Date(le.requestDate).toLocaleDateString(),days:le.timeType==="half_day"?"0.5":le.timeType==="quarter_day"?"0.25":le.totalHours?`${le.totalHours}h`:"1",hasDocuments:le.documentUrl};else if(e==="CompOff")ye={type:`Comp-off (${le.type})`,startDate:new Date(le.date||le.createdAt).toLocaleDateString(),endDate:new Date(le.date||le.createdAt).toLocaleDateString(),days:le.amount||le.transferAmount||"1",hasDocuments:le.documentUrl};else{const ve=C.find(ke=>ke.id===le.leaveTypeId);ye={type:(ve==null?void 0:ve.name)||"Unknown Leave Type",startDate:new Date(le.startDate).toLocaleDateString(),endDate:new Date(le.endDate).toLocaleDateString(),days:le.workingDays||le.totalDays||"1",hasDocuments:le.documents&&le.documents.length>0}}return s.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[s.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:G(le.userId)}),s.jsx("td",{className:"py-3 px-4 text-gray-700",children:ye.type}),s.jsx("td",{className:"py-3 px-4 text-gray-700",children:new Date(le.createdAt||le.startDate||le.requestDate).toLocaleDateString()}),s.jsx("td",{className:"py-3 px-4 text-gray-700",children:ye.startDate===ye.endDate?ye.startDate:`${ye.startDate} - ${ye.endDate}`}),s.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[ye.days," ",e==="BTO"&&le.timeType==="hours"?"":"days"]}),s.jsx("td",{className:"py-3 px-4",children:ye.hasDocuments?s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>xe(e==="Leaves"?le.documents:[le.documentUrl]),className:"text-blue-600 hover:text-blue-700 p-1",children:s.jsx(aa,{className:"w-4 h-4"})}):s.jsx("span",{className:"text-gray-400 text-sm",children:"No documents"})}),s.jsx("td",{className:"py-3 px-4",children:(()=>{if(e==="Leaves"){const ve=Y(le.userId,le.startDate,le.endDate);return ve.hasConflict?s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-red-600 font-medium",children:"Yes"}),s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:ve.periodName})]}):s.jsx("span",{className:"text-gray-500 text-sm",children:"No"})}else return s.jsx("span",{className:"text-gray-400 text-sm",children:"N/A"})})()}),s.jsx("td",{className:"py-3 px-4",children:s.jsx(Lt,{variant:le.status==="pending"||le.status==="withdrawal_pending"?"secondary":le.status==="approved"?"default":"destructive",className:le.status==="pending"?"bg-yellow-100 text-yellow-800":le.status==="withdrawal_pending"?"bg-purple-100 text-purple-800":le.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:le.status==="withdrawal_pending"?"Withdrawal Pending":le.status.charAt(0).toUpperCase()+le.status.slice(1)})}),s.jsx("td",{className:"py-3 px-4",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[(le.status==="pending"||le.status==="withdrawal_pending")&&s.jsxs(s.Fragment,{children:[s.jsxs(se,{size:"sm",variant:"outline",onClick:()=>be(le.id),disabled:Oe.isPending,className:"text-green-600 border-green-200 hover:bg-green-50 px-2 py-1 h-7 text-xs whitespace-nowrap",children:[s.jsx(_v,{className:"w-3 h-3 mr-1"}),"Approve"]}),s.jsxs(se,{size:"sm",variant:"outline",onClick:()=>U(le.id),disabled:M.isPending,className:"text-red-600 border-red-200 hover:bg-red-50 px-2 py-1 h-7 text-xs whitespace-nowrap",children:[s.jsx(da,{className:"w-3 h-3 mr-1"}),"Reject"]})]}),le.status!=="pending"&&s.jsx("span",{className:"text-gray-400 text-sm",children:le.status==="approved"?"Approved":"Rejected"})]})})]},le.id)})})]}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200",children:[s.jsx("div",{className:"flex items-center text-sm text-gray-500",children:s.jsxs("span",{children:["Showing ",fe," to ",ae," of ",he," results"]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>b(Math.max(1,y-1)),disabled:y===1,className:"flex items-center",children:[s.jsx(Yf,{className:"w-4 h-4 mr-1"}),"Previous"]}),s.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,K)},(le,ye)=>{let ve;return K<=5||y<=3?ve=ye+1:y>=K-2?ve=K-4+ye:ve=y-2+ye,s.jsx(se,{variant:ve===y?"default":"outline",size:"sm",onClick:()=>b(ve),className:"w-8 h-8 p-0",children:ve},ve)})}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>b(Math.min(K,y+1)),disabled:y===K,className:"flex items-center",children:["Next",s.jsx(Wi,{className:"w-4 h-4 ml-1"})]})]})]})]})})]})]})}),s.jsx(fn,{open:a,onOpenChange:i,children:s.jsxs(hn,{className:"sm:max-w-md",children:[s.jsx(mn,{children:s.jsx(pn,{children:"Reject Leave Request"})}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"rejectionReason",children:"Reason for rejection *"}),s.jsx(Cn,{id:"rejectionReason",value:c,onChange:le=>u(le.target.value),placeholder:"Please provide a detailed reason for rejecting this leave request...",className:"mt-1",rows:4})]})}),s.jsxs(Vx,{children:[s.jsx(se,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),s.jsx(se,{variant:"destructive",onClick:te,disabled:!c.trim()||M.isPending,children:M.isPending?"Rejecting...":"Reject Request"})]})]})}),s.jsx(fn,{open:d,onOpenChange:f,children:s.jsxs(hn,{className:"sm:max-w-2xl",children:[s.jsx(mn,{children:s.jsx(pn,{children:"Supporting Documents"})}),s.jsx("div",{className:"space-y-4",children:h.length===0?s.jsx("p",{className:"text-gray-500 text-center py-8",children:"No documents attached"}):s.jsx("div",{className:"space-y-3",children:h.map((le,ye)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(aa,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:le.split("/").pop()||`Document ${ye+1}`}),s.jsx("p",{className:"text-sm text-gray-500",children:"Supporting document"})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(se,{size:"sm",variant:"outline",onClick:()=>window.open(le,"_blank"),children:[s.jsx(jx,{className:"w-4 h-4 mr-1"}),"View"]}),s.jsxs(se,{size:"sm",variant:"outline",onClick:()=>{const ve=window.document.createElement("a");ve.href=le,ve.download=le.split("/").pop()||"document",ve.click()},children:[s.jsx(Vi,{className:"w-4 h-4 mr-1"}),"Download"]})]})]},ye))})}),s.jsx(Vx,{children:s.jsx(se,{onClick:()=>f(!1),children:"Close"})})]})})]})}const lMe=Jp("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),TU=N.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:Ge(lMe({variant:t}),e),...r}));TU.displayName="Alert";const cMe=N.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:Ge("mb-1 font-medium leading-none tracking-tight",e),...t}));cMe.displayName="AlertTitle";const EU=N.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Ge("text-sm [&_p]:leading-relaxed",e),...t}));EU.displayName="AlertDescription";function uMe(){const[e,t]=N.useState(""),[r,n]=N.useState(null),[a,i]=N.useState(!1),[o,l]=N.useState([]),[c,u]=N.useState([]),[d,f]=N.useState(null),[h,m]=N.useState("all");qf();const{data:g=[],isLoading:p,error:y}=Fe({queryKey:["/api/users"],staleTime:5*60*1e3,gcTime:10*60*1e3});return N.useEffect(()=>{if(g.length>0)try{console.log("[Employees] Processing employee data...",g.length);const b=g.map(x=>({id:x.id,name:`${x.firstName} ${x.lastName}`,designation:x.designation||"Employee",function:x.function||"General",division:x.division||"Employee",location:x.location||"Office",leaveTypesApplied:0,avatar:null,joinedDate:x.joinedDate||"N/A",firstName:x.firstName,lastName:x.lastName,email:x.email,employeeNumber:x.id,gender:x.gender||"N/A",phoneNumber:x.phoneNumber||"N/A",reportingManager:x.reportingManager||"N/A",reportingManagerId:x.reportingManager||null,assignmentStatus:x.assignmentStatus||"Unassigned"}));console.log("[Employees] Successfully formatted employees:",b.length),l(b),u(b),f(null)}catch(b){console.error("[Employees] Error processing employees:",b),f("Failed to process employee data. Please try again.")}else y&&(console.error("[Employees] Error loading employees:",y),f("Failed to load employee data. Please try again."),l([]),u([]))},[g,y]),N.useEffect(()=>{let b=o;e&&(b=b.filter(x=>{var w,v,j;return((w=x.name)==null?void 0:w.toLowerCase().includes(e.toLowerCase()))||((v=x.email)==null?void 0:v.toLowerCase().includes(e.toLowerCase()))||((j=x.employeeNumber)==null?void 0:j.toString().includes(e))})),h!=="all"&&(b=b.filter(x=>x.assignmentStatus===h)),u(b)},[e,h,o]),p?s.jsx(Sr,{children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Employees"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Array.from({length:8}).map((b,x)=>s.jsxs("div",{className:"bg-white rounded-lg border p-4 animate-pulse",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]},x))})]})}):d?s.jsx(Sr,{children:s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:s.jsx("div",{className:"text-red-800 text-sm",children:d})})})}):s.jsx(Sr,{children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Employees"})}),s.jsxs("div",{className:"mb-6 flex gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Xf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(ht,{placeholder:"Search employees...",value:e,onChange:b=>t(b.target.value),className:"pl-10"})]}),s.jsx("div",{className:"w-48",children:s.jsxs(yt,{value:h,onValueChange:m,children:[s.jsx(gt,{children:s.jsx(vt,{placeholder:"Filter by status"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"all",children:"All Employees"}),s.jsx(je,{value:"Assigned",children:"Assigned"}),s.jsx(je,{value:"Unassigned",children:"Unassigned"})]})]})})]}),(()=>{const b=o.filter(x=>x.assignmentStatus==="Unassigned").length;return b>0?s.jsxs(TU,{className:"mb-6 border-orange-200 bg-orange-50",children:[s.jsx($F,{className:"h-4 w-4 text-orange-600"}),s.jsxs(EU,{className:"text-orange-800",children:[s.jsx("strong",{children:b})," ",b===1?"employee has":"employees have"," no leave type assignments. Consider assigning leave types to ensure proper leave management."]})]}):null})(),s.jsx("div",{className:"bg-white rounded-lg border",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Employee ID"}),s.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Name"}),s.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Email"}),s.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Designation"}),s.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Reporting Manager"}),s.jsx("th",{className:"text-left p-4 font-medium text-gray-900",children:"Leave Type Assignment"})]})}),s.jsx("tbody",{children:c.map(b=>s.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[s.jsx("td",{className:"p-4 text-sm text-gray-900",children:b.id}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(uf,{className:"w-4 h-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:b.name}),s.jsx("div",{className:"text-sm text-gray-500",children:b.gender})]})]})}),s.jsx("td",{className:"p-4 text-sm text-gray-900",children:b.email}),s.jsx("td",{className:"p-4 text-sm text-gray-900",children:b.designation}),s.jsx("td",{className:"p-4 text-sm text-gray-900",children:b.reportingManager&&b.reportingManager!=="N/A"?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(uf,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{children:b.reportingManager})]}):s.jsx("span",{className:"text-gray-400 italic",children:"No manager assigned"})}),s.jsx("td",{className:"p-4",children:s.jsx(Lt,{variant:b.assignmentStatus==="Assigned"?"default":"secondary",className:b.assignmentStatus==="Assigned"?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:b.assignmentStatus})})]},b.id))})]})})}),c.length===0&&!p&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No employees found."})})]})})}const dMe=Zn({name:rr().min(1,"Workflow name is required"),effectiveDate:rr().min(1,"Effective date is required"),process:rr().min(1,"Process is required"),subProcesses:as(rr()).min(1,"At least one sub-process is required"),reviewSteps:as(Zn({title:rr(),roleIds:as(er()),autoApproval:or()})).optional()});function fMe(){var C;const{toast:e}=Vr(),[t,r]=N.useState(!1),[n,a]=N.useState([]),[i,o]=N.useState(!1),[l,c]=N.useState(null),[u,d]=N.useState(null),f=os({resolver:Cs(dMe),defaultValues:{name:"",effectiveDate:"",process:"",subProcesses:[],reviewSteps:[]}}),{data:h=[]}=Fe({queryKey:["/api/workflows"]}),{data:m=[]}=Fe({queryKey:["/api/roles"]}),{data:g}=Fe({queryKey:["/api/company"]});N.useEffect(()=>{if(u&&t){console.log("Editing workflow data:",u);const D={name:u.name||"",effectiveDate:u.effectiveDate?new Date(u.effectiveDate).toISOString().split("T")[0]:"",process:u.process||"application",subProcesses:u.subProcesses?Array.isArray(u.subProcesses)?u.subProcesses:[u.subProcess||"apply-leave"]:["apply-leave"]};if(console.log("Form values being set:",D),f.reset(D),u.steps&&Array.isArray(u.steps)){const k=u.steps.map((O,V)=>({id:O.id||Date.now().toString()+V,title:O.title||"",roleIds:O.roleIds||[],autoApproval:O.autoApproval||!1,days:O.days||0,hours:O.hours||0}));a(k)}else a([])}},[u,t,f]);const p=Ut({mutationFn:async D=>{const k=localStorage.getItem("org_id")||"60";return Ct("POST","/api/workflows",{...D,orgId:parseInt(k)})},onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/workflows"]}),e({title:"Success",description:"Workflow created successfully"}),r(!1),f.reset(),a([])},onError:D=>{e({title:"Error",description:D.message||"Failed to create workflow",variant:"destructive"})}}),y=Ut({mutationFn:async({id:D,data:k})=>Ct("PATCH",`/api/workflows/${D}`,k),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/workflows"]}),r(!1),d(null),f.reset(),a([]),e({title:"Success",description:"Workflow updated successfully"})},onError:D=>{e({title:"Error",description:D.message||"Failed to update workflow",variant:"destructive"})}}),b=Ut({mutationFn:async D=>Ct("DELETE",`/api/workflows/${D}`),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/workflows"]}),e({title:"Success",description:"Workflow deleted successfully"})},onError:D=>{e({title:"Error",description:D.message||"Failed to delete workflow",variant:"destructive"})}}),x=()=>{const D={id:Date.now().toString(),title:"",roleIds:[],autoApproval:!1,days:0,hours:0};a(k=>[...k,D])},w=(D,k)=>{a(O=>O.map(V=>V.id===D?{...V,...k}:V))},v=D=>{if(l!==null){const k=n[l];w(k.id,{roleIds:D})}},j=D=>{var k;console.log("[openAssignRolesDialog] Opening for step:",D),console.log("[openAssignRolesDialog] Current reviewSteps:",n),console.log("[openAssignRolesDialog] Step roleIds:",(k=n[D])==null?void 0:k.roleIds),c(D),o(!0)},S=D=>{if(g!=null&&g.effectiveDate&&D.effectiveDate){const O=new Date(g.effectiveDate);if(new Date(D.effectiveDate)<O){f.setError("effectiveDate",{message:"Effective date cannot be before company setup date"});return}}const k={...D,steps:n.map(O=>({title:O.title,roleIds:O.roleIds,autoApproval:O.autoApproval,days:O.days||0,hours:O.hours||0}))};u?y.mutate({id:u.id,data:k}):p.mutate(k)},_=D=>{d(D),r(!0)},A=D=>{window.confirm("Are you sure you want to delete this workflow?")&&b.mutate(D)};return s.jsx(Sr,{children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Workflows"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage approval workflows for your organization"})]}),s.jsxs(fn,{open:t,onOpenChange:D=>{r(D),D||(d(null),f.reset(),a([]))},children:[s.jsx(cu,{asChild:!0,children:s.jsxs(se,{className:"bg-blue-600 hover:bg-blue-700",children:[s.jsx(gn,{className:"h-4 w-4 mr-2"}),"Create Workflow"]})}),s.jsxs(hn,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[s.jsx(mn,{children:s.jsx(pn,{className:"text-xl font-semibold text-gray-900",children:u?"Edit Workflow":"New Workflow"})}),s.jsx(ai,{...f,children:s.jsxs("form",{onSubmit:f.handleSubmit(S),className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx(et,{control:f.control,name:"name",render:({field:D})=>s.jsxs(Qe,{children:[s.jsx(ft,{className:"text-sm font-medium text-gray-700",children:"Workflow Name"}),s.jsx(lt,{children:s.jsx(ht,{placeholder:"eg. Leave Approval for Factory Employees",...D,className:"mt-1"})}),s.jsx(wt,{})]})}),s.jsx(et,{control:f.control,name:"effectiveDate",render:({field:D})=>s.jsxs(Qe,{children:[s.jsx(ft,{className:"text-sm font-medium text-gray-700",children:"Effective Date"}),s.jsx(lt,{children:s.jsxs("div",{className:"relative mt-1",children:[s.jsx(ht,{type:"date",placeholder:"Pick a date",...D,min:g!=null&&g.effectiveDate?new Date(g.effectiveDate).toISOString().split("T")[0]:void 0,className:"pl-10"}),s.jsx(br,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})}),s.jsx(wt,{})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsx(et,{control:f.control,name:"process",render:({field:D})=>s.jsxs(Qe,{children:[s.jsx(ft,{className:"text-sm font-medium text-gray-700",children:"Select Process"}),s.jsx(lt,{children:s.jsxs(yt,{onValueChange:D.onChange,value:D.value,children:[s.jsx(gt,{className:"mt-1",children:s.jsx(vt,{placeholder:"Select Process"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"application",children:"Application"}),s.jsx(je,{value:"pto",children:"BTO"}),s.jsx(je,{value:"comp-off",children:"Comp-off"})]})]})}),s.jsx(wt,{})]})}),s.jsx(et,{control:f.control,name:"subProcesses",render:({field:D})=>{var k,O,V,G,Y,W,P;return s.jsxs(Qe,{children:[s.jsx(ft,{className:"text-sm font-medium text-gray-700",children:"Select sub-process"}),s.jsx(lt,{children:s.jsxs("div",{className:"space-y-2",children:[f.watch("process")==="application"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"apply-leave",checked:((k=D.value)==null?void 0:k.includes("apply-leave"))||!1,onCheckedChange:E=>{const R=D.value||[];E?D.onChange([...R,"apply-leave"]):D.onChange(R.filter(I=>I!=="apply-leave"))}}),s.jsx(tt,{htmlFor:"apply-leave",className:"text-sm",children:"Apply Leave"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"withdraw-leave",checked:((O=D.value)==null?void 0:O.includes("withdraw-leave"))||!1,onCheckedChange:E=>{const R=D.value||[];E?D.onChange([...R,"withdraw-leave"]):D.onChange(R.filter(I=>I!=="withdraw-leave"))}}),s.jsx(tt,{htmlFor:"withdraw-leave",className:"text-sm",children:"Withdraw Leave"})]})]}),f.watch("process")==="pto"&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"apply-pto",checked:((V=D.value)==null?void 0:V.includes("apply-pto"))||!1,onCheckedChange:E=>{const R=D.value||[];E?D.onChange([...R,"apply-pto"]):D.onChange(R.filter(I=>I!=="apply-pto"))}}),s.jsx(tt,{htmlFor:"apply-pto",className:"text-sm",children:"Apply BTO"})]}),f.watch("process")==="comp-off"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"bank-comp-off",checked:((G=D.value)==null?void 0:G.includes("bank-comp-off"))||!1,onCheckedChange:E=>{const R=D.value||[];E?D.onChange([...R,"bank-comp-off"]):D.onChange(R.filter(I=>I!=="bank-comp-off"))}}),s.jsx(tt,{htmlFor:"bank-comp-off",className:"text-sm",children:"Bank Comp-off"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"avail-comp-off",checked:((Y=D.value)==null?void 0:Y.includes("avail-comp-off"))||!1,onCheckedChange:E=>{const R=D.value||[];E?D.onChange([...R,"avail-comp-off"]):D.onChange(R.filter(I=>I!=="avail-comp-off"))}}),s.jsx(tt,{htmlFor:"avail-comp-off",className:"text-sm",children:"Avail Comp-off"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"transfer-comp-off",checked:((W=D.value)==null?void 0:W.includes("transfer-comp-off"))||!1,onCheckedChange:E=>{const R=D.value||[];E?D.onChange([...R,"transfer-comp-off"]):D.onChange(R.filter(I=>I!=="transfer-comp-off"))}}),s.jsx(tt,{htmlFor:"transfer-comp-off",className:"text-sm",children:"Transfer to Leaves"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:"encash-comp-off",checked:((P=D.value)==null?void 0:P.includes("encash-comp-off"))||!1,onCheckedChange:E=>{const R=D.value||[];E?D.onChange([...R,"encash-comp-off"]):D.onChange(R.filter(I=>I!=="encash-comp-off"))}}),s.jsx(tt,{htmlFor:"encash-comp-off",className:"text-sm",children:"En-Cash Comp"})]})]})]})}),s.jsx(wt,{})]})}})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Review Steps"}),s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg space-y-4",children:[s.jsx("div",{className:"bg-white px-4 py-2 rounded border border-gray-200 text-center",children:s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Workflow Name"})}),n.map((D,k)=>s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900 mb-3",children:["Review ",k+1]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Title"}),s.jsx(ht,{placeholder:"eg. Leave Approval for Factory Employees",value:D.title,onChange:O=>w(D.id,{title:O.target.value}),className:"text-sm"})]}),s.jsx("div",{className:"text-xs text-gray-400 mb-3",children:D.roleIds.length===0?"No roles assigned":`${D.roleIds.length} role(s) assigned`}),s.jsx(se,{type:"button",variant:"outline",size:"sm",onClick:()=>j(k),className:"w-full text-teal-600 border-teal-600 hover:bg-teal-50 mb-3",children:"Assign Roles"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:`auto-approval-${D.id}`,checked:D.autoApproval,onCheckedChange:O=>w(D.id,{autoApproval:!!O})}),s.jsx(tt,{htmlFor:`auto-approval-${D.id}`,className:"text-xs",children:k===n.length-1?"Enable auto-approval if all conditions are met":"Forward to the next review"})]}),D.autoApproval&&s.jsxs("div",{className:"ml-6 space-y-2",children:[s.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"Auto-approve after:"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ht,{type:"number",min:"0",placeholder:"0",value:D.days||"",onChange:O=>w(D.id,{days:parseInt(O.target.value)||0}),className:"w-16 h-8 text-xs"}),s.jsx("span",{className:"text-xs text-gray-500",children:"days"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ht,{type:"number",min:"0",max:"23",placeholder:"0",value:D.hours||"",onChange:O=>w(D.id,{hours:parseInt(O.target.value)||0}),className:"w-16 h-8 text-xs"}),s.jsx("span",{className:"text-xs text-gray-500",children:"hours"})]})]})]})]})]},D.id))]},"workflow-flow-updated"),s.jsx("div",{className:"flex justify-center",children:s.jsxs(se,{type:"button",variant:"outline",onClick:x,className:"text-teal-600 border-teal-600 hover:bg-teal-50 border-dashed",children:[s.jsx(gn,{className:"h-4 w-4 mr-2"}),"Add Review Step"]})})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx(se,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Discard"}),s.jsx(se,{type:"submit",disabled:p.isPending||y.isPending,className:"bg-teal-600 hover:bg-teal-700",children:u?y.isPending?"Updating...":"Update Workflow":p.isPending?"Creating...":"Create Workflow"})]})]})})]})]})]}),s.jsx("div",{className:"space-y-4",children:h.length===0?s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-8 text-center",children:[s.jsx(ki,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No workflows created yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first workflow to manage approval processes"}),s.jsxs(se,{onClick:()=>r(!0),className:"bg-blue-600 hover:bg-blue-700",children:[s.jsx(gn,{className:"h-4 w-4 mr-2"}),"Create Workflow"]})]})}):h.map(D=>s.jsx(Ce,{children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium",children:D.name}),s.jsx("p",{className:"text-sm text-gray-600",children:D.description}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Process: ",D.process," | Sub-process: ",D.subProcess]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Lt,{variant:D.isActive?"default":"secondary",children:D.isActive?"Active":"Inactive"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>_(D),className:"text-blue-600 hover:text-blue-700",children:s.jsx(ki,{className:"h-4 w-4"})}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>A(D.id),className:"text-red-600 hover:text-red-700",disabled:b.isPending,children:s.jsx(ua,{className:"h-4 w-4"})})]})]})]})})},D.id))}),s.jsx(hMe,{open:i,onOpenChange:o,onAssign:v,selectedRoleIds:l!==null?((C=n[l])==null?void 0:C.roleIds)||[]:[]})]})})}function hMe({open:e,onOpenChange:t,onAssign:r,selectedRoleIds:n}){const[a,i]=N.useState(n),[o,l]=N.useState("");N.useEffect(()=>{console.log("[AssignRolesDialog] selectedRoleIds prop changed:",n),console.log("[AssignRolesDialog] typeof selectedRoleIds:",typeof n),console.log("[AssignRolesDialog] Array.isArray(selectedRoleIds):",Array.isArray(n)),i(n||[])},[n]),N.useEffect(()=>{e&&(console.log("[AssignRolesDialog] Dialog opened, setting tempSelectedRoles to:",n),i(n||[]))},[e,n]);const{data:c=[]}=Fe({queryKey:["/api/roles"]});console.log("[AssignRolesDialog] Available roles from API:",c),console.log("[AssignRolesDialog] Current tempSelectedRoles:",a);const u=c.filter(h=>h.name.toLowerCase().includes(o.toLowerCase())),d=()=>{r(a),t(!1)},f=h=>{i(m=>m.includes(h)?m.filter(g=>g!==h):[...m,h])};return s.jsx(fn,{open:e,onOpenChange:t,children:s.jsxs(hn,{className:"max-w-md",children:[s.jsx(mn,{children:s.jsx(pn,{children:"Assign Roles"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Xf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(ht,{placeholder:"Search roles...",value:o,onChange:h=>l(h.target.value),className:"pl-10"})]}),s.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:u.map(h=>s.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded",children:[s.jsx(Pt,{checked:a.includes(h.id),onCheckedChange:()=>f(h.id)}),s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"font-medium text-sm",children:h.name})})]},h.id))}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(se,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(se,{onClick:d,children:["Assign (",a.length,")"]})]})]})]})})}function mMe(){return s.jsx(Sr,{children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Role Management"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage roles and permissions for your organization."})]}),s.jsx(o$,{onNext:()=>{},onPrevious:()=>{},showNavigation:!1})]})})}function pMe(){return s.jsx(Sr,{children:s.jsx("div",{className:"p-6",children:s.jsx(l$,{onNext:()=>{},onPrevious:()=>{},isLast:!1,isLoading:!1,showNavigation:!1})})})}function gMe(){return s.jsx(Sr,{children:s.jsx("div",{className:"p-6",children:s.jsx(c$,{onNext:()=>{},onPrevious:()=>{},isLast:!1,isLoading:!1,showNavigation:!1})})})}function xMe(){return s.jsx(Sr,{children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Leave Types Configuration"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage leave types, variants, and employee assignments for your organization."})]}),s.jsx(i$,{onNext:()=>{},onPrevious:()=>{},showNavigation:!1})]})})}const yMe=e=>({heart:Ev,smile:Zp,umbrella:Cv,baby:Sv,users:Bn,user:uf,calendar:br,stethoscope:Av})[e]||br,Ub=({children:e})=>{const t=[{id:1,name:"Effective Date",status:"completed"},{id:2,name:"Leave Types",status:"current"},{id:3,name:"Comp off",status:"upcoming"},{id:4,name:"BTO",status:"upcoming"},{id:5,name:"Import Leave Data",status:"upcoming"},{id:6,name:"Roles",status:"upcoming"},{id:7,name:"Workflow",status:"upcoming"}];return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsxs("div",{className:"w-80 bg-white shadow-sm border-r border-gray-200 flex flex-col",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"E"})}),s.jsx("span",{className:"text-xl font-semibold text-gray-900",children:"EziiLeave"})]})}),s.jsxs("div",{className:"flex-1 p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Setup"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure your leave management system"})]}),s.jsx("div",{className:"space-y-4",children:t.map((r,n)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${r.status==="completed"?"bg-green-100 text-green-600":r.status==="current"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400"}`,children:r.status==="completed"?"✓":r.id}),s.jsx("span",{className:`text-sm font-medium ${r.status==="current"?"text-gray-900":"text-gray-500"}`,children:r.name})]},r.id))})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:e})]})};function vMe(){const[,e]=UR("/leave-types/:leaveTypeName"),[t]=qf(),[r,n]=N.useState(!1),[a,i]=N.useState(null),{toast:o}=Vr(),l=(e==null?void 0:e.leaveTypeName)||"",c=decodeURIComponent(l),u=t.includes("?setup=true"),{data:d=[],isLoading:f}=Fe({queryKey:["/api/leave-variants"]}),{data:h=[]}=Fe({queryKey:["/api/leave-types"]}),m=h.find(S=>S.name===c),g=d.filter(S=>S.leaveTypeName===c),p=Ut({mutationFn:async S=>await Ct("DELETE",`/api/leave-variants/${S}`),onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/leave-variants"]}),o({title:"Success",description:"Variant deleted successfully."})},onError:S=>{console.error("Delete variant error:",S),o({title:"Error",description:"Failed to delete variant. Please try again.",variant:"destructive"})}}),y=()=>{i(null),n(!0)},b=S=>{i(S),n(!0)},x=S=>{confirm("Are you sure you want to delete this variant?")&&p.mutate(S)},w=()=>s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-lg",children:"Loading..."})}),v=()=>s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-lg text-red-600",children:"Leave type not found"})});if(f)return u?s.jsx(Ub,{children:s.jsx(w,{})}):s.jsx(Sr,{children:s.jsx(w,{})});if(!m)return u?s.jsx(Ub,{children:s.jsx(v,{})}):s.jsx(Sr,{children:s.jsx(v,{})});const j=()=>s.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(se,{variant:"outline",onClick:()=>window.history.back(),className:"p-2",children:s.jsx(Nv,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:`${m.color}20`},children:(()=>{const S=yMe(m.icon);return s.jsx(S,{className:"w-6 h-6",style:{color:m.color}})})()}),s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:c})]})]}),u&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(se,{variant:"outline",children:"Previous"}),s.jsx(se,{children:"Next"})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Variants"}),g.length===0?s.jsxs(Ce,{className:"p-8 text-center",children:[s.jsx("div",{className:"text-gray-500 mb-4",children:"No variants created for this leave type"}),s.jsxs(se,{onClick:y,className:"bg-green-600 hover:bg-green-700",children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Create Leave Variant"]})]}):s.jsxs("div",{className:"space-y-4",children:[g.map(S=>{var _;return s.jsx(Ce,{className:"border border-gray-200",children:s.jsx(Ie,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:S.leaveVariantName}),s.jsxs("p",{className:"text-sm text-gray-500",children:[S.paidDaysInYear," days · Applied to ",((_=S.applicableGenders)==null?void 0:_.join(", "))||"All"," Employees"]}),S.description&&s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.description})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>x(S.id),disabled:p.isPending,className:"text-red-600 border-red-300 hover:bg-red-50",children:[s.jsx(ua,{className:"w-4 h-4"}),"Delete"]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>b(S),className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[s.jsx(Nu,{className:"w-4 h-4"}),"Edit"]})]})]})})},S.id)}),s.jsxs(se,{variant:"outline",onClick:y,className:"w-full border-dashed border-2 h-16 text-green-600 border-green-300 hover:bg-green-50",children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Create Leave Variant"]})]})]}),r&&s.jsx(sT,{variant:a,leaveType:m,onClose:()=>{n(!1),i(null)}})]});return u?s.jsx(Ub,{children:s.jsx(j,{})}):s.jsx(Sr,{children:s.jsx(j,{})})}const Ii=N.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:Ge("w-full caption-bottom text-sm",e),...t})}));Ii.displayName="Table";const Mi=N.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:Ge("[&_tr]:border-b",e),...t}));Mi.displayName="TableHeader";const Ri=N.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:Ge("[&_tr:last-child]:border-0",e),...t}));Ri.displayName="TableBody";const wMe=N.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:Ge("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));wMe.displayName="TableFooter";const kr=N.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:Ge("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));kr.displayName="TableRow";const qe=N.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:Ge("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));qe.displayName="TableHead";const Ue=N.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:Ge("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Ue.displayName="TableCell";const bMe=N.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:Ge("mt-4 text-sm text-muted-foreground",e),...t}));bMe.displayName="TableCaption";function oI(){const t=J2().reportType||"dashboard",r=ET(),{employees:n}=Ru(),a=ae=>{if(!ae)return"Unknown Employee";const Ne=n.find(Se=>{var Ae;return((Ae=Se.user_id)==null?void 0:Ae.toString())===ae||Se.user_id===parseInt(ae,10)});if(Ne&&Ne.user_name)return Ne.user_name;if(Ne&&(Ne.first_name||Ne.last_name)){const Se=`${Ne.first_name||""} ${Ne.last_name||""}`.trim();if(Se)return Se}return`Employee ${ae}`},i=ae=>{switch(ae){case"balances":return"balance-report";case"leave-availed":return"leave-availed-report";case"withdrawal-rejection":return"withdrawal-rejection-report";case"collaborative-leave":return"collaborative-leave-report";case"bto-report":return"bto-report";case"comp-off-report":return"comp-off-report";default:return"balance-report"}},[o,l]=N.useState(i(t)),[c,u]=N.useState({from:new Date(2020,0,1),to:new Date(new Date().getFullYear()+1,11,31)}),[d,f]=N.useState("all"),[h,m]=N.useState("all"),[g,p]=N.useState("all"),[y,b]=N.useState(""),[x,w]=N.useState(""),[v,j]=N.useState("all"),[S,_]=N.useState("all"),[A,C]=N.useState("all"),[D,k]=N.useState(""),[O,V]=N.useState("all"),[G,Y]=N.useState("all"),[W,P]=N.useState("all");N.useEffect(()=>{l(i(t))},[t]);const E=localStorage.getItem("currentView")||"admin",{data:R=[]}=Fe({queryKey:["/api/leave-requests"],enabled:E==="admin"}),{data:I=[]}=Fe({queryKey:["/api/users"]}),{data:ee=[]}=Fe({queryKey:["/api/leave-types"]}),{data:L=[]}=Fe({queryKey:["/api/employee-leave-balances"]}),{data:q=[]}=Fe({queryKey:["/api/leave-variants"]}),{data:H=[]}=Fe({queryKey:["/api/employee-assignments"]}),{data:B=[]}=Fe({queryKey:["/api/collaborative-tasks"],enabled:E==="admin"&&o==="collaborative-leave-report"}),{data:de=[]}=Fe({queryKey:["/api/pto-requests"],enabled:E==="admin"}),{data:ce=[]}=Fe({queryKey:["/api/comp-off-requests"],enabled:E==="admin"}),{data:ge=[]}=Fe({queryKey:["/api/pto-variants"],enabled:E==="admin"}),he=()=>{let ae=R||[],Ne=I||[];if(r.isReportingManager&&r.reportees.length>0){const Se=r.reportees.map(Ae=>Ae.user_id.toString());ae=ae.filter(Ae=>{var Oe;return Se.includes((Oe=Ae.userId)==null?void 0:Oe.toString())}),Ne=Ne.filter(Ae=>{var Oe;return Se.includes((Oe=Ae.id)==null?void 0:Oe.toString())}),console.log(`[AdminReports] Filtered to ${ae.length} requests and ${Ne.length} employees for reporting manager`)}else console.log(`[AdminReports] Showing all ${ae.length} requests and ${Ne.length} employees`);return{filteredRequests:ae,filteredEmployees:Ne}},K=()=>{const{filteredRequests:ae}=he(),Ne=ae,Se=Ne.length,Ae=Ne.filter(be=>be.status==="approved").length,Oe=Ne.filter(be=>be.status==="pending").length,M=Ne.filter(be=>be.status==="rejected").length,oe=Ne.filter(be=>be.status==="approved").reduce((be,U)=>be+(parseFloat(U.workingDays)||0),0);return{totalRequests:Se,approvedRequests:Ae,pendingRequests:Oe,rejectedRequests:M,totalDaysTaken:oe}},fe=()=>{K();const{filteredRequests:ae}=he();switch(o){case"leave-availed-report":return s.jsxs(Ce,{children:[s.jsxs(Tt,{children:[s.jsx(Et,{children:"Leave Availed Report"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Detailed report of all approved leave applications with comprehensive employee and leave details"})]}),s.jsxs(Ie,{className:"p-0",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ii,{children:[s.jsx(Mi,{children:s.jsxs(kr,{className:"bg-gray-50",children:[s.jsx(qe,{className:"font-semibold",children:"Employee Number"}),s.jsx(qe,{className:"font-semibold",children:"Employee Name"}),s.jsx(qe,{className:"font-semibold",children:"Department"}),s.jsx(qe,{className:"font-semibold",children:"Designation"}),s.jsx(qe,{className:"font-semibold",children:"Application ID"}),s.jsx(qe,{className:"font-semibold",children:"From Date"}),s.jsx(qe,{className:"font-semibold",children:"From Date: Is Half Day"}),s.jsx(qe,{className:"font-semibold",children:"To Date"}),s.jsx(qe,{className:"font-semibold",children:"To Date: Is Half Day"}),s.jsx(qe,{className:"font-semibold",children:"Total Leave Days"}),s.jsx(qe,{className:"font-semibold",children:"Approved By"}),s.jsx(qe,{className:"font-semibold",children:"Leave Type"})]})}),s.jsx(Ri,{children:(()=>{const M=ae.filter(oe=>oe.status==="approved");return M.length===0?s.jsx(kr,{children:s.jsx(Ue,{colSpan:12,className:"py-8 px-4 text-center text-muted-foreground",children:"No approved leave requests found for the selected period"})}):M.map((oe,be)=>{const U=n.find(rt=>{var Mt;return((Mt=rt.user_id)==null?void 0:Mt.toString())===oe.userId||rt.user_id===parseInt(oe.userId,10)}),te=(U==null?void 0:U.employee_number)||oe.userId,xe=a(oe.userId),le=(U==null?void 0:U.department)||"N/A",ye=(U==null?void 0:U.designation)||"N/A",ve=oe.startDate?dt(new Date(oe.startDate),"dd-MMM-yyyy"):"N/A",ke=oe.endDate?dt(new Date(oe.endDate),"dd-MMM-yyyy"):"N/A",it=parseFloat(oe.workingDays)||0,ot=oe.fromHalfDay||(it%1!==0?"Yes":"No"),Nt=oe.toHalfDay||(it%1!==0&&oe.startDate===oe.endDate?"Yes":"No"),Le=oe.approvedByName||oe.approvedBy||"System Auto-Approval";return s.jsxs(kr,{className:be%2===0?"bg-white":"bg-gray-50",children:[s.jsx(Ue,{className:"font-medium",children:te}),s.jsx(Ue,{children:xe}),s.jsx(Ue,{children:le}),s.jsx(Ue,{children:ye}),s.jsx(Ue,{children:s.jsx(Lt,{variant:"outline",className:"font-mono text-xs",children:oe.id})}),s.jsx(Ue,{children:ve}),s.jsx(Ue,{className:"text-center",children:s.jsx(Lt,{variant:ot==="Yes"?"secondary":"outline",className:"text-xs",children:ot})}),s.jsx(Ue,{children:ke}),s.jsx(Ue,{className:"text-center",children:s.jsx(Lt,{variant:Nt==="Yes"?"secondary":"outline",className:"text-xs",children:Nt})}),s.jsx(Ue,{className:"text-center",children:s.jsxs(Lt,{variant:"outline",className:"font-semibold",children:[it," days"]})}),s.jsx(Ue,{children:Le}),s.jsx(Ue,{children:s.jsx(Lt,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:oe.leaveTypeName||"Unknown Leave Type"})})]},`leave-${oe.id}-${be}`)})})()})]})}),s.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total Applications"}),s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:ae.filter(M=>M.status==="approved").length})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Total Days Availed"}),s.jsx("div",{className:"text-2xl font-bold text-green-900",children:ae.filter(M=>M.status==="approved").reduce((M,oe)=>M+(parseFloat(oe.workingDays)||0),0).toFixed(1)})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Unique Employees"}),s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:new Set(ae.filter(M=>M.status==="approved").map(M=>M.userId)).size})]}),s.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Avg Days per Application"}),s.jsx("div",{className:"text-2xl font-bold text-orange-900",children:(()=>{const M=ae.filter(be=>be.status==="approved"),oe=M.reduce((be,U)=>be+(parseFloat(U.workingDays)||0),0);return M.length>0?(oe/M.length).toFixed(1):"0.0"})()})]})]})]})]});case"withdrawal-rejection-report":return s.jsxs(Ce,{children:[s.jsxs(Tt,{children:[s.jsx(Et,{children:"Withdrawal Rejection Report"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Comprehensive report of all withdrawn and rejected leave applications with balance impact analysis"})]}),s.jsxs(Ie,{className:"p-0",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ii,{children:[s.jsx(Mi,{children:s.jsxs(kr,{className:"bg-gray-50",children:[s.jsx(qe,{className:"font-semibold",children:"Employee Number"}),s.jsx(qe,{className:"font-semibold",children:"Employee Name"}),s.jsx(qe,{className:"font-semibold",children:"Department"}),s.jsx(qe,{className:"font-semibold",children:"Designation"}),s.jsx(qe,{className:"font-semibold",children:"Application ID"}),s.jsx(qe,{className:"font-semibold",children:"Application Date"}),s.jsx(qe,{className:"font-semibold",children:"Leave Period"}),s.jsx(qe,{className:"font-semibold",children:"Total Leave Days"}),s.jsx(qe,{className:"font-semibold",children:"Leave Type"}),s.jsx(qe,{className:"font-semibold",children:"Status Before Action"}),s.jsx(qe,{className:"font-semibold",children:"Balance Before Action"}),s.jsx(qe,{className:"font-semibold",children:"Action"}),s.jsx(qe,{className:"font-semibold",children:"Balance After Action"}),s.jsx(qe,{className:"font-semibold",children:"Action Initiated By"}),s.jsx(qe,{className:"font-semibold",children:"Reason"})]})}),s.jsx(Ri,{children:(()=>{const M=ae.filter(oe=>oe.status==="withdrawn"||oe.status==="rejected"||oe.status==="withdrawal_pending"||oe.status==="withdrawal_approved");return M.length===0?s.jsx(kr,{children:s.jsx(Ue,{colSpan:15,className:"py-8 px-4 text-center text-muted-foreground",children:"No withdrawn or rejected leave requests found for the selected period"})}):M.map((oe,be)=>{const U=n.find(Jt=>{var Gr;return((Gr=Jt.user_id)==null?void 0:Gr.toString())===oe.userId||Jt.user_id===parseInt(oe.userId,10)}),te=(U==null?void 0:U.employee_number)||oe.userId,xe=a(oe.userId),le=(U==null?void 0:U.department)||"N/A",ye=(U==null?void 0:U.designation)||"N/A",ve=oe.createdAt?dt(new Date(oe.createdAt),"dd-MMM-yyyy"):"N/A",ke=oe.startDate?dt(new Date(oe.startDate),"dd-MMM-yyyy"):"N/A",it=oe.endDate?dt(new Date(oe.endDate),"dd-MMM-yyyy"):"N/A",ot=ke===it?ke:`${ke} to ${it}`,Nt=parseFloat(oe.workingDays)||0;let Le="pending",rt="Unknown",Mt="System",at=oe.rejectionReason||oe.withdrawalReason||"No reason provided";switch(oe.status){case"rejected":Le="pending",rt="Rejected",Mt=oe.rejectedBy||oe.actionBy||"Admin",at=oe.rejectionReason||"No reason provided";break;case"withdrawn":Le=oe.previousStatus||"pending",rt="Withdrawn",Mt=oe.withdrawnBy||xe||"Employee",at=oe.withdrawalReason||"Employee initiated withdrawal";break;case"withdrawal_pending":Le="approved",rt="Withdrawal Requested",Mt=oe.withdrawnBy||xe||"Employee",at=oe.withdrawalReason||"Employee requested withdrawal";break;case"withdrawal_approved":Le="approved",rt="Withdrawal Approved",Mt=oe.withdrawalApprovedBy||"Admin",at=oe.withdrawalReason||"Withdrawal approved by admin";break}let $t="N/A",Ke="N/A";oe.status==="rejected"||oe.status==="withdrawn"&&Le==="pending"?($t="No impact",Ke="No impact"):oe.status==="withdrawn"||oe.status==="withdrawal_approved"?($t=`Reduced by ${Nt} days`,Ke=`Restored ${Nt} days`):oe.status==="withdrawal_pending"&&($t=`Reduced by ${Nt} days`,Ke="Pending restoration");const Dt=Jt=>{switch(Jt){case"rejected":return"destructive";case"withdrawn":return"secondary";case"withdrawal_pending":return"outline";case"withdrawal_approved":return"default";default:return"outline"}};return s.jsxs(kr,{className:be%2===0?"bg-white":"bg-gray-50",children:[s.jsx(Ue,{className:"font-medium",children:te}),s.jsx(Ue,{children:xe}),s.jsx(Ue,{children:le}),s.jsx(Ue,{children:ye}),s.jsx(Ue,{children:s.jsx(Lt,{variant:"outline",className:"font-mono text-xs",children:oe.id})}),s.jsx(Ue,{children:ve}),s.jsx(Ue,{children:ot}),s.jsx(Ue,{className:"text-center",children:s.jsxs(Lt,{variant:"outline",className:"font-semibold",children:[Nt," days"]})}),s.jsx(Ue,{children:s.jsx(Lt,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:oe.leaveTypeName||"Unknown Leave Type"})}),s.jsx(Ue,{children:s.jsx(Lt,{variant:"outline",className:"capitalize",children:Le})}),s.jsx(Ue,{className:"text-sm",children:$t}),s.jsx(Ue,{children:s.jsx(Lt,{variant:Dt(oe.status),className:"capitalize",children:rt})}),s.jsx(Ue,{className:"text-sm",children:Ke}),s.jsx(Ue,{children:Mt}),s.jsx(Ue,{className:"max-w-xs",children:s.jsx("div",{className:"text-sm text-gray-600 truncate",title:at,children:at})})]},`withdraw-reject-${oe.id}-${be}`)})})()})]})}),s.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Total Rejected"}),s.jsx("div",{className:"text-2xl font-bold text-red-900",children:ae.filter(M=>M.status==="rejected").length})]}),s.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-orange-600 font-medium",children:"Total Withdrawn"}),s.jsx("div",{className:"text-2xl font-bold text-orange-900",children:ae.filter(M=>M.status==="withdrawn"||M.status==="withdrawal_approved").length})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-yellow-600 font-medium",children:"Withdrawal Pending"}),s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:ae.filter(M=>M.status==="withdrawal_pending").length})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Days Affected"}),s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:ae.filter(M=>M.status==="rejected"||M.status==="withdrawn"||M.status==="withdrawal_pending"||M.status==="withdrawal_approved").reduce((M,oe)=>M+(parseFloat(oe.workingDays)||0),0).toFixed(1)})]})]})]})]});case"collaborative-leave-report":const Se=(()=>{let M=B||[];if(console.log("🔍 [COLLABORATIVE TASKS DEBUG] Raw tasks from API:",{totalTasks:M.length,rawData:M.slice(0,3).map(oe=>({id:oe.id,status:oe.status,assigneeName:oe.assigneeName,createdAt:oe.createdAt,taskDescription:oe.taskDescription})),dateRangeFilter:c,statusFilter:g,assigneeFilter:y}),console.log("📅 [DATE FILTER] Skipping date filter for collaborative tasks to show all available data"),g!=="all"){const oe=M.length;M=M.filter(be=>be.status===g),console.log(`📊 [STATUS FILTER] Filtered ${oe} → ${M.length} tasks for status: ${g}`)}if(y.trim()){const oe=M.length;M=M.filter(be=>{var U,te;return((U=be.assigneeName)==null?void 0:U.toLowerCase().includes(y.toLowerCase()))||((te=be.assigneeEmail)==null?void 0:te.toLowerCase().includes(y.toLowerCase()))}),console.log(`👤 [ASSIGNEE FILTER] Filtered ${oe} → ${M.length} tasks for filter: ${y}`)}return console.log("✅ [FINAL FILTERED TASKS]:",M.length),M})();return s.jsxs(Ce,{children:[s.jsxs(Tt,{children:[s.jsxs(Et,{className:"flex items-center gap-2",children:[s.jsx(Bn,{className:"w-5 h-5"}),"Collaborative Leave Report"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Track all collaborative leave task assignments across the organization with current statuses and performance metrics"})]}),s.jsxs(Ie,{className:"p-0",children:[s.jsx("div",{className:"p-6 border-b bg-gray-50",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Bn,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Tasks"})]}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Se.length})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qn,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Completed"})]}),s.jsx("p",{className:"text-2xl font-bold text-green-700",children:Se.filter(M=>M.status==="done").length})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(An,{className:"w-4 h-4 text-yellow-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Pending"})]}),s.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:Se.filter(M=>["pending","accepted"].includes(M.status)).length})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ho,{className:"w-4 h-4 text-red-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Rejected"})]}),s.jsx("p",{className:"text-2xl font-bold text-red-700",children:Se.filter(M=>["rejected","not_done"].includes(M.status)).length})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ii,{children:[s.jsx(Mi,{children:s.jsxs(kr,{className:"bg-gray-50",children:[s.jsx(qe,{className:"font-semibold",children:"Task ID"}),s.jsx(qe,{className:"font-semibold",children:"Leave Request ID"}),s.jsx(qe,{className:"font-semibold",children:"Assigned By"}),s.jsx(qe,{className:"font-semibold",children:"Assignee Name"}),s.jsx(qe,{className:"font-semibold",children:"Assignee Email"}),s.jsx(qe,{className:"font-semibold",children:"Task Description"}),s.jsx(qe,{className:"font-semibold",children:"Support Date"}),s.jsx(qe,{className:"font-semibold",children:"Status"}),s.jsx(qe,{className:"font-semibold",children:"Accepted At"}),s.jsx(qe,{className:"font-semibold",children:"Last Updated"}),s.jsx(qe,{className:"font-semibold",children:"Status Comments"})]})}),s.jsx(Ri,{children:Se.length===0?s.jsx(kr,{children:s.jsx(Ue,{colSpan:11,className:"text-center py-8 text-gray-500",children:"No collaborative leave tasks found for the selected criteria."})}):Se.map((M,oe)=>{const be=te=>{switch(te){case"done":return s.jsx(Lt,{className:"bg-green-100 text-green-800 border-green-200",children:"Completed"});case"accepted":return s.jsx(Lt,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"In Progress"});case"pending":return s.jsx(Lt,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"Pending"});case"rejected":return s.jsx(Lt,{className:"bg-red-100 text-red-800 border-red-200",children:"Rejected"});case"not_done":return s.jsx(Lt,{className:"bg-gray-100 text-gray-800 border-gray-200",children:"Not Done"});default:return s.jsx(Lt,{variant:"outline",children:te})}},U=M.expectedSupportDateFrom&&M.expectedSupportDateTo?`${dt(new Date(M.expectedSupportDateFrom),"dd-MMM-yyyy")} to ${dt(new Date(M.expectedSupportDateTo),"dd-MMM-yyyy")}`:M.expectedSupportDate?dt(new Date(M.expectedSupportDate),"dd-MMM-yyyy"):"Not specified";return s.jsxs(kr,{className:oe%2===0?"bg-white":"bg-gray-50",children:[s.jsx(Ue,{className:"font-medium",children:s.jsx(Lt,{variant:"outline",className:"font-mono text-xs",children:M.id})}),s.jsx(Ue,{children:s.jsx(Lt,{variant:"outline",className:"font-mono text-xs",children:M.leaveRequestId})}),s.jsx(Ue,{className:"font-medium",children:a(M.leaveRequesterId)||"Unknown"}),s.jsx(Ue,{className:"font-medium",children:M.assigneeName}),s.jsx(Ue,{className:"text-sm text-gray-600",children:M.assigneeEmail}),s.jsx(Ue,{className:"max-w-xs",children:s.jsx("div",{className:"truncate",title:M.taskDescription,children:M.taskDescription})}),s.jsx(Ue,{className:"text-sm",children:U}),s.jsx(Ue,{children:be(M.status)}),s.jsx(Ue,{className:"text-sm",children:M.acceptedAt?dt(new Date(M.acceptedAt),"dd-MMM-yyyy HH:mm"):"Not accepted"}),s.jsx(Ue,{className:"text-sm",children:M.lastStatusUpdate?dt(new Date(M.lastStatusUpdate),"dd-MMM-yyyy HH:mm"):"No updates"}),s.jsx(Ue,{className:"max-w-xs",children:s.jsx("div",{className:"truncate",title:M.statusComments||"No comments",children:M.statusComments||"No comments"})})]},`task-${M.id}-${oe}`)})})]})})]})]});case"bto-report":let Ae=de;if(x&&(Ae=Ae.filter(M=>a(M.userId).toLowerCase().includes(x.toLowerCase()))),v!=="all"&&(Ae=Ae.filter(M=>M.status===v)),S!=="all"){const M=new Date,oe=new Date;switch(S){case"last-30":oe.setDate(M.getDate()-30);break;case"last-90":oe.setDate(M.getDate()-90);break;case"this-year":oe.setMonth(0,1);break;default:oe.setFullYear(1900)}Ae=Ae.filter(be=>be.createdAt&&new Date(be.createdAt)>=oe)}return A!=="all"&&(Ae=Ae.filter(M=>{var oe;return((oe=M.ptoVariantName)==null?void 0:oe.toLowerCase())===A.toLowerCase()})),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"BTO Report Filters"})}),s.jsxs(Ie,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Employee Name"}),s.jsx("input",{type:"text",placeholder:"Search by employee name...",value:x,onChange:M=>w(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Status"}),s.jsxs(yt,{value:v,onValueChange:j,children:[s.jsx(gt,{children:s.jsx(vt,{placeholder:"All Status"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"all",children:"All Status"}),s.jsx(je,{value:"approved",children:"Approved"}),s.jsx(je,{value:"pending",children:"Pending"}),s.jsx(je,{value:"rejected",children:"Rejected"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),s.jsxs(yt,{value:S,onValueChange:_,children:[s.jsx(gt,{children:s.jsx(vt,{placeholder:"Select period"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"last-30",children:"Last 30 days"}),s.jsx(je,{value:"last-90",children:"Last 90 days"}),s.jsx(je,{value:"this-year",children:"This year"}),s.jsx(je,{value:"all",children:"All time"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"BTO Type"}),s.jsxs(yt,{value:A,onValueChange:C,children:[s.jsx(gt,{children:s.jsx(vt,{placeholder:"All types"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"all",children:"All Types"}),ge==null?void 0:ge.map(M=>s.jsx(je,{value:M.name.toLowerCase(),children:M.name},M.id))]})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",Ae.length," of ",de.length," ","BTO requests"]}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>{w(""),j("all"),_("all"),C("all")},children:"Clear Filters"})]})]})]}),s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-0",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ii,{children:[s.jsx(Mi,{children:s.jsxs(kr,{className:"bg-gray-50",children:[s.jsx(qe,{className:"font-semibold",children:"Employee Name"}),s.jsx(qe,{className:"font-semibold",children:"Application ID"}),s.jsx(qe,{className:"font-semibold",children:"BTO Type"}),s.jsx(qe,{className:"font-semibold",children:"From Date"}),s.jsx(qe,{className:"font-semibold",children:"To Date"}),s.jsx(qe,{className:"font-semibold",children:"Total Hours"}),s.jsx(qe,{className:"font-semibold",children:"Status"}),s.jsx(qe,{className:"font-semibold",children:"Applied Date"}),s.jsx(qe,{className:"font-semibold",children:"Reason"})]})}),s.jsx(Ri,{children:Ae.length===0?s.jsx(kr,{children:s.jsx(Ue,{colSpan:9,className:"py-8 px-4 text-center text-muted-foreground",children:"No BTO requests found for this organization"})}):Ae.map((M,oe)=>{var be,U;return s.jsxs(kr,{className:"hover:bg-gray-50",children:[s.jsx(Ue,{className:"font-medium",children:a(M.userId)}),s.jsx(Ue,{children:s.jsxs(Lt,{variant:"outline",className:"bg-blue-50 text-blue-800",children:["BTO-",M.id]})}),s.jsx(Ue,{children:s.jsx(Lt,{variant:"secondary",children:M.ptoVariantName||"Unknown"})}),s.jsx(Ue,{children:M.fromDate?new Date(M.fromDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"}),s.jsx(Ue,{children:M.toDate?new Date(M.toDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"}),s.jsx(Ue,{children:s.jsx("span",{className:"font-mono text-sm",children:M.totalHours||M.hours||"N/A"})}),s.jsx(Ue,{children:s.jsx(Lt,{variant:M.status==="approved"?"default":M.status==="pending"?"secondary":M.status==="rejected"?"destructive":"outline",className:M.status==="approved"?"bg-green-100 text-green-800":M.status==="pending"?"bg-yellow-100 text-yellow-800":M.status==="rejected"?"bg-red-100 text-red-800":"",children:((be=M.status)==null?void 0:be.charAt(0).toUpperCase())+((U=M.status)==null?void 0:U.slice(1))||"Unknown"})}),s.jsx(Ue,{className:"text-sm text-muted-foreground",children:M.createdAt?new Date(M.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"N/A"}),s.jsx(Ue,{className:"max-w-xs",children:s.jsx("div",{className:"text-sm text-muted-foreground truncate",title:M.reason,children:M.reason||"No reason provided"})})]},M.id||oe)})})]})}),s.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4 p-6 bg-gray-50",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Total BTO Requests"}),s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Ae.length})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Approved"}),s.jsx("div",{className:"text-2xl font-bold text-green-900",children:Ae.filter(M=>M.status==="approved").length})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-yellow-600 font-medium",children:"Pending"}),s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:Ae.filter(M=>M.status==="pending").length})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Rejected"}),s.jsx("div",{className:"text-2xl font-bold text-red-900",children:Ae.filter(M=>M.status==="rejected").length})]})]})]})})]});case"comp-off-report":let Oe=ce;if(D&&(Oe=Oe.filter(M=>a(M.userId).toLowerCase().includes(D.toLowerCase()))),O!=="all"&&(Oe=Oe.filter(M=>M.status===O)),G!=="all"){const M=new Date,oe=new Date;switch(G){case"last-30":oe.setDate(M.getDate()-30);break;case"last-90":oe.setDate(M.getDate()-90);break;case"this-year":oe.setMonth(0,1);break;default:oe.setFullYear(1900)}Oe=Oe.filter(be=>be.createdAt&&new Date(be.createdAt)>=oe)}return W!=="all"&&(Oe=Oe.filter(M=>{var oe;return(oe=M.type)==null?void 0:oe.toLowerCase().includes(W.toLowerCase())})),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Comp-off Report Filters"})}),s.jsxs(Ie,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Employee Name"}),s.jsx("input",{type:"text",placeholder:"Search by employee name...",value:D,onChange:M=>k(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Status"}),s.jsxs(yt,{value:O,onValueChange:V,children:[s.jsx(gt,{children:s.jsx(vt,{placeholder:"All Status"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"all",children:"All Status"}),s.jsx(je,{value:"approved",children:"Approved"}),s.jsx(je,{value:"pending",children:"Pending"}),s.jsx(je,{value:"rejected",children:"Rejected"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),s.jsxs(yt,{value:G,onValueChange:Y,children:[s.jsx(gt,{children:s.jsx(vt,{placeholder:"Select period"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"last-30",children:"Last 30 days"}),s.jsx(je,{value:"last-90",children:"Last 90 days"}),s.jsx(je,{value:"this-year",children:"This year"}),s.jsx(je,{value:"all",children:"All time"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Comp-off Type"}),s.jsxs(yt,{value:W,onValueChange:P,children:[s.jsx(gt,{children:s.jsx(vt,{placeholder:"All types"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"all",children:"All Types"}),s.jsx(je,{value:"weekend",children:"Weekend Work"}),s.jsx(je,{value:"holiday",children:"Holiday Work"}),s.jsx(je,{value:"overtime",children:"Overtime"})]})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",Oe.length," of"," ",ce.length," comp-off requests"]}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>{k(""),V("all"),Y("all"),P("all")},children:"Clear Filters"})]})]})]}),s.jsx(Ce,{children:s.jsxs(Ie,{className:"p-0",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ii,{children:[s.jsx(Mi,{children:s.jsxs(kr,{className:"bg-gray-50",children:[s.jsx(qe,{className:"font-semibold",children:"Employee Name"}),s.jsx(qe,{className:"font-semibold",children:"Application ID"}),s.jsx(qe,{className:"font-semibold",children:"Type"}),s.jsx(qe,{className:"font-semibold",children:"Work Date"}),s.jsx(qe,{className:"font-semibold",children:"Comp-off Date"}),s.jsx(qe,{className:"font-semibold",children:"Total Days"}),s.jsx(qe,{className:"font-semibold",children:"Status"}),s.jsx(qe,{className:"font-semibold",children:"Applied Date"}),s.jsx(qe,{className:"font-semibold",children:"Reason"})]})}),s.jsx(Ri,{children:Oe.length===0?s.jsx(kr,{children:s.jsx(Ue,{colSpan:9,className:"py-8 px-4 text-center text-muted-foreground",children:"No comp-off requests found for this organization"})}):Oe.map((M,oe)=>{var be,U,te,xe;return s.jsxs(kr,{className:"hover:bg-gray-50",children:[s.jsx(Ue,{className:"font-medium",children:a(M.userId)}),s.jsx(Ue,{children:s.jsxs(Lt,{variant:"outline",className:"bg-purple-50 text-purple-800",children:["CO-",M.id]})}),s.jsx(Ue,{children:s.jsx(Lt,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:((be=M.type)==null?void 0:be.charAt(0).toUpperCase())+((U=M.type)==null?void 0:U.slice(1))||"Standard"})}),s.jsx(Ue,{children:M.workDate?new Date(M.workDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"}),s.jsx(Ue,{children:M.compOffDate?new Date(M.compOffDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"}),s.jsx(Ue,{children:s.jsxs("span",{className:"font-mono text-sm",children:[M.days||"1"," day",M.days&&M.days>1?"s":""]})}),s.jsx(Ue,{children:s.jsx(Lt,{variant:M.status==="approved"?"default":M.status==="pending"?"secondary":M.status==="rejected"?"destructive":"outline",className:M.status==="approved"?"bg-green-100 text-green-800":M.status==="pending"?"bg-yellow-100 text-yellow-800":M.status==="rejected"?"bg-red-100 text-red-800":"",children:((te=M.status)==null?void 0:te.charAt(0).toUpperCase())+((xe=M.status)==null?void 0:xe.slice(1))||"Unknown"})}),s.jsx(Ue,{className:"text-sm text-muted-foreground",children:M.createdAt?new Date(M.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"N/A"}),s.jsx(Ue,{className:"max-w-xs",children:s.jsx("div",{className:"text-sm text-muted-foreground truncate",title:M.reason,children:M.reason||"No reason provided"})})]},M.id||oe)})})]})}),s.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4 p-6 bg-gray-50",children:[s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Total Comp-off Requests"}),s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Oe.length})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Approved"}),s.jsx("div",{className:"text-2xl font-bold text-green-900",children:Oe.filter(M=>M.status==="approved").length})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-yellow-600 font-medium",children:"Pending"}),s.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:Oe.filter(M=>M.status==="pending").length})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-red-600 font-medium",children:"Rejected"}),s.jsx("div",{className:"text-2xl font-bold text-red-900",children:Oe.filter(M=>M.status==="rejected").length})]})]})]})})]});default:return s.jsx("div",{children:"Select a report type to view data."})}};return s.jsx(Sr,{children:s.jsx("div",{className:"container mx-auto py-8",children:s.jsxs("div",{className:"space-y-6",children:[o!=="bto-report"&&o!=="comp-off-report"&&s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsx(Et,{className:"text-2xl",children:"Admin Reports"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Comprehensive leave management analytics and insights"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(se,{variant:"outline",size:"sm",children:[s.jsx(Tv,{className:"h-4 w-4 mr-2"}),"Filter"]}),s.jsxs(se,{variant:"outline",size:"sm",children:[s.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),s.jsx(Ie,{children:o==="collaborative-leave-report"?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Task Status"}),s.jsxs(yt,{value:g,onValueChange:p,children:[s.jsx(gt,{children:s.jsx(vt,{placeholder:"Select status"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"all",children:"All Statuses"}),s.jsx(je,{value:"pending",children:"Pending"}),s.jsx(je,{value:"accepted",children:"Accepted"}),s.jsx(je,{value:"done",children:"Completed"}),s.jsx(je,{value:"rejected",children:"Rejected"}),s.jsx(je,{value:"not_done",children:"Not Done"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Assignee Name"}),s.jsx("input",{type:"text",placeholder:"Search by name or email...",value:y,onChange:ae=>b(ae.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[dt(c.from,"MMM dd, yyyy")," -"," ",dt(c.to,"MMM dd, yyyy")]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Actions"}),s.jsx("div",{className:"flex gap-2",children:s.jsx(se,{variant:"outline",size:"sm",onClick:()=>{p("all"),b("")},children:"Clear Filters"})})]})]}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Department"}),s.jsxs(yt,{value:d,onValueChange:f,children:[s.jsx(gt,{children:s.jsx(vt,{placeholder:"Select department"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"all",children:"All Departments"}),s.jsx(je,{value:"engineering",children:"Engineering"}),s.jsx(je,{value:"hr",children:"Human Resources"}),s.jsx(je,{value:"sales",children:"Sales"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Leave Type"}),s.jsxs(yt,{value:h,onValueChange:m,children:[s.jsx(gt,{children:s.jsx(vt,{placeholder:"Select leave type"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"all",children:"All Leave Types"}),ee.map(ae=>s.jsx(je,{value:ae.id.toString(),children:ae.name},ae.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[dt(c.from,"MMM dd, yyyy")," -"," ",dt(c.to,"MMM dd, yyyy")]})]})]})})]}),s.jsx("div",{className:"space-y-6",children:fe()})]})})})}function jMe(){const t=J2().reportType||"dashboard",{employees:r}=Ru(),n=()=>{const W=localStorage.getItem("user_id")||"2161",P=r.find(E=>{var R;return((R=E.user_id)==null?void 0:R.toString())===W||E.user_id===parseInt(W,10)});if(P&&P.user_name)return P.user_name;if(P&&(P.first_name||P.last_name)){const E=`${P.first_name||""} ${P.last_name||""}`.trim();if(E)return E}return`Employee ${W}`},a=W=>{switch(W){case"history":return"my-leave-history";case"balances":return"my-leave-balances";case"withdrawal-history":return"my-withdrawal-history";default:return"my-leave-history"}},[i,o]=N.useState(a(t)),[l,c]=N.useState({from:new Date(new Date().getFullYear(),0,1),to:new Date}),[u,d]=N.useState("2025"),[f,h]=N.useState("all"),[m,g]=N.useState("");N.useEffect(()=>{o(a(t))},[t]);const p=localStorage.getItem("user_id")||"2161",{data:y=[]}=Fe({queryKey:[`/api/leave-requests?userId=${p}`]}),{data:b=[]}=Fe({queryKey:[`/api/employee-leave-balances/${p}`]}),{data:x=[]}=Fe({queryKey:[`/api/leave-balance-transactions/${p}`]}),{data:w=[]}=Fe({queryKey:["/api/leave-types"]}),{data:v=[]}=Fe({queryKey:["/api/leave-variants"]}),{data:j=[]}=Fe({queryKey:["/api/employee-assignments"]}),S=()=>{const W=Array.isArray(j)?j:[],P=Array.isArray(v)?v:[],E=b||[],R=x||[],I=y||[],ee=W.filter(H=>H.userId===p&&H.assignmentType==="leave_variant"),L=ee.map(H=>H.leaveVariantId),q=P.filter(H=>L.includes(H.id));return console.log("🔍 [Employee Reports Assignment Filter]:",{userId:p,totalAssignments:W.length,userAssignments:ee.length,assignedVariantIds:L,availableVariants:q.length,variantNames:q.map(H=>H.leaveVariantName||H.leaveTypeName)}),q.map(H=>{const B=E.find(te=>te.leaveVariantId===H.id),de=R.filter(te=>te.leaveVariantId===H.id),ge=R.filter(te=>{var ve;const xe=te.transactionType==="grant"&&((ve=te.description)==null?void 0:ve.toLowerCase().includes("opening balance imported from excel")),le=te.userId===p;if(!xe||!le)return!1;if(te.leaveVariantId===H.id)return!0;const ye=q.find(ke=>ke.id===te.leaveVariantId);return(ye==null?void 0:ye.leaveTypeName)===H.leaveTypeName||(ye==null?void 0:ye.leaveTypeId)===H.leaveTypeId}).sort((te,xe)=>new Date(xe.createdAt).getTime()-new Date(te.createdAt).getTime()).reduce((te,xe)=>te+parseFloat(xe.amount||"0"),0),he=H.grantLeaves==="after_earning",K=B?parseFloat(B.totalEntitlement||"0"):0;let fe=0;if(he){const xe=new Date().getMonth()+1-1;fe=(K||H.annualLeaveAllocation||0)/12*xe}else{const te=K||H.annualLeaveAllocation||0;if(H.grantFrequency==="per_year")fe=te;else{const xe=new Date().getMonth()+1;fe=te/12*xe}}const ae=fe+ge,Ne=H.leaveBalanceDeductionBefore===!0,Se=I.filter(te=>te.leaveVariantId===H.id||(te.leaveVariantId===null||te.leaveVariantId===void 0)&&te.leaveTypeId===H.leaveTypeId),Oe=Se.filter(te=>te.status==="approved").reduce((te,xe)=>te+parseFloat(xe.workingDays||"0"),0);let M=0;Ne&&(M=Se.filter(xe=>xe.status==="pending").reduce((xe,le)=>xe+parseFloat(le.workingDays||"0"),0));const oe=de.filter(te=>{var xe,le;return((xe=te.description)==null?void 0:xe.toLowerCase().includes("imported leave transaction"))&&((le=te.description)==null?void 0:le.toLowerCase().includes("availed"))&&(te.transactionType==="deduction"||te.transactionType==="debit")}).reduce((te,xe)=>te+Math.abs(parseFloat(xe.amount||"0")),0),be=Oe+M+oe,U=ae-be;return{leaveType:H.leaveTypeName||H.leaveVariantName||"Unknown",entitlement:fe,used:be,carryForward:ge,available:U,year:new Date().getFullYear()}})},_=()=>{let W=y||[];return f!=="all"&&(W=W.filter(P=>{const E=w.find(R=>R.id===P.leaveTypeId);return(E==null?void 0:E.name)===f})),m&&(W=W.filter(P=>{var E,R;return((E=P.reason)==null?void 0:E.toLowerCase().includes(m.toLowerCase()))||((R=P.status)==null?void 0:R.toLowerCase().includes(m.toLowerCase()))})),W},A=()=>y.filter(W=>W.status==="withdrawal_pending"||W.status==="withdrawn"),C=S(),D=_(),k=A();console.log("=== EMPLOYEE REPORTS DEBUG ==="),console.log("URL reportType:",t),console.log("selectedReport:",i),console.log("localStorage user_id:",localStorage.getItem("user_id")),console.log("currentUserId variable:",p),console.log("myLeaveRequests length:",y.length),console.log("myLeaveBalances length:",b.length),console.log("================================");const O=()=>{const W={employeeName:n(),employeeId:p,reportType:i,dateRange:l,data:i==="my-leave-balances"?C:i==="my-withdrawal-history"?k:D},P=new Blob([JSON.stringify(W,null,2)],{type:"application/json"}),E=URL.createObjectURL(P),R=document.createElement("a");R.href=E,R.download=`${i}-${n()}-${dt(new Date,"yyyy-MM-dd")}.json`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(E)},V=()=>s.jsx("div",{className:"space-y-6",children:s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"My Leave History"})}),s.jsxs(Ie,{children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[s.jsx("div",{className:"flex-1",children:s.jsx(ht,{placeholder:"Search by reason or status...",value:m,onChange:W=>g(W.target.value)})}),s.jsxs(yt,{value:f,onValueChange:h,children:[s.jsx(gt,{className:"w-48",children:s.jsx(vt,{placeholder:"Filter by leave type"})}),s.jsxs(xt,{children:[s.jsx(je,{value:"all",children:"All Leave Types"}),w.map(W=>s.jsx(je,{value:W.name,children:W.name},W.id))]})]}),s.jsxs(yt,{value:u,onValueChange:d,children:[s.jsx(gt,{className:"w-32",children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"2025",children:"2025"}),s.jsx(je,{value:"2024",children:"2024"})]})]}),s.jsxs(se,{onClick:O,variant:"outline",children:[s.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Export"]})]}),s.jsxs(Ii,{children:[s.jsx(Mi,{children:s.jsxs(kr,{children:[s.jsx(qe,{children:"Date Applied"}),s.jsx(qe,{children:"Leave Type"}),s.jsx(qe,{children:"Duration"}),s.jsx(qe,{children:"From - To"}),s.jsx(qe,{children:"Working Days"}),s.jsx(qe,{children:"Status"}),s.jsx(qe,{children:"Reason"})]})}),s.jsx(Ri,{children:D.map(W=>{const P=w.find(E=>E.id===W.leaveTypeId);return s.jsxs(kr,{children:[s.jsx(Ue,{children:dt(new Date(W.appliedDate||W.createdAt),"MMM dd, yyyy")}),s.jsx(Ue,{children:(P==null?void 0:P.name)||"Unknown"}),s.jsxs(Ue,{children:[W.totalDays," days"]}),s.jsxs(Ue,{children:[dt(new Date(W.startDate),"MMM dd")," - ",dt(new Date(W.endDate),"MMM dd, yyyy")]}),s.jsxs(Ue,{children:[W.workingDays," days"]}),s.jsx(Ue,{children:s.jsx(Lt,{variant:W.status==="approved"?"default":W.status==="rejected"?"destructive":"secondary",children:W.status})}),s.jsx(Ue,{className:"max-w-xs truncate",children:W.reason||"No reason provided"})]},W.id)})})]})]})]})}),G=()=>s.jsx("div",{className:"space-y-6",children:s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs(Et,{className:"flex items-center space-x-2",children:[s.jsx(Jj,{className:"h-5 w-5"}),s.jsx("span",{children:"My Leave Balances"})]})}),s.jsxs(Ie,{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("p",{className:"text-muted-foreground",children:["Employee: ",s.jsx("span",{className:"font-medium",children:n()})," | Year: ",s.jsx("span",{className:"font-medium",children:u})]}),s.jsxs(se,{onClick:O,variant:"outline",children:[s.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Export"]})]}),s.jsxs(Ii,{children:[s.jsx(Mi,{children:s.jsxs(kr,{children:[s.jsx(qe,{children:"Leave Type"}),s.jsx(qe,{children:"Entitlement"}),s.jsx(qe,{children:"Used"}),s.jsx(qe,{children:"Available"}),s.jsx(qe,{children:"Utilization %"})]})}),s.jsx(Ri,{children:C.map((W,P)=>{const E=W.entitlement>0?W.used/W.entitlement*100:0;return s.jsxs(kr,{children:[s.jsx(Ue,{className:"font-medium",children:W.leaveType}),s.jsx(Ue,{children:W.entitlement.toFixed(1)}),s.jsx(Ue,{children:W.used.toFixed(1)}),s.jsx(Ue,{className:"font-medium",children:W.available.toFixed(1)}),s.jsx(Ue,{children:s.jsxs("span",{className:`font-medium ${E>80?"text-red-600":E>60?"text-yellow-600":"text-green-600"}`,children:[E.toFixed(1),"%"]})})]},P)})})]})]})]})}),Y=()=>s.jsx("div",{className:"space-y-6",children:s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"My Withdrawal History"})}),s.jsxs(Ie,{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("p",{className:"text-muted-foreground",children:["Employee: ",s.jsx("span",{className:"font-medium",children:n()})]}),s.jsxs(se,{onClick:O,variant:"outline",children:[s.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Export"]})]}),s.jsxs(Ii,{children:[s.jsx(Mi,{children:s.jsxs(kr,{children:[s.jsx(qe,{children:"Original Request"}),s.jsx(qe,{children:"Leave Type"}),s.jsx(qe,{children:"Duration"}),s.jsx(qe,{children:"Withdrawal Date"}),s.jsx(qe,{children:"Withdrawal Status"}),s.jsx(qe,{children:"Withdrawal Reason"})]})}),s.jsxs(Ri,{children:[k.map(W=>{var E;const P=w.find(R=>R.id===W.leaveTypeId);return s.jsxs(kr,{children:[s.jsxs(Ue,{children:[dt(new Date(W.startDate),"MMM dd")," - ",dt(new Date(W.endDate),"MMM dd, yyyy")]}),s.jsx(Ue,{children:(P==null?void 0:P.name)||"Unknown"}),s.jsxs(Ue,{children:[W.workingDays," days"]}),s.jsx(Ue,{children:W.withdrawalDate?dt(new Date(W.withdrawalDate),"MMM dd, yyyy"):"Pending"}),s.jsx(Ue,{children:s.jsx(Lt,{variant:W.status==="withdrawn"?"default":W.status==="withdrawal_pending"?"secondary":"destructive",children:(E=W.status)==null?void 0:E.replace("_"," ")})}),s.jsx(Ue,{className:"max-w-xs truncate",children:W.withdrawalReason||"No reason provided"})]},W.id)}),k.length===0&&s.jsx(kr,{children:s.jsx(Ue,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No withdrawal requests found"})})]})]})]})]})});return s.jsx(Sr,{children:s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Employee Reports"}),s.jsx("p",{className:"text-muted-foreground",children:"View your personal leave data and history"})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(se,{variant:i==="my-leave-history"?"default":"outline",onClick:()=>o("my-leave-history"),children:[s.jsx(aa,{className:"h-4 w-4 mr-2"}),"My Leave History"]}),s.jsxs(se,{variant:i==="my-leave-balances"?"default":"outline",onClick:()=>o("my-leave-balances"),children:[s.jsx(Tq,{className:"h-4 w-4 mr-2"}),"My Leave Balances"]}),s.jsxs(se,{variant:i==="my-withdrawal-history"?"default":"outline",onClick:()=>o("my-withdrawal-history"),children:[s.jsx(ho,{className:"h-4 w-4 mr-2"}),"My Withdrawal History"]})]})}),i==="my-leave-history"&&V(),i==="my-leave-balances"&&G(),i==="my-withdrawal-history"&&Y()]})})}function NMe(){const[e,t]=N.useState("2025"),[r,n]=N.useState(""),[a,i]=N.useState("all"),[o,l]=N.useState("all"),[c,u]=N.useState("all"),d=localStorage.getItem("org_id");console.log("[HR Report] Current org_id:",d);const{toast:f}=Vr(),h=tc(),{employees:m}=Ru(),g=Ut({mutationFn:async()=>(console.log("[ProRata] Triggering automatic pro-rata system"),console.log("[ProRata] External employee data available:",!!m,(m==null?void 0:m.length)||0),await Ct("/api/recalculate-prorata-balances",{method:"POST",body:JSON.stringify({externalEmployeeData:m||[]})})),onSuccess:I=>{console.log("[ProRata] Success:",I),f({title:"Pro-rata calculation complete",description:`Updated leave balances for ${I.processedEmployees} employees using actual joining dates`}),h.invalidateQueries({queryKey:["/api/employee-leave-balances/all"]}),h.invalidateQueries({queryKey:["/api/leave-balance-transactions/all"]})},onError:I=>{console.error("[ProRata] Error:",I),f({title:"Pro-rata calculation failed",description:I.message,variant:"destructive"})}});pe.useEffect(()=>{if(console.log("[ProRata] Automatic pro-rata system check:",{hasExternalData:!!m,externalCount:(m==null?void 0:m.length)||0,isPending:g.isPending,orgId:d}),!g.isPending){const I=`prorata_triggered_${d}`;sessionStorage.getItem(I)?console.log("[ProRata] Already triggered for this session, skipping"):(console.log("[ProRata] Triggering automatic pro-rata system (creates assignments + pro-rata calculations)"),m&&m.length>0?console.log("[ProRata] Using external employee data for accurate joining dates"):console.log("[ProRata] External API not available, using fallback system for user 14674"),sessionStorage.setItem(I,"true"),g.mutate())}},[m,d,g.isPending]);const p=Ut({mutationFn:async()=>{console.log("[AfterEarning] Triggering balance recalculation for After Earning leave types");const I=await fetch("/api/recalculate-leave-balances",{method:"POST",headers:{"Content-Type":"application/json","X-Org-Id":d}});if(!I.ok)throw new Error("Recalculation failed");return I.json()},onSuccess:()=>{console.log("[AfterEarning] Balance recalculation completed successfully"),h.invalidateQueries({queryKey:["/api/employee-leave-balances/all"]}),h.invalidateQueries({queryKey:["/api/leave-balance-transactions/all"]})},onError:I=>{console.error("[AfterEarning] Balance recalculation failed:",I)}}),{data:y=[]}=Fe({queryKey:["/api/leave-types"]}),{data:b=[]}=Fe({queryKey:["/api/leave-variants"]}),{data:x=[]}=Fe({queryKey:["/api/employee-assignments"]}),{data:w=[]}=Fe({queryKey:["/api/employee-leave-balances/all"],queryFn:()=>fetch(`/api/employee-leave-balances/all?year=${e}`,{headers:{"X-Org-Id":d}}).then(I=>I.json()),staleTime:0,refetchOnMount:!0}),{data:v=[]}=Fe({queryKey:["/api/leave-balance-transactions/all"],queryFn:()=>fetch("/api/leave-balance-transactions/all",{headers:{"X-Org-Id":d}}).then(I=>I.json()),staleTime:0,refetchOnMount:!0}),{data:j=[]}=Fe({queryKey:["/api/leave-requests"],enabled:!!d});pe.useEffect(()=>{if(b&&b.length>0&&!p.isPending){const I=b.filter(ee=>ee.grantLeaves==="after_earning");if(I.length>0){const ee=`after_earning_recalc_${d}_${new Date().toDateString()}`;sessionStorage.getItem(ee)?console.log("[AfterEarning] Already recalculated today, skipping"):(console.log("[AfterEarning] Found After Earning leave types, triggering balance recalculation:",I.map(q=>({id:q.id,name:q.leaveVariantName}))),sessionStorage.setItem(ee,"true"),p.mutate())}}},[b,d,p.isPending]),console.log("[HR Report] Debug data:"),console.log("All balances:",(w==null?void 0:w.length)||0),console.log("All transactions:",(v==null?void 0:v.length)||0),console.log("All assignments:",(x==null?void 0:x.length)||0),console.log("Leave variants:",(b==null?void 0:b.length)||0),console.log("External employees:",(m==null?void 0:m.length)||0),console.log("[HR Report] External employees sample:",m==null?void 0:m.slice(0,3)),console.log("[HR Report] JWT token available:",!!localStorage.getItem("jwt_token"));const S=m==null?void 0:m.find(I=>I.type_id_0||I.type_id_1);console.log("[HR Report] Employee with type_id data:",S);const _=m==null?void 0:m.find(I=>I.employee_number==="015"||I.user_id==="015");console.log("[HR Report] Employee 015 in external data:",_),(!m||m.length===0)&&(console.warn("[HR Report] ⚠️ No external employee data loaded. Location and Department will show N/A."),console.warn("[HR Report] 💡 To fix this, you need to provide a JWT token for external API access."),console.warn("[HR Report] 📋 Use /fix-location-department.html to setup JWT token.")),console.log("[ProRata] Recalculation status:",{hasTriggered:sessionStorage.getItem(`prorata_triggered_${d}`),isPending:g.isPending,isSuccess:g.isSuccess,isError:g.isError,error:g.error});const A=m==null?void 0:m.find(I=>I.employee_number==="DB061");console.log("[HR Report] DB061 Employee found:",A);const C=w==null?void 0:w.filter(I=>I.userId==="2162");console.log("[HR Report] User 2162 balances:",C);const D=x.map(I=>I.userId),k=w.map(I=>I.userId),O=Array.from(new Set([...D,...k]));console.log("[HR Report] Employee IDs from assignments:",D),console.log("[HR Report] Employee IDs from balances:",k),console.log("[HR Report] Combined employee IDs:",O);const V=O.flatMap(I=>{m==null||m.find(ge=>{var he,K,fe;return((he=ge.user_id)==null?void 0:he.toString())===I||((K=ge.id)==null?void 0:K.toString())===I||((fe=ge.employee_number)==null?void 0:fe.toString())===I});const L=x.filter(ge=>ge.userId===I).map(ge=>ge.leaveVariantId),q=w.filter(ge=>ge.userId===I),H=v.filter(ge=>ge.userId===I),B=q.map(ge=>ge.leaveVariantId),de=[...new Set([...L,...B])],ce=new Map;return de.forEach(ge=>{const he=b.find(fe=>fe.id===ge),K=q.find(fe=>fe.leaveVariantId===ge);if(he!=null&&he.leaveTypeId){ce.has(he.leaveTypeId)||ce.set(he.leaveTypeId,{variants:[],balance:void 0});const fe=ce.get(he.leaveTypeId);fe.variants.push(ge),K&&(!fe.balance||parseFloat(K.totalEntitlement||"0")>0)?fe.balance=K:fe.balance||(fe.balance={userId:I,leaveVariantId:ge,totalEntitlement:"0",currentBalance:"0",usedBalance:"0"})}}),I==="225"&&console.log(`[HR Report DUPLICATE FIX] User ${I}:`,{assignedVariantIds:L,balanceVariantIds:B,relevantVariantIds:de,leaveTypeGroups:Array.from(ce.entries()).map(([ge,he])=>({leaveTypeId:ge,variants:he.variants,hasBalance:!!he.balance}))}),Array.from(ce.entries()).map(([ge,he])=>{const K=y.find(Le=>Le.id===ge),fe=he.balance;ge===68&&console.log("[HR Report] Casual & Sick Leave mapping debug:",{userId:I,leaveTypeId:ge,leaveType:K,balance:fe,groupVariants:he.variants,allLeaveTypes:y==null?void 0:y.map(Le=>({id:Le.id,name:Le.name})),allVariants:b==null?void 0:b.map(Le=>({id:Le.id,name:Le.leaveVariantName,leaveTypeId:Le.leaveTypeId}))});const ae=H.filter(Le=>{const rt=b.find(Mt=>Mt.id===Le.leaveVariantId);return(rt==null?void 0:rt.leaveTypeId)===ge});I==="015"&&console.log(`[HR Report User 015 Debug] Leave Type ${ge}:`,{userTransactions:H.length,leaveTypeTransactions:ae.length,userTransactionSample:H.slice(0,3),leaveTypeTransactionSample:ae.slice(0,3),searchingForLeaveTypeId:ge,userTransactionVariantIds:[...new Set(H.map(Le=>Le.leaveVariantId))]});const Ne=ae.filter(Le=>{var rt;return Le.transactionType==="grant"&&((rt=Le.description)==null?void 0:rt.toLowerCase().includes("opening balance imported from excel"))}).sort((Le,rt)=>new Date(rt.createdAt).getTime()-new Date(Le.createdAt).getTime()),Se=Ne.length>0?parseFloat(Ne[0].amount||"0"):0,Ae=b==null?void 0:b.find(Le=>Le.id===(fe==null?void 0:fe.leaveVariantId)),Oe=y==null?void 0:y.find(Le=>Le.id===(Ae==null?void 0:Ae.leaveTypeId)),M=(Ae==null?void 0:Ae.grantLeaves)==="after_earning"||(Oe==null?void 0:Oe.grantLeaves)==="after_earning"||(fe==null?void 0:fe.grantLeaves)==="after_earning",oe=fe?parseFloat(fe.currentBalance||"0"):0,be=fe?parseFloat(fe.totalEntitlement||"0"):0;I==="015"&&console.log(`[HR Report Detection Debug] User ${I} Leave Type ${ge}:`,{variantData:Ae,leaveTypeData:Oe,balance:fe,isAfterEarning:M,variantGrantLeaves:Ae==null?void 0:Ae.grantLeaves,leaveTypeGrantLeaves:Oe==null?void 0:Oe.grantLeaves,balanceGrantLeaves:fe==null?void 0:fe.grantLeaves});let U=0;if(M){const Le=m==null?void 0:m.find($t=>{var Ke,Dt,Jt;return((Ke=$t.user_id)==null?void 0:Ke.toString())===I||((Dt=$t.id)==null?void 0:Dt.toString())===I||((Jt=$t.employee_number)==null?void 0:Jt.toString())===I}),rt=Le==null?void 0:Le.date_of_joining,Mt=new Date().getFullYear(),at=new Date;if(rt&&Ae){const $t=new Date(rt),Ke=$t.getFullYear();let Dt=0;if(Ke<Mt)Dt=at.getMonth();else if(Ke===Mt){const Gr=at.getMonth()-$t.getMonth();Dt=Math.max(0,Gr)}const Jt=(Ae==null?void 0:Ae.paidDaysInYear)||be||0;U=Math.round(Jt/12*Dt*2)/2,I==="015"&&console.log(`[HR Report After Earning Debug] User ${I} Leave Type ${ge}:`,{joiningDate:rt,joinDate:$t.toISOString(),currentYear:Mt,currentDate:at.toISOString(),completedMonths:Dt,annualEntitlement:Jt,monthlyRate:Jt/12,calculatedEligibility:U,expectedFor6Months:18/12*6})}else U=oe}else{const Le=m==null?void 0:m.find(at=>{var $t,Ke,Dt;return(($t=at.user_id)==null?void 0:$t.toString())===I||((Ke=at.id)==null?void 0:Ke.toString())===I||((Dt=at.employee_number)==null?void 0:Dt.toString())===I}),rt=Le==null?void 0:Le.date_of_joining,Mt=new Date().getFullYear();if(rt)if(new Date(rt).getFullYear()<Mt){const $t=(Ae==null?void 0:Ae.paidDaysInYear)||0;if(((Ae==null?void 0:Ae.grantFrequency)||"per_year")==="per_year")U=$t;else{const Jt=new Date().getMonth()+1;U=Math.round($t/12*Jt*2)/2}}else{const $t=(Ae==null?void 0:Ae.paidDaysInYear)||0;if(((Ae==null?void 0:Ae.grantFrequency)||"per_year")==="per_year")U=$t;else{const Dt=new Date(rt),Jt=new Date(Mt,11,31),Gr=Math.max(0,(Jt.getFullYear()-Dt.getFullYear())*12+(Jt.getMonth()-Dt.getMonth())+1);U=Math.round($t/12*Gr*2)/2}I==="14674"&&console.log(`[HR Report Pro-rata Debug] Jainish Shah User ${I} Leave Type ${ge} (${(Oe==null?void 0:Oe.name)||"Unknown"}):`,{joiningDate:rt,variantConfiguredAmount:$t,monthlyRate:$t/12,calculatedEligibility:U})}else U=oe;if(I==="14674"||I==="58976"||I==="225"){const at=(Ae==null?void 0:Ae.paidDaysInYear)||0,$t=(Ae==null?void 0:Ae.grantFrequency)||"per_year",Ke=Le!=null&&Le.date_of_joining?new Date(Le.date_of_joining).getFullYear():null;console.log(`[HR Report Eligibility Debug] User ${I} (${(Oe==null?void 0:Oe.name)||"Unknown"}) Leave Type ${ge}:`,{balanceData:fe,currentBalanceRaw:fe==null?void 0:fe.currentBalance,currentBalanceInDays:oe,openingBalance:Se,calculatedEligibility:U,totalEntitlementInDays:be,variantConfiguredAmount:at,grantFrequency:$t,isAfterEarning:M,joiningDate:Le==null?void 0:Le.date_of_joining,joinYear:Ke,joinedBeforeCurrentYear:Ke<2025,eligibilityCalculationMethod:$t==="per_year"?"full_annual_amount":"pro_rata_calculation"})}}const te=Se>0?U+Se:U;I==="58976"&&console.log(`[HR Report Ananth BS Debug] User 58976 Leave Type ${ge}:`,{leaveTypeName:Oe==null?void 0:Oe.name,eligibilityCalculated:U,openingBalanceFromTransactions:Se,totalEligibilityFinal:te,balanceData:fe,currentBalanceInDays:oe,totalEntitlementInDays:be,leaveTypeTransactions:(ae==null?void 0:ae.length)||0,isAfterEarning:M,employee:m==null?void 0:m.find(Le=>{var rt,Mt,at;return((rt=Le.user_id)==null?void 0:rt.toString())===I||((Mt=Le.id)==null?void 0:Mt.toString())===I||((at=Le.employee_number)==null?void 0:at.toString())===I})});const xe=j.filter(Le=>Le.userId===I),le=xe.filter(Le=>{if(Le.leaveTypeId===ge)return!0;const rt=b.find(Mt=>Mt.id===Le.leaveVariantId);return(rt==null?void 0:rt.leaveTypeId)===ge}),ye=le.filter(Le=>Le.status==="approved"),ve=ye.reduce((Le,rt)=>Le+parseFloat(rt.totalDays||"0"),0);I==="241"&&console.log(`[HR Report SANJAY FIXED] Leave Type ${ge} (${Oe==null?void 0:Oe.name}):`,{totalUserRequests:xe.length,leaveTypeRequests:le.length,approvedRequests:ye.length,availedDays:ve,approvedRequestDetails:ye.map(Le=>({id:Le.id,startDate:Le.startDate,endDate:Le.endDate,totalDays:Le.totalDays,reason:Le.reason}))}),(I==="239"||I==="241")&&console.log(`[HR Report AVAILED FIXED] User ${I}, Leave Type ${ge} (${Oe==null?void 0:Oe.name}):`,{availedAmount:ve,calculationMethod:"request-based (same as Leave Applications page)",approvedRequestsCount:ye.length}),ae.filter(Le=>{var rt,Mt;return(Le.transactionType==="debit"||Le.transactionType==="deduction")&&(((rt=Le.description)==null?void 0:rt.toLowerCase().includes("lop"))||((Mt=Le.description)==null?void 0:Mt.toLowerCase().includes("loss of pay")))}).reduce((Le,rt)=>Le+Math.abs(parseFloat(rt.amount||"0")),0);const ke=ae.filter(Le=>{var rt;return(Le.transactionType==="debit"||Le.transactionType==="deduction")&&((rt=Le.description)==null?void 0:rt.toLowerCase().includes("encash"))}).reduce((Le,rt)=>Le+Math.abs(parseFloat(rt.amount||"0")),0),it=ae.filter(Le=>{var rt;return(Le.transactionType==="debit"||Le.transactionType==="deduction")&&((rt=Le.description)==null?void 0:rt.toLowerCase().includes("lapse"))}).reduce((Le,rt)=>Le+Math.abs(parseFloat(rt.amount||"0")),0),ot=te-ve,Nt=m==null?void 0:m.find(Le=>{var rt,Mt,at;return((rt=Le.user_id)==null?void 0:rt.toString())===I||((Mt=Le.id)==null?void 0:Mt.toString())===I||((at=Le.employee_number)==null?void 0:at.toString())===I});return(I==="015"||I==="128"||I==="225")&&console.log(`[HR Report MAPPING DEBUG] User ${I}:`,{employeeFound:!!Nt,employeeData:Nt,type_id_0:Nt==null?void 0:Nt.type_id_0,type_id_1:Nt==null?void 0:Nt.type_id_1,allExternalEmployees:m==null?void 0:m.length,lookupMatches:m==null?void 0:m.filter(Le=>{var rt,Mt,at;return((rt=Le.user_id)==null?void 0:rt.toString())===I||((Mt=Le.id)==null?void 0:Mt.toString())===I||((at=Le.employee_number)==null?void 0:at.toString())===I})}),{employeeNo:(Nt==null?void 0:Nt.employee_number)||I,employeeName:(Nt==null?void 0:Nt.user_name)||(Nt!=null&&Nt.first_name&&(Nt!=null&&Nt.last_name)?`${Nt.first_name} ${Nt.last_name}`:`Employee ${I}`),location:(Nt==null?void 0:Nt.type_id_0)||"N/A",department:(Nt==null?void 0:Nt.type_id_1)||"N/A",leaveType:(Oe==null?void 0:Oe.name)||(K==null?void 0:K.name)||"Unknown",opBalance:Number(Se||0).toFixed(1),eligibility:Number(U||0).toFixed(1),totalEligibility:Number(te||0).toFixed(1),availed:Number(ve||0).toFixed(1),leaveLapsed:Number(it||0).toFixed(1),leaveEncashed:Number(ke||0).toFixed(1),closingBalance:Number(ot||0).toFixed(1),userId:I,leaveTypeId:(Oe==null?void 0:Oe.id)||(K==null?void 0:K.id)}})}).filter(Boolean),G=V.filter(I=>I.leaveType==="Casual & Sick Leave");console.log("[HR Report] Casual & Sick Leave data found:",G.length,G),G.forEach((I,ee)=>{ee<5&&console.log(`[HR Report] Row ${ee}: Employee No=${I.employeeNo}, Name=${I.employeeName}, UserId=${I.userId}, Eligibility=${I.eligibility}`),I.employeeNo==="015"&&console.log("[HR Report] FOUND ASHWANI KHANNA (015):",{employeeNo:I.employeeNo,employeeName:I.employeeName,userId:I.userId,eligibility:I.eligibility,totalEligibility:I.totalEligibility,openingBalance:I.opBalance,availed:I.availed,closingBalance:I.closingBalance,fullRowData:I})});const Y=[...new Set(V.map(I=>I.leaveType))];console.log("[HR Report] All leave types in report data:",Y),console.log("[HR Report] Selected leave type filter:",c),console.log("[HR Report] Available leave types for dropdown:",y==null?void 0:y.map(I=>({id:I.id,name:I.name})));const W=V.filter(I=>{var B;const ee=!r||I.employeeName.toLowerCase().includes(r.toLowerCase())||I.employeeNo.toString().includes(r),L=a==="all"||I.location===a,q=o==="all"||I.department===o,H=c==="all"||((B=I.leaveTypeId)==null?void 0:B.toString())===c;return I.leaveType==="Casual & Sick Leave"&&console.log("[HR Report] Casual & Sick Leave row filter debug:",{rowLeaveTypeId:I.leaveTypeId,selectedLeaveType:c,matchesLeaveType:H,rowData:I}),ee&&L&&q&&H}),P=[...new Set(V.map(I=>I.location))].filter(Boolean),E=[...new Set(V.map(I=>I.department))].filter(Boolean),R=()=>{const ee=[["Employee No","Employee Name","Location","Department","Leave Type","Op Balance","Eligibility","Total Eligibility","Availed","Leave Lapsed","Leave Encashed","Closing Balance"].join(","),...W.map(B=>[B.employeeNo,B.employeeName,B.location,B.department,B.leaveType,B.opBalance,B.eligibility,B.totalEligibility,B.availed,B.leaveLapsed,B.leaveEncashed,B.closingBalance].map(de=>`"${de}"`).join(","))].join(`
`),L=new Blob([ee],{type:"text/csv;charset=utf-8;"}),q=document.createElement("a"),H=URL.createObjectURL(L);q.setAttribute("href",H),q.setAttribute("download",`HR_Leave_Balance_Report_${e}.csv`),q.style.visibility="hidden",document.body.appendChild(q),q.click(),document.body.removeChild(q)};return s.jsx(Sr,{children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-full mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(aa,{className:"h-4 w-4 text-blue-600"})}),s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"HR Leave Balance Report"})]}),s.jsx("div",{className:"flex space-x-3",children:s.jsxs(se,{onClick:R,className:"bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Export to Excel"]})})]}),s.jsxs(Ce,{className:"mb-6",children:[s.jsx(Tt,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Tv,{className:"h-4 w-4 text-gray-500"}),s.jsx(Et,{className:"text-lg",children:"Filters"})]})}),s.jsx(Ie,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Employee"}),s.jsx(ht,{placeholder:"Name or Employee No...",value:r,onChange:I=>n(I.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),s.jsxs(yt,{value:e,onValueChange:t,children:[s.jsx(gt,{children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"2025",children:"2025"}),s.jsx(je,{value:"2024",children:"2024"}),s.jsx(je,{value:"2023",children:"2023"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),s.jsxs(yt,{value:a,onValueChange:i,children:[s.jsx(gt,{children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"all",children:"All Locations"}),P.map(I=>s.jsx(je,{value:I,children:I},I))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),s.jsxs(yt,{value:o,onValueChange:l,children:[s.jsx(gt,{children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"all",children:"All Departments"}),E.map(I=>s.jsx(je,{value:I,children:I},I))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leave Type"}),s.jsxs(yt,{value:c,onValueChange:u,children:[s.jsx(gt,{children:s.jsx(vt,{})}),s.jsxs(xt,{children:[s.jsx(je,{value:"all",children:"All Leave Types"}),y.map(I=>s.jsx(je,{value:I.id.toString(),children:I.name},I.id))]})]})]})]})})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs(Et,{className:"text-lg",children:["Leave Balance Report (",W.length," records)"]})}),s.jsx(Ie,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ii,{children:[s.jsx(Mi,{children:s.jsxs(kr,{className:"bg-gray-50",children:[s.jsx(qe,{className:"font-semibold",children:"Employee No"}),s.jsx(qe,{className:"font-semibold",children:"Employee Name"}),s.jsx(qe,{className:"font-semibold",children:"Location"}),s.jsx(qe,{className:"font-semibold",children:"Department"}),s.jsx(qe,{className:"font-semibold",children:"Leave Type"}),s.jsx(qe,{className:"font-semibold text-right",children:"Op Balance"}),s.jsx(qe,{className:"font-semibold text-right",children:"Eligibility"}),s.jsx(qe,{className:"font-semibold text-right",children:"Total Eligibility"}),s.jsx(qe,{className:"font-semibold text-right",children:"Availed"}),s.jsx(qe,{className:"font-semibold text-right",children:"Leave Lapsed"}),s.jsx(qe,{className:"font-semibold text-right",children:"Leave Encashed"}),s.jsx(qe,{className:"font-semibold text-right",children:"Closing Balance"})]})}),s.jsx(Ri,{children:W.length===0?s.jsx(kr,{children:s.jsx(Ue,{colSpan:12,className:"text-center py-8 text-gray-500",children:"No data available for the selected filters"})}):W.map((I,ee)=>s.jsxs(kr,{className:ee%2===0?"bg-white":"bg-gray-50",children:[s.jsx(Ue,{className:"font-medium",children:I.employeeNo}),s.jsx(Ue,{children:I.employeeName}),s.jsx(Ue,{children:I.location}),s.jsx(Ue,{children:I.department}),s.jsx(Ue,{children:I.leaveType}),s.jsx(Ue,{className:"text-right",children:I.opBalance}),s.jsx(Ue,{className:"text-right",children:I.eligibility}),s.jsx(Ue,{className:"text-right font-medium",children:I.totalEligibility}),s.jsx(Ue,{className:"text-right",children:I.availed}),s.jsx(Ue,{className:"text-right",children:I.leaveLapsed}),s.jsx(Ue,{className:"text-right",children:I.leaveEncashed}),s.jsx(Ue,{className:"text-right font-medium text-green-600",children:I.closingBalance})]},`${I.userId}-${I.leaveTypeId}`))})]})})})]})]})})})}function SMe(){const{toast:e}=Vr(),t=tc(),{data:r,isLoading:n}=Fe({queryKey:["/api/collaborative-leave-settings"]}),a=Ut({mutationFn:async u=>await Ct("PUT","/api/collaborative-leave-settings",u),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/collaborative-leave-settings"]}),e({title:"Settings Updated",description:"Collaborative leave settings have been saved successfully."})},onError:u=>{e({title:"Error",description:"Failed to update settings. Please try again.",variant:"destructive"})}}),[i,o]=N.useState({enabled:!1,requireManagerApproval:!1,enableEmailNotifications:!0,closureReportRequired:!0,managerReviewRequired:!0});N.useEffect(()=>{r&&typeof r=="object"&&o({enabled:r.enabled??!1,requireManagerApproval:r.requireManagerApproval??!1,enableEmailNotifications:r.enableEmailNotifications??!0,closureReportRequired:r.closureReportRequired??!0,managerReviewRequired:r.managerReviewRequired??!0})},[r]);const l=()=>{a.mutate(i)},c=(u,d)=>{o(f=>({...f,[u]:d}))};return n?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx(Zj,{className:"h-8 w-8 animate-spin"})}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ki,{className:"h-7 w-7 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Feature Settings"}),s.jsx("p",{className:"text-gray-600",children:"Configure collaborative leave management features"})]})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Bn,{className:"h-6 w-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx(Et,{children:"Collaborative Leave Management"}),s.jsx(hf,{children:"Enable employees to assign tasks to colleagues during leave periods"})]})]})}),s.jsxs(Ie,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{children:[s.jsx(tt,{className:"text-lg font-medium",children:"Enable Collaborative Leave"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Allow employees to create task assignments when applying for leave"})]}),s.jsx(Gl,{checked:i.enabled,onCheckedChange:u=>c("enabled",u),className:"scale-125"})]}),i.enabled&&s.jsx("div",{className:"space-y-6 pl-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-medium flex items-center",children:[s.jsx(Iq,{className:"h-5 w-5 mr-2 text-gray-500"}),"Notification Settings"]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsxs(tt,{className:"flex items-center",children:[s.jsx(FF,{className:"h-4 w-4 mr-2"}),"Email Notifications"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Send email notifications to assignees and managers"})]}),s.jsx(Gl,{checked:i.enableEmailNotifications,onCheckedChange:u=>c("enableEmailNotifications",u)})]})]})}),s.jsx("div",{className:"flex justify-end pt-6 border-t",children:s.jsxs(se,{onClick:l,disabled:a.isPending,className:"px-8",children:[a.isPending&&s.jsx(Zj,{className:"h-4 w-4 mr-2 animate-spin"}),"Save Settings"]})})]})]})]})}var FE="Radio",[_Me,AU]=pa(FE),[TMe,EMe]=_Me(FE),CU=N.forwardRef((e,t)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:c,form:u,...d}=e,[f,h]=N.useState(null),m=Kt(t,y=>h(y)),g=N.useRef(!1),p=f?u||!!f.closest("form"):!0;return s.jsxs(TMe,{scope:r,checked:a,disabled:o,children:[s.jsx(_t.button,{type:"button",role:"radio","aria-checked":a,"data-state":PU(a),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:m,onClick:Xe(e.onClick,y=>{a||c==null||c(),p&&(g.current=y.isPropagationStopped(),g.current||y.stopPropagation())})}),p&&s.jsx(OU,{control:f,bubbles:!g.current,name:n,value:l,checked:a,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});CU.displayName=FE;var DU="RadioIndicator",kU=N.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:n,...a}=e,i=EMe(DU,r);return s.jsx(Da,{present:n||i.checked,children:s.jsx(_t.span,{"data-state":PU(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});kU.displayName=DU;var AMe="RadioBubbleInput",OU=N.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=N.useRef(null),l=Kt(o,i),c=Yv(r),u=Pv(t);return N.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const g=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(g)}},[c,r,n]),s.jsx(_t.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});OU.displayName=AMe;function PU(e){return e?"checked":"unchecked"}var CMe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],rw="RadioGroup",[DMe,nRe]=pa(rw,[th,AU]),IU=th(),MU=AU(),[kMe,OMe]=DMe(rw),RU=N.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:f,...h}=e,m=IU(r),g=a0(u),[p,y]=mi({prop:i,defaultProp:a??null,onChange:f,caller:rw});return s.jsx(kMe,{scope:r,name:n,required:o,disabled:l,value:p,onValueChange:y,children:s.jsx(b_,{asChild:!0,...m,orientation:c,dir:g,loop:d,children:s.jsx(_t.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...h,ref:t})})})});RU.displayName=rw;var FU="RadioGroupItem",LU=N.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...a}=e,i=OMe(FU,r),o=i.disabled||n,l=IU(r),c=MU(r),u=N.useRef(null),d=Kt(t,u),f=i.value===a.value,h=N.useRef(!1);return N.useEffect(()=>{const m=p=>{CMe.includes(p.key)&&(h.current=!0)},g=()=>h.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",g)}},[]),s.jsx(j_,{asChild:!0,...l,focusable:!o,active:f,children:s.jsx(CU,{disabled:o,required:i.required,checked:f,...c,...a,name:i.name,ref:d,onCheck:()=>i.onValueChange(a.value),onKeyDown:Xe(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:Xe(a.onFocus,()=>{var m;h.current&&((m=u.current)==null||m.click())})})})});LU.displayName=FU;var PMe="RadioGroupIndicator",$U=N.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...n}=e,a=MU(r);return s.jsx(kU,{...a,...n,ref:t})});$U.displayName=PMe;var BU=RU,UU=LU,IMe=$U;const WU=N.forwardRef(({className:e,...t},r)=>s.jsx(BU,{className:Ge("grid gap-2",e),...t,ref:r}));WU.displayName=BU.displayName;const ZS=N.forwardRef(({className:e,...t},r)=>s.jsx(UU,{ref:r,className:Ge("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(IMe,{className:"flex items-center justify-center",children:s.jsx(PF,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ZS.displayName=UU.displayName;function MMe(){const{toast:e}=Vr(),[t,r]=N.useState(!1),[n,a]=N.useState(null),[i,o]=N.useState([]),[l,c]=N.useState(!1),[u,d]=N.useState({title:"",startDate:"",endDate:"",reason:"",allowLeaves:"not-allowed",allowedLeaveTypes:[],assignedEmployees:[]}),[f,h]=N.useState(0),{data:m=[]}=Fe({queryKey:["/api/leave-types"],staleTime:5*60*1e3}),{data:g=[],isLoading:p,error:y}=Fe({queryKey:["/api/blackout-periods"],staleTime:5*60*1e3});console.log("BlackoutPeriods Query State:",{isLoading:p,periodsCount:g.length,error:y==null?void 0:y.message});const b=Ut({mutationFn:async k=>{const O=await fetch("/api/blackout-periods",{method:"POST",headers:{"Content-Type":"application/json","X-Org-Id":localStorage.getItem("org_id")||""},body:JSON.stringify(k)});if(!O.ok)throw new Error("Failed to create blackout period");return O.json()},onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/blackout-periods"]}),e({title:"Success",description:"Blackout period created successfully"}),r(!1),v()},onError:()=>{e({title:"Error",description:"Failed to create blackout period",variant:"destructive"})}}),x=Ut({mutationFn:async({id:k,data:O})=>{const V=await fetch(`/api/blackout-periods/${k}`,{method:"PUT",headers:{"Content-Type":"application/json","X-Org-Id":localStorage.getItem("org_id")||""},body:JSON.stringify(O)});if(!V.ok)throw new Error("Failed to update blackout period");return V.json()},onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/blackout-periods"]}),e({title:"Success",description:"Blackout period updated successfully"}),a(null),v()},onError:()=>{e({title:"Error",description:"Failed to update blackout period",variant:"destructive"})}}),w=Ut({mutationFn:async k=>{if(!(await fetch(`/api/blackout-periods/${k}`,{method:"DELETE",headers:{"X-Org-Id":localStorage.getItem("org_id")||""}})).ok)throw new Error("Failed to delete blackout period")},onSuccess:()=>{Ye.invalidateQueries({queryKey:["/api/blackout-periods"]}),e({title:"Success",description:"Blackout period deleted successfully"})},onError:()=>{e({title:"Error",description:"Failed to delete blackout period",variant:"destructive"})}}),v=()=>{d({title:"",startDate:"",endDate:"",reason:"",allowLeaves:"not-allowed",allowedLeaveTypes:[],assignedEmployees:[]})},j=()=>{if(!u.title||!u.startDate||!u.endDate){e({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}const k={...u,allowLeaves:u.allowLeaves==="allowed"};n?x.mutate({id:n.id,data:k}):b.mutate(k)},S=k=>{a(k),d({title:k.title,startDate:k.startDate,endDate:k.endDate,reason:k.reason,allowLeaves:k.allowLeaves?"allowed":"not-allowed",allowedLeaveTypes:k.allowedLeaveTypes||[],assignedEmployees:k.assignedEmployees||[]}),r(!0)},_=k=>{window.confirm("Are you sure you want to delete this blackout period?")&&w.mutate(k)},A=(k,O)=>{d(O?V=>({...V,allowedLeaveTypes:[...V.allowedLeaveTypes,k]}):V=>({...V,allowedLeaveTypes:V.allowedLeaveTypes.filter(G=>G!==k)}))},C=k=>new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),D=(k,O)=>{const V=new Date(k),G=new Date(O),Y=Math.abs(G.getTime()-V.getTime()),W=Math.ceil(Y/(1e3*60*60*24));return`${W} day${W!==1?"s":""}`};return s.jsx(Sr,{children:s.jsxs("div",{className:"p-6 space-y-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Black Out Periods"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage periods when employees cannot take leave"})]}),s.jsxs(fn,{open:t,onOpenChange:r,children:[s.jsx(cu,{asChild:!0,children:s.jsxs(se,{onClick:()=>{a(null),v()},children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Set Block-out period"]})}),s.jsxs(hn,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[s.jsxs(mn,{children:[s.jsx(pn,{children:n?"Edit Block-out period":"Set Block-out period"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Employees will not be advised against taking a leave during a block-out period"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"title",children:"Block-out title"}),s.jsx(ht,{id:"title",value:u.title,onChange:k=>d(O=>({...O,title:k.target.value})),placeholder:"e.g. Sprint 25"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"startDate",children:"Start date"}),s.jsx(ht,{id:"startDate",type:"date",value:u.startDate,onChange:k=>d(O=>({...O,startDate:k.target.value}))})]}),s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"endDate",children:"End date"}),s.jsx(ht,{id:"endDate",type:"date",value:u.endDate,onChange:k=>d(O=>({...O,endDate:k.target.value}))})]})]}),u.startDate&&u.endDate&&s.jsxs("div",{className:"bg-blue-50 p-3 rounded text-sm text-blue-800",children:["Block-out for a stretch of ",D(u.startDate,u.endDate)," (10 working, 2 non-working days)"]}),s.jsxs("div",{children:[s.jsx(tt,{htmlFor:"reason",children:"Reason For Blackout"}),s.jsx(Cn,{id:"reason",value:u.reason,onChange:k=>d(O=>({...O,reason:k.target.value})),placeholder:"e.g. Migrate",rows:3})]}),s.jsxs("div",{children:[s.jsx(tt,{children:"Do you want to allow leaves during this block-out period"}),s.jsxs(WU,{value:u.allowLeaves,onValueChange:k=>d(O=>({...O,allowLeaves:k})),className:"flex gap-6 mt-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ZS,{value:"allowed",id:"allowed"}),s.jsx(tt,{htmlFor:"allowed",className:"text-sm font-normal",children:"Allowed"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ZS,{value:"not-allowed",id:"not-allowed"}),s.jsx(tt,{htmlFor:"not-allowed",className:"text-sm font-normal",children:"Not Allowed"})]})]})]}),u.allowLeaves==="allowed"&&s.jsxs("div",{children:[s.jsx(tt,{children:"Leave types that are allowed as exceptions"}),s.jsx("div",{className:"mt-2 space-y-2",children:m.map(k=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pt,{id:k.id.toString(),checked:u.allowedLeaveTypes.includes(k.id.toString()),onCheckedChange:O=>A(k.id.toString(),!!O)}),s.jsx(tt,{htmlFor:k.id.toString(),className:"text-sm font-normal",children:k.name})]},k.id))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(tt,{children:"Assign to Employees"}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>c(!0),children:"Assign Employees"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u.assignedEmployees.length>0?`${u.assignedEmployees.length} employee${u.assignedEmployees.length!==1?"s":""} assigned`:"Click to assign employees"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(se,{variant:"outline",onClick:()=>{r(!1),a(null),v()},children:"Discard"}),s.jsx(se,{onClick:j,disabled:b.isPending||x.isPending,children:n?"Update Block-out period":"Set Block-out period"})]})]})]}),s.jsx(fn,{open:l,onOpenChange:c,children:s.jsxs(hn,{className:"max-w-6xl max-h-[90vh] z-[60] flex flex-col",children:[s.jsx(mn,{children:s.jsx(pn,{children:"Assign Employees to Blackout Period"})}),s.jsx(g0,{onClose:()=>c(!1),onAssign:k=>{const O=k.map(V=>parseInt(V.user_id||V.id));d(V=>({...V,assignedEmployees:O})),c(!1)},preSelectedEmployees:u.assignedEmployees.filter(k=>k!=null).map(k=>({user_id:k.toString()})),applicableGenders:[]})]})})]}),s.jsx("div",{className:"space-y-4",children:p?s.jsx(Ce,{children:s.jsx(Ie,{className:"p-6",children:s.jsx("p",{className:"text-center text-gray-500",children:"Loading blackout periods..."})})}):g.length===0?s.jsx(Ce,{children:s.jsx(Ie,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(br,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No blackout periods set"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first blackout period to restrict leave applications during specific periods."}),s.jsxs(se,{onClick:()=>r(!0),children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Set Block-out period"]})]})})}):g.map(k=>s.jsxs(Ce,{children:[s.jsx(Tt,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Et,{className:"text-lg",children:k.title}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>S(k),children:s.jsx(Nu,{className:"w-4 h-4"})}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>_(k.id),disabled:w.isPending,children:s.jsx(ua,{className:"w-4 h-4"})})]})]})}),s.jsxs(Ie,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Duration"}),s.jsxs("p",{className:"text-sm",children:[C(k.startDate)," - ",C(k.endDate)]}),s.jsx("p",{className:"text-xs text-gray-500",children:D(k.startDate,k.endDate)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Leave Policy"}),s.jsx("p",{className:"text-sm",children:k.allowLeaves?s.jsx("span",{className:"text-green-600",children:"Allowed with exceptions"}):s.jsx("span",{className:"text-red-600",children:"Not allowed"})}),k.allowLeaves&&k.allowedLeaveTypes&&k.allowedLeaveTypes.length>0&&s.jsxs("p",{className:"text-xs text-gray-500",children:[k.allowedLeaveTypes.length," exception",k.allowedLeaveTypes.length!==1?"s":""]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Assigned Employees"}),s.jsx("p",{className:"text-sm",children:k.assignedEmployees&&k.assignedEmployees.length>0?`${k.assignedEmployees.length} employee${k.assignedEmployees.length!==1?"s":""}`:"Not assigned"})]})]}),k.reason&&s.jsxs("div",{className:"mt-4 pt-4 border-t",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Reason"}),s.jsx("p",{className:"text-sm text-gray-700",children:k.reason})]})]})]},k.id))})]})})}function RMe(){const[e,t]=N.useState(!1),[r,n]=N.useState(!1),a=()=>{t(!0),setTimeout(()=>t(!1),3e3)},i=()=>{n(!0),setTimeout(()=>n(!1),3e3)};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Dancing Loader Demo"}),s.jsx("p",{className:"text-gray-600",children:"Check out our animated dancing loader in action!"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Small Loader"})}),s.jsx(Ie,{className:"text-center",children:s.jsx(Dc,{size:"sm",text:"Small dancing loader"})})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Medium Loader"})}),s.jsx(Ie,{className:"text-center",children:s.jsx(Dc,{size:"md",text:"Medium dancing loader"})})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Large Loader"})}),s.jsx(Ie,{className:"text-center",children:s.jsx(Dc,{size:"lg",text:"Large dancing loader"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Full Page Loader"})}),s.jsxs(Ie,{children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"This loader covers the entire screen and is perfect for page transitions or major operations."}),s.jsx(se,{onClick:a,className:"w-full",children:"Show Full Page Loader (3s)"})]})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Inline Loader"})}),s.jsxs(Ie,{children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"This loader is perfect for loading content within a specific section."}),s.jsx(se,{onClick:i,className:"w-full mb-4",children:"Show Inline Loader (3s)"}),r&&s.jsx(fne,{text:"Loading content..."})]})]})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Loader Without Text"})}),s.jsx(Ie,{className:"text-center",children:s.jsx(Dc,{size:"md",text:""})})]})]}),e&&s.jsx(dne,{text:"Loading amazing content..."})]})}function FMe(){const[e,t]=UR("/id/:token"),[,r]=qf();return console.log("[TokenHandler] Component rendered - match:",e,"params:",t),console.log("[TokenHandler] Route pattern: /id/:token"),console.log("[TokenHandler] Window location:",window.location.pathname),N.useEffect(()=>{if(console.log("[TokenHandler] useEffect - match:",e,"params:",t),console.log("[TokenHandler] Current location:",window.location.pathname),e&&(t!=null&&t.token)){console.log("[TokenHandler] Processing token:",t.token);const n=nMe(t.token);n?(console.log("Decoded JWT payload:",n),aMe(n,t.token).then(()=>{console.log("=== TOKEN HANDLER STORAGE DEBUG ==="),console.log("localStorage keys after storage:",Object.keys(localStorage)),console.log("org_id:",localStorage.getItem("org_id")),console.log("user_id:",localStorage.getItem("user_id")),console.log("jwt_token present:",!!localStorage.getItem("jwt_token")),console.log("role_name:",localStorage.getItem("role_name")),console.log("==================================="),console.log("Redirecting to home page..."),r("/")})):(console.error("Failed to decode JWT token"),r("/"))}},[e,t,r]),s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Processing authentication..."})]})})}function LMe(){var i,o,l,c;const{data:e,isLoading:t,refetch:r}=Fe({queryKey:["/api/pending-time-based-approvals"],refetchInterval:3e4}),n=Ut({mutationFn:async()=>await Ct("/api/process-time-based-approvals","POST"),onSuccess:u=>{var d;Ks({title:"Time-based Approvals Processed",description:`Processed ${u.processed} requests`,variant:((d=u.errors)==null?void 0:d.length)>0?"destructive":"default"}),r()},onError:u=>{Ks({title:"Error Processing Approvals",description:u.message,variant:"destructive"})}}),a=u=>{const d=new Date(u),f=new Date,h=d.getTime()-f.getTime(),m=Math.floor(h/(1e3*60*60)),g=Math.floor(h%(1e3*60*60)/(1e3*60));return h<0?`${Math.abs(m)}h ${Math.abs(g)}m ago (Ready for processing)`:`In ${m}h ${g}m`};return s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Time-Based Auto-Approval Test"}),s.jsx("p",{className:"text-gray-500 mt-2",children:"Monitor and process time-based auto-approval requests"})]}),s.jsxs(se,{onClick:()=>n.mutate(),disabled:n.isPending,className:"flex items-center gap-2",children:[s.jsx(qn,{className:"h-4 w-4"}),n.isPending?"Processing...":"Process Due Approvals"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs(Ce,{children:[s.jsxs(Tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Et,{className:"text-sm font-medium",children:"Pending Time-Based Approvals"}),s.jsx(An,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Ie,{children:[s.jsx("div",{className:"text-2xl font-bold",children:((i=e==null?void 0:e.pendingApprovals)==null?void 0:i.length)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Requests with scheduled auto-approval"})]})]}),s.jsxs(Ce,{children:[s.jsxs(Tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Et,{className:"text-sm font-medium",children:"Ready for Processing"}),s.jsx(cf,{className:"h-4 w-4 text-orange-500"})]}),s.jsxs(Ie,{children:[s.jsx("div",{className:"text-2xl font-bold text-orange-500",children:((o=e==null?void 0:e.pendingApprovals)==null?void 0:o.filter(u=>new Date(u.scheduledAt)<=new Date).length)||0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Approvals past scheduled time"})]})]}),s.jsxs(Ce,{children:[s.jsxs(Tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Et,{className:"text-sm font-medium",children:"Auto-Refresh"}),s.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"})]}),s.jsxs(Ie,{children:[s.jsx("div",{className:"text-sm",children:"Every 30 seconds"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Page refreshes automatically"})]})]})]}),s.jsxs(Ce,{children:[s.jsx(Tt,{children:s.jsx(Et,{children:"Pending Time-Based Approvals"})}),s.jsx(Ie,{children:t?s.jsx("div",{className:"text-center py-8",children:"Loading..."}):((l=e==null?void 0:e.pendingApprovals)==null?void 0:l.length)===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No pending time-based approvals found"}):s.jsx("div",{className:"space-y-4",children:(c=e==null?void 0:e.pendingApprovals)==null?void 0:c.map(u=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"font-medium",children:["Leave Request #",u.id]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["User ID: ",u.userId," | Leave Type: ",u.leaveTypeId]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Current Step: ",u.currentStep," | Workflow: ",u.workflowId]})]}),s.jsxs("div",{className:"text-right space-y-1",children:[s.jsx(Lt,{variant:new Date(u.scheduledAt)<=new Date?"destructive":"secondary",children:new Date(u.scheduledAt)<=new Date?"Ready":"Scheduled"}),s.jsx("div",{className:"text-xs text-gray-500",children:a(u.scheduledAt)}),s.jsx("div",{className:"text-xs text-gray-400",children:new Date(u.scheduledAt).toLocaleString()})]})]},u.id))})})]})]})}function Wb({children:e,permission:t,fallback:r="/"}){const{canViewScreen:n,loading:a}=n0();return a?s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):n(t)?s.jsx(s.Fragment,{children:e}):s.jsx(HH,{to:r})}function $Me(){const{isAuthenticated:e,isLoading:t}=r0();return _3(),N.useEffect(()=>{dY(),localStorage.getItem("leave_year")||(localStorage.setItem("leave_year","January-2025-December 2025"),console.log("[App] Set default leave_year: January-2025-December 2025"));const r=window.location.pathname;if(r.startsWith("/id/")){const n=r.substring(4);console.log("=== PROCESSING JWT TOKEN ==="),console.log("Found token in URL:",n);try{const a=n.split(".");if(a.length===3){const i=a[1],o=i+"=".repeat((4-i.length%4)%4),l=atob(o),c=JSON.parse(l);console.log("Decoded JWT payload:",c);const d=localStorage.getItem("user_id")||c.user_id;localStorage.setItem("org_id",c.org_id),localStorage.setItem("user_id",d),localStorage.setItem("role_id",c.role_id),localStorage.setItem("role_name",c.role_name),localStorage.setItem("user_type_id",c.user_type_id),localStorage.setItem("jwt_token",n),console.log("JWT processing - preserved user_id:",d,"from JWT:",c.user_id),console.log("JWT data stored, redirecting to home..."),window.location.href="/";return}}catch(a){console.error("Failed to process JWT token:",a)}}console.log("=== LOCALSTORAGE DEBUG ==="),console.log("Keys in localStorage:",Object.keys(localStorage)),console.log("org_id:",localStorage.getItem("org_id")),console.log("leave_year:",localStorage.getItem("leave_year")),console.log("user_id:",localStorage.getItem("user_id")),console.log("jwt_token:",localStorage.getItem("jwt_token")?"exists":"missing"),console.log("role_name:",localStorage.getItem("role_name")),console.log("========================"),console.log("======================")},[]),t?s.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):s.jsxs(VH,{children:[s.jsx(mr,{path:"/test",children:()=>s.jsx("div",{children:"Test route works!"})}),s.jsx(mr,{path:"/id/:token",component:FMe}),(window.location.pathname.startsWith("/id/"),null),e?s.jsxs(s.Fragment,{children:[s.jsx(mr,{path:"/",component:OIe}),s.jsx(mr,{path:"/employee-overview",component:()=>s.jsx(Wb,{permission:"employeeOverview",children:s.jsx(Sr,{children:s.jsx(mU,{})})})}),s.jsx(mr,{path:"/import-leave-data",component:PIe}),s.jsx(mr,{path:"/leave-applications",component:sI}),s.jsx(mr,{path:"/applications",component:sI}),s.jsx(mr,{path:"/holidays",component:$Ie}),s.jsx(mr,{path:"/compensatory-off",component:HIe}),s.jsx(mr,{path:"/pto",component:YIe}),s.jsx(mr,{path:"/task-manager",component:XIe}),s.jsx(mr,{path:"/overview",component:iMe}),s.jsx(mr,{path:"/approvals",component:oMe}),s.jsx(mr,{path:"/employees",component:uMe}),s.jsx(mr,{path:"/workflows",component:fMe}),s.jsx(mr,{path:"/roles",component:mMe}),s.jsx(mr,{path:"/admin/leave-types",component:xMe}),s.jsx(mr,{path:"/admin/comp-off",component:pMe}),s.jsx(mr,{path:"/admin/pto",component:gMe}),s.jsx(mr,{path:"/admin/blackout-periods",component:()=>s.jsx(Wb,{permission:"adminSettings",children:s.jsx(MMe,{})})}),s.jsx(mr,{path:"/admin/feature-settings",component:()=>s.jsx(Wb,{permission:"adminSettings",children:s.jsx(Sr,{children:s.jsx(SMe,{})})})}),s.jsx(mr,{path:"/admin/reports/:reportType?",component:oI}),s.jsx(mr,{path:"/admin-reports/:reportType?",component:oI}),s.jsx(mr,{path:"/hr-leave-balance-report",component:NMe}),s.jsx(mr,{path:"/reports/:reportType?",component:jMe}),s.jsx(mr,{path:"/leave-types/:leaveTypeName",component:vMe}),s.jsx(mr,{path:"/loader-demo",component:RMe}),s.jsx(mr,{path:"/time-based-approval-test",component:LMe})]}):s.jsx(mr,{path:"/",component:gY}),s.jsx(mr,{component:pY})]})}function BMe(){return s.jsx(dz,{client:Ye,children:s.jsxs(iY,{children:[s.jsx(jG,{}),s.jsx($Me,{})]})})}DR(document.getElementById("root")).render(s.jsx(BMe,{}));
